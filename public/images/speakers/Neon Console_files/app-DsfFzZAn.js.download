const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-Bnv4ZG4x.js","assets/_baseAssignValue-ydowZRso.js","assets/_sentry-release-injection-file-D-6gj4g5.js","assets/DrizzleStudio-DdmL_Lf-.js","assets/QueryResultTable-Ca8W7kif.js","assets/index-DI4PBfME.js","assets/types-3I6JK6RV.js","assets/index-_o_1nvEe.css","assets/useOnChangeEffect-mol3ItJs.js","assets/PageHeader-DAEQzDqY.js","assets/PageHeader-DRy_YF4U.css","assets/routes-DzR_T4MG.js","assets/routes-DWxUyW99.css","assets/QueryResultTable-B-XjDP4B.css","assets/app-CcMy9KHr.js","assets/index-DA_jsKgF.js","assets/StatusButton-D_5QLvYs.js","assets/ReactQueryProvider-CHTi-C-q.js","assets/_overRest-DG4tOkBP.js","assets/isArrayLikeObject-C_lTNflx.js","assets/StatusButton-DwLBP0k7.css","assets/CreateProjectFormFields-o7MsPEJ4.js","assets/CreateProjectFormFields-WpzMG55S.css","assets/metrics-CFE4a0Yj.js","assets/memoize-RktwEiA_.js","assets/metrics-D5NlmHlB.css","assets/identity-urls-B7opBLV6.js","assets/identity-events-CoHMGN_-.js","assets/cjs-C0R8PO8w.js","assets/DrizzleStudio-Dkn9h_Qr.css","assets/theme-Bs8aLF7L.css","assets/load-bundle-CZe1gSU_.js","assets/index-DCachKiE.js","assets/Section-Mhv_q_49.js","assets/Section-D22ZRM2-.css","assets/index-B4_vQ_Y-.css"])))=>i.map(i=>d[i]);
var NO=Object.defineProperty;var AO=(e,s,n)=>s in e?NO(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n;var Aj=(e,s,n)=>AO(e,typeof s!="symbol"?s+"":s,n);import{i as Yc,b as b1,a as EO,c as x1,d as OO,e as v1,f as LO,g as $O,h as j1,t as y1,r as RO,U as Ej,j as w1,k as S1,l as C1,m as I1,n as em,o as W_,p as BO,S as MO,q as DO,s as UO,u as FO,v as zO,_ as de,w as an,x as Jc,y as or,$ as qO,z as rx,A as HO,B as VO,C as WO,D as GO,E as ax,F as KO,G as QO,H as YO,I as D,J as q,K as Ne,T as P,L as $u,M as ne,N as Ke,O as k1,P as T1,Q as JO,R as Om,V as P1,W as N1,X as ox,Y as ZO,Z as XO,a0 as A1,a1 as e2,a2 as E1,a3 as bi,a4 as qc,a5 as J,a6 as on,a7 as t2,a8 as s2,a9 as n2,aa as Dn,ab as Ru,ac as G_,ad as K_,ae as _e,af as r2,ag as a2,ah as _t,ai as kt,aj as ce,ak as mr,al as ke,am as k,an as M,ao as ix,ap as sn,aq as Ae,ar as cx,as as xi,at as Xt,au as A,av as Ie,aw as qs,ax as cn,ay as W,az as Bu,aA as o2,aB as It,aC as i2,aD as fe,aE as dt,aF as O1,aG as ml,aH as c2,aI as Ts,aJ as lx,aK as B,aL as dx,aM as eo,aN as Ee,aO as ln,aP as ze,aQ as tt,aR as l2,aS as L1,aT as X,aU as $n,aV as F,aW as to,aX as ux,aY as oa,aZ as ia,a_ as Ma,a$ as dn,b0 as d2,b1 as $1,b2 as ae,b3 as qt,b4 as it,b5 as st,b6 as u2,b7 as Ct,b8 as Y,b9 as Ms,ba as Q_,bb as Qa,bc as tm,bd as Mu,be as Lm,bf as es,bg as Ht,bh as so,bi as ki,bj as gs,bk as qe,bl as ye,bm as lt,bn as $m,bo as pe,bp as R1,bq as bt,br as ts,bs as h2,bt as p2,bu as nn,bv as gt,bw as B1,bx as hx,by as m2,bz as os,bA as g2,bB as M1,bC as ri,bD as f2,bE as D1,bF as U1,bG as Us,bH as F1,bI as _2,bJ as z1,bK as b2,bL as q1,bM as Y_,bN as x2,bO as v2,bP as Oj,bQ as j2,bR as ta,bS as y2,bT as bu,bU as Ds,bV as ot,bW as mt,bX as Zc,bY as w2,bZ as S2,b_ as le,b$ as Ag,c0 as Lj,c1 as Eg,c2 as qr,c3 as H1,c4 as C2,c5 as I2,c6 as V1,c7 as k2,c8 as T2,c9 as C,ca as Yd,cb as nt,cc as W1,cd as gl,ce as P2,cf as N2,cg as A2,ch as G1,ci as px,cj as Jt,ck as fl,cl as Du,cm as ca,cn as sa,co as E2,cp as O2,cq as L2,cr as $2,cs as Un,ct as K1,cu as G,cv as Va,cw as R2,cx as B2,cy as fr,cz as sm,cA as Pe,cB as Uu,cC as Q1,cD as no,cE as M2,cF as mx,cG as Se,cH as ur,cI as ro,cJ as Y1,cK as D2,cL as U2,cM as ue,cN as fs,cO as Ya,cP as F2,cQ as Ti,cR as z2,cS as ao,cT as q2,cU as gx,cV as xe,cW as _l,cX as fx,cY as J_,cZ as xu,c_ as _x,c$ as H2,d0 as V2,d1 as bx,d2 as W2,d3 as G2,d4 as K2,d5 as Q2,d6 as J1,d7 as Y2,d8 as J2,d9 as ks,da as xx,db as Z1,dc as vx,dd as Z2,de as jx,df as X1,dg as eC,dh as tC,di as sC,dj as bl,dk as X2,dl as xl,dm as Rm,dn as Et,dp as eL,dq as tL,dr as nC,ds as ui,dt as Fu,du as gr,dv as sL,dw as rC,dx as aC,dy as Zr,dz as nL,dA as Xr,dB as oC,dC as hr,dD as zu,dE as $j,dF as Rj,dG as Hs,dH as rL,dI as _r,dJ as iC,dK as cC,dL as lC,dM as aL,dN as Bm,dO as xt,dP as Pi,dQ as Bj,dR as oL,dS as iL,dT as Ni,dU as cL,dV as lL,dW as dL,dX as uL,dY as hL,dZ as Tt,d_ as pL,d$ as is,e0 as Bn,e1 as dC,e2 as na,e3 as Pc,e4 as uC,e5 as hC,e6 as yt,e7 as we,e8 as yx,e9 as mL,ea as vl,eb as wx,ec as Mj,ed as gL,ee as pC,ef as Ye,eg as ve,eh as jl,ei as hi,ej as Jd,ek as uh,el as Mm,em as Dm,en as fL,eo as _L,ep as Sx,eq as Wa,er as bL,es as qu,et as Dj,eu as ra,ev as xL,ew as yl,ex as Hu,ey as Cx,ez as Ix,eA as un,eB as Vu,eC as nm,eD as vL,eE as xr,eF as jL,eG as Ze,eH as Me,eI as vr,eJ as yL,eK as vu,eL as wL,eM as Dp,eN as mC,eO as SL,eP as gC,eQ as CL,eR as rm,eS as fC,eT as IL,eU as ju,eV as hh,eW as Fn,eX as kx,eY as Wu,eZ as kL,e_ as TL,e$ as PL,f0 as NL,f1 as AL,f2 as _C,f3 as EL,f4 as OL,f5 as LL,f6 as $L,f7 as RL,f8 as BL,f9 as ML,fa as DL,fb as bC,fc as UL,fd as FL,fe as xC,ff as zL,fg as Xc,fh as vC,fi as Da,fj as jC,fk as Uj,fl as yu,fm as yC,fn as am,fo as qL,fp as wC,fq as wl,fr as SC,fs as Um,ft as HL,fu as Tx,fv as CC,fw as IC,fx as kC,fy as VL,fz as WL,fA as GL,fB as KL,fC as QL,fD as YL,fE as TC,fF as JL,fG as PC,fH as NC,fI as AC,fJ as EC,fK as ZL,fL as Ai,fM as OC,fN as XL,fO as LC,fP as $C,fQ as e$,fR as Z_,fS as t$,fT as s$,fU as RC,fV as n$,fW as Px,fX as BC,fY as MC,fZ as r$,f_ as a$,f$ as o$,g0 as Nx,g1 as i$,g2 as c$,g3 as l$,g4 as DC,g5 as d$,g6 as u$,g7 as UC,g8 as Fm,g9 as FC,ga as h$,gb as p$,gc as m$,gd as g$,ge as f$,gf as _$,gg as b$,gh as x$,gi as zC,gj as v$,gk as qC,gl as j$,gm as y$,gn as w$,go as S$,gp as Fj,gq as gn,gr as HC,gs as C$,gt as zj,gu as I$,gv as k$,gw as T$,gx as P$,gy as N$,gz as qj,gA as A$,gB as E$,gC as O$,gD as L$,gE as $$,gF as R$,gG as B$,gH as M$,gI as D$,gJ as U$,gK as F$,gL as z$,gM as q$,gN as H$,gO as V$,gP as W$}from"./index-DI4PBfME.js";import{r as m,R as La,j as t,c as V,a as zm,g as G$,b as K$,d as VC}from"./_baseAssignValue-ydowZRso.js";import"./_sentry-release-injection-file-D-6gj4g5.js";/* empty css              */import{u as Sl,a as oo,b as Q$,P as Y$,A as J$}from"./app-CcMy9KHr.js";import{t as WC,p as Z$,l as GC,u as KC,a as X$,T as Je}from"./index-DA_jsKgF.js";import{C as qm,u as eR,a as tR,b as sR,c as nR,D as Ax,d as Hm,T as _s,e as Mn,f as Vm,g as Ex,h as Ox,i as Lx,j as rR,k as aR,A as oR,F as wu,H as vi,l as jr,m as Zt,n as la,o as da,p as Gu,P as iR,q as Ps,r as QC,s as Og,t as cR,S as lR,L as dR,v as Lg,w as qi,x as X_,y as $g,z as $x,B as uR,E as YC,G as hR,I as JC,X as Rx,O as ZC,J as De,K as $e,M as pR,N as mR,R as Qe,Q as gR,U as fR,V as _R,W as Ei,Y as bR,Z as Zd,_ as Ku,$ as XC,a0 as zl,a1 as eI,a2 as eb,a3 as tI,a4 as xR,a5 as sI,a6 as vR,a7 as Nc,a8 as Ac,a9 as nI,aa as rI,ab as jR,ac as aI,ad as yR,ae as Bx,af as oI,ag as wR,ah as SR,ai as CR,aj as iI,ak as IR,al as Mx,am as kR,an as Dx,ao as rt,ap as zn,aq as Hj,ar as TR,as as PR,at as Rg,au as NR}from"./QueryResultTable-Ca8W7kif.js";import{d as Ux,U as Pt,B as AR,g as ER,a as OR,b as LR,u as $R,c as RR,M as BR,L as Fx,e as Wm,S as MR,f as DR,h as cI,i as Gm,j as yr,A as UR,C as FR,k as zR,l as qR,m as HR,D as VR,n as WR,E as GR,F as KR,o as QR,G as YR,p as tb,q as JR,H as ZR,r as XR,s as eB,K as tB,t as sB,N as nB,v as rB,w as aB,O as oB,x as sb,P as iB,R as cB,y as lB,z as dB,I as uB,J as hB,Q as pB,T as mB,V as gB,W as lI,X as fB,Y as io,Z as ea,_ as pi,$ as _B,a0 as Ua,a1 as Ja,a2 as Vj,a3 as Km,a4 as Qm,a5 as Wn,a6 as dI,a7 as uI,a8 as bB,a9 as ql,aa as Kt,ab as hI,ac as pI,ad as mI,ae as xB,af as Ym,ag as co,ah as vB,ai as gI,aj as jB,ak as fI,al as _I,am as yB,an as wB,ao as bI,ap as SB,aq as CB,ar as IB}from"./StatusButton-D_5QLvYs.js";import{b as kB,c as TB,t as Fa,u as PB}from"./useOnChangeEffect-mol3ItJs.js";import{b as NB,i as AB}from"./isArrayLikeObject-C_lTNflx.js";import{u as EB,C as OB,a as xI,b as LB,s as $B,d as RB,c as BB}from"./CreateProjectFormFields-o7MsPEJ4.js";import{r as nb,u as wr,s as qn,p as Sr,C as hn,T as Cr,Y as Ir,A as Is,L as pt,a as Jm,M as om,b as Cl,g as vI,c as MB}from"./metrics-CFE4a0Yj.js";import{B as DB,D as UB,E as FB,I as zB,N as qB,O as HB,P as VB,Z as Bg,a as WB,b as GB,c as KB,d as QB,e as YB,f as JB,g as ZB,h as XB,i as eM,j as Wj,k as tM,l as rb,m as sM,n as nM,o as rM,p as Rc,q as aM,r as oM,s as iM,t as cM,u as lM,v as dM,w as uM,x as hM,y as pM,z as mM,A as gM,C as fM,F as _M,G as bM,H as xM,J as vM,K as jM,L as yM,M as wM,Q as SM,R as CM,S as IM,T as kM,U as TM,V as PM,W as NM,X as mi,Y as AM,_ as el,$ as zx,a0 as jI,a1 as Ga,a2 as EM,a3 as OM,a4 as LM,a5 as Gj,a6 as yI,a7 as $M,a8 as RM,a9 as BM,aa as MM,ab as DM,ac as UM,ad as FM,ae as zM,af as qM,ag as HM,ah as VM,ai as Fd,aj as WM,ak as GM,al as KM,am as QM,an as YM,ao as JM,ap as ZM,aq as en,ar as zt,as as XM,at as eD,au as tD,av as sD,aw as nD,ax as rD,ay as aD,az as oD,aA as iD,aB as cD,aC as lD,aD as dD,aE as Up,aF as at,aG as uD,aH as hD,aI as wI,aJ as SI,aK as Fp,aL as pD,aM as mD}from"./types-3I6JK6RV.js";import{P as Il,i as CI}from"./PageHeader-DAEQzDqY.js";import{S as Mg,u as II,G as gD,m as fD}from"./routes-DzR_T4MG.js";import{o as kI,I as _D}from"./identity-urls-B7opBLV6.js";import{g as bD,i as xD,c as vD,a as kl}from"./identity-events-CoHMGN_-.js";import{r as TI}from"./cjs-C0R8PO8w.js";import{R as jD}from"./ReactQueryProvider-CHTi-C-q.js";import"./_overRest-DG4tOkBP.js";import"./memoize-RktwEiA_.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},s=new e.Error().stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="781f6174-e8bd-4244-a4a6-32c3142592b2",e._sentryDebugIdIdentifier="sentry-dbid-781f6174-e8bd-4244-a4a6-32c3142592b2")}catch{}})();{var zi=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};zi._sentryModuleMetadata=zi._sentryModuleMetadata||{},zi._sentryModuleMetadata[new zi.Error().stack]=Object.assign({},zi._sentryModuleMetadata[new zi.Error().stack],{"_sentryBundlerPluginAppKey:neon-console":!0})}var Kj=Object.create,yD=function(){function e(){}return function(s){if(!Yc(s))return{};if(Kj)return Kj(s);e.prototype=s;var n=new e;return e.prototype=void 0,n}}();function wD(e,s){var n=-1,r=e.length;for(s||(s=Array(r));++n<r;)s[n]=e[n];return s}function SD(e,s,n,r){var a=!n;n||(n={});for(var o=-1,i=s.length;++o<i;){var c=s[o],l=void 0;l===void 0&&(l=e[c]),a?b1(n,c,l):EO(n,c,l)}return n}function CD(e,s,n){if(!Yc(n))return!1;var r=typeof s;return(r=="number"?x1(n)&&OO(s,n.length):r=="string"&&s in n)?v1(n[s],e):!1}function ID(e){return NB(function(s,n){var r=-1,a=n.length,o=a>1?n[a-1]:void 0,i=a>2?n[2]:void 0;for(o=e.length>3&&typeof o=="function"?(a--,o):void 0,i&&CD(n[0],n[1],i)&&(o=a<3?void 0:o,a=1),s=Object(s);++r<a;){var c=n[r];c&&e(s,c,r,o)}return s})}var kD="[object Object]",TD=Function.prototype,PD=Object.prototype,PI=TD.toString,ND=PD.hasOwnProperty,AD=PI.call(Object);function ED(e){if(!LO(e)||$O(e)!=kD)return!1;var s=j1(e);if(s===null)return!0;var n=ND.call(s,"constructor")&&s.constructor;return typeof n=="function"&&n instanceof n&&PI.call(n)==AD}function OD(e,s,n,r){for(var a=-1,o=e==null?0:e.length;++a<o;)n=s(n,e[a],a,e);return n}function LD(e){return function(s){return e==null?void 0:e[s]}}var $D={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},RD=LD($D),BD=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,MD="\\u0300-\\u036f",DD="\\ufe20-\\ufe2f",UD="\\u20d0-\\u20ff",FD=MD+DD+UD,zD="["+FD+"]",qD=RegExp(zD,"g");function HD(e){return e=y1(e),e&&e.replace(BD,RD).replace(qD,"")}var VD=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function WD(e){return e.match(VD)||[]}var GD=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function KD(e){return GD.test(e)}var NI="\\ud800-\\udfff",QD="\\u0300-\\u036f",YD="\\ufe20-\\ufe2f",JD="\\u20d0-\\u20ff",ZD=QD+YD+JD,AI="\\u2700-\\u27bf",EI="a-z\\xdf-\\xf6\\xf8-\\xff",XD="\\xac\\xb1\\xd7\\xf7",eU="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",tU="\\u2000-\\u206f",sU=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",OI="A-Z\\xc0-\\xd6\\xd8-\\xde",nU="\\ufe0e\\ufe0f",LI=XD+eU+tU+sU,$I="['’]",Qj="["+LI+"]",rU="["+ZD+"]",RI="\\d+",aU="["+AI+"]",BI="["+EI+"]",MI="[^"+NI+LI+RI+AI+EI+OI+"]",oU="\\ud83c[\\udffb-\\udfff]",iU="(?:"+rU+"|"+oU+")",cU="[^"+NI+"]",DI="(?:\\ud83c[\\udde6-\\uddff]){2}",UI="[\\ud800-\\udbff][\\udc00-\\udfff]",Ec="["+OI+"]",lU="\\u200d",Yj="(?:"+BI+"|"+MI+")",dU="(?:"+Ec+"|"+MI+")",Jj="(?:"+$I+"(?:d|ll|m|re|s|t|ve))?",Zj="(?:"+$I+"(?:D|LL|M|RE|S|T|VE))?",FI=iU+"?",zI="["+nU+"]?",uU="(?:"+lU+"(?:"+[cU,DI,UI].join("|")+")"+zI+FI+")*",hU="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",pU="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",mU=zI+FI+uU,gU="(?:"+[aU,DI,UI].join("|")+")"+mU,fU=RegExp([Ec+"?"+BI+"+"+Jj+"(?="+[Qj,Ec,"$"].join("|")+")",dU+"+"+Zj+"(?="+[Qj,Ec+Yj,"$"].join("|")+")",Ec+"?"+Yj+"+"+Jj,Ec+"+"+Zj,pU,hU,RI,gU].join("|"),"g");function _U(e){return e.match(fU)||[]}function bU(e,s,n){return e=y1(e),s=s,s===void 0?KD(e)?_U(e):WD(e):e.match(s)||[]}var xU="['’]",vU=RegExp(xU,"g");function jU(e){return function(s){return OD(bU(HD(s).replace(vU,"")),e,"")}}var qI=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Xj=qI&&typeof module=="object"&&module&&!module.nodeType&&module,yU=Xj&&Xj.exports===qI,ey=yU?RO.Buffer:void 0;ey&&ey.allocUnsafe;function wU(e,s){return e.slice()}function SU(e){var s=new e.constructor(e.byteLength);return new Ej(s).set(new Ej(e)),s}function CU(e,s){var n=SU(e.buffer);return new e.constructor(n,e.byteOffset,e.length)}function IU(e){return typeof e.constructor=="function"&&!w1(e)?yD(j1(e)):{}}function ab(e,s,n){(n!==void 0&&!v1(e[s],n)||n===void 0&&!(s in e))&&b1(e,s,n)}function ob(e,s){if(!(s==="constructor"&&typeof e[s]=="function")&&s!="__proto__")return e[s]}function kU(e){return SD(e,S1(e))}function TU(e,s,n,r,a,o,i){var c=ob(e,n),l=ob(s,n),d=i.get(l);if(d){ab(e,n,d);return}var u=o?o(c,l,n+"",e,s,i):void 0,p=u===void 0;if(p){var h=em(l),g=!h&&C1(l),f=!h&&!g&&I1(l);u=l,h||g||f?em(c)?u=c:AB(c)?u=wD(c):g?(p=!1,u=wU(l)):f?(p=!1,u=CU(l)):u=[]:ED(l)||W_(l)?(u=c,W_(c)?u=kU(c):(!Yc(c)||BO(c))&&(u=IU(l))):p=!1}p&&(i.set(l,u),a(u,l,r,o,i),i.delete(l)),ab(e,n,u)}function HI(e,s,n,r,a){e!==s&&kB(s,function(o,i){if(a||(a=new MO),Yc(o))TU(e,s,i,n,HI,r,a);else{var c=r?r(ob(e,i),o,i+"",e,s,a):void 0;c===void 0&&(c=o),ab(e,i,c)}},S1)}var PU=ID(function(e,s,n,r){HI(e,s,n,r)});function NU(e){return e&&e.length?e[0]:void 0}var AU="[object Map]",EU="[object Set]",OU=Object.prototype,LU=OU.hasOwnProperty;function $U(e){if(e==null)return!0;if(x1(e)&&(em(e)||typeof e=="string"||typeof e.splice=="function"||C1(e)||I1(e)||W_(e)))return!e.length;var s=DO(e);if(s==AU||s==EU)return!e.size;if(w1(e))return!UO(e).length;for(var n in e)if(LU.call(e,n))return!1;return!0}function RU(e,s){for(var n,r=-1,a=e.length;++r<a;){var o=s(e[r]);o!==void 0&&(n=n===void 0?o:n+o)}return n}var BU=TB(function(e,s,n){e[n?0:1].push(s)},function(){return[[],[]]}),VI=jU(function(e,s,n){return e+(n?" ":"")+FO(s)});function MU(e,s){return e&&e.length?RU(e,zO(s)):0}var WI={};WI={breadcrumbs:"عناصر الواجهة"};var GI={};GI={breadcrumbs:"Трохи хляб"};var KI={};KI={breadcrumbs:"Popis cesty"};var QI={};QI={breadcrumbs:"Brødkrummer"};var YI={};YI={breadcrumbs:"Breadcrumbs"};var JI={};JI={breadcrumbs:"Πλοηγήσεις breadcrumb"};var ZI={};ZI={breadcrumbs:"Breadcrumbs"};var XI={};XI={breadcrumbs:"Migas de pan"};var ek={};ek={breadcrumbs:"Lingiread"};var tk={};tk={breadcrumbs:"Navigointilinkit"};var sk={};sk={breadcrumbs:"Chemin de navigation"};var nk={};nk={breadcrumbs:"שבילי ניווט"};var rk={};rk={breadcrumbs:"Navigacijski putovi"};var ak={};ak={breadcrumbs:"Morzsamenü"};var ok={};ok={breadcrumbs:"Breadcrumb"};var ik={};ik={breadcrumbs:"パンくずリスト"};var ck={};ck={breadcrumbs:"탐색 표시"};var lk={};lk={breadcrumbs:"Naršymo kelias"};var dk={};dk={breadcrumbs:"Atpakaļceļi"};var uk={};uk={breadcrumbs:"Navigasjonsstier"};var hk={};hk={breadcrumbs:"Broodkruimels"};var pk={};pk={breadcrumbs:"Struktura nawigacyjna"};var mk={};mk={breadcrumbs:"Caminho detalhado"};var gk={};gk={breadcrumbs:"Categorias"};var fk={};fk={breadcrumbs:"Miez de pâine"};var _k={};_k={breadcrumbs:"Навигация"};var bk={};bk={breadcrumbs:"Navigačné prvky Breadcrumbs"};var xk={};xk={breadcrumbs:"Drobtine"};var vk={};vk={breadcrumbs:"Putanje navigacije"};var jk={};jk={breadcrumbs:"Sökvägar"};var yk={};yk={breadcrumbs:"İçerik haritaları"};var wk={};wk={breadcrumbs:"Навігаційна стежка"};var Sk={};Sk={breadcrumbs:"导航栏"};var Ck={};Ck={breadcrumbs:"導覽列"};var Ik={};Ik={"ar-AE":WI,"bg-BG":GI,"cs-CZ":KI,"da-DK":QI,"de-DE":YI,"el-GR":JI,"en-US":ZI,"es-ES":XI,"et-EE":ek,"fi-FI":tk,"fr-FR":sk,"he-IL":nk,"hr-HR":rk,"hu-HU":ak,"it-IT":ok,"ja-JP":ik,"ko-KR":ck,"lt-LT":lk,"lv-LV":dk,"nb-NO":uk,"nl-NL":hk,"pl-PL":pk,"pt-BR":mk,"pt-PT":gk,"ro-RO":fk,"ru-RU":_k,"sk-SK":bk,"sl-SI":xk,"sr-SP":vk,"sv-SE":jk,"tr-TR":yk,"uk-UA":wk,"zh-CN":Sk,"zh-TW":Ck};function nr(e,s){var n=s&&s.cache?s.cache:VU,r=s&&s.serializer?s.serializer:qU,a=s&&s.strategy?s.strategy:FU;return a(e,{cache:n,serializer:r})}function DU(e){return e==null||typeof e=="number"||typeof e=="boolean"}function UU(e,s,n,r){var a=DU(r)?r:n(r),o=s.get(a);return typeof o>"u"&&(o=e.call(this,r),s.set(a,o)),o}function kk(e,s,n){var r=Array.prototype.slice.call(arguments,3),a=n(r),o=s.get(a);return typeof o>"u"&&(o=e.apply(this,r),s.set(a,o)),o}function Tk(e,s,n,r,a){return n.bind(s,e,r,a)}function FU(e,s){var n=e.length===1?UU:kk;return Tk(e,this,n,s.cache.create(),s.serializer)}function zU(e,s){return Tk(e,this,kk,s.cache.create(),s.serializer)}var qU=function(){return JSON.stringify(arguments)},HU=function(){function e(){this.cache=Object.create(null)}return e.prototype.get=function(s){return this.cache[s]},e.prototype.set=function(s,n){this.cache[s]=n},e}(),VU={create:function(){return new HU}},rr={variadic:zU},Ue;(function(e){e[e.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",e[e.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",e[e.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",e[e.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",e[e.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",e[e.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",e[e.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",e[e.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",e[e.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",e[e.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",e[e.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",e[e.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",e[e.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",e[e.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",e[e.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",e[e.INVALID_TAG=23]="INVALID_TAG",e[e.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",e[e.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",e[e.UNCLOSED_TAG=27]="UNCLOSED_TAG"})(Ue||(Ue={}));var ht;(function(e){e[e.literal=0]="literal",e[e.argument=1]="argument",e[e.number=2]="number",e[e.date=3]="date",e[e.time=4]="time",e[e.select=5]="select",e[e.plural=6]="plural",e[e.pound=7]="pound",e[e.tag=8]="tag"})(ht||(ht={}));var tl;(function(e){e[e.number=0]="number",e[e.dateTime=1]="dateTime"})(tl||(tl={}));function ty(e){return e.type===ht.literal}function WU(e){return e.type===ht.argument}function Pk(e){return e.type===ht.number}function Nk(e){return e.type===ht.date}function Ak(e){return e.type===ht.time}function Ek(e){return e.type===ht.select}function Ok(e){return e.type===ht.plural}function GU(e){return e.type===ht.pound}function Lk(e){return e.type===ht.tag}function $k(e){return!!(e&&typeof e=="object"&&e.type===tl.number)}function ib(e){return!!(e&&typeof e=="object"&&e.type===tl.dateTime)}var Rk=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,KU=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function QU(e){var s={};return e.replace(KU,function(n){var r=n.length;switch(n[0]){case"G":s.era=r===4?"long":r===5?"narrow":"short";break;case"y":s.year=r===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":s.month=["numeric","2-digit","short","long","narrow"][r-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":s.day=["numeric","2-digit"][r-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":s.weekday=r===4?"long":r===5?"narrow":"short";break;case"e":if(r<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");s.weekday=["short","long","narrow","short"][r-4];break;case"c":if(r<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");s.weekday=["short","long","narrow","short"][r-4];break;case"a":s.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":s.hourCycle="h12",s.hour=["numeric","2-digit"][r-1];break;case"H":s.hourCycle="h23",s.hour=["numeric","2-digit"][r-1];break;case"K":s.hourCycle="h11",s.hour=["numeric","2-digit"][r-1];break;case"k":s.hourCycle="h24",s.hour=["numeric","2-digit"][r-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":s.minute=["numeric","2-digit"][r-1];break;case"s":s.second=["numeric","2-digit"][r-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":s.timeZoneName=r<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),s}var YU=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function JU(e){if(e.length===0)throw new Error("Number skeleton cannot be empty");for(var s=e.split(YU).filter(function(h){return h.length>0}),n=[],r=0,a=s;r<a.length;r++){var o=a[r],i=o.split("/");if(i.length===0)throw new Error("Invalid number skeleton");for(var c=i[0],l=i.slice(1),d=0,u=l;d<u.length;d++){var p=u[d];if(p.length===0)throw new Error("Invalid number skeleton")}n.push({stem:c,options:l})}return n}function ZU(e){return e.replace(/^(.*?)-/,"")}var sy=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,Bk=/^(@+)?(\+|#+)?[rs]?$/g,XU=/(\*)(0+)|(#+)(0+)|(0+)/g,Mk=/^(0+)$/;function ny(e){var s={};return e[e.length-1]==="r"?s.roundingPriority="morePrecision":e[e.length-1]==="s"&&(s.roundingPriority="lessPrecision"),e.replace(Bk,function(n,r,a){return typeof a!="string"?(s.minimumSignificantDigits=r.length,s.maximumSignificantDigits=r.length):a==="+"?s.minimumSignificantDigits=r.length:r[0]==="#"?s.maximumSignificantDigits=r.length:(s.minimumSignificantDigits=r.length,s.maximumSignificantDigits=r.length+(typeof a=="string"?a.length:0)),""}),s}function Dk(e){switch(e){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function e4(e){var s;if(e[0]==="E"&&e[1]==="E"?(s={notation:"engineering"},e=e.slice(2)):e[0]==="E"&&(s={notation:"scientific"},e=e.slice(1)),s){var n=e.slice(0,2);if(n==="+!"?(s.signDisplay="always",e=e.slice(2)):n==="+?"&&(s.signDisplay="exceptZero",e=e.slice(2)),!Mk.test(e))throw new Error("Malformed concise eng/scientific notation");s.minimumIntegerDigits=e.length}return s}function ry(e){var s={},n=Dk(e);return n||s}function t4(e){for(var s={},n=0,r=e;n<r.length;n++){var a=r[n];switch(a.stem){case"percent":case"%":s.style="percent";continue;case"%x100":s.style="percent",s.scale=100;continue;case"currency":s.style="currency",s.currency=a.options[0];continue;case"group-off":case",_":s.useGrouping=!1;continue;case"precision-integer":case".":s.maximumFractionDigits=0;continue;case"measure-unit":case"unit":s.style="unit",s.unit=ZU(a.options[0]);continue;case"compact-short":case"K":s.notation="compact",s.compactDisplay="short";continue;case"compact-long":case"KK":s.notation="compact",s.compactDisplay="long";continue;case"scientific":s=de(de(de({},s),{notation:"scientific"}),a.options.reduce(function(l,d){return de(de({},l),ry(d))},{}));continue;case"engineering":s=de(de(de({},s),{notation:"engineering"}),a.options.reduce(function(l,d){return de(de({},l),ry(d))},{}));continue;case"notation-simple":s.notation="standard";continue;case"unit-width-narrow":s.currencyDisplay="narrowSymbol",s.unitDisplay="narrow";continue;case"unit-width-short":s.currencyDisplay="code",s.unitDisplay="short";continue;case"unit-width-full-name":s.currencyDisplay="name",s.unitDisplay="long";continue;case"unit-width-iso-code":s.currencyDisplay="symbol";continue;case"scale":s.scale=parseFloat(a.options[0]);continue;case"rounding-mode-floor":s.roundingMode="floor";continue;case"rounding-mode-ceiling":s.roundingMode="ceil";continue;case"rounding-mode-down":s.roundingMode="trunc";continue;case"rounding-mode-up":s.roundingMode="expand";continue;case"rounding-mode-half-even":s.roundingMode="halfEven";continue;case"rounding-mode-half-down":s.roundingMode="halfTrunc";continue;case"rounding-mode-half-up":s.roundingMode="halfExpand";continue;case"integer-width":if(a.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");a.options[0].replace(XU,function(l,d,u,p,h,g){if(d)s.minimumIntegerDigits=u.length;else{if(p&&h)throw new Error("We currently do not support maximum integer digits");if(g)throw new Error("We currently do not support exact integer digits")}return""});continue}if(Mk.test(a.stem)){s.minimumIntegerDigits=a.stem.length;continue}if(sy.test(a.stem)){if(a.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");a.stem.replace(sy,function(l,d,u,p,h,g){return u==="*"?s.minimumFractionDigits=d.length:p&&p[0]==="#"?s.maximumFractionDigits=p.length:h&&g?(s.minimumFractionDigits=h.length,s.maximumFractionDigits=h.length+g.length):(s.minimumFractionDigits=d.length,s.maximumFractionDigits=d.length),""});var o=a.options[0];o==="w"?s=de(de({},s),{trailingZeroDisplay:"stripIfInteger"}):o&&(s=de(de({},s),ny(o)));continue}if(Bk.test(a.stem)){s=de(de({},s),ny(a.stem));continue}var i=Dk(a.stem);i&&(s=de(de({},s),i));var c=e4(a.stem);c&&(s=de(de({},s),c))}return s}var ph={"001":["H","h"],419:["h","H","hB","hb"],AC:["H","h","hb","hB"],AD:["H","hB"],AE:["h","hB","hb","H"],AF:["H","hb","hB","h"],AG:["h","hb","H","hB"],AI:["H","h","hb","hB"],AL:["h","H","hB"],AM:["H","hB"],AO:["H","hB"],AR:["h","H","hB","hb"],AS:["h","H"],AT:["H","hB"],AU:["h","hb","H","hB"],AW:["H","hB"],AX:["H"],AZ:["H","hB","h"],BA:["H","hB","h"],BB:["h","hb","H","hB"],BD:["h","hB","H"],BE:["H","hB"],BF:["H","hB"],BG:["H","hB","h"],BH:["h","hB","hb","H"],BI:["H","h"],BJ:["H","hB"],BL:["H","hB"],BM:["h","hb","H","hB"],BN:["hb","hB","h","H"],BO:["h","H","hB","hb"],BQ:["H"],BR:["H","hB"],BS:["h","hb","H","hB"],BT:["h","H"],BW:["H","h","hb","hB"],BY:["H","h"],BZ:["H","h","hb","hB"],CA:["h","hb","H","hB"],CC:["H","h","hb","hB"],CD:["hB","H"],CF:["H","h","hB"],CG:["H","hB"],CH:["H","hB","h"],CI:["H","hB"],CK:["H","h","hb","hB"],CL:["h","H","hB","hb"],CM:["H","h","hB"],CN:["H","hB","hb","h"],CO:["h","H","hB","hb"],CP:["H"],CR:["h","H","hB","hb"],CU:["h","H","hB","hb"],CV:["H","hB"],CW:["H","hB"],CX:["H","h","hb","hB"],CY:["h","H","hb","hB"],CZ:["H"],DE:["H","hB"],DG:["H","h","hb","hB"],DJ:["h","H"],DK:["H"],DM:["h","hb","H","hB"],DO:["h","H","hB","hb"],DZ:["h","hB","hb","H"],EA:["H","h","hB","hb"],EC:["h","H","hB","hb"],EE:["H","hB"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],ER:["h","H"],ES:["H","hB","h","hb"],ET:["hB","hb","h","H"],FI:["H"],FJ:["h","hb","H","hB"],FK:["H","h","hb","hB"],FM:["h","hb","H","hB"],FO:["H","h"],FR:["H","hB"],GA:["H","hB"],GB:["H","h","hb","hB"],GD:["h","hb","H","hB"],GE:["H","hB","h"],GF:["H","hB"],GG:["H","h","hb","hB"],GH:["h","H"],GI:["H","h","hb","hB"],GL:["H","h"],GM:["h","hb","H","hB"],GN:["H","hB"],GP:["H","hB"],GQ:["H","hB","h","hb"],GR:["h","H","hb","hB"],GT:["h","H","hB","hb"],GU:["h","hb","H","hB"],GW:["H","hB"],GY:["h","hb","H","hB"],HK:["h","hB","hb","H"],HN:["h","H","hB","hb"],HR:["H","hB"],HU:["H","h"],IC:["H","h","hB","hb"],ID:["H"],IE:["H","h","hb","hB"],IL:["H","hB"],IM:["H","h","hb","hB"],IN:["h","H"],IO:["H","h","hb","hB"],IQ:["h","hB","hb","H"],IR:["hB","H"],IS:["H"],IT:["H","hB"],JE:["H","h","hb","hB"],JM:["h","hb","H","hB"],JO:["h","hB","hb","H"],JP:["H","K","h"],KE:["hB","hb","H","h"],KG:["H","h","hB","hb"],KH:["hB","h","H","hb"],KI:["h","hb","H","hB"],KM:["H","h","hB","hb"],KN:["h","hb","H","hB"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],KW:["h","hB","hb","H"],KY:["h","hb","H","hB"],KZ:["H","hB"],LA:["H","hb","hB","h"],LB:["h","hB","hb","H"],LC:["h","hb","H","hB"],LI:["H","hB","h"],LK:["H","h","hB","hb"],LR:["h","hb","H","hB"],LS:["h","H"],LT:["H","h","hb","hB"],LU:["H","h","hB"],LV:["H","hB","hb","h"],LY:["h","hB","hb","H"],MA:["H","h","hB","hb"],MC:["H","hB"],MD:["H","hB"],ME:["H","hB","h"],MF:["H","hB"],MG:["H","h"],MH:["h","hb","H","hB"],MK:["H","h","hb","hB"],ML:["H"],MM:["hB","hb","H","h"],MN:["H","h","hb","hB"],MO:["h","hB","hb","H"],MP:["h","hb","H","hB"],MQ:["H","hB"],MR:["h","hB","hb","H"],MS:["H","h","hb","hB"],MT:["H","h"],MU:["H","h"],MV:["H","h"],MW:["h","hb","H","hB"],MX:["h","H","hB","hb"],MY:["hb","hB","h","H"],MZ:["H","hB"],NA:["h","H","hB","hb"],NC:["H","hB"],NE:["H"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NI:["h","H","hB","hb"],NL:["H","hB"],NO:["H","h"],NP:["H","h","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],NZ:["h","hb","H","hB"],OM:["h","hB","hb","H"],PA:["h","H","hB","hb"],PE:["h","H","hB","hb"],PF:["H","h","hB"],PG:["h","H"],PH:["h","hB","hb","H"],PK:["h","hB","H"],PL:["H","h"],PM:["H","hB"],PN:["H","h","hb","hB"],PR:["h","H","hB","hb"],PS:["h","hB","hb","H"],PT:["H","hB"],PW:["h","H"],PY:["h","H","hB","hb"],QA:["h","hB","hb","H"],RE:["H","hB"],RO:["H","hB"],RS:["H","hB","h"],RU:["H"],RW:["H","h"],SA:["h","hB","hb","H"],SB:["h","hb","H","hB"],SC:["H","h","hB"],SD:["h","hB","hb","H"],SE:["H"],SG:["h","hb","H","hB"],SH:["H","h","hb","hB"],SI:["H","hB"],SJ:["H"],SK:["H"],SL:["h","hb","H","hB"],SM:["H","h","hB"],SN:["H","h","hB"],SO:["h","H"],SR:["H","hB"],SS:["h","hb","H","hB"],ST:["H","hB"],SV:["h","H","hB","hb"],SX:["H","h","hb","hB"],SY:["h","hB","hb","H"],SZ:["h","hb","H","hB"],TA:["H","h","hb","hB"],TC:["h","hb","H","hB"],TD:["h","H","hB"],TF:["H","h","hB"],TG:["H","hB"],TH:["H","h"],TJ:["H","h"],TL:["H","hB","hb","h"],TM:["H","h"],TN:["h","hB","hb","H"],TO:["h","H"],TR:["H","hB"],TT:["h","hb","H","hB"],TW:["hB","hb","h","H"],TZ:["hB","hb","H","h"],UA:["H","hB","h"],UG:["hB","hb","H","h"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],UY:["h","H","hB","hb"],UZ:["H","hB","h"],VA:["H","h","hB"],VC:["h","hb","H","hB"],VE:["h","H","hB","hb"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],VN:["H","h"],VU:["h","H"],WF:["H","hB"],WS:["h","H"],XK:["H","hB","h"],YE:["h","hB","hb","H"],YT:["H","hB"],ZA:["H","h","hb","hB"],ZM:["h","hb","H","hB"],ZW:["H","h"],"af-ZA":["H","h","hB","hb"],"ar-001":["h","hB","hb","H"],"ca-ES":["H","h","hB"],"en-001":["h","hb","H","hB"],"en-HK":["h","hb","H","hB"],"en-IL":["H","h","hb","hB"],"en-MY":["h","hb","H","hB"],"es-BR":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"gu-IN":["hB","hb","h","H"],"hi-IN":["hB","h","H"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],"ta-IN":["hB","h","hb","H"],"te-IN":["hB","h","H"],"zu-ZA":["H","hB","hb","h"]};function s4(e,s){for(var n="",r=0;r<e.length;r++){var a=e.charAt(r);if(a==="j"){for(var o=0;r+1<e.length&&e.charAt(r+1)===a;)o++,r++;var i=1+(o&1),c=o<2?1:3+(o>>1),l="a",d=n4(s);for((d=="H"||d=="k")&&(c=0);c-- >0;)n+=l;for(;i-- >0;)n=d+n}else a==="J"?n+="H":n+=a}return n}function n4(e){var s=e.hourCycle;if(s===void 0&&e.hourCycles&&e.hourCycles.length&&(s=e.hourCycles[0]),s)switch(s){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var n=e.language,r;n!=="root"&&(r=e.maximize().region);var a=ph[r||""]||ph[n||""]||ph["".concat(n,"-001")]||ph["001"];return a[0]}var Dg,r4=new RegExp("^".concat(Rk.source,"*")),a4=new RegExp("".concat(Rk.source,"*$"));function Ve(e,s){return{start:e,end:s}}var o4=!!String.prototype.startsWith&&"_a".startsWith("a",1),i4=!!String.fromCodePoint,c4=!!Object.fromEntries,l4=!!String.prototype.codePointAt,d4=!!String.prototype.trimStart,u4=!!String.prototype.trimEnd,h4=!!Number.isSafeInteger,p4=h4?Number.isSafeInteger:function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e&&Math.abs(e)<=9007199254740991},cb=!0;try{var m4=Fk("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");cb=((Dg=m4.exec("a"))===null||Dg===void 0?void 0:Dg[0])==="a"}catch{cb=!1}var ay=o4?function(s,n,r){return s.startsWith(n,r)}:function(s,n,r){return s.slice(r,r+n.length)===n},lb=i4?String.fromCodePoint:function(){for(var s=[],n=0;n<arguments.length;n++)s[n]=arguments[n];for(var r="",a=s.length,o=0,i;a>o;){if(i=s[o++],i>1114111)throw RangeError(i+" is not a valid code point");r+=i<65536?String.fromCharCode(i):String.fromCharCode(((i-=65536)>>10)+55296,i%1024+56320)}return r},oy=c4?Object.fromEntries:function(s){for(var n={},r=0,a=s;r<a.length;r++){var o=a[r],i=o[0],c=o[1];n[i]=c}return n},Uk=l4?function(s,n){return s.codePointAt(n)}:function(s,n){var r=s.length;if(!(n<0||n>=r)){var a=s.charCodeAt(n),o;return a<55296||a>56319||n+1===r||(o=s.charCodeAt(n+1))<56320||o>57343?a:(a-55296<<10)+(o-56320)+65536}},g4=d4?function(s){return s.trimStart()}:function(s){return s.replace(r4,"")},f4=u4?function(s){return s.trimEnd()}:function(s){return s.replace(a4,"")};function Fk(e,s){return new RegExp(e,s)}var db;if(cb){var iy=Fk("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");db=function(s,n){var r;iy.lastIndex=n;var a=iy.exec(s);return(r=a[1])!==null&&r!==void 0?r:""}}else db=function(s,n){for(var r=[];;){var a=Uk(s,n);if(a===void 0||zk(a)||v4(a))break;r.push(a),n+=a>=65536?2:1}return lb.apply(void 0,r)};var _4=function(){function e(s,n){n===void 0&&(n={}),this.message=s,this.position={offset:0,line:1,column:1},this.ignoreTag=!!n.ignoreTag,this.locale=n.locale,this.requiresOtherClause=!!n.requiresOtherClause,this.shouldParseSkeletons=!!n.shouldParseSkeletons}return e.prototype.parse=function(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},e.prototype.parseMessage=function(s,n,r){for(var a=[];!this.isEOF();){var o=this.char();if(o===123){var i=this.parseArgument(s,r);if(i.err)return i;a.push(i.val)}else{if(o===125&&s>0)break;if(o===35&&(n==="plural"||n==="selectordinal")){var c=this.clonePosition();this.bump(),a.push({type:ht.pound,location:Ve(c,this.clonePosition())})}else if(o===60&&!this.ignoreTag&&this.peek()===47){if(r)break;return this.error(Ue.UNMATCHED_CLOSING_TAG,Ve(this.clonePosition(),this.clonePosition()))}else if(o===60&&!this.ignoreTag&&ub(this.peek()||0)){var i=this.parseTag(s,n);if(i.err)return i;a.push(i.val)}else{var i=this.parseLiteral(s,n);if(i.err)return i;a.push(i.val)}}}return{val:a,err:null}},e.prototype.parseTag=function(s,n){var r=this.clonePosition();this.bump();var a=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:ht.literal,value:"<".concat(a,"/>"),location:Ve(r,this.clonePosition())},err:null};if(this.bumpIf(">")){var o=this.parseMessage(s+1,n,!0);if(o.err)return o;var i=o.val,c=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!ub(this.char()))return this.error(Ue.INVALID_TAG,Ve(c,this.clonePosition()));var l=this.clonePosition(),d=this.parseTagName();return a!==d?this.error(Ue.UNMATCHED_CLOSING_TAG,Ve(l,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:ht.tag,value:a,children:i,location:Ve(r,this.clonePosition())},err:null}:this.error(Ue.INVALID_TAG,Ve(c,this.clonePosition())))}else return this.error(Ue.UNCLOSED_TAG,Ve(r,this.clonePosition()))}else return this.error(Ue.INVALID_TAG,Ve(r,this.clonePosition()))},e.prototype.parseTagName=function(){var s=this.offset();for(this.bump();!this.isEOF()&&x4(this.char());)this.bump();return this.message.slice(s,this.offset())},e.prototype.parseLiteral=function(s,n){for(var r=this.clonePosition(),a="";;){var o=this.tryParseQuote(n);if(o){a+=o;continue}var i=this.tryParseUnquoted(s,n);if(i){a+=i;continue}var c=this.tryParseLeftAngleBracket();if(c){a+=c;continue}break}var l=Ve(r,this.clonePosition());return{val:{type:ht.literal,value:a,location:l},err:null}},e.prototype.tryParseLeftAngleBracket=function(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!b4(this.peek()||0))?(this.bump(),"<"):null},e.prototype.tryParseQuote=function(s){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(s==="plural"||s==="selectordinal")break;return null;default:return null}this.bump();var n=[this.char()];for(this.bump();!this.isEOF();){var r=this.char();if(r===39)if(this.peek()===39)n.push(39),this.bump();else{this.bump();break}else n.push(r);this.bump()}return lb.apply(void 0,n)},e.prototype.tryParseUnquoted=function(s,n){if(this.isEOF())return null;var r=this.char();return r===60||r===123||r===35&&(n==="plural"||n==="selectordinal")||r===125&&s>0?null:(this.bump(),lb(r))},e.prototype.parseArgument=function(s,n){var r=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(Ue.EXPECT_ARGUMENT_CLOSING_BRACE,Ve(r,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(Ue.EMPTY_ARGUMENT,Ve(r,this.clonePosition()));var a=this.parseIdentifierIfPossible().value;if(!a)return this.error(Ue.MALFORMED_ARGUMENT,Ve(r,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(Ue.EXPECT_ARGUMENT_CLOSING_BRACE,Ve(r,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:ht.argument,value:a,location:Ve(r,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(Ue.EXPECT_ARGUMENT_CLOSING_BRACE,Ve(r,this.clonePosition())):this.parseArgumentOptions(s,n,a,r);default:return this.error(Ue.MALFORMED_ARGUMENT,Ve(r,this.clonePosition()))}},e.prototype.parseIdentifierIfPossible=function(){var s=this.clonePosition(),n=this.offset(),r=db(this.message,n),a=n+r.length;this.bumpTo(a);var o=this.clonePosition(),i=Ve(s,o);return{value:r,location:i}},e.prototype.parseArgumentOptions=function(s,n,r,a){var o,i=this.clonePosition(),c=this.parseIdentifierIfPossible().value,l=this.clonePosition();switch(c){case"":return this.error(Ue.EXPECT_ARGUMENT_TYPE,Ve(i,l));case"number":case"date":case"time":{this.bumpSpace();var d=null;if(this.bumpIf(",")){this.bumpSpace();var u=this.clonePosition(),p=this.parseSimpleArgStyleIfPossible();if(p.err)return p;var h=f4(p.val);if(h.length===0)return this.error(Ue.EXPECT_ARGUMENT_STYLE,Ve(this.clonePosition(),this.clonePosition()));var g=Ve(u,this.clonePosition());d={style:h,styleLocation:g}}var f=this.tryParseArgumentClose(a);if(f.err)return f;var _=Ve(a,this.clonePosition());if(d&&ay(d==null?void 0:d.style,"::",0)){var b=g4(d.style.slice(2));if(c==="number"){var p=this.parseNumberSkeletonFromString(b,d.styleLocation);return p.err?p:{val:{type:ht.number,value:r,location:_,style:p.val},err:null}}else{if(b.length===0)return this.error(Ue.EXPECT_DATE_TIME_SKELETON,_);var x=b;this.locale&&(x=s4(b,this.locale));var h={type:tl.dateTime,pattern:x,location:d.styleLocation,parsedOptions:this.shouldParseSkeletons?QU(x):{}},v=c==="date"?ht.date:ht.time;return{val:{type:v,value:r,location:_,style:h},err:null}}}return{val:{type:c==="number"?ht.number:c==="date"?ht.date:ht.time,value:r,location:_,style:(o=d==null?void 0:d.style)!==null&&o!==void 0?o:null},err:null}}case"plural":case"selectordinal":case"select":{var j=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(Ue.EXPECT_SELECT_ARGUMENT_OPTIONS,Ve(j,de({},j)));this.bumpSpace();var y=this.parseIdentifierIfPossible(),w=0;if(c!=="select"&&y.value==="offset"){if(!this.bumpIf(":"))return this.error(Ue.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Ve(this.clonePosition(),this.clonePosition()));this.bumpSpace();var p=this.tryParseDecimalInteger(Ue.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Ue.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(p.err)return p;this.bumpSpace(),y=this.parseIdentifierIfPossible(),w=p.val}var S=this.tryParsePluralOrSelectOptions(s,c,n,y);if(S.err)return S;var f=this.tryParseArgumentClose(a);if(f.err)return f;var T=Ve(a,this.clonePosition());return c==="select"?{val:{type:ht.select,value:r,options:oy(S.val),location:T},err:null}:{val:{type:ht.plural,value:r,options:oy(S.val),offset:w,pluralType:c==="plural"?"cardinal":"ordinal",location:T},err:null}}default:return this.error(Ue.INVALID_ARGUMENT_TYPE,Ve(i,l))}},e.prototype.tryParseArgumentClose=function(s){return this.isEOF()||this.char()!==125?this.error(Ue.EXPECT_ARGUMENT_CLOSING_BRACE,Ve(s,this.clonePosition())):(this.bump(),{val:!0,err:null})},e.prototype.parseSimpleArgStyleIfPossible=function(){for(var s=0,n=this.clonePosition();!this.isEOF();){var r=this.char();switch(r){case 39:{this.bump();var a=this.clonePosition();if(!this.bumpUntil("'"))return this.error(Ue.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,Ve(a,this.clonePosition()));this.bump();break}case 123:{s+=1,this.bump();break}case 125:{if(s>0)s-=1;else return{val:this.message.slice(n.offset,this.offset()),err:null};break}default:this.bump();break}}return{val:this.message.slice(n.offset,this.offset()),err:null}},e.prototype.parseNumberSkeletonFromString=function(s,n){var r=[];try{r=JU(s)}catch{return this.error(Ue.INVALID_NUMBER_SKELETON,n)}return{val:{type:tl.number,tokens:r,location:n,parsedOptions:this.shouldParseSkeletons?t4(r):{}},err:null}},e.prototype.tryParsePluralOrSelectOptions=function(s,n,r,a){for(var o,i=!1,c=[],l=new Set,d=a.value,u=a.location;;){if(d.length===0){var p=this.clonePosition();if(n!=="select"&&this.bumpIf("=")){var h=this.tryParseDecimalInteger(Ue.EXPECT_PLURAL_ARGUMENT_SELECTOR,Ue.INVALID_PLURAL_ARGUMENT_SELECTOR);if(h.err)return h;u=Ve(p,this.clonePosition()),d=this.message.slice(p.offset,this.offset())}else break}if(l.has(d))return this.error(n==="select"?Ue.DUPLICATE_SELECT_ARGUMENT_SELECTOR:Ue.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,u);d==="other"&&(i=!0),this.bumpSpace();var g=this.clonePosition();if(!this.bumpIf("{"))return this.error(n==="select"?Ue.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:Ue.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,Ve(this.clonePosition(),this.clonePosition()));var f=this.parseMessage(s+1,n,r);if(f.err)return f;var _=this.tryParseArgumentClose(g);if(_.err)return _;c.push([d,{value:f.val,location:Ve(g,this.clonePosition())}]),l.add(d),this.bumpSpace(),o=this.parseIdentifierIfPossible(),d=o.value,u=o.location}return c.length===0?this.error(n==="select"?Ue.EXPECT_SELECT_ARGUMENT_SELECTOR:Ue.EXPECT_PLURAL_ARGUMENT_SELECTOR,Ve(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!i?this.error(Ue.MISSING_OTHER_CLAUSE,Ve(this.clonePosition(),this.clonePosition())):{val:c,err:null}},e.prototype.tryParseDecimalInteger=function(s,n){var r=1,a=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(r=-1);for(var o=!1,i=0;!this.isEOF();){var c=this.char();if(c>=48&&c<=57)o=!0,i=i*10+(c-48),this.bump();else break}var l=Ve(a,this.clonePosition());return o?(i*=r,p4(i)?{val:i,err:null}:this.error(n,l)):this.error(s,l)},e.prototype.offset=function(){return this.position.offset},e.prototype.isEOF=function(){return this.offset()===this.message.length},e.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},e.prototype.char=function(){var s=this.position.offset;if(s>=this.message.length)throw Error("out of bound");var n=Uk(this.message,s);if(n===void 0)throw Error("Offset ".concat(s," is at invalid UTF-16 code unit boundary"));return n},e.prototype.error=function(s,n){return{val:null,err:{kind:s,message:this.message,location:n}}},e.prototype.bump=function(){if(!this.isEOF()){var s=this.char();s===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=s<65536?1:2)}},e.prototype.bumpIf=function(s){if(ay(this.message,s,this.offset())){for(var n=0;n<s.length;n++)this.bump();return!0}return!1},e.prototype.bumpUntil=function(s){var n=this.offset(),r=this.message.indexOf(s,n);return r>=0?(this.bumpTo(r),!0):(this.bumpTo(this.message.length),!1)},e.prototype.bumpTo=function(s){if(this.offset()>s)throw Error("targetOffset ".concat(s," must be greater than or equal to the current offset ").concat(this.offset()));for(s=Math.min(s,this.message.length);;){var n=this.offset();if(n===s)break;if(n>s)throw Error("targetOffset ".concat(s," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},e.prototype.bumpSpace=function(){for(;!this.isEOF()&&zk(this.char());)this.bump()},e.prototype.peek=function(){if(this.isEOF())return null;var s=this.char(),n=this.offset(),r=this.message.charCodeAt(n+(s>=65536?2:1));return r??null},e}();function ub(e){return e>=97&&e<=122||e>=65&&e<=90}function b4(e){return ub(e)||e===47}function x4(e){return e===45||e===46||e>=48&&e<=57||e===95||e>=97&&e<=122||e>=65&&e<=90||e==183||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8255&&e<=8256||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}function zk(e){return e>=9&&e<=13||e===32||e===133||e>=8206&&e<=8207||e===8232||e===8233}function v4(e){return e>=33&&e<=35||e===36||e>=37&&e<=39||e===40||e===41||e===42||e===43||e===44||e===45||e>=46&&e<=47||e>=58&&e<=59||e>=60&&e<=62||e>=63&&e<=64||e===91||e===92||e===93||e===94||e===96||e===123||e===124||e===125||e===126||e===161||e>=162&&e<=165||e===166||e===167||e===169||e===171||e===172||e===174||e===176||e===177||e===182||e===187||e===191||e===215||e===247||e>=8208&&e<=8213||e>=8214&&e<=8215||e===8216||e===8217||e===8218||e>=8219&&e<=8220||e===8221||e===8222||e===8223||e>=8224&&e<=8231||e>=8240&&e<=8248||e===8249||e===8250||e>=8251&&e<=8254||e>=8257&&e<=8259||e===8260||e===8261||e===8262||e>=8263&&e<=8273||e===8274||e===8275||e>=8277&&e<=8286||e>=8592&&e<=8596||e>=8597&&e<=8601||e>=8602&&e<=8603||e>=8604&&e<=8607||e===8608||e>=8609&&e<=8610||e===8611||e>=8612&&e<=8613||e===8614||e>=8615&&e<=8621||e===8622||e>=8623&&e<=8653||e>=8654&&e<=8655||e>=8656&&e<=8657||e===8658||e===8659||e===8660||e>=8661&&e<=8691||e>=8692&&e<=8959||e>=8960&&e<=8967||e===8968||e===8969||e===8970||e===8971||e>=8972&&e<=8991||e>=8992&&e<=8993||e>=8994&&e<=9e3||e===9001||e===9002||e>=9003&&e<=9083||e===9084||e>=9085&&e<=9114||e>=9115&&e<=9139||e>=9140&&e<=9179||e>=9180&&e<=9185||e>=9186&&e<=9254||e>=9255&&e<=9279||e>=9280&&e<=9290||e>=9291&&e<=9311||e>=9472&&e<=9654||e===9655||e>=9656&&e<=9664||e===9665||e>=9666&&e<=9719||e>=9720&&e<=9727||e>=9728&&e<=9838||e===9839||e>=9840&&e<=10087||e===10088||e===10089||e===10090||e===10091||e===10092||e===10093||e===10094||e===10095||e===10096||e===10097||e===10098||e===10099||e===10100||e===10101||e>=10132&&e<=10175||e>=10176&&e<=10180||e===10181||e===10182||e>=10183&&e<=10213||e===10214||e===10215||e===10216||e===10217||e===10218||e===10219||e===10220||e===10221||e===10222||e===10223||e>=10224&&e<=10239||e>=10240&&e<=10495||e>=10496&&e<=10626||e===10627||e===10628||e===10629||e===10630||e===10631||e===10632||e===10633||e===10634||e===10635||e===10636||e===10637||e===10638||e===10639||e===10640||e===10641||e===10642||e===10643||e===10644||e===10645||e===10646||e===10647||e===10648||e>=10649&&e<=10711||e===10712||e===10713||e===10714||e===10715||e>=10716&&e<=10747||e===10748||e===10749||e>=10750&&e<=11007||e>=11008&&e<=11055||e>=11056&&e<=11076||e>=11077&&e<=11078||e>=11079&&e<=11084||e>=11085&&e<=11123||e>=11124&&e<=11125||e>=11126&&e<=11157||e===11158||e>=11159&&e<=11263||e>=11776&&e<=11777||e===11778||e===11779||e===11780||e===11781||e>=11782&&e<=11784||e===11785||e===11786||e===11787||e===11788||e===11789||e>=11790&&e<=11798||e===11799||e>=11800&&e<=11801||e===11802||e===11803||e===11804||e===11805||e>=11806&&e<=11807||e===11808||e===11809||e===11810||e===11811||e===11812||e===11813||e===11814||e===11815||e===11816||e===11817||e>=11818&&e<=11822||e===11823||e>=11824&&e<=11833||e>=11834&&e<=11835||e>=11836&&e<=11839||e===11840||e===11841||e===11842||e>=11843&&e<=11855||e>=11856&&e<=11857||e===11858||e>=11859&&e<=11903||e>=12289&&e<=12291||e===12296||e===12297||e===12298||e===12299||e===12300||e===12301||e===12302||e===12303||e===12304||e===12305||e>=12306&&e<=12307||e===12308||e===12309||e===12310||e===12311||e===12312||e===12313||e===12314||e===12315||e===12316||e===12317||e>=12318&&e<=12319||e===12320||e===12336||e===64830||e===64831||e>=65093&&e<=65094}function hb(e){e.forEach(function(s){if(delete s.location,Ek(s)||Ok(s))for(var n in s.options)delete s.options[n].location,hb(s.options[n].value);else Pk(s)&&$k(s.style)||(Nk(s)||Ak(s))&&ib(s.style)?delete s.style.location:Lk(s)&&hb(s.children)})}function j4(e,s){s===void 0&&(s={}),s=de({shouldParseSkeletons:!0,requiresOtherClause:!0},s);var n=new _4(e,s).parse();if(n.err){var r=SyntaxError(Ue[n.err.kind]);throw r.location=n.err.location,r.originalMessage=n.err.message,r}return s!=null&&s.captureLocation||hb(n.val),n.val}var br;(function(e){e.MISSING_VALUE="MISSING_VALUE",e.INVALID_VALUE="INVALID_VALUE",e.MISSING_INTL_API="MISSING_INTL_API"})(br||(br={}));var lo=function(e){an(s,e);function s(n,r,a){var o=e.call(this,n)||this;return o.code=r,o.originalMessage=a,o}return s.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},s}(Error),cy=function(e){an(s,e);function s(n,r,a,o){return e.call(this,'Invalid values for "'.concat(n,'": "').concat(r,'". Options are "').concat(Object.keys(a).join('", "'),'"'),br.INVALID_VALUE,o)||this}return s}(lo),y4=function(e){an(s,e);function s(n,r,a){return e.call(this,'Value for "'.concat(n,'" must be of type ').concat(r),br.INVALID_VALUE,a)||this}return s}(lo),w4=function(e){an(s,e);function s(n,r){return e.call(this,'The intl string context variable "'.concat(n,'" was not provided to the string "').concat(r,'"'),br.MISSING_VALUE,r)||this}return s}(lo),hs;(function(e){e[e.literal=0]="literal",e[e.object=1]="object"})(hs||(hs={}));function S4(e){return e.length<2?e:e.reduce(function(s,n){var r=s[s.length-1];return!r||r.type!==hs.literal||n.type!==hs.literal?s.push(n):r.value+=n.value,s},[])}function qk(e){return typeof e=="function"}function zp(e,s,n,r,a,o,i){if(e.length===1&&ty(e[0]))return[{type:hs.literal,value:e[0].value}];for(var c=[],l=0,d=e;l<d.length;l++){var u=d[l];if(ty(u)){c.push({type:hs.literal,value:u.value});continue}if(GU(u)){typeof o=="number"&&c.push({type:hs.literal,value:n.getNumberFormat(s).format(o)});continue}var p=u.value;if(!(a&&p in a))throw new w4(p,i);var h=a[p];if(WU(u)){(!h||typeof h=="string"||typeof h=="number")&&(h=typeof h=="string"||typeof h=="number"?String(h):""),c.push({type:typeof h=="string"?hs.literal:hs.object,value:h});continue}if(Nk(u)){var g=typeof u.style=="string"?r.date[u.style]:ib(u.style)?u.style.parsedOptions:void 0;c.push({type:hs.literal,value:n.getDateTimeFormat(s,g).format(h)});continue}if(Ak(u)){var g=typeof u.style=="string"?r.time[u.style]:ib(u.style)?u.style.parsedOptions:r.time.medium;c.push({type:hs.literal,value:n.getDateTimeFormat(s,g).format(h)});continue}if(Pk(u)){var g=typeof u.style=="string"?r.number[u.style]:$k(u.style)?u.style.parsedOptions:void 0;g&&g.scale&&(h=h*(g.scale||1)),c.push({type:hs.literal,value:n.getNumberFormat(s,g).format(h)});continue}if(Lk(u)){var f=u.children,_=u.value,b=a[_];if(!qk(b))throw new y4(_,"function",i);var x=zp(f,s,n,r,a,o),v=b(x.map(function(w){return w.value}));Array.isArray(v)||(v=[v]),c.push.apply(c,v.map(function(w){return{type:typeof w=="string"?hs.literal:hs.object,value:w}}))}if(Ek(u)){var j=u.options[h]||u.options.other;if(!j)throw new cy(u.value,h,Object.keys(u.options),i);c.push.apply(c,zp(j.value,s,n,r,a));continue}if(Ok(u)){var j=u.options["=".concat(h)];if(!j){if(!Intl.PluralRules)throw new lo(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,br.MISSING_INTL_API,i);var y=n.getPluralRules(s,{type:u.pluralType}).select(h-(u.offset||0));j=u.options[y]||u.options.other}if(!j)throw new cy(u.value,h,Object.keys(u.options),i);c.push.apply(c,zp(j.value,s,n,r,a,h-(u.offset||0)));continue}}return S4(c)}function C4(e,s){return s?de(de(de({},e||{}),s||{}),Object.keys(e).reduce(function(n,r){return n[r]=de(de({},e[r]),s[r]||{}),n},{})):e}function I4(e,s){return s?Object.keys(e).reduce(function(n,r){return n[r]=C4(e[r],s[r]),n},de({},e)):e}function Ug(e){return{create:function(){return{get:function(s){return e[s]},set:function(s,n){e[s]=n}}}}}function k4(e){return e===void 0&&(e={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:nr(function(){for(var s,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new((s=Intl.NumberFormat).bind.apply(s,or([void 0],n,!1)))},{cache:Ug(e.number),strategy:rr.variadic}),getDateTimeFormat:nr(function(){for(var s,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new((s=Intl.DateTimeFormat).bind.apply(s,or([void 0],n,!1)))},{cache:Ug(e.dateTime),strategy:rr.variadic}),getPluralRules:nr(function(){for(var s,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return new((s=Intl.PluralRules).bind.apply(s,or([void 0],n,!1)))},{cache:Ug(e.pluralRules),strategy:rr.variadic})}}var Hk=function(){function e(s,n,r,a){n===void 0&&(n=e.defaultLocale);var o=this;if(this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(l){var d=o.formatToParts(l);if(d.length===1)return d[0].value;var u=d.reduce(function(p,h){return!p.length||h.type!==hs.literal||typeof p[p.length-1]!="string"?p.push(h.value):p[p.length-1]+=h.value,p},[]);return u.length<=1?u[0]||"":u},this.formatToParts=function(l){return zp(o.ast,o.locales,o.formatters,o.formats,l,void 0,o.message)},this.resolvedOptions=function(){var l;return{locale:((l=o.resolvedLocale)===null||l===void 0?void 0:l.toString())||Intl.NumberFormat.supportedLocalesOf(o.locales)[0]}},this.getAst=function(){return o.ast},this.locales=n,this.resolvedLocale=e.resolveLocale(n),typeof s=="string"){if(this.message=s,!e.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var i=a||{};i.formatters;var c=Jc(i,["formatters"]);this.ast=e.__parse(s,de(de({},c),{locale:this.resolvedLocale}))}else this.ast=s;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=I4(e.formats,r),this.formatters=a&&a.formatters||k4(this.formatterCache)}return Object.defineProperty(e,"defaultLocale",{get:function(){return e.memoizedDefaultLocale||(e.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),e.memoizedDefaultLocale},enumerable:!1,configurable:!0}),e.memoizedDefaultLocale=null,e.resolveLocale=function(s){if(!(typeof Intl.Locale>"u")){var n=Intl.NumberFormat.supportedLocalesOf(s);return n.length>0?new Intl.Locale(n[0]):new Intl.Locale(typeof s=="string"?s:s[0])}},e.__parse=j4,e.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},e}();function T4(e){return e&&e.__esModule?e.default:e}function P4(e){let{"aria-label":s,...n}=e,r=qO(T4(Ik),"@react-aria/breadcrumbs");return{navProps:{...rx(n,{labelable:!0}),"aria-label":s||r.format("breadcrumbs")}}}function N4(e){let s=rx(e,{labelable:!0}),n;return e.orientation==="vertical"&&(n="vertical"),e.elementType!=="hr"?{separatorProps:{...s,role:"separator","aria-orientation":n}}:{separatorProps:s}}const pb=m.createContext(null),A4=m.forwardRef(function(s,n){[s,n]=VO(s,n,pb);let{CollectionRoot:r}=m.useContext(WO),{navProps:a}=P4(s);return La.createElement(GO,{content:La.createElement(ax,s)},o=>{var i;return La.createElement("ol",{ref:n,...a,slot:s.slot||void 0,style:s.style,className:(i=s.className)!==null&&i!==void 0?i:"react-aria-Breadcrumbs"},La.createElement(pb.Provider,{value:s},La.createElement(r,{collection:o})))})}),E4=HO("item",function(s,n,r){let a=r.nextKey==null,{isDisabled:o,onAction:i}=KO(pb),c={"aria-current":a?"page":null,isDisabled:o||a,onPress:()=>i==null?void 0:i(r.key)},l=QO({...r.props,children:r.rendered,values:{isDisabled:o||a,isCurrent:a},defaultClassName:"react-aria-Breadcrumb"});return La.createElement("li",{...rx(s),...l,ref:n,"data-disabled":o||a||void 0,"data-current":a||void 0},La.createElement(YO.Provider,{value:c},l.children))}),Vk=()=>t.jsx(D,{width:60,height:20}),O4="_root_12xko_1",L4="_root_s_12xko_12",$4="_root_green_12xko_16",R4="_root_blue_12xko_21",B4="_button_12xko_26",M4="_bannerContainer_12xko_30",Hi={root:O4,root_s:L4,root_green:$4,root_blue:R4,button:B4,bannerContainer:M4},Wk=({description:e,appearance:s,icon:n,title:r,actions:a,size:o="m"})=>t.jsxs("div",{className:V(Hi.root,{[Hi.root_green]:s==="green",[Hi.root_blue]:s==="blue",[Hi.root_s]:o==="s"}),children:[n&&t.jsx(q,{name:n,size:16}),r&&t.jsx(Ne,{appearance:"neon",children:r}),t.jsxs("div",{className:Hi.bannerContainer,children:[t.jsx(P,{children:e}),a==null?void 0:a.map(i=>t.jsx($u,{onPress:i.onClick,className:Hi.button,children:i.label},i.label))]})]}),D4="_content_r8fgm_1",U4={content:D4},sl=({content:e,maxWidth:s,...n})=>{const r=m.useRef(null),[a,o]=m.useState(!1);return m.useEffect(()=>{if(r.current){const{scrollWidth:i,offsetWidth:c}=r.current;o(i>c)}},[r]),t.jsx(ne,{content:e,disabled:!a,children:t.jsx(P,{ref:r,className:U4.content,style:{maxWidth:s},...n,children:e})})},F4="_link_175om_1",z4={link:F4},q4=({href:e,children:s,onClick:n,ariaLabel:r})=>t.jsx(Ke,{href:e,onClick:n,className:z4.link,"aria-label":r,isDisabled:!1,children:s}),H4="_root_opukf_1",V4="_button_opukf_7",W4="_buttonLabel_opukf_26",G4="_popover_opukf_33",K4="_searchInput_opukf_53",Q4="_menu_opukf_69",Y4="_section_opukf_76",J4="_menuItem_opukf_93",Z4="_label_opukf_126",X4="_check_opukf_132",ir={root:H4,button:V4,buttonLabel:W4,popover:G4,searchInput:K4,menu:Q4,section:Y4,menuItem:J4,label:Z4,check:X4},e3="_link_1hank_1",t3={link:e3},s3=({href:e,children:s,onClick:n,ariaLabel:r})=>t.jsx(Ke,{href:e,onClick:n,className:t3.link,"aria-label":r,isDisabled:!1,children:s});function Xd(e){return"items"in e?`section-${e.title}`:`item-${e.href}-${e.label}`}const Gk=e=>!e.hidden&&t.jsx(e2,{id:Xd(e),className:ir.menuItem,href:e.href,textValue:e.label,isDisabled:e.disabled,onAction:e.onClick,children:({isSelected:s})=>t.jsxs(t.Fragment,{children:[e.icon&&t.jsx(q,{name:e.icon,size:16}),t.jsx(E1,{slot:"label",className:ir.label,children:e.label}),e.suffix,s&&t.jsx(q,{className:ir.check,name:"check",size:20})]})}),n3=({title:e,showBetaBadge:s,items:n})=>n.length===0?null:t.jsxs(XO,{className:ir.section,children:[t.jsxs(A1,{children:[e,s&&t.jsx(Ne,{appearance:"experimental",margin:"left",children:"beta"})]}),t.jsx(ax,{items:n,children:r=>t.jsx(Gk,{id:Xd(r),...r})})]}),r3=({items:e,filterable:s,qa:n,selectedKey:r,onOpen:a})=>{const{pathname:o,isCurrent:i}=k1(),c=m.useMemo(()=>{const p=e.flatMap(h=>"items"in h?h.items:[h]);return r?p.find(h=>h.href===r):p.find(h=>h.href&&i(o,h.href))},[r,e,i,o]),{contains:l}=T1({sensitivity:"base"}),d=m.useMemo(()=>c?[Xd(c)]:[],[c]),u=t.jsx(ZO,{disallowEmptySelection:!0,className:ir.menu,selectionMode:"single",selectedKeys:d,items:e,children:p=>"items"in p?t.jsx(n3,{id:Xd(p),title:p.title,showBetaBadge:p.showBetaBadge,items:p.items}):t.jsx(Gk,{id:Xd(p),...p})});return t.jsxs("div",{className:ir.root,"data-qa":n,children:[c&&t.jsxs(s3,{href:c.href??"",children:[t.jsx("div",{className:ir.buttonLabel,children:c.label}),c.triggerSuffix]}),t.jsxs(JO,{onOpenChange:p=>p&&(a==null?void 0:a()),children:[t.jsx($u,{className:ir.button,"aria-label":"Open menu",children:t.jsx(q,{name:"select",size:16})}),t.jsx(Om,{className:ir.popover,children:s?t.jsxs(P1,{filter:l,children:[t.jsx(N1,{autoFocus:!0,"aria-label":"Search",children:t.jsx(ox,{placeholder:"Search...",className:ir.searchInput})}),u]}):u})]})]})},a3="_breadcrumbs_9pyqx_1",o3="_breadcrumb_9pyqx_1",ly={breadcrumbs:a3,breadcrumb:o3},i3="_separator_197p9_1",c3="_separator_compact_197p9_9",dy={separator:i3,separator_compact:c3},l3=()=>{const{separatorProps:e}=N4({orientation:"vertical",elementType:"span"});return t.jsx("span",{...e,className:V(dy.separator,{[dy.separator_compact]:!1}),children:"/"})},d3=({item:e})=>"loading"in e?t.jsx(D,{width:100,height:16}):"items"in e?t.jsx(r3,{...e}):t.jsx(q4,{...e}),u3=({items:e})=>t.jsx("nav",{"aria-label":"Breadcrumbs",children:t.jsx(A4,{className:ly.breadcrumbs,children:e.map((s,n)=>t.jsxs(E4,{className:ly.breadcrumb,children:[n>0&&t.jsx(l3,{}),t.jsx(d3,{item:s})]},n))})}),h3="_header_1es0q_1",p3="_triggerIcon_1es0q_7",m3="_triggerIcon_expanded_1es0q_13",g3="_title_1es0q_17",f3="_content_1es0q_21",bo={header:h3,triggerIcon:p3,triggerIcon_expanded:m3,title:g3,content:f3},_3=({title:e,collapsed:s,onCollapseStateChange:n,children:r,iconPosition:a="left"})=>t.jsxs("div",{children:[t.jsxs($u,{type:"button",className:bo.header,onPress:()=>{n(!s)},children:[a==="left"&&t.jsx(q,{name:"chevron_down",size:20,className:V(bo.triggerIcon,{[bo.triggerIcon_expanded]:!s})}),t.jsx("div",{className:bo.title,children:e}),a==="right"&&t.jsx(q,{name:"chevron_down",size:20,className:V(bo.triggerIcon,{[bo.triggerIcon_expanded]:!s})})]}),t.jsx(qm,{collapsed:s,children:t.jsx("div",{className:bo.content,children:r})})]}),b3=({initiallyCollapsed:e=!1,onCollapseStateChanged:s,...n})=>{const[r,a]=m.useState(e);return t.jsx(_3,{...n,collapsed:r,onCollapseStateChange:o=>{a(o),s==null||s(o)}})},x3=(e,s,n)=>{const[r,a]=m.useState(s??e),o=s!==void 0,i=o?s:r,c=m.useCallback(l=>{o||a(l),n==null||n(l)},[o,n]);return[i,c]},v3="_root_akjvp_1",j3="_root_primary_akjvp_10",y3="_root_secondary_akjvp_14",w3="_root_xsmall_akjvp_18",S3="_root_small_akjvp_22",C3="_root_large_akjvp_26",I3="_header_akjvp_30",k3="_header_large_akjvp_37",T3="_header_small_akjvp_42",P3="_icon_akjvp_47",N3="_icon_opened_akjvp_55",A3="_content_small_akjvp_63",E3="_content_large_akjvp_67",ps={root:v3,root_primary:j3,root_secondary:y3,root_xsmall:w3,root_small:S3,root_large:C3,header:I3,header_large:k3,header_small:T3,icon:P3,icon_opened:N3,content_small:A3,content_large:E3},uy={primary:ps.root_primary,secondary:ps.root_secondary,xs:ps.root_xsmall,s:ps.root_small,l:ps.root_large},Kk=({appearance:e="primary",size:s="l",initiallyCollapsed:n=!1,disabled:r=!1,header:a,scrollIfNeeded:o=!1,children:i,isCollapsed:c,onCollapseStateChange:l,className:d,iconPosition:u="right"})=>{const[p,h]=x3(n,c,l),g=m.useRef(null),f=m.useCallback(()=>h(!p),[p,h]);return t.jsxs("div",{className:V(ps.root,uy[e],uy[s],d),children:[t.jsxs($u,{type:"button",className:V(ps.header,{[ps.header_small]:s==="s",[ps.header_large]:s==="l"}),isDisabled:r,onPress:f,children:[u==="right"&&t.jsxs(t.Fragment,{children:[t.jsx("div",{children:a}),t.jsx(q,{name:"chevron_down",size:24,className:V(ps.icon,{[ps.icon_opened]:!p})})]}),u==="left"&&t.jsxs(t.Fragment,{children:[t.jsx(q,{name:"chevron_down",size:24,className:V(ps.icon,{[ps.icon_opened]:!p})}),t.jsx("div",{children:a})]})]}),t.jsx(qm,{collapsed:p,scrollIfNeeded:o,children:t.jsx("div",{ref:g,className:V({[ps.content_small]:s==="s",[ps.content_large]:s==="l"}),children:i})})]})},O3="_root_1b15a_3",L3="_cover_1b15a_15",$3="_background_1b15a_36",R3="_closeButton_1b15a_47",B3="_iconWrapper_1b15a_52",M3="_headerSection_1b15a_87",D3="_header_1b15a_87",U3="_subtitle_1b15a_100",F3="_coverHeaderContainer_1b15a_104",z3="_coverHiddenTitle_1b15a_111",q3="_coverHiddenTitle_withIcon_1b15a_123",H3="_body_1b15a_127",V3="_spacer_1b15a_136",Os={root:O3,cover:L3,background:$3,closeButton:R3,iconWrapper:B3,headerSection:M3,header:D3,subtitle:U3,coverHeaderContainer:F3,coverHiddenTitle:z3,coverHiddenTitle_withIcon:q3,body:H3,spacer:V3},Hl=80,W3=26,G3=50,K3=54,Q3=80,hy={s:{coverWidth:420,coverHeight:148},m:{coverWidth:540,coverHeight:190},l:{coverWidth:720,coverHeight:190}};function Y3(e){return new Promise((s,n)=>{const r=new Image;r.addEventListener("load",()=>s()),r.addEventListener("error",n),r.src=e})}const J3=({title:e,subtitle:s,icon:n,coverImage:r,action:a,scrollContainerRef:o,children:i,footer:c})=>{const{width:l,size:d}=eR(),u=m.useRef(null),p=o??u,h=m.useRef(null),g=tR(),f=m.useRef(null),_=m.useRef(null),b=m.useRef(null),x=m.useRef(0),v={...hy[d],coverHeight:r.height??hy[d].coverHeight},j=v.coverHeight-Hl,[y,w]=m.useState(r.x1),S=bi(E=>{const{scrollTop:H}=E.target,R=f.current;if(!R)return;const $=qc(H/j,0,1);if(x.current!==$){x.current=$;const Z=Hl+(1-$)*j;R.style.height=`${Z}px`;const U=1-$*(1-Math.min(1,l/v.coverWidth));R.style.backgroundSize=`${v.coverWidth*U}px ${v.coverHeight*U}px`;const te=_.current;te&&te.style.setProperty("--js-icon-interpolation",`${$}`)}const K=b.current;if(K){const Z=j+W3,U=qc((H-Z)/Hl,0,1);K.style.transform=`translateY(${(1-U)*Hl}px)`}if(e&&f.current){const Z=j+G3,U=qc((H-Z)/(.7*Hl),0,1);f.current.style.setProperty("--js-darken-interpolation",`${U}`)}});m.useEffect(()=>{const E=p==null?void 0:p.current,H=h.current;E&&H&&setTimeout(()=>{const R=E.scrollHeight-E.clientHeight,$=j+K3,K=$+Q3;if(R>=$&&R<K){const Z=K-R;H.style.height=`${Z}px`}},0)},[]);const T=sR("(-webkit-min-device-pixel-ratio: 1.5), (resolution >= 144dpi)");return m.useEffect(()=>{!T||r.x2===r.x1||Y3(r.x2).then(()=>w(r.x2))},[T,r.x1,r.x2]),t.jsx("div",{className:Os.root,style:{"--js-cover-width":`${v.coverWidth}px`,"--js-cover-height":`${v.coverHeight}px`},children:t.jsxs("div",{ref:p,className:Os.body,onScroll:S,children:[t.jsxs("div",{className:Os.cover,children:[t.jsx("div",{ref:f,className:Os.background,style:{backgroundImage:`url("${y}")`}}),n&&t.jsx("span",{ref:_,className:Os.iconWrapper,children:t.jsx(q,{name:n,size:46,forceColorScheme:"light"})}),e&&t.jsx("div",{className:Os.coverHeaderContainer,children:t.jsx(J,{ref:b,level:2,size:"h2",className:V(Os.coverHiddenTitle,{[Os.coverHiddenTitle_withIcon]:!!n}),"aria-hidden":"true",children:e})}),t.jsx(nR,{className:Os.closeButton,blurry:!0,onClick:g})]}),e&&t.jsxs("div",{className:Os.headerSection,children:[t.jsxs("div",{className:Os.header,children:[t.jsx(J,{level:2,size:"h1",children:e}),a]}),s&&t.jsx(J,{level:2,size:"h4",className:Os.subtitle,children:s})]}),i,t.jsx("div",{ref:h,className:Os.spacer}),c&&t.jsx(Ax,{children:c})]})})},Z3="_inputContainer_1jaw0_1",X3="_label_1jaw0_8",eF="_input_1jaw0_1",tF="_icon_1jaw0_32",sF="_root_1jaw0_51",Vl={inputContainer:Z3,label:X3,input:eF,icon:tF,root:sF},Qk=({value:e,onSave:s,isLoading:n=!1,className:r})=>{const[a,o]=m.useState(null),i=m.useRef(!1),c=m.useRef(null),l=async()=>{a&&await s(a)},d=async()=>{i.current||await l(),o(null),i.current=!1},u=g=>{g.key==="Enter"?g.target.blur():g.key==="Escape"&&(i.current=!0,g.target.blur())},p=()=>{var g;(g=c.current)==null||g.focus()},h=g=>{var f;(g.key==="Enter"||g.key===" ")&&(g.preventDefault(),(f=c.current)==null||f.focus())};return t.jsx("div",{className:V(Vl.root,r),children:t.jsxs("div",{className:Vl.inputContainer,children:[t.jsx("span",{className:Vl.label,children:(a??e)||" "}),t.jsx(ox,{ref:c,className:Vl.input,value:a??e,onChange:g=>{o(g.target.value)},onBlur:d,onKeyDown:u,disabled:n}),t.jsx("div",{className:Vl.icon,onClick:p,onKeyDown:h,role:"button",tabIndex:0,"aria-label":n?"Saving...":"Edit text",children:n?t.jsx(on,{size:16,className:"loader"}):t.jsx(q,{name:"edit",size:16})})]})})},nF="_root_1uexv_1",rF={root:nF},qx=({className:e,children:s,...n})=>t.jsx("div",{...n,className:V(e,rF.root),children:s}),aF="_popover_gd6wy_1",oF={popover:aF},Yk=({trigger:e,content:s,placement:n})=>t.jsxs(t2,{children:[e,t.jsx(Om,{placement:n,className:oF.popover,children:t.jsx(s2,{children:s})})]});Yk.displayName="Popover";const mb=e=>{const{value:s,onChange:n,...r}=e;return t.jsx(n2,{...r,values:[s],onChange:a=>n(a[0])})},iF=()=>{const e=Dn(),{modalStates:s}=Ru(G_.selector),{location:n}=window;return m.useEffect(()=>{const a=new URLSearchParams(n.search).get(K_);e(G_.actions.syncWithUrl({modalId:a}))},[n.search,e,s]),null};function py(e,s){return e.findAll(s.filters).map(n=>s.select?s.select(n):n.state)}function Fg(e={},s){const n=_e(s).getMutationCache(),r=m.useRef(e),a=m.useRef(null);return a.current||(a.current=py(n,e)),m.useEffect(()=>{r.current=e}),m.useSyncExternalStore(m.useCallback(o=>n.subscribe(()=>{const i=r2(a.current,py(n,r.current));a.current!==i&&(a.current=i,a2.schedule(o))}),[n]),()=>a.current,()=>a.current)}const Dt=Object.freeze(Object.defineProperty({__proto__:null,BRAND:DB,DIRTY:UB,EMPTY_PATH:FB,INVALID:zB,NEVER:qB,OK:HB,ParseStatus:VB,Schema:Bg,ZodAny:WB,ZodArray:GB,ZodBigInt:KB,ZodBoolean:QB,ZodBranded:YB,ZodCatch:JB,ZodDate:ZB,ZodDefault:XB,ZodDiscriminatedUnion:eM,ZodEffects:Wj,ZodEnum:tM,ZodError:rb,get ZodFirstPartyTypeKind(){return sM},ZodFunction:nM,ZodIntersection:rM,ZodIssueCode:Rc,ZodLazy:aM,ZodLiteral:oM,ZodMap:iM,ZodNaN:cM,ZodNativeEnum:lM,ZodNever:dM,ZodNull:uM,ZodNullable:hM,ZodNumber:pM,ZodObject:mM,ZodOptional:gM,ZodParsedType:fM,ZodPipeline:_M,ZodPromise:bM,ZodReadonly:xM,ZodRecord:vM,ZodSchema:Bg,ZodSet:jM,ZodString:yM,ZodSymbol:wM,ZodTransformer:Wj,ZodTuple:SM,ZodType:Bg,ZodUndefined:CM,ZodUnion:IM,ZodUnknown:kM,ZodVoid:TM,addIssueToContext:PM,any:NM,array:mi,bigint:AM,boolean:el,coerce:zx,custom:jI,date:Ga,datetimeRegex:EM,defaultErrorMap:OM,discriminatedUnion:LM,effect:Gj,enum:yI,function:$M,getErrorMap:RM,getParsedType:BM,instanceof:MM,intersection:DM,isAborted:UM,isAsync:FM,isDirty:zM,isValid:qM,late:HM,lazy:VM,literal:Fd,makeIssue:WM,map:GM,nan:KM,nativeEnum:QM,never:YM,null:JM,nullable:ZM,number:en,object:zt,get objectUtil(){return XM},oboolean:eD,onumber:tD,optional:sD,ostring:nD,pipeline:rD,preprocess:aD,promise:oD,quotelessJson:iD,record:cD,set:lD,setErrorMap:dD,strictObject:Up,string:at,symbol:uD,transformer:Gj,tuple:hD,undefined:wI,union:SI,unknown:Fp,get util(){return pD},void:mD},Symbol.toStringTag,{value:"Module"})),qp=8,cF=(e,s)=>{const[n,r]=m.useState(e),a=m.useMemo(()=>Ux(o=>{r(o)},s),[s]);return m.useEffect(()=>{a(e)},[e,a]),n},lF=async e=>{const s=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-1",s);return Array.from(new Uint8Array(n)).map(o=>o.toString(16).padStart(2,"0")).join("")},my=e=>["leaked-password",e],dF=(e,s)=>{const n=cF(e,500),r=s&&n!==void 0&&n.length>=qp,{data:a}=_t({queryKey:my(n),queryFn:async({queryKey:i})=>{const c=i[1];if(c===void 0)return!1;const l=await lF(c),d=l.slice(0,5),u=await(await fetch(`https://api.pwnedpasswords.com/range/${d}`,{headers:{"add-padding":"true"}})).text();let p;const h=u.split(`\r
`);for(const f of h){const[_,b]=f.split(":");if(`${d}${_}`.toUpperCase()===l.toUpperCase()){p=Number(b);break}}return p!==void 0&&p>10},enabled:r,staleTime:1/0}),o=_e();if(r){const i=o.getQueryData(my(e));if(i!==void 0)return[i,e]}return[a,n]},uF="_tooltipContent_15ul8_1",hF="_tooltipList_15ul8_5",pF="_tooltipItem_15ul8_14",mF="_valid_15ul8_31",mh={tooltipContent:uF,tooltipList:hF,tooltipItem:pF,valid:mF},gF="Password doesn't meet requirements",fF="Choose a more unique password",gb=[{id:"length",text:`${qp}+ characters`,validate:e=>e.length>=qp,passwordRule:`minlength: ${qp}`},{id:"lowercase",text:"1 lowercase character",validate:e=>!!e.match(/[a-z]/),passwordRule:"required: lower"},{id:"uppercase",text:"1 uppercase character",validate:e=>!!e.match(/[A-Z]/),passwordRule:"required: upper"},{id:"number",text:"1 number",validate:e=>!!e.match(/[0-9]/),passwordRule:"required: digit"},{id:"special",text:"1 special character",validate:e=>!!e.match(/[^A-Za-z0-9]/),passwordRule:"required: special"},{id:"leaked",text:"Avoid common patterns",validate:()=>!0,passwordRule:""}],_F=Object.fromEntries(gb.map(({id:e,validate:s})=>[e,n=>s(n)||gF])),eu=({name:e,applyConstraints:s=!1,registerProps:n,tooltipPlacement:r="right",...a})=>{var y,w;const[o,i]=m.useState(!1),{register:c,watch:l,setError:d,getFieldState:u,formState:p}=kt(),h=l(e),[g,f]=dF(h,s);m.useEffect(()=>{var E;if(!g)return;const T=(E=u(e).error)==null?void 0:E.types;setTimeout(()=>{d(e,{types:{...T,leaked:!0},message:fF})},0)},[f,g,d,e,u]);const _=(w=(y=p.errors)==null?void 0:y[e])==null?void 0:w.types,b=!!p.dirtyFields[e],x=m.useMemo(()=>t.jsxs("div",{className:mh.tooltipContent,children:[t.jsx("span",{children:"Password strength:"}),t.jsx("ul",{className:mh.tooltipList,children:gb.map(({id:S,text:T})=>t.jsx("li",{className:V(mh.tooltipItem,{[mh.valid]:b&&!(_!=null&&_[S])}),children:T},S))})]}),[b,_]),v=m.useCallback(()=>i(!0),[]),j=m.useCallback(()=>i(!1),[]);return t.jsx(ne,{content:x,visible:s&&o,placement:r,children:t.jsx(ce,{id:e,type:"password",passwordrules:gb.map(({passwordRule:S})=>S).join("; "),...a,...c(e,{required:{value:!0,message:"This field is required"},validate:s?_F:void 0,onBlur:j,...n}),onFocus:v})})},bF="_headerWithActions_1xh0n_1",xF="_heading_1xh0n_6",gy={headerWithActions:bF,heading:xF},Te=({level:e=2,size:s,className:n,titleClassName:r,actions:a,children:o,"data-qa":i,id:c})=>a?t.jsxs("div",{className:V(gy.headerWithActions,n),"data-qa":i,children:[t.jsx(J,{level:e,size:s,id:c,className:V(gy.heading,r),children:o}),a]}):t.jsx(J,{level:e,size:s,className:V(n,r),"data-qa":i,id:c,children:o}),vF="_root_1n0pi_1",jF={root:vF},Ns=({"data-qa":e,children:s,className:n})=>t.jsx("div",{className:V(jF.root,n),"data-qa":e,children:s}),yF="_root_lc3xa_1",wF="_header_lc3xa_11",SF="_description_lc3xa_18",zg={root:yF,header:wF,description:SF},Hx=({id:e,title:s,description:n,action:r,"data-qa":a,children:o})=>t.jsxs("div",{className:zg.root,"data-qa":a,children:[t.jsxs("div",{children:[t.jsxs("div",{className:zg.header,id:e,children:[t.jsx(J,{level:2,children:s}),r]}),n&&t.jsx("div",{className:zg.description,children:n})]}),o]}),CF="_border_116be_1",IF="_bg_116be_6",kF="_padding_116be_10",qg={border:CF,bg:IF,padding:kF},Rn=({className:e,children:s,bg:n=!0,padding:r=!0,border:a=!0,role:o})=>t.jsx("div",{className:V(e,{[qg.bg]:n,[qg.padding]:r,[qg.border]:a}),role:o,children:s}),TF={title:"Current billing period:"},PF="_root_1ducr_1",NF="_secondaryTextColor_1ducr_7",AF="_currentPeriod_1ducr_11",Hg={root:PF,secondaryTextColor:NF,currentPeriod:AF},EF=e=>`${mr(e.period_start,ke.Date)} to ${mr(e.period_end,ke.Date)}`,Jk=({noColor:e})=>{const{consumptionPeriods:s,isConsumptionLoading:n}=Hm(),r=s==null?void 0:s[0];return t.jsx("div",{className:V(Hg.root,{[Hg.secondaryTextColor]:!e}),children:n?t.jsx(D,{width:350,height:24}):t.jsxs(t.Fragment,{children:[t.jsx("span",{children:TF.title}),t.jsx("span",{className:Hg.currentPeriod,"data-qa":"sub_billing_period",children:r&&EF(r)})]})})},OF={compare:"Compare plans"},LF=()=>{const{trackUiInteraction:e}=k();return t.jsx(M,{openInNewTab:!0,href:ix,icon:"external_link",onClick:()=>e("billing_plans_clicked"),children:OF.compare})},$F="_highlight_owifb_1",RF={highlight:$F},fy=({children:e})=>t.jsx("span",{className:RF.highlight,children:e}),xo={unlocked:"Unlocked",unlockedText:"Autoscaling is now available for all branches and computes.",subtitle:"Enable autoscaling on your default branch?",description:e=>t.jsxs(t.Fragment,{children:["Dynamically scale from ",e.min,"-",e.max," CU to match your current workload.",t.jsx("br",{}),"Only pay for the resources you need."]}),enableText:({project:e,branch:s})=>t.jsxs(t.Fragment,{children:["Enable autoscaling for branch ",t.jsx(fy,{children:s})," in project"," ",t.jsx(fy,{children:e}),t.jsx(sn,{icon:"info_italic",children:"Adjust your settings in Branches > Branch > Edit Endpoint"})]}),later:"I'll do it later",save:"Save"},BF="_wrapper_1ilw3_1",MF="_card_1ilw3_7",DF="_unlockedTag_1ilw3_18",UF="_content_1ilw3_29",FF="_footer_1ilw3_35",Wl={wrapper:BF,card:MF,unlockedTag:DF,content:UF,footer:FF},zF=({projectId:e,projectName:s,branchName:n,endpointId:r,autoscalingRange:a,onRequestClose:o})=>{const i=Ae({defaultValues:{isAutoscalingEnabled:!1}}),c=i.watch("isAutoscalingEnabled"),{trackUiInteraction:l}=k({mountEvent:"enable_autoscaling_modal_shown"}),d=cx({projectId:e},{onSuccess:o,onError:p=>xi(p)}),u=bi(()=>{l("enable_autoscaling_modal_autoscaling_save_clicked"),d.mutate({endpointId:r,request:{endpoint:{autoscaling_limit_min_cu:a.min,autoscaling_limit_max_cu:a.max}}})});return t.jsxs(Xt,{providerProps:i,formBodyClassName:Wl.wrapper,onSubmit:u,children:[t.jsxs("div",{className:Wl.card,children:[t.jsx("span",{className:Wl.unlockedTag,children:xo.unlocked}),xo.unlockedText]}),t.jsxs("div",{className:Wl.content,children:[t.jsx(J,{level:3,size:"h5",children:xo.subtitle}),t.jsx("p",{children:xo.description(a)}),t.jsx(_s,{isSelected:c,isDisabled:i.formState.isSubmitting,onChange:p=>{l(p?"enable_autoscaling_modal_autoscaling_enabled":"enable_autoscaling_modal_autoscaling_disabled"),i.setValue("isAutoscalingEnabled",p)},wrap:!0,children:t.jsx("span",{children:xo.enableText({project:s,branch:n})})})]}),t.jsxs("div",{className:Wl.footer,children:[t.jsx(A,{appearance:"secondary",onClick:()=>{l("enable_autoscaling_modal_autoscaling_later_clicked"),o()},children:xo.later}),t.jsx(Ie,{size:"s",disabled:!c,children:xo.save})]})]})},_y={modalTitle:"Enable autoscaling",beta:"BETA"},qF="_title_1i7tw_1",HF="_betaBadge_1i7tw_7",by={title:qF,betaBadge:HF};function VF({projectId:e}){const[s,n]=m.useState(),[r,a]=m.useState(),[o,i]=m.useState(),{data:c,isLoading:l}=qs();if(!r&&!l&&c){let u;e&&(u=c.find(({id:p})=>p===e)),!u&&c.length===1&&(u=NU(c)),u&&(n(u.id),a({projectId:u.id,projectName:u.name}))}const d=cn({projectId:s??""});return m.useEffect(()=>{(async()=>{if(!s||d.status!=="success")return;const[{data:u},{data:p}]=await Promise.all([W.getProjectLimits(s),W.listProjectBranches({projectId:s})]),h=p.branches.find(v=>v.default);if(!h)return;const g=d.data.endpoints.filter(v=>!v.disabled&&v.branch_id===h.id);if(!g.length)return;const f=Bu(g);if(!f||f.autoscaling_limit_min_cu!==f.autoscaling_limit_max_cu)return;const{limits:_}=u,b={min:void 0,max:_.max_autoscaling_cu},x=Math.min(1,_.max_autoscaling_cu);x<b.max&&(b.min=x),i({branchName:h.name,endpointId:f.id,autoscalingRange:b})})()},[d.data,d.status,s]),{projectInfo:r,modalParams:o}}const WF=({projectId:e})=>{const[s,n]=m.useState(!0),{projectInfo:r,modalParams:a}=VF({projectId:e});return m.useEffect(()=>{const o=setTimeout(()=>{o2()},2e3);return()=>{clearTimeout(o)}},[]),!r||!a?null:t.jsx(It,{isOpen:s,title:t.jsxs("div",{className:by.title,children:[_y.modalTitle," ",t.jsx("span",{className:by.betaBadge,children:_y.beta})]}),width:674,onRequestClose:()=>{n(!1)},children:t.jsx(zF,{projectId:r.projectId,projectName:r.projectName,branchName:a.branchName,endpointId:a.endpointId,autoscalingRange:a.autoscalingRange,onRequestClose:()=>{n(!1)}})})},GF=()=>{const e=i2(),{isFetching:s,subscriptionType:n}=fe();return s||!e||e.plan===n?null:t.jsx(WF,{projectId:e.projectId})},Vg={upgradeTextPartOne:"Need a larger restore window? ",upgradeButtonText:"Upgrade your account",upgradeTextPartTwo:" to get up to 30 days."},KF=()=>{const{trackUiInteraction:e}=k(),[s,n]=m.useState(!1),r=fe();return!r.isFreeSubscription&&r.subscriptionType!=="launch"?null:t.jsxs(t.Fragment,{children:[t.jsx(Pt,{type:dt.HistoryRetentionLimitReached,isOpen:s,onRequestClose:()=>{n(!1)}}),t.jsxs("div",{children:[Vg.upgradeTextPartOne,t.jsx(M,{onClick:()=>{e("project_settings_storage_upgrade_clicked"),n(!0)},children:Vg.upgradeButtonText}),Vg.upgradeTextPartTwo]})]})},QF="_body_e5ojt_1",YF={body:QF},JF=({onRequestClose:e})=>{var d,u;const{trackUiInteraction:s}=k(),{email:n}=Ru(O1),{submitFeedbackForm:r}=ml(),a=c2();m.useEffect(()=>{s("billing_request_trial_modal_shown")},[]);const o=bi(()=>{e&&(s("billing_request_trial_modal_closed"),e())}),i=Ts({defaultValues:{email:n,message:""}}),{formState:{errors:c},register:l}=i;return t.jsxs(Xt,{providerProps:i,onSubmit:async p=>{s("billing_request_trial_modal_submitted");try{await r({email:p.email,message:`TRIAL REQUEST

${p.message.trim()}`.trim()}),ze(t.jsx(tt,{children:"Thanks for your request!"})),o()}catch(h){xi(h),l2(a)}},children:[t.jsxs(lx,{children:[t.jsx(B,{error:(d=c.email)==null?void 0:d.message,label:"Email",children:t.jsx(ce,{...l("email",{required:{value:!0,message:"This field is required"},pattern:{value:dx,message:"Please input a valid email"}})})}),t.jsx(B,{error:(u=c.message)==null?void 0:u.message,label:"Message",children:t.jsx(eo,{autoFocus:!0,placeholder:"Tell us about your needs",...l("message")})})]}),t.jsxs(Ee,{children:[t.jsx(ln,{onClick:()=>s("billing_request_trial_modal_closed")}),t.jsx(Ie,{children:"Request trial"})]})]})},Zk=({isOpen:e,onRequestClose:s})=>{const{subscriptionType:n}=fe(),{scale:r,business:a}=L1();let o;switch(n){case"business":o={planName:"Business",maxCu:a.limits.max_autoscaling_cu};break;case"scale":o={planName:"Scale",maxCu:r.limits.max_autoscaling_cu};break}return t.jsx(It,{title:"To extend compute size limits, request an Enterprise trial",isOpen:e,width:650,onRequestClose:s,children:t.jsxs("div",{className:YF.body,children:[o&&t.jsxs(X,{children:[o.planName," plan is limited to"," ",$n(o.maxCu)]}),t.jsx(JF,{onRequestClose:s})]})})},ZF=()=>{const{isOwnProject:e}=F(),{trackUiInteraction:s}=k(),n=fe(),[r,a]=m.useState(!1),[o,i]=m.useState(!1),c=e,l=n.subscriptionType!=="business"&&n.subscriptionType!=="scale_v3",d=l?"upgrade your plan":"request more resources",{billingUrl:u,isLoading:p}=to();return t.jsxs(t.Fragment,{children:[c&&t.jsxs(t.Fragment,{children:[t.jsx(Pt,{type:dt.ComputeSizeLimitReached,isOpen:r,onRequestClose:()=>a(!1)}),t.jsx(Zk,{isOpen:o,onRequestClose:()=>i(!1)})]}),"To extend the compute size limit,"," ",c?t.jsx(M,{onClick:()=>{s("compute_widget_upgrade_clicked"),l?a(!0):i(!0)},children:d}):t.jsx(M,{href:u,disabled:p,onClick:()=>{s("compute_widget_upgrade_clicked")},children:d})]})};function XF(){const{project:e,isOwnProject:s}=F(),n=ux(e),r=fe();if(n||s&&(r.subscriptionType==="launch"||r.subscriptionType==="scale"))return t.jsx(ZF,{})}const e5=({className:e})=>{const{trackUiInteraction:s}=k(),n=fe(),[r,a]=m.useState(!1);return n.subscriptionType!=="launch"?null:t.jsxs(t.Fragment,{children:[t.jsx(Pt,{type:dt.ComputeSizeLimitReached,isOpen:r,onRequestClose:()=>{a(!1)}}),t.jsxs("p",{className:e,children:["Need more resources?"," ",t.jsx(M,{onClick:()=>{s("edit_endpoint_upgrade_to_scale_clicked"),a(!0)},children:"Upgrade your plan"})]})]})},t5=({children:e,actionName:s,className:n})=>{const{isOwnProject:r}=F(),{trackUiInteraction:a}=k(),o=r,[i,c]=m.useState(!1),{billingUrl:l,isLoading:d}=to();return t.jsxs(t.Fragment,{children:[o&&t.jsx(Pt,{type:dt.ComputeSizeLimitReached,isOpen:i,onRequestClose:()=>{c(!1)}}),t.jsx(M,{href:o?void 0:l,disabled:d,className:n,onClick:()=>{a(s),o&&c(!0)},children:e||"Upgrade to a paid plan"})]})},s5=e=>{const{isFreeSubscription:s}=fe();return s?t.jsx(t5,{...e}):null},Gl={title:"Members invited",inviteMore:"Invite more",done:"Done",sentText:"The following people will get an email invite soon.",footerText:"If they were Collaborators, they'll be promoted to Members."},n5="_modal_1ca1r_1",r5={modal:n5},a5=[{key:"email"},{key:"role",renderValue:({role:e})=>Ma[e]}],o5=({invitations:e,onInviteMore:s,onRequestClose:n})=>t.jsxs(oa,{isOpen:!0,title:Gl.title,onRequestClose:n,children:[t.jsxs(ia,{className:r5.modal,children:[t.jsx(B,{label:Gl.sentText,children:t.jsx(Mn,{cols:a5,data:e,keyField:"email",hideHeader:!0})}),t.jsx(P,{appearance:"secondary",children:Gl.footerText})]}),t.jsxs(Ee,{children:[t.jsx(A,{appearance:"secondary",size:"l",onClick:()=>{s==null||s()},children:Gl.inviteMore}),t.jsx(dn,{size:"l",children:Gl.done})]})]}),Vx=()=>{const{currentData:e,isFetching:s}=d2();return s||!e?{isLoading:!0,allowInvites:!1}:{isLoading:!1,allowInvites:!$1(e.subscription_type)}},im=({children:e="Invite member",...s})=>{const{trackUiInteraction:n}=k(),{org:r}=ae(),a=(r==null?void 0:r.name)??"",{isOrgAdmin:o}=qt(),{allowInvites:i,isLoading:c}=Vx(),l=it(st.InviteOrgMembers),d=it(st.InviteOrgMembersSuccess,!1),[u,p]=m.useState(),[h,g]=m.useState(!1);return c?null:i?t.jsxs(t.Fragment,{children:[l.isModalOpen&&t.jsx(u2,{orgName:a,onSuccess:f=>{n("org_invite_member_confirmed"),l.closeModal(),p(f),d.openModal()},onRequestClose:()=>{n("org_invite_member_dismissed"),l.closeModal()}}),d.isModalOpen&&u!==void 0&&t.jsx(o5,{invitations:u,onRequestClose:()=>{n("org_invite_member_success_dismissed"),d.closeModal()},onInviteMore:()=>{n("org_invite_member_success_invite_more_clicked"),d.closeModal(),l.openModal()}}),t.jsx(A,{onClick:()=>{n("org_invite_member_clicked"),l.openModal()},disabled:!o,...s,children:e})]}):t.jsxs(t.Fragment,{children:[t.jsx(Pt,{type:dt.AllPlansSelection,isOpen:h,onRequestClose:()=>g(!1)}),t.jsx(A,{onClick:()=>{n("org_invite_member_upgrade_clicked"),g(!0)},children:"Upgrade plan"})]})},i5=e=>{if(e.limits.length===0)return;const s=e.limits[0];switch(s.name){case"subscription_type":{const n=Q_(s.expected)?Qa[s.expected]:s.expected,r=Q_(s.actual)?Qa[s.actual]:s.actual;return`Cannot transfer projects from ${n} to ${r} plan.`}case"projects_count":{const n=Number(s.expected)-Number(s.actual);return`Organization has ${n===0?"no":`only ${n}`} ${Ms("slot",n)} left for projects.`}case"project_region":return`Project regions (${s.actual}) are not allowed in the target organization.`;default:return"Unknown error"}},c5=e=>{if(e.projects.length===0)return;const s=[],n=[],r=[];for(const a of e.projects)switch(a.integration){case"github":{s.push(a.id);break}case"vercel":{n.push(a.id);break}case"outerbase":{r.push(a.id);break}default:return"Unknown error"}return r.length>0?`Cannot transfer projects with Outerbase integration. Outerbase projects: ${r.join(",")}`:s.length>0&&n.length>0?`Cannot transfer projects with Github/Vercel integrations. ${s.length} projects have github integration and ${n.length} have vercel integration`:s.length>0?`Cannot transfer projects with Github integration. Github projects: ${s.join(",")}`:n.length>0?`Cannot transfer projects with Vercel integrations. Vercel projects: ${n.join(",")}`:"Unknown error"},l5=e=>{e&&typeof e=="object"&&"limits"in e?Ct(i5(e)):e&&typeof e=="object"&&"projects"in e?Ct(c5(e)):Y(e)},Xk=()=>{const{orgId:e}=ae();return e?tm.useUpdateBillingAccountMutation():Mu.useUpdateBillingAccountMutation()},d5=({onSuccess:e,onFail:s,children:n})=>{const{paymentInfo:r}=Lm(),{orgId:a}=ae(),[o]=Xk(),i=Ts({defaultValues:{email:r==null?void 0:r.email}}),c=async({email:l})=>{try{await o({billing_account:{email:l,org_id:a}}),e&&e()}catch(d){s&&s(d)}};return t.jsx(es,{...i,children:t.jsx(Ht,{onSubmit:i.handleSubmit(c),children:n})})},u5=()=>{var n;const{register:e,formState:s}=kt();return t.jsx(t.Fragment,{children:t.jsx(B,{error:(n=s.errors.email)==null?void 0:n.message,label:"Email",children:t.jsx(ce,{...e("email",{required:{value:!0,message:"This field is required"},pattern:{value:dx,message:"Please input a valid email"}})})})})},h5=({isOpen:e,onRequestClose:s})=>{const{trackUiInteraction:n}=k();return t.jsx(oa,{title:"Edit Billing Email",isOpen:e,onRequestClose:()=>{n("billing_edit_email_dismissed"),s==null||s()},children:t.jsxs(d5,{onSuccess:()=>{ze(t.jsx(tt,{children:"Email updated"})),s==null||s()},onFail:()=>{ze(t.jsx(ki,{children:"Request to update email failed"}))},children:[t.jsx(ia,{children:t.jsx(u5,{})}),t.jsxs(Ee,{children:[t.jsx(so,{}),t.jsx(Ie,{onClick:()=>n("billing_edit_email_submitted"),children:"Send"})]})]})})},p5=()=>Mu.useLazyGetBillingAvailableCountriesQuery(void 0),vt={success:"Billing info was saved",info:"Changes will apply to future invoices.",required:"This field is required",title:"Edit billing info",companyLabel:"Company name",countryLabel:"Country",address1Label:"Address line 1",address2Label:"Address line 2",cityLabel:"City",postalCodeLabel:"Postal/ZIP",stateLabel:"State",taxTypeLabel:"VAT/Tax ID Type",taxIdLabel:"VAT/Tax ID",save:"Save",optional:"Optional"},m5="_root_10rv8_1",g5="_info_10rv8_7",f5="_field_10rv8_11",_5="_smallField_10rv8_15",fn={root:m5,info:g5,field:f5,smallField:_5},b5=({isOpen:e,onRequestClose:s})=>{var S,T,E,H,R,$,K,Z,U;const{trackUiInteraction:n}=k(),{orgId:r}=ae(),{paymentInfo:a}=Lm(),[o,{data:i}]=p5(),[c,{isLoading:l}]=Xk();m.useEffect(()=>{e&&o(void 0)},[e,o]);const d=m.useMemo(()=>(i==null?void 0:i.map(({code:te,name:oe})=>({value:te,label:oe})))??[],[i]),u=Ae({defaultValues:{name:a==null?void 0:a.name,state:a==null?void 0:a.addressState,city:a==null?void 0:a.addressCity,line1:a==null?void 0:a.addressLine1,line2:a==null?void 0:a.addressLine2,postalCode:a==null?void 0:a.addressPostalCode,taxIdValue:a==null?void 0:a.taxId},shouldUnregister:!0}),{register:p,formState:h,watch:g,setValue:f}=u,_=g("country"),b=!!g("taxIdValue"),x=m.useMemo(()=>{var te,oe;return((oe=(te=i==null?void 0:i.find(({code:se})=>se===_))==null?void 0:te.tax_ids)==null?void 0:oe.map(({type:se,description:L})=>({value:se,label:L})))??[]},[i,_]),v=()=>{b||f("taxIdType","")},j=()=>{f("taxIdValue",""),f("taxIdType","")},y=()=>{s(),pe(vt.success)},w=async({name:te,country:oe,state:se,city:L,line1:ee,line2:ie,postalCode:He,taxIdType:Ot,taxIdValue:mn})=>{try{await c({billing_account:{name:te,org_id:r,billing_info:{country:oe,city:L,state:se,line1:ee,line2:ie,postal_code:He,tax_id:mn&&Ot?{id_type:Ot,id:mn}:void 0}}}).unwrap(),y()}catch(Hn){$m(Hn)}};return t.jsxs(gs,{modalProps:{title:vt.title,isOpen:e,maxWidth:700,onRequestClose(){n("billing_edit_info_dismissed"),s()}},providerProps:u,onSubmit:w,children:[t.jsxs(qe,{className:fn.root,children:[t.jsx(X,{className:fn.info,children:vt.info}),t.jsx(B,{label:vt.companyLabel,error:(S=h.errors.name)==null?void 0:S.message,className:fn.field,children:t.jsx(ce,{...p("name",{required:{value:!0,message:vt.required}}),disabled:l})}),t.jsx(B,{label:vt.countryLabel,error:(T=h.errors.country)==null?void 0:T.message,className:fn.field,children:t.jsx(ye,{name:"country",defaultValue:a==null?void 0:a.addressCountry,rules:{required:{value:!0,message:vt.required}},control:u.control,render:({field:{onChange:te,...oe}})=>t.jsx(lt,{options:d,filterable:!0,"aria-label":vt.countryLabel,disabled:l,onChange:se=>{te(se),j()},...oe})})}),t.jsx(B,{label:vt.address1Label,error:(E=h.errors.line1)==null?void 0:E.message,className:fn.field,children:t.jsx(ce,{...p("line1",{required:{value:!0,message:vt.required}}),disabled:l})}),t.jsx(B,{label:vt.address2Label,error:(H=h.errors.line2)==null?void 0:H.message,className:fn.field,children:t.jsx(ce,{...p("line2"),disabled:l})}),t.jsx(B,{label:vt.cityLabel,error:(R=h.errors.city)==null?void 0:R.message,className:fn.smallField,children:t.jsx(ce,{...p("city",{required:{value:!0,message:vt.required}}),disabled:l})}),t.jsx(B,{label:vt.postalCodeLabel,error:($=h.errors.postalCode)==null?void 0:$.message,className:fn.smallField,children:t.jsx(ce,{...p("postalCode",{required:{value:!0,message:vt.required}}),disabled:l})}),t.jsx(B,{label:vt.stateLabel,error:(K=h.errors.state)==null?void 0:K.message,className:fn.smallField,children:t.jsx(ce,{...p("state"),disabled:l})}),t.jsx(B,{label:vt.taxTypeLabel,error:(Z=h.errors.taxIdType)==null?void 0:Z.message,className:fn.field,children:t.jsx(ye,{name:"taxIdType",defaultValue:a==null?void 0:a.taxIdType,rules:{required:{value:b,message:vt.required}},control:u.control,render:({field:te})=>t.jsx(lt,{"aria-label":vt.taxTypeLabel,options:x,disabled:l||!x.length,placeholder:b?void 0:vt.optional,...te})})}),t.jsx(B,{label:vt.taxIdLabel,error:(U=h.errors.taxIdValue)==null?void 0:U.message,className:fn.field,children:t.jsx(ce,{...p("taxIdValue"),disabled:l||!x.length,placeholder:vt.optional,onBlur:v})})]}),t.jsxs(Ee,{children:[t.jsx(ln,{disabled:l}),t.jsx(Ie,{onClick:()=>n("billing_edit_info_submitted"),children:vt.save})]})]})},x5=({label:e,appearance:s})=>{const{trackUiInteraction:n}=k(),[r,a]=m.useState(!1),o=()=>a(!0),i=()=>a(!1);return t.jsxs(t.Fragment,{children:[t.jsx(b5,{isOpen:r,onRequestClose:i}),t.jsx(R1,{appearance:s,onClick:()=>{n("billing_edit_info_clicked"),o()},label:e})]})},Vi={success:"success",required:"This field is required",relatedCharge:"Related charge",description:"Problem description",descriptionPlaceholder:"Please provide a detailed description of the problem",subject:{paid:"Refund request",issued:"Credit note request"}},v5=({isOpen:e,chargeInfo:s,onRequestClose:n,invoiceId:r,amount:a,requestSubject:o,invoiceStatus:i})=>{var x,v;const{trackUiInteraction:c}=k(),{submitRefundRequestForm:l}=ml(),{data:d}=bt(),[u,p]=m.useState(!1),h=Ae({defaultValues:{relatedCharge:s}}),{register:g,formState:f,reset:_}=h,b=async({description:j})=>{if(d!==void 0)try{p(!0),await l(d.email,{subject:Vi.subject[i],invoiceId:r,description:j,amount:a}),pe(Vi.success),n()}catch(y){Y(y)}finally{p(!1)}};return m.useEffect(()=>{e&&_()},[e,_]),t.jsxs(gs,{modalProps:{title:o,isOpen:e,width:560,onRequestClose(){c("billing_invoice_refund_request_dismissed"),n()}},providerProps:h,onSubmit:b,children:[t.jsx(qe,{children:t.jsxs(lx,{children:[t.jsx(B,{label:Vi.relatedCharge,error:(x=f.errors.relatedCharge)==null?void 0:x.message,children:t.jsx(ce,{...g("relatedCharge"),disabled:!0})}),t.jsx(B,{label:Vi.description,error:(v=f.errors.description)==null?void 0:v.message,children:t.jsx(eo,{placeholder:Vi.descriptionPlaceholder,autoFocus:!0,rows:3,disabled:u,...g("description",{required:{value:!0,message:Vi.required}})})})]})}),t.jsxs(Ee,{children:[t.jsx(ln,{disabled:u}),t.jsx(Ie,{onClick:()=>c("billing_invoice_refund_request_submitted"),children:o})]})]})},Wg={heading:"Neon subscription managed by Vercel",text:t.jsxs("span",{children:["Your Neon subscription is managed directly in your Vercel account.",t.jsx("br",{})," See ",t.jsx("strong",{children:"Integrations > Neon Database > Settings"})," ","in Vercel."]}),button:"Manage Neon subscription"},j5="_root_czdvg_1",y5={root:j5},w5=()=>{const{orgId:e,isLoading:s}=ae();return t.jsxs("div",{className:y5.root,children:[t.jsx(q,{name:"vercel",size:46}),t.jsx(J,{level:4,children:Wg.heading}),t.jsx(P,{align:"center",children:Wg.text}),t.jsx(A,{as:"a",appearance:"primary",icon:"external_link",iconSide:"right",target:"_blank",rel:"noopener noreferrer",href:`/api/v2/marketplace/vercel/installation_url_redirect?org_id=${e}`,loading:s,children:Wg.button})]})},Wi={companyName:"Company name",address:"Address",city:"City",postal:"Postal/ZIP",country:"Country",tax:"VAT/Tax ID"},S5="_root_1x455_1",C5="_doubleWidth_1x455_8",I5="_item_1x455_12",Hc={root:S5,doubleWidth:C5,item:I5},k5=()=>t.jsxs("div",{className:Hc.root,children:[t.jsx(D,{width:"100%",height:44,className:Hc.doubleWidth}),t.jsx(D,{width:"100%",height:44,className:Hc.doubleWidth}),t.jsx(D,{width:"100%",height:44}),t.jsx(D,{width:"100%",height:44}),t.jsx(D,{width:"100%",height:44}),t.jsx(D,{width:"100%",height:44})]}),T5="-",Gi=({label:e,value:s,isDoubleWidth:n=!1})=>t.jsxs("div",{className:V(Hc.item,{[Hc.doubleWidth]:n}),children:[t.jsx(ts,{children:e}),t.jsx(ts,{appearance:"secondary",children:s||T5})]}),P5=()=>{const{paymentInfo:e}=Lm();if(!e)return null;const{name:s,addressLine1:n,addressLine2:r,addressCity:a,addressPostalCode:o,addressCountry:i,addressCountryName:c,taxId:l}=e;return t.jsxs("div",{className:Hc.root,children:[t.jsx(Gi,{label:Wi.companyName,value:s,isDoubleWidth:!0}),t.jsx(Gi,{label:Wi.address,value:`${n} ${r}`,isDoubleWidth:!0}),t.jsx(Gi,{label:Wi.city,value:a}),t.jsx(Gi,{label:Wi.postal,value:o}),t.jsx(Gi,{label:Wi.country,value:c??i}),t.jsx(Gi,{label:Wi.tax,value:l})]})},Go={description:"Charges are applied to your card on the first day of the month.",paymentMethod:"Payment method",billingEmail:"Billing email",edit:"Edit",billingInfo:"Billing Info"},N5="_cards_1s849_1",A5="_doubleWidth_1s849_7",E5="_header_1s849_11",O5="_cardBg_1s849_18",Bs={cards:N5,doubleWidth:A5,header:E5,cardBg:O5},L5=()=>{const{trackUiInteraction:e}=k(),[s,n]=m.useState(!1),r=()=>n(!0),a=()=>n(!1);return t.jsxs(t.Fragment,{children:[t.jsx(h5,{isOpen:s,onRequestClose:a}),t.jsx(R1,{appearance:"link",onClick:()=>{e("billing_edit_email_clicked"),r()},label:Go.edit})]})},$5=()=>t.jsxs(t.Fragment,{children:[t.jsxs(Rn,{children:[t.jsxs("div",{className:Bs.header,children:[t.jsx(D,{width:160,height:28}),t.jsx(D,{width:26,height:20})]}),t.jsx(D,{width:"100%",height:21})]}),t.jsxs(Rn,{children:[t.jsxs("div",{className:Bs.header,children:[t.jsx(D,{width:160,height:28}),t.jsx(D,{width:26,height:20})]}),t.jsx(D,{width:"100%",height:21})]}),t.jsxs(Rn,{className:Bs.doubleWidth,children:[t.jsxs("div",{className:Bs.header,children:[t.jsx(D,{width:100,height:28}),t.jsx(D,{width:26,height:20})]}),t.jsx(k5,{})]})]}),R5=({id:e,title:s})=>{const{paymentMethod:n,isFetching:r}=fe(),{paymentInfo:a,isLoading:o}=Lm(),i=n==="stripe",c=r||o;return t.jsxs(Hx,{title:s,id:e,children:[t.jsx(ts,{children:Go.description}),t.jsx("div",{className:Bs.cards,children:c?t.jsx($5,{}):t.jsxs(t.Fragment,{children:[i&&t.jsxs(Rn,{className:Bs.cardBg,children:[t.jsxs("div",{className:Bs.header,children:[t.jsx(J,{level:3,children:Go.paymentMethod}),t.jsx(h2,{appearance:"link",label:Go.edit})]}),t.jsx(p2,{})]}),t.jsxs(Rn,{className:V(Bs.cardBg,{[Bs.doubleWidth]:!i}),children:[t.jsxs("div",{className:Bs.header,children:[t.jsx(J,{level:3,children:Go.billingEmail}),t.jsx(L5,{})]}),t.jsx(ts,{appearance:"secondary",children:a==null?void 0:a.email})]}),t.jsxs(Rn,{className:V(Bs.cardBg,Bs.doubleWidth),children:[t.jsxs("div",{className:Bs.header,children:[t.jsx(J,{level:3,children:Go.billingInfo}),t.jsx(x5,{appearance:"link",label:Go.edit})]}),t.jsx(P5,{})]})]})})]})},xy={freeV2ToV3MigrationText:e=>t.jsxs(t.Fragment,{children:["We've updated our Free plan. It now includes 10 projects, each with 0.5 GB of storage and 50 compute hours. See the details on our"," ",t.jsx(M,{href:ix,openInNewTab:!0,icon:"external_link",children:"pricing page"}),". ",t.jsx(M,{onClick:e,children:"Upgrade for more"}),"."]}),hideBtn:"Got it"},B5="_alert_1lbsr_1",M5={alert:B5},D5="free_v2",vy="free",U5=4,F5=e=>{var r,a,o;if(!(e!=null&&e.length)||((r=e[0].plan_details)==null?void 0:r.name)!==vy)return!1;const n=e.slice(0,U5);for(let i=0;i<n.length;i+=1){if(i+1===n.length)return!1;const c=n[i];if(((a=n[i+1].plan_details)==null?void 0:a.name)===D5&&((o=c.plan_details)==null?void 0:o.name)===vy)return!0}return!1},z5=()=>{const{orgId:e}=ae(),{consumptionPeriods:s,isConsumptionLoading:n}=Hm(),[r,a]=nn(gt.FreeV2ToV3MigrationAlertDimissed,e||"user",!1),[o,i]=m.useState(!1);return r||n||!F5(s)?null:t.jsxs(t.Fragment,{children:[t.jsx(X,{appearance:"info",className:M5.alert,action:t.jsx(M,{onClick:()=>a(!0),children:xy.hideBtn}),children:t.jsx(P,{children:xy.freeV2ToV3MigrationText(()=>i(!0))})}),t.jsx(Pt,{type:dt.Default,isOpen:o,onRequestClose:()=>i(!1)})]})},q5={description:"Our plans are built to fit the size of your project. Pay a flat rate for a set plan, plus a little extra if you go over. Upgrade to the next tier as your project grows."},H5="_root_3tz0v_1",V5="_section_3tz0v_9",W5="_sectionHeader_3tz0v_16",G5="_sectionTitle_3tz0v_22",gh={root:H5,section:V5,sectionHeader:W5,sectionTitle:G5},Ki={planName:e=>`${e} Plan`,currentPlan:"Current plan",monthMinimumSpend:"month minimum spend",month:"month",whatIsIncluded:"What's included:",whatIsIncludedPerProject:"What's included per project:"},K5="_root_1xuz4_1",Q5="_loaderWrapper_1xuz4_6",Y5="_content_1xuz4_14",J5="_titleAndPrice_1xuz4_20",Z5="_title_1xuz4_20",X5="_price_1xuz4_33",ez="_amount_1xuz4_37",tz="_features_1xuz4_41",sz="_featuresList_1xuz4_47",nz="_featureItem_1xuz4_56",rz="_featureIcon_1xuz4_62",Ls={root:K5,loaderWrapper:Q5,content:Y5,titleAndPrice:J5,title:Z5,price:X5,amount:ez,features:tz,featuresList:sz,featureItem:nz,featureIcon:rz};function az(){const e=B1(),s=hx();return m.useMemo(()=>{var o,i,c;if(!e)return;const n=[],r=m2((o=e.pg_settings)==null?void 0:o["neon.max_cluster_size"]);r&&n.push({description:`${r} storage`}),os(s.max_autoscaling_cu)&&n.push({description:`Autoscaling to ${M1(s.max_autoscaling_cu)}`,hint:g2(s.max_autoscaling_cu)});const a=s.per_project.compute_time_seconds;if(os(a))n.push({description:`${ri(a)} compute hours`});else{const l=f2((c=(i=e.metrics)==null?void 0:i.items)==null?void 0:c.per_project_aggr_compute_time,d=>`${ri(d)} compute hours`);l&&n.push(l)}return os(s.max_branches)&&n.push({description:`${s.max_branches} branches`}),n},[s,e])}const oz=({titleId:e})=>{const{isPricingV3Account:s}=fe(),n=D1(),r=az();return n?t.jsx("div",{className:Ls.root,children:t.jsxs("div",{className:Ls.content,children:[t.jsxs("div",{className:Ls.titleAndPrice,children:[t.jsxs("div",{id:e,className:Ls.title,children:[t.jsx(J,{level:1,size:"h2",children:Ki.planName(n.title)}),t.jsx(Ne,{children:Ki.currentPlan})]}),t.jsx("div",{className:Ls.price,children:U1(n.minimumSpend)?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:Ls.amount,children:Us(n.minimumSpend??0,!0)})," ","/ ",Ki.monthMinimumSpend]}):t.jsxs(t.Fragment,{children:[t.jsx("span",{className:Ls.amount,children:Us(n.cost??0,!0)})," ","/ ",Ki.month]})})]}),t.jsxs("div",{className:Ls.features,children:[t.jsx(J,{level:2,size:"h5",children:s?Ki.whatIsIncludedPerProject:Ki.whatIsIncluded}),t.jsx("ul",{className:Ls.featuresList,"data-qa":"current_plan_features_list",children:(r??n.usageMetrics).filter(({id:a})=>a!=="compute").map(({description:a,hint:o})=>t.jsxs("li",{className:Ls.featureItem,children:[t.jsx(q,{name:"check",size:24,className:Ls.featureIcon}),a,o&&t.jsx(sn,{icon:"info_italic",children:o})]},a))})]})]})}):t.jsx("div",{className:Ls.root,children:t.jsx("div",{id:e,className:Ls.loaderWrapper,children:t.jsx(on,{})})})},iz=({id:e,title:s})=>{const{trackUiInteraction:n}=k(),{shouldDisplayPricingV3:r}=F1(),a=o=>{n(`billing_upgrade_to_${z1(o)}_plan_clicked`)};return t.jsxs(t.Fragment,{children:[t.jsx(z5,{}),t.jsxs("div",{className:gh.root,"data-qa":"billing_plans_section",children:[t.jsx(oz,{titleId:e}),t.jsxs("div",{className:gh.section,children:[t.jsxs("div",{className:gh.sectionHeader,children:[t.jsxs("div",{className:gh.sectionTitle,children:[t.jsx(J,{level:2,size:"h3",children:s}),t.jsx(LF,{})]}),t.jsx(ts,{children:q5.description})]}),r?t.jsx(AR,{hideCurrentPlan:!0,onChangePlanClick:a}):t.jsx(_2,{type:dt.Default,compact:!0,isFullFeatureList:!0,onUpgradeClick:a})]})]})]})},Gg={awsInfo:"To manage your Neon subscription for the above IDs, go to the AWS Marketplace Subscription Management.",awsAccountId:"AWS Account ID",awsEntitlementId:"AWS Entitlement ID"},cz="_awsCard_lpo77_1",lz="_awsCardItem_lpo77_7",Kg={awsCard:cz,awsCardItem:lz},dz=()=>{const{awsAccountId:e="N/A",awsEntitlementId:s="N/A"}=b2();return t.jsxs("div",{className:Kg.awsCard,children:[t.jsx(X,{children:Gg.awsInfo}),t.jsxs("div",{className:Kg.awsCardItem,children:[t.jsx(ts,{appearance:"primary",children:Gg.awsAccountId}),t.jsx(ts,{appearance:"secondary","data-qa":"aws_account_id",children:e})]}),t.jsxs("div",{className:Kg.awsCardItem,children:[t.jsx(ts,{appearance:"primary",children:Gg.awsEntitlementId}),t.jsx(ts,{appearance:"secondary","data-qa":"aws_entitlement_id",children:s})]})]})},Zm=()=>{const{orgId:e}=ae(),s=q1(e),{data:n,isLoading:r,error:a,refetch:o}=Mu.useGetBillingCreditBalanceQuery(s?Y_:e);return{creditBalance:n,isLoading:r,error:a,refetch:o}},vo={totalCost:"Total charges to date",totalCostV2Explanation:"Includes your plan's monthly fee and charges for extra usage beyond your plan's monthly allowances. The plan fee is prorated if you changed your plan during this billing period. This amount does not account for any credits you may have.",totalCostV3BelowMinimumSpendExplanation:"Includes your plan’s minimum monthly spend and any charges for usage beyond the included monthly allowances. The minimum spend amount is prorated if you changed plans during the billing period. This amount doesn’t reflect any applied credits.",totalCostV3Explanation:"This amount doesn’t reflect any applied credits.",creditsBalance:"Credit balance",creditsBalanceExplanation:"Credits are applied to future invoices before we charge your payment method. Once your credits run out, we’ll charge your default payment method.",minimumMonthlySpendApplied:e=>`${Us(e)} minimum monthly fee applied`},uz="_summary_17qiv_1",hz="_totalCostsAmount_17qiv_13",pz="_minimumMonthlySpendApplied_17qiv_17",fh={summary:uz,totalCostsAmount:hz,minimumMonthlySpendApplied:pz},mz=()=>{const{isPricingV3Account:e}=fe(),{consumptionPeriods:s,isConsumptionLoading:n}=Hm(),{projectedServiceFee:r,isLoading:a}=Vm(),{extraAllowanceProjectedTotalCost:o,isLoading:i}=Ex(),{isLoading:c,creditBalance:l}=Zm(),{metrics:d,isLoading:u}=x2(),p=e?o:r+o,h=a||i||n||c||u,{totalCost:g,isTotalCostBelowMinimumSpend:f,planMinimumSpend:_}=m.useMemo(()=>{var j;const x=((j=s==null?void 0:s[0])==null?void 0:j.cost_total)||p,v=v2(d??{});return!e||v===0?{totalCost:x,planMinimumSpend:v}:{totalCost:Math.max(v,x),isTotalCostBelowMinimumSpend:x<v,planMinimumSpend:v}},[s,p,e,d]),b=m.useMemo(()=>e?f?vo.totalCostV3BelowMinimumSpendExplanation:vo.totalCostV3Explanation:vo.totalCostV2Explanation,[e,f]);return t.jsxs("div",{className:fh.summary,children:[t.jsxs("span",{children:[vo.totalCost," ",t.jsx(Oj,{children:b})]}),h?t.jsx(D,{width:80,height:20}):t.jsxs(t.Fragment,{children:[t.jsx("span",{className:fh.totalCostsAmount,"data-qa":"total_cost",children:Us(g)}),e&&f&&t.jsx("span",{className:fh.minimumMonthlySpendApplied,children:vo.minimumMonthlySpendApplied(_??0)}),l&&l.balance_cents>0&&t.jsxs(t.Fragment,{children:[t.jsxs("span",{children:[vo.creditsBalance," ",t.jsx(Oj,{children:vo.creditsBalanceExplanation})]}),t.jsx("span",{className:fh.totalCostsAmount,"data-qa":"credits_balance",children:Us(l.balance_cents)})]})]})]})},gz={viewInOrb:"View detailed usage in Orb"},fz="_directCard_1hn60_1",_z={directCard:fz},bz=()=>{const{portalUrl:e}=fe();return t.jsx("div",{className:_z.directCard,children:t.jsx(M,{openInNewTab:!0,href:e,icon:"external_link",children:gz.viewInOrb})})},xz={azureOrgInfo:t.jsxs(t.Fragment,{children:["To change the billing plan for your Azure subscription, see"," ",t.jsx(M,{href:j2,openInNewTab:!0,children:"changing your plan"}),"."]})},vz=()=>{const{isAzureOrg:e}=ae();return t.jsx(t.Fragment,{children:e&&t.jsx(X,{children:xz.azureOrgInfo})})},jz="_collapseIcon_2dyyp_1",yz="_collapseIcon_collapsed_2dyyp_8",wz="_usagePurchases_2dyyp_12",Sz="_usageItem_2dyyp_20",Cz="_usageTitle_2dyyp_31",Iz="_usageDetails_2dyyp_37",kz="_itemDescription_2dyyp_42",Tz="_itemCost_2dyyp_47",Tr={collapseIcon:jz,collapseIcon_collapsed:yz,usagePurchases:wz,usageItem:Sz,usageTitle:Cz,usageDetails:Iz,itemDescription:kz,itemCost:Tz},Wx=({title:e,description:s,cost:n=0,purchases:r=[],"data-qa":a})=>{const[o,i]=m.useState(!0),c=()=>i(d=>!d),l=!!r.length;return t.jsxs("div",{className:Tr.usageItem,"data-qa":a,children:[t.jsx("div",{className:Tr.usageDetails,children:t.jsxs("div",{className:Tr.usageTitle,children:[l&&t.jsx(ta,{appearance:"default",onClick:c,iconName:"chevron_down",iconSize:20,className:V(Tr.collapseIcon,{[Tr.collapseIcon_collapsed]:o})}),t.jsx("span",{"data-qa":"usage_title",children:e})]})}),t.jsx("div",{className:Tr.itemDescription,children:s}),t.jsx("div",{className:Tr.itemCost,children:Us(n)}),l&&t.jsx(qm,{collapsed:o,className:Tr.usagePurchases,children:r.map(({purchasedOn:d,purchaseDescription:u})=>t.jsx("div",{className:Tr.itemDescription,children:u},d))})]})},ai={extraUsage:"Extras",month:"month",plan:"plan",noExtrasDescription:"No extra charges yet — current usage is covered by your plan.",noChargesDescription:"No charges yet.",archiveStorage:"Archive storage"},Gn={computeHours:"Compute",rootBranchesStorage:"Storage (root branches)",childBranchesStorage:"Storage (child branches)",privateDataTransfer:"Private network transfer",publicDataTransfer:"Public network transfer",branches:"Extra branches",pitr:"Instant restore storage",compute:"compute",hour:"hour"};class eT{constructor(s){Aj(this,"v3Metrics");this.v3Metrics=s}collectAccountUsageItems(){return[...this.collectComputeUsage(),...this.collectStorageUsage(),...this.collectDataTransferUsage(),...this.collectBranchesUsage(),...this.collectPitr()]}collectProjectUsageMetrics(s,n){let r;s?r={usage:(n==null?void 0:n.compute_time_seconds)??0}:r=this.findExtraUsageAndCost("per_project_aggr_compute_time");const a=this.findExtraUsageAndCost("per_project_aggr_outbound_public_network_traffic"),{rootBranchesStorage:o,childBranchesStorage:i}=this.getTotalStorage(),c=o.usage+i.usage;return{computeSeconds:r.usage,storage:c,privateTransfer:this.getTotalPrivateTransfer().usage,publicTransfer:a.usage}}collectComputeUsage(){const s=this.findExtraUsageAndCost("per_project_aggr_compute_time");return[{displayName:Gn.computeHours,description:`${ri(s.usage)} ${Gn.compute} ${Ms(Gn.hour,s.usage/y2)}`,cost:s.cost}]}collectStorageUsage(){const{rootBranchesStorage:s,childBranchesStorage:n}=this.getTotalStorage();return[{displayName:Gn.rootBranchesStorage,description:bu(s.usage),cost:s.cost},{displayName:Gn.childBranchesStorage,description:Ds(n.usage),cost:n.cost}]}getTotalStorage(){const s=this.findExtraUsageAndCost("per_project_aggr_cumulative_root_branch_logical_size"),n=this.findExtraUsageAndCost("per_project_aggr_cumulative_child_branch_change_size");return{rootBranchesStorage:s,childBranchesStorage:n}}collectDataTransferUsage(){const s=this.findExtraUsageAndCost("per_project_aggr_outbound_public_network_traffic"),n=this.getTotalPrivateTransfer();return[{displayName:Gn.privateDataTransfer,description:Ds(n.usage),cost:n.cost},{displayName:Gn.publicDataTransfer,description:Ds(s.usage),cost:s.cost}]}collectBranchesUsage(){const s=this.findExtraUsageAndCost("per_project_aggr_hourly_active_extra_child_branches");return[{displayName:Gn.branches,description:`${s.usage} ${Ms(Gn.hour,s.usage)}`,cost:s.cost}]}collectPitr(){const s=this.findExtraUsageAndCost("per_project_aggr_cumulative_root_branch_history_size");return[{displayName:Gn.pitr,description:bu(s.usage),cost:s.cost}]}getTotalPrivateTransfer(){const s=this.findExtraUsageAndCost("per_project_aggr_inbound_private_network_traffic"),n=this.findExtraUsageAndCost("per_project_aggr_outbound_private_network_traffic");return{usage:s.usage+n.usage,cost:s.cost+n.cost}}findExtraUsageAndCost(s){var r;const n=(r=this.v3Metrics)==null?void 0:r.find(a=>a.name===s);return n?n.usage||n.cost?{cost:n.cost??0,usage:n.usage??0}:this.calcSubItemsUsageAndCost(n.sub_items??[]):{usage:0,cost:0}}calcSubItemsUsageAndCost(s){return s.reduce((n,r)=>{var o;if(!((o=r.sub_items)!=null&&o.length))return{cost:n.cost+(r.cost??0),usage:n.usage+(r.usage??0)};const a=this.calcSubItemsUsageAndCost(r.sub_items);return{cost:n.cost+a.cost,usage:n.usage+a.usage}},{cost:0,usage:0})}}const Pz=()=>{const{consumptionPeriods:e,isConsumptionLoading:s}=Hm(),n=B1(),r=e==null?void 0:e[0];return{metrics:m.useMemo(()=>!(r!=null&&r.v3_metrics)||!n?[]:new eT(r.v3_metrics).collectAccountUsageItems(),[n,r]),isLoading:s}},Nz="_noChargesDescription_10078_1",Az="_wrapper_10078_6",jy={noChargesDescription:Nz,wrapper:Az},Ez=()=>t.jsxs(t.Fragment,{children:[t.jsx(D,{width:120,height:24}),t.jsx(D,{width:230,height:24}),t.jsx(D,{width:50,height:24})]}),Oz=()=>{const{metrics:e,isLoading:s}=Pz(),n=m.useMemo(()=>e.filter(({cost:r})=>r>0),[e]);return s?t.jsx(Ez,{}):n.length?t.jsx("div",{className:jy.wrapper,children:n.map(({displayName:r,description:a,cost:o})=>t.jsx(Wx,{title:r,description:a,cost:o,"data-qa":"extra_usage_item"},r))}):t.jsx("div",{className:jy.noChargesDescription,children:ai.noChargesDescription})},Lz="_paidCard_1akh6_1",$z="_paidCard_skeleton_1akh6_9",Rz="_paidCardDivider_1akh6_14",Bz="_sectionHeadline_1akh6_18",Vc={paidCard:Lz,paidCard_skeleton:$z,paidCardDivider:Rz,sectionHeadline:Bz},Mz="_noExtrasDescription_t5zle_1",Dz={noExtrasDescription:Mz},Uz=["storage","syntheticStorage","compute","archiveStorage","projects"],Hp=()=>t.jsxs(t.Fragment,{children:[t.jsx(D,{width:120,height:24}),t.jsx(D,{width:230,height:24}),t.jsx(D,{width:50,height:24})]}),Fz=({metrics:e})=>{const{extraAllowanceProjectedCost:s,extraAllowanceDescription:n,extraAllowancePurchases:r,isLoading:a}=Ex(),o=m.useMemo(()=>ot(Uz.map(i=>{const c=e.find(({id:l,isFlexible:d})=>l===i&&d);if(c)return{id:c.id,title:c.title};if(i==="archiveStorage")return{id:i,title:ai.archiveStorage}})),[e]);return a?t.jsx(Hp,{}):o.length?o.map(({id:i,title:c})=>t.jsx(Wx,{title:c,description:n[i],cost:s[i],purchases:r[i],"data-qa":"extra_usage_item"},i)):t.jsx("div",{className:Dz.noExtrasDescription,children:ai.noExtrasDescription})},zz=()=>t.jsxs("div",{className:V(Vc.paidCard,Vc.paidCard_skeleton),children:[t.jsx(Hp,{}),t.jsx(Zc,{className:Vc.paidCardDivider}),t.jsx(Hp,{}),t.jsx(Hp,{})]}),qz=({plan:e})=>{const{isPricingV3Account:s}=fe(),{startPeriod:n,projectedServiceFee:r,endPeriod:a,isLoading:o}=Vm(),i=m.useMemo(()=>{if(!e.cost)return"";if(r!==e.cost){const c=mt(a).diff(mt(n),"month",!0).toPrecision(1);return`${Us(e.cost)} x ~${c} ${ai.month}`}return`${Us(e.cost)} x 1 ${ai.month}`},[e.cost,r,n,a]);return o?t.jsx(zz,{}):t.jsx("div",{className:Vc.paidCard,children:s?t.jsx(Oz,{}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx("div",{className:Vc.sectionHeadline,children:ai.plan}),t.jsx(Wx,{title:e.title,description:i,cost:r,"data-qa":"plan_details"})]}),t.jsxs("div",{children:[t.jsx("div",{className:Vc.sectionHeadline,children:ai.extraUsage}),t.jsx(Fz,{metrics:e.usageMetrics})]})]})})},Hz="_root_1llkg_1",Vz="_planTag_1llkg_9",Wz="_changePlanBtnWrapper_1llkg_16",Qg={root:Hz,planTag:Vz,changePlanBtnWrapper:Wz},tT=({planName:e,showChangePlanButton:s=!1})=>{const[n,r]=m.useState(!1);return t.jsxs("div",{className:Qg.root,children:[t.jsx("div",{className:Qg.planTag,children:"Plan"}),t.jsx(ts,{appearance:"headline","data-qa":"sub_plan_name",children:e}),s&&t.jsxs("div",{className:Qg.changePlanBtnWrapper,children:[t.jsx(Xz,{setUpgradeModalOpen:r}),t.jsx(Pt,{type:dt.AllPlansSelection,isOpen:n,onRequestClose:()=>r(!1)})]})]})},Gz="_root_sxji6_1",Kz="_metric_sxji6_9",Qz="_checkIcon_sxji6_14",Yz="_hint_sxji6_18",_h={root:Gz,metric:Kz,checkIcon:Qz,hint:Yz},sT=({usageMetrics:e,className:s})=>t.jsx("ul",{className:V(_h.root,s),"data-qa":"plan_usage_metrics",children:e.map(({description:n,hint:r})=>t.jsxs("li",{className:_h.metric,children:[t.jsx(q,{name:"check",size:24,className:_h.checkIcon}),t.jsxs(ts,{appearance:"tertiary",children:[n," ",r&&t.jsx(sn,{icon:"info_italic",size:"l",className:_h.hint,children:r})]})]},n))}),fb={included:"Included with",changePlan:"Change plan",changeInVercel:"Change in Vercel"},Jz="_root_7l23x_1",Zz="_planDesc_7l23x_6",yy={root:Jz,planDesc:Zz},Xz=e=>{const{isVercelOrg:s}=ae();return s?t.jsx(A,{as:Ke,appearance:"secondary",href:w2,icon:"external_link",iconSide:"right",target:"_blank",children:fb.changeInVercel}):t.jsx(A,{appearance:"secondary",onClick:()=>e.setUpgradeModalOpen(!0),children:fb.changePlan})},e6=({plan:e,showChangePlanButton:s})=>e?t.jsxs("div",{className:yy.root,children:[t.jsx(tT,{planName:e.title,showChangePlanButton:s}),t.jsxs("div",{className:yy.planDesc,children:[t.jsx(ts,{appearance:"primary",children:`${fb.included} ${e.title}:`}),t.jsx(sT,{usageMetrics:e.usageMetrics})]})]}):null,t6="_root_1usnh_1",s6="_groupedPlanFeatures_1usnh_7",n6="_descriptionGroup_1usnh_14",Yg={root:t6,groupedPlanFeatures:s6,descriptionGroup:n6};function r6(){const{planInfo:e}=S2(),{subscriptionType:s}=fe(),n=e.limits??{},r=Qa[s]??s,a=m.useMemo(()=>{const o={...e,metrics:e.metrics??{},features:e.features},i={included:LR(o,s),includedPerProject:OR(o),usageBasedPricing:ER(o)};return os(n.max_read_only_endpoints,!0)||i.includedPerProject.push({description:"Instant Read Replicas"}),i},[e,n.max_read_only_endpoints,r,s]);return m.useMemo(()=>[{title:"Included",items:ot(a.included)},{title:"Included per project",items:ot(a.includedPerProject)},{title:"Usage-based pricing",items:ot(a.usageBasedPricing)}].filter(o=>o.items.length>0),[a])}const a6=({showChangePlanButton:e})=>{const{subscriptionType:s}=fe(),n=r6();return t.jsxs("div",{className:Yg.root,children:[t.jsx(tT,{planName:Qa[s],showChangePlanButton:e}),t.jsx("div",{className:Yg.groupedPlanFeatures,children:n.map(r=>t.jsxs("div",{className:Yg.descriptionGroup,children:[t.jsxs(J,{level:4,size:"h6",children:[r.title,":"]}),t.jsx(sT,{usageMetrics:r.items})]},r.title))})]})},Jg={currentCosts:"Charges to date",staffAccountHeader:"Staff account active",staffAccountDescription:"This is a staff account. Use admin UI to change your plan."},o6="_root_1wom2_1",i6="_summaryCard_1wom2_7",c6="_centerVertically_1wom2_14",l6="_fullWidth_1wom2_20",d6="_contentWrapper_1wom2_24",u6="_noBottomPadding_1wom2_31",h6="_currentCostsHeader_1wom2_35",ma={root:o6,summaryCard:i6,centerVertically:c6,fullWidth:l6,contentWrapper:d6,noBottomPadding:u6,currentCostsHeader:h6},p6=({id:e,title:s})=>{const{subscriptionType:n,isMarketplaceAccount:r,isSelfServedAccount:a,isPaidSubscription:o,isStaffAccount:i,isTrialAccount:c,isPricingV3Account:l}=fe(),d=D1(),{orgId:u}=ae(),{isOrgAdmin:p}=qt(),h=xq({subscriptionType:n,isStaffAccount:i,isTrialAccount:c,isMarketplaceAccount:r,orgId:u,isOrgAdmin:p}),{isAzureOrg:g,isVercelOrg:f}=ae(),_=le("show_azure_orgs_billing_cost_breakdown"),b=d!==void 0&&(a||g&&_&&o),x=n==="direct_sales";return t.jsx(Hx,{title:s,id:e,description:t.jsx(Jk,{}),children:t.jsxs("div",{className:ma.root,children:[l?t.jsx(a6,{showChangePlanButton:h}):t.jsx(e6,{showChangePlanButton:h,plan:d}),x&&t.jsx(bz,{}),t.jsxs(Rn,{bg:!1,padding:!1,border:!x,className:V(ma.summaryCard,{[ma.centerVertically]:!b,[ma.fullWidth]:!d}),children:[t.jsxs("div",{className:V(ma.contentWrapper,{[ma.noBottomPadding]:b}),children:[f&&t.jsx(w5,{}),n==="aws_marketplace"&&t.jsx(dz,{}),r&&t.jsx(vz,{}),i&&t.jsxs("div",{children:[t.jsx(J,{level:4,className:ma.currentCostsHeader,children:Jg.staffAccountHeader}),t.jsx(P,{children:Jg.staffAccountDescription})]}),b&&t.jsxs("div",{children:[t.jsx(J,{level:4,className:ma.currentCostsHeader,children:Jg.currentCosts}),t.jsx(qz,{plan:d})]})]}),b&&t.jsx(mz,{})]})]})})},wt={descriptionPaidPlan:"Your plan includes an allowance of data and storage resources that you can exceed as needed.",descriptionFreePlan:"Your plan includes an allowance of data and storage resources.",computeTitle:"Compute",computeDescription:"The total number of compute hours used.",computeExtra:"Additional compute usage:",nonPrimaryComputeTitle:"Branch compute",nonPrimaryComputeDescription:"The total number of compute hours used by non-default branches.",nonPrimaryComputeExtra:"Additional non-default compute usage:",storageTitle:"Storage",storageDescription:"Storage is the total volume of data and history stored in Neon.",storageExtra:"Additional storage usage:",projectsTitle:"Projects",projectsDescription:"Number of projects currently active in your account.",projectsExtra:"Additional projects usage:",dataTransferTitle:"Network transfer",dataTransferDescription:"The total volume of data transferred out of Neon (egress).",dataTransferExtra:"Additional network transfer usage:",archiveStorageTitle:"Archive storage",archiveStorageDescription:"The total number of gigabyte-months used for archived branches.",archiveStorageExtra:"Additional archive storage usage:",syntheticStorageTitle:"Storage",syntheticStorageDescription:"Storage is the total volume of data and history stored in Neon.",syntheticStorageExtra:"Additional storage usage:"},m6=(e,s,n)=>{if(n)return e<=.5*Ag?"info":void 0;if(s)return e<=2*Ag?"info":void 0;if(e<=0)return"error";if(e<=.1*Ag)return"warning"},g6=(e,s)=>{if(s)return e>=1?"error":e>=.8?"warning":void 0;if(e>=.9&&e<=1)return"info"},f6=e=>{if(e>=1)return"error";if(e>=.8)return"warning"},_6=(e,s)=>{if(s)return e>=1?"error":e>=.8?"warning":void 0;if(e>=.9&&e<=1)return"info"},b6=(e,s)=>{if(s)return e>=1?"error":e>=.8?"warning":void 0;if(e>=.9&&e<=1)return"info"},x6=(e,s,n)=>{if(s)return e<=50?"info":void 0;if(e<=0)return"error";if(n){if(e<=5)return"warning";if(e<=10)return"info"}if(e<=1)return"warning";if(e<=3)return"info"},v6=e=>{if(e>=1)return"error";if(e>=.8)return"warning"},j6=(e,s)=>Math.min(Math.floor(e/s*100),100),jo=(e,s,n)=>{const r=n();if(!(!r||!os(s)))return{usagePercent:j6(e,s),severity:r}},Gx=()=>{const{isFreeSubscription:e,subscriptionType:s}=fe(),n=s==="scale"||s==="business",r=s==="launch",{usage:a}=Ox(),o=Lx(),{extraAllowanceAmount:{storage:i=0,projects:c=0}}=Ex(),l=jo(a.storage,o.storage+i,()=>m6(o.storage+i-a.storage,n,r)),d=jo(a.compute,o.compute,()=>g6(a.compute/o.compute,e)),u=jo(a.nonPrimaryCompute,o.nonPrimaryCompute,()=>f6(a.nonPrimaryCompute/o.nonPrimaryCompute)),p=jo(a.archiveStorage,o.archiveStorage,()=>_6(a.archiveStorage/o.archiveStorage,e)),h=jo(a.projects.value,o.projects+c,()=>x6(o.projects+c-a.projects.value,n,r)),g=jo(a.dataTransfer,o.dataTransfer,()=>v6(a.dataTransfer/o.dataTransfer)),f=jo(a.syntheticStorage,o.syntheticStorage,()=>b6(a.syntheticStorage/o.syntheticStorage,e));return{storage:l,compute:d,nonPrimaryCompute:u,projects:h,dataTransfer:g,archiveStorage:p,syntheticStorage:f}},wy=-1,y6=(e,s)=>{if(!os(s))return 0;const n=e-s;return Math.max(0,n)},w6=(e,s)=>`${Math.min(100,Math.floor(e/s*100))}%`;function Kl({value:e,allowance:s,unit:n,converter:r=H1}){const a=n?` ${n}`:"";return`${r(e)}${os(s)?`/${r(s)}${a} - ${w6(e,s)}`:a}`}const yo=({allowance:e,usage:s,peakUsage:n,printValue:r=c=>c,unit:a,pluralizeUnit:o,isExtraAllowanceAllowed:i})=>{const c=typeof s=="object"?s.value:s,l=y6(c,e),d=c-l,u=e>0?Math.min(d,e):d;let p=r(c),h=r(u);typeof s=="object"&&s.isMoreThanFetched&&(p+="+",h+="+");const g={withinPlanUsage:h,baseLimit:e===wy?void 0:r(e),rawBaseAllowance:e===wy?void 0:e,totalUsage:p,peakUsage:n,unit:a,pluralizeUnit:o,rawWithinPlanUsage:u};return i?(g.extraUsage=r(l),g.rawExtraUsage=l):(g.overLimitUsage=r(l),g.rawOverLimitUsage=l),g},S6=()=>{var $,K,Z,U,te,oe,se;const e=le("growth_remove_non_primary_compute_limit"),{isPaidAccount:s,isFreeSubscription:n}=fe(),{usage:r,peakUsage:a,isLoading:o}=Ox(),i=Lx(),c=Gx(),l=(L,ee)=>s||!ee?void 0:L;let d;if(n){const L=yo({allowance:i.storage,usage:r.storage,printValue:qr,unit:"GB",isExtraAllowanceAllowed:!1}),ee=l(`${wt.storageExtra} ${Ds(L.rawOverLimitUsage)}`,L.rawOverLimitUsage);d={id:"storage",title:wt.storageTitle,description:wt.storageDescription,usage:Kl({value:r.storage,allowance:i.storage,unit:"GB",converter:qr}),hint:ee,overLimit:($=c.storage)==null?void 0:$.severity,usageDetails:L,isUpgradable:!0}}else{const L=yo({allowance:i.syntheticStorage,usage:r.syntheticStorage,printValue:qr,unit:"GB-month",isExtraAllowanceAllowed:!0}),ee=l(`${wt.syntheticStorageExtra} ${bu(L.rawOverLimitUsage)}`,L.rawOverLimitUsage);d={id:"syntheticStorage",title:wt.syntheticStorageTitle,description:wt.syntheticStorageDescription,usage:Kl({value:r.syntheticStorage,allowance:i.syntheticStorage,unit:"GB-month",converter:qr}),hint:ee,overLimit:(K=c.syntheticStorage)==null?void 0:K.severity,usageDetails:L,isUpgradable:!1}}const u=yo({allowance:i.compute,usage:r.compute,printValue:ri,unit:"hour",pluralizeUnit:!0,isExtraAllowanceAllowed:!n}),p=Kl({value:r.compute,allowance:i.compute,unit:"h",converter:ri}),h=l(`${wt.computeExtra} ${Lj(u.rawOverLimitUsage)}`,u.rawOverLimitUsage),g=yo({allowance:i.nonPrimaryCompute,usage:r.nonPrimaryCompute,printValue:ri,unit:"hour",pluralizeUnit:!0,isExtraAllowanceAllowed:!n}),f=Kl({value:r.nonPrimaryCompute,allowance:i.nonPrimaryCompute,unit:"h",converter:ri}),_=l(`${wt.nonPrimaryComputeExtra} ${Lj(g.rawOverLimitUsage)}`,u.rawOverLimitUsage),b=yo({allowance:i.archiveStorage,usage:r.archiveStorage,printValue:qr,unit:"GB-month",isExtraAllowanceAllowed:!n}),x=Kl({value:r.archiveStorage,allowance:i.archiveStorage,unit:"GB-month",converter:qr}),v=l(`${wt.archiveStorageExtra} ${bu(b.rawOverLimitUsage)}`,b.rawOverLimitUsage),j=yo({allowance:i.projects,usage:r.projects,peakUsage:n?void 0:a.projects,unit:"project",pluralizeUnit:!0,isExtraAllowanceAllowed:!n}),y=i.projects;let w=`${r.projects.value}`;if(r.projects.isMoreThanFetched){const L=`${w}+`;w=L,j.totalUsage=L}const S=`${w}${os(y)?`/${y}`:""}`,T=l(`${wt.projectsExtra} ${j.rawOverLimitUsage}`,j.rawOverLimitUsage),E=yo({allowance:i.dataTransfer,usage:r.dataTransfer,printValue:qr,unit:"GB",isExtraAllowanceAllowed:!n}),H=`${Eg(r.dataTransfer,!0)}/${Eg(i.dataTransfer)}`,R=l(`${wt.dataTransferExtra} ${Eg(E.rawOverLimitUsage)}`,E.rawOverLimitUsage);return{usageMetrics:ot([d,{id:"compute",title:wt.computeTitle,description:wt.computeDescription,usage:p,hint:h,overLimit:(Z=c.compute)==null?void 0:Z.severity,usageDetails:u,isUpgradable:n,hide:n&&!os(i.compute)},e?void 0:{id:"nonPrimaryCompute",title:wt.nonPrimaryComputeTitle,description:wt.nonPrimaryComputeDescription,usage:f,hint:_,overLimit:(U=c.nonPrimaryCompute)==null?void 0:U.severity,isUpgradable:n,hide:!n,usageDetails:g},{id:"archiveStorage",title:wt.archiveStorageTitle,description:wt.archiveStorageDescription,usage:x,hint:v,overLimit:(te=c.archiveStorage)==null?void 0:te.severity,usageDetails:b,isUpgradable:n},{id:"projects",title:wt.projectsTitle,description:wt.projectsDescription,usage:S,hint:T,overLimit:(oe=c.projects)==null?void 0:oe.severity,usageDetails:j,isUpgradable:n,isMoreThanFetched:r.projects.isMoreThanFetched},{id:"dataTransfer",title:wt.dataTransferTitle,description:wt.dataTransferDescription,usage:H,hint:R,overLimit:(se=c.dataTransfer)==null?void 0:se.severity,usageDetails:E,isUpgradable:n,hide:!os(i.dataTransfer)}]),isLoading:o}},C6="_cards_y9pix_1",I6="_externalLinkIcon_y9pix_7",nT={cards:C6,externalLinkIcon:I6},k6={info:"most of",warning:"most of",error:"all"};function Zg(e,s,n){const r=C2[e],a=`You have used ${k6[s]} your ${r} allowance`;return n?`${a}, upgrade your account to increase your ${r} limit.`:`${a}.`}const T6={info:(e,s)=>Zg(e,"info",s),warning:(e,s)=>Zg(e,"warning",s),error:(e,s)=>Zg(e,"error",s)},P6="_text_oolkt_1",N6="_description_oolkt_8",A6="_bar_oolkt_14",E6="_overLimit_oolkt_18",bh={text:P6,description:N6,bar:A6,overLimit:E6},tu={withinPlanUsage:"Within plan usage",overLimitUsage:"Over-limit usage",extra:"Extra",totalUsage:"Total usage",peakUsage:"Peak usage"},O6="_root_1p0zi_1",L6="_extra_1p0zi_8",$6="_current_1p0zi_9",R6="_peak_1p0zi_10",B6="_overlimit_1p0zi_11",M6="_mathSymbol_1p0zi_39",Pa={root:O6,extra:L6,current:$6,peak:R6,overlimit:B6,mathSymbol:M6},D6="_card_1yjgv_1",U6="_flexibleCard_1yjgv_12",F6="_label_1yjgv_16",z6="_value_1yjgv_22",q6="_limitDivider_1yjgv_27",Ql={card:D6,flexibleCard:U6,label:F6,value:z6,limitDivider:q6};function H6(e,s,n){return!n||!e&&e!==0?n:typeof s=="string"?Ms(n,parseInt(s,10)):typeof s=="number"?Ms(n,s):typeof e=="string"?Ms(n,parseInt(e,10)):Ms(n,e)}const xh=({value:e,limit:s,label:n,unit:r,pluralizeUnit:a,className:o,flexible:i})=>!e&&e!==0?null:t.jsxs("div",{className:V(Ql.card,{[Ql.flexibleCard]:i}),children:[t.jsx("div",{className:V(Ql.label,o),children:n}),t.jsxs("div",{children:[t.jsx("span",{className:Ql.value,children:e}),!!s&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:Ql.limitDivider,children:"/"}),s]}),r&&` ${a?H6(e,s,r):r}`]})]}),V6=()=>t.jsxs(t.Fragment,{children:[t.jsx(D,{width:"100%",height:60}),t.jsx(D,{width:"100%",height:60}),t.jsx(D,{width:"100%",height:60})]}),W6=(e,s,n)=>e?{label:tu.overLimitUsage,className:Pa.overlimit,value:s}:{label:tu.extra,className:Pa.extra,value:n},G6=({withinPlanUsage:e,baseLimit:s,extraUsage:n,overLimitUsage:r,rawOverLimitUsage:a,peakUsage:o,totalUsage:i,unit:c,pluralizeUnit:l,isLoading:d=!1,shouldAlwaysDisplayExtra:u=!1})=>{if(d)return t.jsx("div",{className:Pa.root,children:t.jsx(V6,{})});const p=!!(a&&a>0),h=u&&!!s||p,{label:g,className:f,value:_}=W6(p,r,n);return t.jsxs("div",{className:Pa.root,children:[h&&t.jsxs(t.Fragment,{children:[t.jsx(xh,{label:tu.withinPlanUsage,value:e,limit:s,unit:c,className:Pa.current,flexible:h,pluralizeUnit:l}),t.jsx("span",{className:Pa.mathSymbol,children:"+"}),t.jsx(xh,{label:g,value:_,unit:c,className:f,flexible:h,pluralizeUnit:l}),t.jsx("span",{className:Pa.mathSymbol,children:"="})]}),t.jsx(xh,{label:tu.totalUsage,value:i,limit:u?void 0:s,unit:c,flexible:h,pluralizeUnit:l}),t.jsx(xh,{label:tu.peakUsage,value:o,unit:c,className:Pa.peak,flexible:h,pluralizeUnit:l})]})},K6="_container_xtg3h_1",Q6="_barWrapper_xtg3h_6",Y6="_bar_xtg3h_6",J6="_overLimit_xtg3h_21",Z6="_usage_xtg3h_27",X6="_baseLimit_xtg3h_32",eq="_extraUsage_xtg3h_38",tq="_emptyExtraUsage_xtg3h_61",Ws={container:K6,barWrapper:Q6,bar:Y6,overLimit:J6,usage:Z6,baseLimit:X6,extraUsage:eq,emptyExtraUsage:tq},sq=.02,nq=1,Sy=.25,Cy=.75;function rq({withinPlanUsage:e,extraUsage:s,totalUsage:n}){const r=e!==0?s/n:0;return r>Cy?Cy:r>Sy?r:Sy}function aq({withinPlanUsage:e,baseAllowance:s,extraUsage:n,shouldAlwaysDisplayExtraBar:r}){const a=e+n;let o=rq({withinPlanUsage:e,extraUsage:n,totalUsage:a}),i=1-o;const c=.25*a;let l=c!==0?n/c:0;l=Math.min(l,nq);const d=s!==0?e/s:0;return l===0&&!r&&(o=0,i=1),{extraBarWidth:parseFloat(o.toFixed(2)),extraBarFillRatio:parseFloat(l.toFixed(2)),withinPlanUsageBarWidth:parseFloat(i.toFixed(2)),withinPlanUsageBarFillRatio:parseFloat(d.toFixed(2))}}const Iy=e=>e===0?0:Math.max(e,sq)*100,oq=({hint:e,isLoading:s=!1,usageDetails:n,shouldAlwaysDisplayExtraBar:r})=>{const{rawWithinPlanUsage:a,rawExtraUsage:o,rawBaseAllowance:i,rawOverLimitUsage:c}=n;if(i===void 0||i<=0)return null;const l=(c||o)??0,d=c&&c>0,{withinPlanUsageBarWidth:u,withinPlanUsageBarFillRatio:p,extraBarWidth:h,extraBarFillRatio:g}=aq({withinPlanUsage:a,extraUsage:l,baseAllowance:i,shouldAlwaysDisplayExtraBar:r});return s?t.jsx(D,{height:10}):t.jsx(ne,{content:e,children:t.jsxs("div",{className:Ws.container,children:[t.jsxs("div",{className:Ws.barWrapper,style:{width:`${u*100}%`},children:[!!p&&t.jsx("div",{style:{width:`${Iy(p)}%`},className:V(Ws.bar,Ws.usage)}),t.jsx("div",{className:V(Ws.bar,Ws.baseLimit)})]}),h>0&&t.jsxs("div",{className:Ws.barWrapper,style:{width:`${h*100}%`},children:[t.jsx("div",{className:V(Ws.bar,Ws.emptyExtraUsage)}),g>0&&t.jsx("div",{style:{width:`${Iy(g)}%`},className:V(Ws.bar,{[Ws.extraUsage]:!d,[Ws.overLimit]:d})})]})]})})},iq=({id:e,title:s,description:n,usage:r="",hint:a="",isLoading:o=!1,overLimit:i,usageDetails:c,shouldAlwaysDisplayExtra:l,isUpgradable:d,isMoreThanFetched:u})=>t.jsxs(Rn,{children:[t.jsx(J,{level:3,children:s}),t.jsxs("div",{className:bh.text,children:[t.jsx("div",{className:bh.description,children:n}),!c&&(o?t.jsx(D,{width:60,height:20}):t.jsx(ts,{appearance:"secondary",children:r}))]}),!!c.baseLimit&&!u&&t.jsx("div",{className:bh.bar,children:t.jsx(oq,{usageDetails:c,isLoading:o,hint:a,shouldAlwaysDisplayExtraBar:l})}),t.jsx(G6,{...c,shouldAlwaysDisplayExtra:l,isLoading:o}),i&&!u&&t.jsx(X,{appearance:i,className:bh.overLimit,children:T6[i](e,d)})]}),cq=()=>t.jsxs(M,{href:I2,openInNewTab:!0,children:["Explain metrics"," ",t.jsx(q,{size:14,name:"external_link",className:nT.externalLinkIcon})]}),lq=({id:e,title:s})=>{const{isFreeSubscription:n,isTrialAccount:r,isPaidAccount:a}=fe(),o=a?wt.descriptionPaidPlan:wt.descriptionFreePlan,{usageMetrics:i,isLoading:c}=S6();return t.jsx(Hx,{title:s,description:t.jsxs(t.Fragment,{children:[o,(n||r)&&t.jsx(Jk,{noColor:!0})]}),id:e,action:t.jsx(cq,{}),children:t.jsx("div",{className:nT.cards,children:i.filter(({hide:l})=>!l).map(l=>t.jsx(iq,{shouldAlwaysDisplayExtra:a,isLoading:c,...l},l.id))})})},dq={plans:{id:"plans",name:"Upgrade plan",Component:iz},usage:{id:"usage",name:"Usage",Component:lq},payment_info:{id:"payment_info",name:"Payment info",Component:R5},summary:{id:"summary",name:"Billing summary",titleOverride:"This month's summary",Component:p6}},uq={UNKNOWN:[],free_v2:["plans","usage"],launch:["summary","usage","payment_info"],scale:["summary","usage","payment_info"],business:["summary","usage","payment_info"],direct_sales:["summary","usage","payment_info"],aws_marketplace:["summary","usage"],vercel_pg_legacy:[],free_v3:["plans"],launch_v3:["summary","payment_info"],scale_v3:["summary","payment_info"]},hq=["summary","usage"],pq=["plans","usage"],mq=["summary","usage"],gq=[],fq=["UNKNOWN","aws_marketplace","vercel_pg_legacy"],vh=e=>e.map(s=>dq[s]),_q=e=>{const{subscriptionType:s,isStaffAccount:n,isTrialAccount:r,isMarketplaceAccount:a,isPricingV3Account:o}=e;if(r)return vh(pq);if(n){const i=vh(hq);return o?i:i.filter(c=>!gq.includes(c.id))}return vh(a?mq:uq[s])},rT=()=>{const{isFetching:e,subscriptionType:s,isStaffAccount:n,isTrialAccount:r,isMarketplaceAccount:a,isPricingV3Account:o}=fe();return e?[]:_q({subscriptionType:s,isStaffAccount:n,isTrialAccount:r,isMarketplaceAccount:a,isPricingV3Account:o})},bq=["launch","scale","business","launch_v3","scale_v3"],xq=({subscriptionType:e,isStaffAccount:s,isTrialAccount:n,isMarketplaceAccount:r,orgId:a,isOrgAdmin:o})=>n?!1:s?!0:r||a&&!o?!1:bq.includes(e),vq=e=>!fq.includes(e),aT=({hint:e="",appearance:s,subscriptionType:n})=>t.jsx(ne,{content:e,children:t.jsx(Ne,{size:"m",appearance:s,"data-qa":"billing_plan_badge",children:Qa[n]??n})}),ky=e=>{const{subscriptionType:s,isFetching:n}=fe();return n?t.jsx(Vk,{}):t.jsx(aT,{...e,subscriptionType:s})},jq=e=>{const{subscriptionType:s,isFetching:n}=V1();return n?t.jsx(Vk,{}):t.jsx(aT,{...e,subscriptionType:s})},yq=()=>{const{orgId:e}=ae(),{data:s,isLoading:n}=Mu.useGetBillingInvoicesQuery(e);return{invoices:s,isInvoicesLoading:n}},wq="_root_vk47n_1",Sq="_content_vk47n_11",Cq="_title_vk47n_18",Xg={root:wq,content:Sq,title:Cq},Kx=({title:e,description:s,action:n})=>t.jsxs("div",{className:Xg.root,children:[t.jsxs("div",{className:Xg.content,children:[t.jsx("div",{className:Xg.title,children:e}),s&&t.jsx(ts,{children:s})]}),n]}),ef={title:"New autoscaling settings",description:"All projects updated to your new autoscaling maximum.",button:"Learn about autoscaling"},Iq=()=>{const e=k2(),{isPaidSubscription:s}=fe();return!le("growth_update_endpoint_settings_on_upgrade_from_free_plan")||!e||(e==null?void 0:e.plan)!=="free_v2"||!s?null:t.jsx(Kx,{title:ef.title,description:ef.description,action:t.jsx(A,{as:Ke,appearance:"secondary",href:T2,openInNewTab:!0,children:ef.button})})},oT={title:e=>`Get started with your ${Qa[e]} plan`,gotIt:"Got it"},kq="_root_15467_1",Tq="_header_15467_12",Pq="_body_15467_18",tf={root:kq,header:Tq,body:Pq},Ty={invite:"Invite people to your organization to collaborate on projects",inviteButton:"Invite people"},Nq=()=>t.jsx(Kx,{title:Ty.invite,action:t.jsx(im,{appearance:"secondary",size:"l",children:Ty.inviteButton})}),Aq=()=>t.jsx(Nq,{}),iT={title:e=>`Review your ${e?"organization's ":""}billing information`,button:"Review billing details"},Eq=()=>{const e=()=>{var s;(s=document.getElementById("payment_info"))==null||s.scrollIntoView()};return t.jsx(A,{appearance:"secondary",onClick:e,children:iT.button})},Oq=({isOrg:e})=>t.jsx(Kx,{title:iT.title(e),action:t.jsx(Eq,{})}),Lq=()=>{const{orgId:e}=ae(),{subscriptionType:s}=fe();return{title:oT.title(s),actionsBody:t.jsxs(t.Fragment,{children:[!!e&&t.jsx(Aq,{}),t.jsx(Iq,{}),t.jsx(Oq,{isOrg:!!e})]})}},$q=({hide:e,ref:s})=>{const{title:n,actionsBody:r}=Lq();return t.jsxs("div",{ref:s,className:tf.root,children:[t.jsxs("div",{className:tf.header,children:[t.jsx(J,{level:2,children:n}),t.jsx(A,{appearance:"secondary",onClick:e,children:oT.gotIt})]}),t.jsx("div",{className:tf.body,children:r})]})},Rq=e=>({dataTransfer:{error:"You've used all your network transfer allowance for this month.",warning:`You've used ${e}% of your network transfer allowance this month.`,info:""},compute:{error:"You've used all your compute allowance for this month.",warning:`You've used ${e}% of your compute allowance this month.`,info:""},nonPrimaryCompute:{error:"You've used all your non-primary compute allowance for this month.",warning:`You've used ${e}% of your non-primary compute allowance this month.`,info:""},storage:{error:"You've used all your storage allowance for this account.",warning:`You've used ${e}% of your storage allowance for this account.`,info:""},syntheticStorage:{error:"You've used all your synthetic storage allowance for this account.",warning:`You've used ${e}% of your synthetic storage allowance for this account.`,info:""}}),Bq=e=>{const s=Rq(e.usagePercent);return e.usageId&&e.severity?s[e.usageId][e.severity]:""},jh={getUsageLimitMessage:Bq,badge:{info:"approaching limit",warning:"approaching limit",error:"limit reached"},upgradePlan:"Upgrade plan",reviewUsage:"Review usage"},Mq="_root_1kbup_1",Dq="_info_1kbup_7",Uq="_warning_1kbup_11",Fq="_error_1kbup_15",zq="_inner_1kbup_19",qq="_description_1kbup_25",Hq="_button_1kbup_29",$a={root:Mq,info:Dq,warning:Uq,error:Fq,inner:zq,description:qq,button:Hq},Vq={info:$a.info,warning:$a.warning,error:$a.error},Py=["error","warning","info",void 0],Wq={info:"warning-knockout",warning:"warning-knockout",error:"error-knockout"};let Ny=!1;const Ay=["dataTransfer","compute","storage","nonPrimaryCompute"],Gq=()=>{const{trackUiInteraction:e}=k(),[s,n]=m.useState(!1),{isVercelOrg:r}=ae(),{compute:a,dataTransfer:o,nonPrimaryCompute:i,storage:c}=Gx(),l=m.useMemo(()=>[{usageId:"compute",...a||{}},{usageId:"dataTransfer",...o||{}},{usageId:"nonPrimaryCompute",...i||{}},{usageId:"storage",...c||{}}],[a,o,i,c]),d=m.useMemo(()=>l.length===0?null:l.sort((x,v)=>{const j=Py.indexOf(x.severity)-Py.indexOf(v.severity);return j!==0?j:Ay.indexOf(x.usageId)-Ay.indexOf(v.usageId)})[0],[l]),u=()=>{e("overlimit_banner_review_usage_clicked",{is_vercel_org:r})},p=()=>{e("overlimit_banner_upgrade_clicked",{is_vercel_org:r}),r||n(!0)},{billingUrl:h,isLoading:g}=to();if(m.useEffect(()=>{d!=null&&d.severity&&(d!=null&&d.usagePercent)&&!Ny&&(e("overlimit_banner_shown",{limit:d,is_vercel_org:r}),Ny=!0)},[d,e,r]),!(d!=null&&d.severity)||!(d!=null&&d.usagePercent))return null;const{usageId:f,severity:_,usagePercent:b}=d;return t.jsxs(t.Fragment,{children:[t.jsx(Pt,{type:dt.Default,isOpen:s,onRequestClose:()=>{n(!1)}}),t.jsx("div",{className:V($a.root,Vq[_]),children:t.jsxs("div",{className:$a.inner,children:[t.jsx(Ne,{appearance:Wq[_],children:jh.badge[_]}),t.jsx(P,{className:$a.description,children:jh.getUsageLimitMessage({usageId:f,severity:_,usagePercent:b})}),t.jsx(M,{href:h,disabled:g,className:$a.button,onClick:u,children:jh.reviewUsage}),t.jsx(M,{href:r?h:void 0,className:$a.button,onClick:p,children:jh.upgradePlan})]})})]})},Kq="_root_1pn1j_1",Qq="_body_1pn1j_10",Yq="_icon_1pn1j_17",sf={root:Kq,body:Qq,icon:Yq},Qx=({title:e,children:s,className:n,type:r="info",...a})=>{const o=r==="warn"?"warning":"info_italic",i=r==="warn"?"alert":"status";return t.jsxs("div",{role:i,className:V(n,sf.root),...a,children:[t.jsx(q,{className:sf.icon,name:o,size:20}),t.jsxs("div",{className:sf.body,children:[e?t.jsx(J,{level:5,children:e}):null,t.jsx("div",{children:s})]})]})},Jq={[C.Root]:"root",[C.Home]:"home",[C.Welcome]:"welcome",[C.OrgWelcome]:"org_welcome",[C.Claim]:"claim",[C.ProjectsList]:"projects_list",[C.ProjectsSharedList]:"projects_shared_list",[C.ProjectsItem]:"projects_item_dashboard",[C.ProjectsItemSettings]:"projects_item_settings",[C.ProjectsItemIntegrations]:"projects_item_integrations",[C.ProjectsItemAuthorize]:"projects_item_authorize",[C.ProjectsItemIdentity]:"projects_item_identity",[C.UserBilling]:"billing",[C.UserSettings]:"user_settings",[C.ProjectsItemBranches]:"projects_item_branches",[C.ProjectsItemBranchesNew]:"projects_item_branches_new",[C.ProjectsItemBranchesLastUsed]:"projects_item_branches_last_used",[C.ProjectsItemBranchesItem]:"projects_item_branches_item",[C.ProjectsItemBranchesComputes]:"projects_item_branches_computes",[C.ProjectsItemBranchesRolesAndDatabases]:"projects_item_branches_roles_and_databases",[C.ProjectsItemBranchesChildBranches]:"projects_item_branches_child_branches",[C.ProjectsItemBranchesSQLEditor]:"projects_item_branches_sql_editor",[C.ProjectsItemBranchesRestore]:"projects_item_branches_restore",[C.ProjectsItemBranchesDataAPI]:"projects_item_branches_data_api",[C.ProjectsItemBranchesItemMonitoring]:"projects_item_monitoring",[C.ProjectsItemBranchesItemMonitoringMetrics]:"projects_item_monitoring_metrics",[C.ProjectsItemBranchesItemMonitoringOperations]:"projects_item_monitoring_operations",[C.ProjectsItemBranchesItemMonitoringActiveQueries]:"projects_item_monitoring_active_queries",[C.ProjectsItemBranchesItemMonitoringQueryHistory]:"projects_item_monitoring_query_history",[C.ProjectsItemDrizzle]:"projects_item_drizzle",[C.OrgRoot]:"org_root",[C.OrgProjectsList]:"org_projects_list",[C.OrgPeople]:"org_people",[C.OrgBilling]:"org_billing",[C.OrgSettings]:"org_settings",[C.UserIntegrations]:"user_integrations",[C.OrgIntegrations]:"org_integrations"};var re={},zd={exports:{}},Zq=zd.exports,Ey;function Xq(){return Ey||(Ey=1,function(e,s){(function(n,r){var a="1.0.38",o="",i="?",c="function",l="undefined",d="object",u="string",p="major",h="model",g="name",f="type",_="vendor",b="version",x="architecture",v="console",j="mobile",y="tablet",w="smarttv",S="wearable",T="embedded",E=500,H="Amazon",R="Apple",$="ASUS",K="BlackBerry",Z="Browser",U="Chrome",te="Edge",oe="Firefox",se="Google",L="Huawei",ee="LG",ie="Microsoft",He="Motorola",Ot="Opera",mn="Samsung",Hn="Sharp",me="Sony",mo="Xiaomi",go="Zebra",rh="Facebook",Ml="Chromium OS",ah="Mac OS",Ng=function(Oe,Ge){var Ce={};for(var Xe in Oe)Ge[Xe]&&Ge[Xe].length%2===0?Ce[Xe]=Ge[Xe].concat(Oe[Xe]):Ce[Xe]=Oe[Xe];return Ce},Ri=function(Oe){for(var Ge={},Ce=0;Ce<Oe.length;Ce++)Ge[Oe[Ce].toUpperCase()]=Oe[Ce];return Ge},oh=function(Oe,Ge){return typeof Oe===u?fo(Ge).indexOf(fo(Oe))!==-1:!1},fo=function(Oe){return Oe.toLowerCase()},ih=function(Oe){return typeof Oe===u?Oe.replace(/[^\d\.]/g,o).split(".")[0]:r},Bi=function(Oe,Ge){if(typeof Oe===u)return Oe=Oe.replace(/^\s\s*/,o),typeof Ge===l?Oe:Oe.substring(0,E)},pa=function(Oe,Ge){for(var Ce=0,Xe,Vs,As,We,je,Es;Ce<Ge.length&&!je;){var Ui=Ge[Ce],Fl=Ge[Ce+1];for(Xe=Vs=0;Xe<Ui.length&&!je&&Ui[Xe];)if(je=Ui[Xe++].exec(Oe),je)for(As=0;As<Fl.length;As++)Es=je[++Vs],We=Fl[As],typeof We===d&&We.length>0?We.length===2?typeof We[1]==c?this[We[0]]=We[1].call(this,Es):this[We[0]]=We[1]:We.length===3?typeof We[1]===c&&!(We[1].exec&&We[1].test)?this[We[0]]=Es?We[1].call(this,Es,We[2]):r:this[We[0]]=Es?Es.replace(We[1],We[2]):r:We.length===4&&(this[We[0]]=Es?We[3].call(this,Es.replace(We[1],We[2])):r):this[We]=Es||r;Ce+=2}},Mi=function(Oe,Ge){for(var Ce in Ge)if(typeof Ge[Ce]===d&&Ge[Ce].length>0){for(var Xe=0;Xe<Ge[Ce].length;Xe++)if(oh(Ge[Ce][Xe],Oe))return Ce===i?r:Ce}else if(oh(Ge[Ce],Oe))return Ce===i?r:Ce;return Oe},Di={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Dl={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Ul={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[b,[g,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[b,[g,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[g,b],[/opios[\/ ]+([\w\.]+)/i],[b,[g,Ot+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[b,[g,Ot+" GX"]],[/\bopr\/([\w\.]+)/i],[b,[g,Ot]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[b,[g,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[g,b],[/\bddg\/([\w\.]+)/i],[b,[g,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[b,[g,"UC"+Z]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[b,[g,"WeChat"]],[/konqueror\/([\w\.]+)/i],[b,[g,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[b,[g,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[b,[g,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[b,[g,"Smart Lenovo "+Z]],[/(avast|avg)\/([\w\.]+)/i],[[g,/(.+)/,"$1 Secure "+Z],b],[/\bfocus\/([\w\.]+)/i],[b,[g,oe+" Focus"]],[/\bopt\/([\w\.]+)/i],[b,[g,Ot+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[b,[g,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[b,[g,"Dolphin"]],[/coast\/([\w\.]+)/i],[b,[g,Ot+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[b,[g,"MIUI "+Z]],[/fxios\/([-\w\.]+)/i],[b,[g,oe]],[/\bqihu|(qi?ho?o?|360)browser/i],[[g,"360 "+Z]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[g,/(.+)/,"$1 "+Z],b],[/samsungbrowser\/([\w\.]+)/i],[b,[g,mn+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[g,/_/g," "],b],[/metasr[\/ ]?([\d\.]+)/i],[b,[g,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[g,"Sogou Mobile"],b],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[g,b],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[g],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[g,rh],b],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[g,b],[/\bgsa\/([\w\.]+) .*safari\//i],[b,[g,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[b,[g,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[b,[g,U+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[g,U+" WebView"],b],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[b,[g,"Android "+Z]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[g,b],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[b,[g,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[b,g],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[g,[b,Mi,Di]],[/(webkit|khtml)\/([\w\.]+)/i],[g,b],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[g,"Netscape"],b],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[b,[g,oe+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[g,b],[/(cobalt)\/([\w\.]+)/i],[g,[b,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[x,"amd64"]],[/(ia32(?=;))/i],[[x,fo]],[/((?:i[346]|x)86)[;\)]/i],[[x,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[x,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[x,"armhf"]],[/windows (ce|mobile); ppc;/i],[[x,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[x,/ower/,o,fo]],[/(sun4\w)[;\)]/i],[[x,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[x,fo]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[h,[_,mn],[f,y]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[h,[_,mn],[f,j]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[h,[_,R],[f,j]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[h,[_,R],[f,y]],[/(macintosh);/i],[h,[_,R]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[h,[_,Hn],[f,j]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[h,[_,L],[f,y]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[h,[_,L],[f,j]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[h,/_/g," "],[_,mo],[f,j]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[h,/_/g," "],[_,mo],[f,y]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[h,[_,"OPPO"],[f,j]],[/\b(opd2\d{3}a?) bui/i],[h,[_,"OPPO"],[f,y]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[h,[_,"Vivo"],[f,j]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[h,[_,"Realme"],[f,j]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[h,[_,He],[f,j]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[h,[_,He],[f,y]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[h,[_,ee],[f,y]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[h,[_,ee],[f,j]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[h,[_,"Lenovo"],[f,y]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[h,/_/g," "],[_,"Nokia"],[f,j]],[/(pixel c)\b/i],[h,[_,se],[f,y]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[h,[_,se],[f,j]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[h,[_,me],[f,j]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[h,"Xperia Tablet"],[_,me],[f,y]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[h,[_,"OnePlus"],[f,j]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[h,[_,H],[f,y]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[h,/(.+)/g,"Fire Phone $1"],[_,H],[f,j]],[/(playbook);[-\w\),; ]+(rim)/i],[h,_,[f,y]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[h,[_,K],[f,j]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[h,[_,$],[f,y]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[h,[_,$],[f,j]],[/(nexus 9)/i],[h,[_,"HTC"],[f,y]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[_,[h,/_/g," "],[f,j]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[h,[_,"Acer"],[f,y]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[h,[_,"Meizu"],[f,j]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[h,[_,"Ulefone"],[f,j]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[_,h,[f,j]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[_,h,[f,y]],[/(surface duo)/i],[h,[_,ie],[f,y]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[h,[_,"Fairphone"],[f,j]],[/(u304aa)/i],[h,[_,"AT&T"],[f,j]],[/\bsie-(\w*)/i],[h,[_,"Siemens"],[f,j]],[/\b(rct\w+) b/i],[h,[_,"RCA"],[f,y]],[/\b(venue[\d ]{2,7}) b/i],[h,[_,"Dell"],[f,y]],[/\b(q(?:mv|ta)\w+) b/i],[h,[_,"Verizon"],[f,y]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[h,[_,"Barnes & Noble"],[f,y]],[/\b(tm\d{3}\w+) b/i],[h,[_,"NuVision"],[f,y]],[/\b(k88) b/i],[h,[_,"ZTE"],[f,y]],[/\b(nx\d{3}j) b/i],[h,[_,"ZTE"],[f,j]],[/\b(gen\d{3}) b.+49h/i],[h,[_,"Swiss"],[f,j]],[/\b(zur\d{3}) b/i],[h,[_,"Swiss"],[f,y]],[/\b((zeki)?tb.*\b) b/i],[h,[_,"Zeki"],[f,y]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[_,"Dragon Touch"],h,[f,y]],[/\b(ns-?\w{0,9}) b/i],[h,[_,"Insignia"],[f,y]],[/\b((nxa|next)-?\w{0,9}) b/i],[h,[_,"NextBook"],[f,y]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[_,"Voice"],h,[f,j]],[/\b(lvtel\-)?(v1[12]) b/i],[[_,"LvTel"],h,[f,j]],[/\b(ph-1) /i],[h,[_,"Essential"],[f,j]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[h,[_,"Envizen"],[f,y]],[/\b(trio[-\w\. ]+) b/i],[h,[_,"MachSpeed"],[f,y]],[/\btu_(1491) b/i],[h,[_,"Rotor"],[f,y]],[/(shield[\w ]+) b/i],[h,[_,"Nvidia"],[f,y]],[/(sprint) (\w+)/i],[_,h,[f,j]],[/(kin\.[onetw]{3})/i],[[h,/\./g," "],[_,ie],[f,j]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[h,[_,go],[f,y]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[h,[_,go],[f,j]],[/smart-tv.+(samsung)/i],[_,[f,w]],[/hbbtv.+maple;(\d+)/i],[[h,/^/,"SmartTV"],[_,mn],[f,w]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[_,ee],[f,w]],[/(apple) ?tv/i],[_,[h,R+" TV"],[f,w]],[/crkey/i],[[h,U+"cast"],[_,se],[f,w]],[/droid.+aft(\w+)( bui|\))/i],[h,[_,H],[f,w]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[h,[_,Hn],[f,w]],[/(bravia[\w ]+)( bui|\))/i],[h,[_,me],[f,w]],[/(mitv-\w{5}) bui/i],[h,[_,mo],[f,w]],[/Hbbtv.*(technisat) (.*);/i],[_,h,[f,w]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[_,Bi],[h,Bi],[f,w]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[f,w]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[_,h,[f,v]],[/droid.+; (shield) bui/i],[h,[_,"Nvidia"],[f,v]],[/(playstation [345portablevi]+)/i],[h,[_,me],[f,v]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[h,[_,ie],[f,v]],[/((pebble))app/i],[_,h,[f,S]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[h,[_,R],[f,S]],[/droid.+; (glass) \d/i],[h,[_,se],[f,S]],[/droid.+; (wt63?0{2,3})\)/i],[h,[_,go],[f,S]],[/(quest( \d| pro)?)/i],[h,[_,rh],[f,S]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[_,[f,T]],[/(aeobc)\b/i],[h,[_,H],[f,T]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[h,[f,j]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[h,[f,y]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[f,y]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[f,j]],[/(android[-\w\. ]{0,9});.+buil/i],[h,[_,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[b,[g,te+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[b,[g,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[g,b],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[b,g]],os:[[/microsoft (windows) (vista|xp)/i],[g,b],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[g,[b,Mi,Dl]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[b,Mi,Dl],[g,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[b,/_/g,"."],[g,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[g,ah],[b,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[b,g],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[g,b],[/\(bb(10);/i],[b,[g,K]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[b,[g,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[b,[g,oe+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[b,[g,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[b,[g,"watchOS"]],[/crkey\/([\d\.]+)/i],[b,[g,U+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[g,Ml],b],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[g,b],[/(sunos) ?([\w\.\d]*)/i],[[g,"Solaris"],b],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[g,b]]},vs=function(Oe,Ge){if(typeof Oe===d&&(Ge=Oe,Oe=r),!(this instanceof vs))return new vs(Oe,Ge).getResult();var Ce=typeof n!==l&&n.navigator?n.navigator:r,Xe=Oe||(Ce&&Ce.userAgent?Ce.userAgent:o),Vs=Ce&&Ce.userAgentData?Ce.userAgentData:r,As=Ge?Ng(Ul,Ge):Ul,We=Ce&&Ce.userAgent==Xe;return this.getBrowser=function(){var je={};return je[g]=r,je[b]=r,pa.call(je,Xe,As.browser),je[p]=ih(je[b]),We&&Ce&&Ce.brave&&typeof Ce.brave.isBrave==c&&(je[g]="Brave"),je},this.getCPU=function(){var je={};return je[x]=r,pa.call(je,Xe,As.cpu),je},this.getDevice=function(){var je={};return je[_]=r,je[h]=r,je[f]=r,pa.call(je,Xe,As.device),We&&!je[f]&&Vs&&Vs.mobile&&(je[f]=j),We&&je[h]=="Macintosh"&&Ce&&typeof Ce.standalone!==l&&Ce.maxTouchPoints&&Ce.maxTouchPoints>2&&(je[h]="iPad",je[f]=y),je},this.getEngine=function(){var je={};return je[g]=r,je[b]=r,pa.call(je,Xe,As.engine),je},this.getOS=function(){var je={};return je[g]=r,je[b]=r,pa.call(je,Xe,As.os),We&&!je[g]&&Vs&&Vs.platform&&Vs.platform!="Unknown"&&(je[g]=Vs.platform.replace(/chrome os/i,Ml).replace(/macos/i,ah)),je},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Xe},this.setUA=function(je){return Xe=typeof je===u&&je.length>E?Bi(je,E):je,this},this.setUA(Xe),this};vs.VERSION=a,vs.BROWSER=Ri([g,b,p]),vs.CPU=Ri([x]),vs.DEVICE=Ri([h,_,f,v,j,w,y,S,T]),vs.ENGINE=vs.OS=Ri([g,b]),e.exports&&(s=e.exports=vs),s.UAParser=vs;var kr=typeof n!==l&&(n.jQuery||n.Zepto);if(kr&&!kr.ua){var _o=new vs;kr.ua=_o.getResult(),kr.ua.get=function(){return _o.getUA()},kr.ua.set=function(Oe){_o.setUA(Oe);var Ge=_o.getResult();for(var Ce in Ge)kr.ua[Ce]=Ge[Ce]}}})(typeof window=="object"?window:Zq)}(zd,zd.exports)),zd.exports}var Oy;function e9(){if(Oy)return re;Oy=1,Object.defineProperty(re,"__esModule",{value:!0});function e(O){return O&&typeof O=="object"&&"default"in O?O.default:O}var s=zm(),n=e(s),r=Xq(),a=new r,o=a.getBrowser(),i=a.getCPU(),c=a.getDevice(),l=a.getEngine(),d=a.getOS(),u=a.getUA(),p=function(I){return a.setUA(I)},h=function(I){if(!I){console.error("No userAgent string was provided");return}var N=new r(I);return{UA:N,browser:N.getBrowser(),cpu:N.getCPU(),device:N.getDevice(),engine:N.getEngine(),os:N.getOS(),ua:N.getUA(),setUserAgent:function(Q){return N.setUA(Q)}}},g=Object.freeze({ClientUAInstance:a,browser:o,cpu:i,device:c,engine:l,os:d,ua:u,setUa:p,parseUserAgent:h});function f(O,I){var N=Object.keys(O);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(O);I&&(z=z.filter(function(Q){return Object.getOwnPropertyDescriptor(O,Q).enumerable})),N.push.apply(N,z)}return N}function _(O){for(var I=1;I<arguments.length;I++){var N=arguments[I]!=null?arguments[I]:{};I%2?f(Object(N),!0).forEach(function(z){y(O,z,N[z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(N)):f(Object(N)).forEach(function(z){Object.defineProperty(O,z,Object.getOwnPropertyDescriptor(N,z))})}return O}function b(O){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?b=function(I){return typeof I}:b=function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},b(O)}function x(O,I){if(!(O instanceof I))throw new TypeError("Cannot call a class as a function")}function v(O,I){for(var N=0;N<I.length;N++){var z=I[N];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(O,z.key,z)}}function j(O,I,N){return I&&v(O.prototype,I),O}function y(O,I,N){return I in O?Object.defineProperty(O,I,{value:N,enumerable:!0,configurable:!0,writable:!0}):O[I]=N,O}function w(){return w=Object.assign||function(O){for(var I=1;I<arguments.length;I++){var N=arguments[I];for(var z in N)Object.prototype.hasOwnProperty.call(N,z)&&(O[z]=N[z])}return O},w.apply(this,arguments)}function S(O,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function");O.prototype=Object.create(I&&I.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),I&&E(O,I)}function T(O){return T=Object.setPrototypeOf?Object.getPrototypeOf:function(N){return N.__proto__||Object.getPrototypeOf(N)},T(O)}function E(O,I){return E=Object.setPrototypeOf||function(z,Q){return z.__proto__=Q,z},E(O,I)}function H(O,I){if(O==null)return{};var N={},z=Object.keys(O),Q,Re;for(Re=0;Re<z.length;Re++)Q=z[Re],!(I.indexOf(Q)>=0)&&(N[Q]=O[Q]);return N}function R(O,I){if(O==null)return{};var N=H(O,I),z,Q;if(Object.getOwnPropertySymbols){var Re=Object.getOwnPropertySymbols(O);for(Q=0;Q<Re.length;Q++)z=Re[Q],!(I.indexOf(z)>=0)&&Object.prototype.propertyIsEnumerable.call(O,z)&&(N[z]=O[z])}return N}function $(O){if(O===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O}function K(O,I){if(I&&(typeof I=="object"||typeof I=="function"))return I;if(I!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $(O)}function Z(O,I){return U(O)||te(O,I)||oe(O,I)||L()}function U(O){if(Array.isArray(O))return O}function te(O,I){var N=O==null?null:typeof Symbol<"u"&&O[Symbol.iterator]||O["@@iterator"];if(N!=null){var z=[],Q=!0,Re=!1,Rt,js;try{for(N=N.call(O);!(Q=(Rt=N.next()).done)&&(z.push(Rt.value),!(I&&z.length===I));Q=!0);}catch(dh){Re=!0,js=dh}finally{try{!Q&&N.return!=null&&N.return()}finally{if(Re)throw js}}return z}}function oe(O,I){if(O){if(typeof O=="string")return se(O,I);var N=Object.prototype.toString.call(O).slice(8,-1);if(N==="Object"&&O.constructor&&(N=O.constructor.name),N==="Map"||N==="Set")return Array.from(O);if(N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N))return se(O,I)}}function se(O,I){(I==null||I>O.length)&&(I=O.length);for(var N=0,z=new Array(I);N<I;N++)z[N]=O[N];return z}function L(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ee={Mobile:"mobile",Tablet:"tablet",SmartTv:"smarttv",Console:"console",Wearable:"wearable",Embedded:"embedded",Browser:void 0},ie={Chrome:"Chrome",Firefox:"Firefox",Opera:"Opera",Yandex:"Yandex",Safari:"Safari",InternetExplorer:"Internet Explorer",Edge:"Edge",Chromium:"Chromium",Ie:"IE",MobileSafari:"Mobile Safari",EdgeChromium:"Edge Chromium",MIUI:"MIUI Browser",SamsungBrowser:"Samsung Browser"},He={IOS:"iOS",Android:"Android",WindowsPhone:"Windows Phone",Windows:"Windows",MAC_OS:"Mac OS"},Ot={isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1},mn=function(I){switch(I){case ee.Mobile:return{isMobile:!0};case ee.Tablet:return{isTablet:!0};case ee.SmartTv:return{isSmartTV:!0};case ee.Console:return{isConsole:!0};case ee.Wearable:return{isWearable:!0};case ee.Browser:return{isBrowser:!0};case ee.Embedded:return{isEmbedded:!0};default:return Ot}},Hn=function(I){return p(I)},me=function(I){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none";return I||N},mo=function(){return typeof window<"u"&&(window.navigator||navigator)?window.navigator||navigator:!1},go=function(I){var N=mo();return N&&N.platform&&(N.platform.indexOf(I)!==-1||N.platform==="MacIntel"&&N.maxTouchPoints>1&&!window.MSStream)},rh=function(I,N,z,Q,Re){return{isBrowser:I,browserMajorVersion:me(N.major),browserFullVersion:me(N.version),browserName:me(N.name),engineName:me(z.name),engineVersion:me(z.version),osName:me(Q.name),osVersion:me(Q.version),userAgent:me(Re)}},Ml=function(I,N,z,Q){return _({},I,{vendor:me(N.vendor),model:me(N.model),os:me(z.name),osVersion:me(z.version),ua:me(Q)})},ah=function(I,N,z,Q){return{isSmartTV:I,engineName:me(N.name),engineVersion:me(N.version),osName:me(z.name),osVersion:me(z.version),userAgent:me(Q)}},Ng=function(I,N,z,Q){return{isConsole:I,engineName:me(N.name),engineVersion:me(N.version),osName:me(z.name),osVersion:me(z.version),userAgent:me(Q)}},Ri=function(I,N,z,Q){return{isWearable:I,engineName:me(N.name),engineVersion:me(N.version),osName:me(z.name),osVersion:me(z.version),userAgent:me(Q)}},oh=function(I,N,z,Q,Re){return{isEmbedded:I,vendor:me(N.vendor),model:me(N.model),engineName:me(z.name),engineVersion:me(z.version),osName:me(Q.name),osVersion:me(Q.version),userAgent:me(Re)}};function fo(O){var I=O?h(O):g,N=I.device,z=I.browser,Q=I.engine,Re=I.os,Rt=I.ua,js=mn(N.type),dh=js.isBrowser,TO=js.isMobile,PO=js.isTablet,kj=js.isSmartTV,Tj=js.isConsole,Pj=js.isWearable,Nj=js.isEmbedded;if(dh)return rh(dh,z,Q,Re,Rt);if(kj)return ah(kj,Q,Re,Rt);if(Tj)return Ng(Tj,Q,Re,Rt);if(TO||PO)return Ml(js,N,Re,Rt);if(Pj)return Ri(Pj,Q,Re,Rt);if(Nj)return oh(Nj,N,Q,Re,Rt)}var ih=function(I){var N=I.type;return N===ee.Mobile},Bi=function(I){var N=I.type;return N===ee.Tablet},pa=function(I){var N=I.type;return N===ee.Mobile||N===ee.Tablet},Mi=function(I){var N=I.type;return N===ee.SmartTv},Di=function(I){var N=I.type;return N===ee.Browser},Dl=function(I){var N=I.type;return N===ee.Wearable},Ul=function(I){var N=I.type;return N===ee.Console},vs=function(I){var N=I.type;return N===ee.Embedded},kr=function(I){var N=I.vendor;return me(N)},_o=function(I){var N=I.model;return me(N)},Oe=function(I){var N=I.type;return me(N,"browser")},Ge=function(I){var N=I.name;return N===He.Android},Ce=function(I){var N=I.name;return N===He.Windows},Xe=function(I){var N=I.name;return N===He.MAC_OS},Vs=function(I){var N=I.name;return N===He.WindowsPhone},As=function(I){var N=I.name;return N===He.IOS},We=function(I){var N=I.version;return me(N)},je=function(I){var N=I.name;return me(N)},Es=function(I){var N=I.name;return N===ie.Chrome},Ui=function(I){var N=I.name;return N===ie.Firefox},Fl=function(I){var N=I.name;return N===ie.Chromium},ch=function(I){var N=I.name;return N===ie.Edge},Zv=function(I){var N=I.name;return N===ie.Yandex},Xv=function(I){var N=I.name;return N===ie.Safari||N===ie.MobileSafari},ej=function(I){var N=I.name;return N===ie.MobileSafari},tj=function(I){var N=I.name;return N===ie.Opera},sj=function(I){var N=I.name;return N===ie.InternetExplorer||N===ie.Ie},nj=function(I){var N=I.name;return N===ie.MIUI},rj=function(I){var N=I.name;return N===ie.SamsungBrowser},aj=function(I){var N=I.version;return me(N)},oj=function(I){var N=I.major;return me(N)},ij=function(I){var N=I.name;return me(N)},cj=function(I){var N=I.name;return me(N)},lj=function(I){var N=I.version;return me(N)},dj=function(){var I=mo(),N=I&&I.userAgent&&I.userAgent.toLowerCase();return typeof N=="string"?/electron/.test(N):!1},Fi=function(I){return typeof I=="string"&&I.indexOf("Edg/")!==-1},uj=function(){var I=mo();return I&&(/iPad|iPhone|iPod/.test(I.platform)||I.platform==="MacIntel"&&I.maxTouchPoints>1)&&!window.MSStream},Vn=function(){return go("iPad")},hj=function(){return go("iPhone")},pj=function(){return go("iPod")},mj=function(I){return me(I)};function gj(O){var I=O||g,N=I.device,z=I.browser,Q=I.os,Re=I.engine,Rt=I.ua;return{isSmartTV:Mi(N),isConsole:Ul(N),isWearable:Dl(N),isEmbedded:vs(N),isMobileSafari:ej(z)||Vn(),isChromium:Fl(z),isMobile:pa(N)||Vn(),isMobileOnly:ih(N),isTablet:Bi(N)||Vn(),isBrowser:Di(N),isDesktop:Di(N),isAndroid:Ge(Q),isWinPhone:Vs(Q),isIOS:As(Q)||Vn(),isChrome:Es(z),isFirefox:Ui(z),isSafari:Xv(z),isOpera:tj(z),isIE:sj(z),osVersion:We(Q),osName:je(Q),fullBrowserVersion:aj(z),browserVersion:oj(z),browserName:ij(z),mobileVendor:kr(N),mobileModel:_o(N),engineName:cj(Re),engineVersion:lj(Re),getUA:mj(Rt),isEdge:ch(z)||Fi(Rt),isYandex:Zv(z),deviceType:Oe(N),isIOS13:uj(),isIPad13:Vn(),isIPhone13:hj(),isIPod13:pj(),isElectron:dj(),isEdgeChromium:Fi(Rt),isLegacyEdge:ch(z)&&!Fi(Rt),isWindows:Ce(Q),isMacOs:Xe(Q),isMIUI:nj(z),isSamsungBrowser:rj(z)}}var fj=Mi(c),_j=Ul(c),bj=Dl(c),LE=vs(c),$E=ej(o)||Vn(),RE=Fl(o),lh=pa(c)||Vn(),xj=ih(c),vj=Bi(c)||Vn(),jj=Di(c),BE=Di(c),yj=Ge(d),wj=Vs(d),Sj=As(d)||Vn(),ME=Es(o),DE=Ui(o),UE=Xv(o),FE=tj(o),Cj=sj(o),zE=We(d),qE=je(d),HE=aj(o),VE=oj(o),WE=ij(o),GE=kr(c),KE=_o(c),QE=cj(l),YE=lj(l),JE=mj(u),ZE=ch(o)||Fi(u),XE=Zv(o),eO=Oe(c),tO=uj(),sO=Vn(),nO=hj(),rO=pj(),aO=dj(),oO=Fi(u),iO=ch(o)&&!Fi(u),cO=Ce(d),lO=Xe(d),dO=nj(o),uO=rj(o),hO=function(I){if(!I||typeof I!="string"){console.error("No valid user agent string was provided");return}var N=h(I),z=N.device,Q=N.browser,Re=N.os,Rt=N.engine,js=N.ua;return gj({device:z,browser:Q,os:Re,engine:Rt,ua:js})},pO=function(I){var N=I.renderWithFragment,z=I.children,Q=R(I,["renderWithFragment","children"]);return yj?N?n.createElement(s.Fragment,null,z):n.createElement("div",Q,z):null},mO=function(I){var N=I.renderWithFragment,z=I.children,Q=R(I,["renderWithFragment","children"]);return jj?N?n.createElement(s.Fragment,null,z):n.createElement("div",Q,z):null},gO=function(I){var N=I.renderWithFragment,z=I.children,Q=R(I,["renderWithFragment","children"]);return Cj?N?n.createElement(s.Fragment,null,z):n.createElement("div",Q,z):null},fO=function(I){var N=I.renderWithFragment,z=I.children,Q=R(I,["renderWithFragment","children"]);return Sj?N?n.createElement(s.Fragment,null,z):n.createElement("div",Q,z):null},_O=function(I){var N=I.renderWithFragment,z=I.children,Q=R(I,["renderWithFragment","children"]);return lh?N?n.createElement(s.Fragment,null,z):n.createElement("div",Q,z):null},bO=function(I){var N=I.renderWithFragment,z=I.children,Q=R(I,["renderWithFragment","children"]);return vj?N?n.createElement(s.Fragment,null,z):n.createElement("div",Q,z):null},xO=function(I){var N=I.renderWithFragment,z=I.children,Q=R(I,["renderWithFragment","children"]);return wj?N?n.createElement(s.Fragment,null,z):n.createElement("div",Q,z):null},vO=function(I){var N=I.renderWithFragment,z=I.children;I.viewClassName,I.style;var Q=R(I,["renderWithFragment","children","viewClassName","style"]);return xj?N?n.createElement(s.Fragment,null,z):n.createElement("div",Q,z):null},jO=function(I){var N=I.renderWithFragment,z=I.children,Q=R(I,["renderWithFragment","children"]);return fj?N?n.createElement(s.Fragment,null,z):n.createElement("div",Q,z):null},yO=function(I){var N=I.renderWithFragment,z=I.children,Q=R(I,["renderWithFragment","children"]);return _j?N?n.createElement(s.Fragment,null,z):n.createElement("div",Q,z):null},wO=function(I){var N=I.renderWithFragment,z=I.children,Q=R(I,["renderWithFragment","children"]);return bj?N?n.createElement(s.Fragment,null,z):n.createElement("div",Q,z):null},SO=function(I){var N=I.renderWithFragment,z=I.children;I.viewClassName,I.style;var Q=I.condition,Re=R(I,["renderWithFragment","children","viewClassName","style","condition"]);return Q?N?n.createElement(s.Fragment,null,z):n.createElement("div",Re,z):null};function CO(O){return function(I){S(N,I);function N(z){var Q;return x(this,N),Q=K(this,T(N).call(this,z)),Q.isEventListenerAdded=!1,Q.handleOrientationChange=Q.handleOrientationChange.bind($(Q)),Q.onOrientationChange=Q.onOrientationChange.bind($(Q)),Q.onPageLoad=Q.onPageLoad.bind($(Q)),Q.state={isLandscape:!1,isPortrait:!1},Q}return j(N,[{key:"handleOrientationChange",value:function(){this.isEventListenerAdded||(this.isEventListenerAdded=!0);var Q=window.innerWidth>window.innerHeight?90:0;this.setState({isPortrait:Q===0,isLandscape:Q===90})}},{key:"onOrientationChange",value:function(){this.handleOrientationChange()}},{key:"onPageLoad",value:function(){this.handleOrientationChange()}},{key:"componentDidMount",value:function(){(typeof window>"u"?"undefined":b(window))!==void 0&&lh&&(this.isEventListenerAdded?window.removeEventListener("load",this.onPageLoad,!1):(this.handleOrientationChange(),window.addEventListener("load",this.onPageLoad,!1)),window.addEventListener("resize",this.onOrientationChange,!1))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onOrientationChange,!1)}},{key:"render",value:function(){return n.createElement(O,w({},this.props,{isLandscape:this.state.isLandscape,isPortrait:this.state.isPortrait}))}}]),N}(n.Component)}function IO(){var O=s.useState(function(){var Re=window.innerWidth>window.innerHeight?90:0;return{isPortrait:Re===0,isLandscape:Re===90,orientation:Re===0?"portrait":"landscape"}}),I=Z(O,2),N=I[0],z=I[1],Q=s.useCallback(function(){var Re=window.innerWidth>window.innerHeight?90:0,Rt={isPortrait:Re===0,isLandscape:Re===90,orientation:Re===0?"portrait":"landscape"};N.orientation!==Rt.orientation&&z(Rt)},[N.orientation]);return s.useEffect(function(){return(typeof window>"u"?"undefined":b(window))!==void 0&&lh&&(Q(),window.addEventListener("load",Q,!1),window.addEventListener("resize",Q,!1)),function(){window.removeEventListener("resize",Q,!1),window.removeEventListener("load",Q,!1)}},[Q]),N}function Ij(O){var I=O||window.navigator.userAgent;return h(I)}function kO(O){var I=O||window.navigator.userAgent,N=Ij(I),z=gj(N);return[z,N]}return re.AndroidView=pO,re.BrowserTypes=ie,re.BrowserView=mO,re.ConsoleView=yO,re.CustomView=SO,re.IEView=gO,re.IOSView=fO,re.MobileOnlyView=vO,re.MobileView=_O,re.OsTypes=He,re.SmartTVView=jO,re.TabletView=bO,re.WearableView=wO,re.WinPhoneView=xO,re.browserName=WE,re.browserVersion=VE,re.deviceDetect=fo,re.deviceType=eO,re.engineName=QE,re.engineVersion=YE,re.fullBrowserVersion=HE,re.getSelectorsByUserAgent=hO,re.getUA=JE,re.isAndroid=yj,re.isBrowser=jj,re.isChrome=ME,re.isChromium=RE,re.isConsole=_j,re.isDesktop=BE,re.isEdge=ZE,re.isEdgeChromium=oO,re.isElectron=aO,re.isEmbedded=LE,re.isFirefox=DE,re.isIE=Cj,re.isIOS=Sj,re.isIOS13=tO,re.isIPad13=sO,re.isIPhone13=nO,re.isIPod13=rO,re.isLegacyEdge=iO,re.isMIUI=dO,re.isMacOs=lO,re.isMobile=lh,re.isMobileOnly=xj,re.isMobileSafari=$E,re.isOpera=FE,re.isSafari=UE,re.isSamsungBrowser=uO,re.isSmartTV=fj,re.isTablet=vj,re.isWearable=bj,re.isWinPhone=wj,re.isWindows=cO,re.isYandex=XE,re.mobileModel=KE,re.mobileVendor=GE,re.osName=qE,re.osVersion=zE,re.parseUserAgent=h,re.setUserAgent=Hn,re.useDeviceData=Ij,re.useDeviceSelectors=kO,re.useMobileOrientation=IO,re.withOrientationChange=CO,re}var cm=e9();const t9=()=>{const{browser:e}=cm.useDeviceData(window.navigator.userAgent);m.useEffect(()=>{e.name===cm.BrowserTypes.Safari&&window.document.body.classList.add("safari")},[e])},s9=()=>{const e=Yd("promo"),s=nt(),{refetch:n}=Zm(),{trackUiInteraction:r}=k();return m.useEffect(()=>{if(!e)return;W.applyPromoCode(e).then(({data:o})=>{ze(t.jsx(tt,{children:`Congratulations! You have received ${Us(o.credit_cents)} in credits for your Neon account!`})),r("promo_code_applied",{promo_code:e});try{n()}catch{}}).catch(Y);const a=new URLSearchParams(s.location.search);a.delete("promo"),s.replace({search:a.toString()})},[e,s,n,r]),null};var ji;(function(e){e.FORMAT_ERROR="FORMAT_ERROR",e.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",e.INVALID_CONFIG="INVALID_CONFIG",e.MISSING_DATA="MISSING_DATA",e.MISSING_TRANSLATION="MISSING_TRANSLATION"})(ji||(ji={}));var Qu=function(e){an(s,e);function s(n,r,a){var o=this,i=a?a instanceof Error?a:new Error(String(a)):void 0;return o=e.call(this,"[@formatjs/intl Error ".concat(n,"] ").concat(r,`
`).concat(i?`
`.concat(i.message,`
`).concat(i.stack):""))||this,o.code=n,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(o,s),o}return s}(Error),n9=function(e){an(s,e);function s(n,r){return e.call(this,ji.UNSUPPORTED_FORMATTER,n,r)||this}return s}(Qu),r9=function(e){an(s,e);function s(n,r){return e.call(this,ji.INVALID_CONFIG,n,r)||this}return s}(Qu),Ly=function(e){an(s,e);function s(n,r){return e.call(this,ji.MISSING_DATA,n,r)||this}return s}(Qu),pn=function(e){an(s,e);function s(n,r,a){var o=e.call(this,ji.FORMAT_ERROR,"".concat(n,`
Locale: `).concat(r,`
`),a)||this;return o.locale=r,o}return s}(Qu),nf=function(e){an(s,e);function s(n,r,a,o){var i=e.call(this,"".concat(n,`
MessageID: `).concat(a==null?void 0:a.id,`
Default Message: `).concat(a==null?void 0:a.defaultMessage,`
Description: `).concat(a==null?void 0:a.description,`
`),r,o)||this;return i.descriptor=a,i.locale=r,i}return s}(pn),a9=function(e){an(s,e);function s(n,r){var a=e.call(this,ji.MISSING_TRANSLATION,'Missing message: "'.concat(n.id,'" for locale "').concat(r,'", using ').concat(n.defaultMessage?"default message (".concat(typeof n.defaultMessage=="string"?n.defaultMessage:n.defaultMessage.map(function(o){var i;return(i=o.value)!==null&&i!==void 0?i:JSON.stringify(o)}).join(),")"):"id"," as fallback."))||this;return a.descriptor=n,a}return s}(Qu);function o9(e,s,n){if(n===void 0&&(n=Error),!e)throw new n(s)}function Tl(e,s,n){return n===void 0&&(n={}),s.reduce(function(r,a){return a in e?r[a]=e[a]:a in n&&(r[a]=n[a]),r},{})}var i9=function(e){},c9=function(e){},cT={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:i9,onWarn:c9};function lT(){return{dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}}}function wo(e){return{create:function(){return{get:function(s){return e[s]},set:function(s,n){e[s]=n}}}}}function l9(e){e===void 0&&(e=lT());var s=Intl.RelativeTimeFormat,n=Intl.ListFormat,r=Intl.DisplayNames,a=nr(function(){for(var c,l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];return new((c=Intl.DateTimeFormat).bind.apply(c,or([void 0],l,!1)))},{cache:wo(e.dateTime),strategy:rr.variadic}),o=nr(function(){for(var c,l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];return new((c=Intl.NumberFormat).bind.apply(c,or([void 0],l,!1)))},{cache:wo(e.number),strategy:rr.variadic}),i=nr(function(){for(var c,l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];return new((c=Intl.PluralRules).bind.apply(c,or([void 0],l,!1)))},{cache:wo(e.pluralRules),strategy:rr.variadic});return{getDateTimeFormat:a,getNumberFormat:o,getMessageFormat:nr(function(c,l,d,u){return new Hk(c,l,d,de({formatters:{getNumberFormat:o,getDateTimeFormat:a,getPluralRules:i}},u||{}))},{cache:wo(e.message),strategy:rr.variadic}),getRelativeTimeFormat:nr(function(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];return new(s.bind.apply(s,or([void 0],c,!1)))},{cache:wo(e.relativeTime),strategy:rr.variadic}),getPluralRules:i,getListFormat:nr(function(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];return new(n.bind.apply(n,or([void 0],c,!1)))},{cache:wo(e.list),strategy:rr.variadic}),getDisplayNames:nr(function(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];return new(r.bind.apply(r,or([void 0],c,!1)))},{cache:wo(e.displayNames),strategy:rr.variadic})}}function Yx(e,s,n,r){var a=e&&e[s],o;if(a&&(o=a[n]),o)return o;r(new n9("No ".concat(s," format named: ").concat(n)))}function yh(e,s){return Object.keys(e).reduce(function(n,r){return n[r]=de({timeZone:s},e[r]),n},{})}function $y(e,s){var n=Object.keys(de(de({},e),s));return n.reduce(function(r,a){return r[a]=de(de({},e[a]||{}),s[a]||{}),r},{})}function Ry(e,s){if(!s)return e;var n=Hk.formats;return de(de(de({},n),e),{date:$y(yh(n.date,s),yh(e.date||{},s)),time:$y(yh(n.time,s),yh(e.time||{},s))})}var _b=function(e,s,n,r,a){var o=e.locale,i=e.formats,c=e.messages,l=e.defaultLocale,d=e.defaultFormats,u=e.fallbackOnEmptyString,p=e.onError,h=e.timeZone,g=e.defaultRichTextElements;n===void 0&&(n={id:""});var f=n.id,_=n.defaultMessage;o9(!!f,"[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.github.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.github.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.github.io/docs/tooling/linter#enforce-id)\nto autofix this issue");var b=String(f),x=c&&Object.prototype.hasOwnProperty.call(c,b)&&c[b];if(Array.isArray(x)&&x.length===1&&x[0].type===ht.literal)return x[0].value;if(!r&&x&&typeof x=="string"&&!g)return x.replace(/'\{(.*?)\}'/gi,"{$1}");if(r=de(de({},g),r||{}),i=Ry(i,h),d=Ry(d,h),!x){if(u===!1&&x==="")return x;if((!_||o&&o.toLowerCase()!==l.toLowerCase())&&p(new a9(n,o)),_)try{var v=s.getMessageFormat(_,l,d,a);return v.format(r)}catch(j){return p(new nf('Error formatting default message for: "'.concat(b,'", rendering default message verbatim'),o,n,j)),typeof _=="string"?_:b}return b}try{var v=s.getMessageFormat(x,o,i,de({formatters:s},a||{}));return v.format(r)}catch(j){p(new nf('Error formatting message: "'.concat(b,'", using ').concat(_?"default message":"id"," as fallback."),o,n,j))}if(_)try{var v=s.getMessageFormat(_,l,d,a);return v.format(r)}catch(j){p(new nf('Error formatting the default message for: "'.concat(b,'", rendering message verbatim'),o,n,j))}return typeof x=="string"?x:typeof _=="string"?_:b},d9=["formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem","fractionalSecondDigits"];function Yu(e,s,n,r){var a=e.locale,o=e.formats,i=e.onError,c=e.timeZone;r===void 0&&(r={});var l=r.format,d=de(de({},c&&{timeZone:c}),l&&Yx(o,s,l,i)),u=Tl(r,d9,d);return s==="time"&&!u.hour&&!u.minute&&!u.second&&!u.timeStyle&&!u.dateStyle&&(u=de(de({},u),{hour:"numeric",minute:"numeric"})),n(a,u)}function u9(e,s){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=n[0],o=n[1],i=o===void 0?{}:o,c=typeof a=="string"?new Date(a||0):a;try{return Yu(e,"date",s,i).format(c)}catch(l){e.onError(new pn("Error formatting date.",e.locale,l))}return String(c)}function h9(e,s){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=n[0],o=n[1],i=o===void 0?{}:o,c=typeof a=="string"?new Date(a||0):a;try{return Yu(e,"time",s,i).format(c)}catch(l){e.onError(new pn("Error formatting time.",e.locale,l))}return String(c)}function p9(e,s){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=n[0],o=n[1],i=n[2],c=i===void 0?{}:i,l=typeof a=="string"?new Date(a||0):a,d=typeof o=="string"?new Date(o||0):o;try{return Yu(e,"dateTimeRange",s,c).formatRange(l,d)}catch(u){e.onError(new pn("Error formatting date time range.",e.locale,u))}return String(l)}function m9(e,s){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=n[0],o=n[1],i=o===void 0?{}:o,c=typeof a=="string"?new Date(a||0):a;try{return Yu(e,"date",s,i).formatToParts(c)}catch(l){e.onError(new pn("Error formatting date.",e.locale,l))}return[]}function g9(e,s){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=n[0],o=n[1],i=o===void 0?{}:o,c=typeof a=="string"?new Date(a||0):a;try{return Yu(e,"time",s,i).formatToParts(c)}catch(l){e.onError(new pn("Error formatting time.",e.locale,l))}return[]}var f9=["style","type","fallback","languageDisplay"];function _9(e,s,n,r){var a=e.locale,o=e.onError,i=Intl.DisplayNames;i||o(new lo(`Intl.DisplayNames is not available in this environment.
Try polyfilling it using "@formatjs/intl-displaynames"
`,br.MISSING_INTL_API));var c=Tl(r,f9);try{return s(a,c).of(n)}catch(l){o(new pn("Error formatting display name.",a,l))}}var b9=["type","style"],By=Date.now();function x9(e){return"".concat(By,"_").concat(e,"_").concat(By)}function v9(e,s,n,r){r===void 0&&(r={});var a=dT(e,s,n,r).reduce(function(o,i){var c=i.value;return typeof c!="string"?o.push(c):typeof o[o.length-1]=="string"?o[o.length-1]+=c:o.push(c),o},[]);return a.length===1?a[0]:a.length===0?"":a}function dT(e,s,n,r){var a=e.locale,o=e.onError;r===void 0&&(r={});var i=Intl.ListFormat;i||o(new lo(`Intl.ListFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-listformat"
`,br.MISSING_INTL_API));var c=Tl(r,b9);try{var l={},d=n.map(function(u,p){if(typeof u=="object"){var h=x9(p);return l[h]=u,h}return String(u)});return s(a,c).formatToParts(d).map(function(u){return u.type==="literal"?u:de(de({},u),{value:l[u.value]||u.value})})}catch(u){o(new pn("Error formatting list.",a,u))}return n}var j9=["type"];function y9(e,s,n,r){var a=e.locale,o=e.onError;r===void 0&&(r={}),Intl.PluralRules||o(new lo(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,br.MISSING_INTL_API));var i=Tl(r,j9);try{return s(a,i).select(n)}catch(c){o(new pn("Error formatting plural.",a,c))}return"other"}var w9=["numeric","style"];function S9(e,s,n){var r=e.locale,a=e.formats,o=e.onError;n===void 0&&(n={});var i=n.format,c=!!i&&Yx(a,"relative",i,o)||{},l=Tl(n,w9,c);return s(r,l)}function C9(e,s,n,r,a){a===void 0&&(a={}),r||(r="second");var o=Intl.RelativeTimeFormat;o||e.onError(new lo(`Intl.RelativeTimeFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-relativetimeformat"
`,br.MISSING_INTL_API));try{return S9(e,s,a).format(n,r)}catch(i){e.onError(new pn("Error formatting relative time.",e.locale,i))}return String(n)}var I9=["style","currency","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay","numberingSystem","trailingZeroDisplay","roundingPriority","roundingIncrement","roundingMode"];function uT(e,s,n){var r=e.locale,a=e.formats,o=e.onError;n===void 0&&(n={});var i=n.format,c=i&&Yx(a,"number",i,o)||{},l=Tl(n,I9,c);return s(r,l)}function k9(e,s,n,r){r===void 0&&(r={});try{return uT(e,s,r).format(n)}catch(a){e.onError(new pn("Error formatting number.",e.locale,a))}return String(n)}function T9(e,s,n,r){r===void 0&&(r={});try{return uT(e,s,r).formatToParts(n)}catch(a){e.onError(new pn("Error formatting number.",e.locale,a))}return[]}function P9(e){var s=e?e[Object.keys(e)[0]]:void 0;return typeof s=="string"}function N9(e){e.onWarn&&e.defaultRichTextElements&&P9(e.messages||{})&&e.onWarn(`[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. 
Please consider using "@formatjs/cli" to pre-compile your messages for performance.
For more details see https://formatjs.github.io/docs/getting-started/message-distribution`)}function A9(e,s){var n=l9(s),r=de(de({},cT),e),a=r.locale,o=r.defaultLocale,i=r.onError;return a?!Intl.NumberFormat.supportedLocalesOf(a).length&&i?i(new Ly('Missing locale data for locale: "'.concat(a,'" in Intl.NumberFormat. Using default locale: "').concat(o,'" as fallback. See https://formatjs.github.io/docs/react-intl#runtime-requirements for more details'))):!Intl.DateTimeFormat.supportedLocalesOf(a).length&&i&&i(new Ly('Missing locale data for locale: "'.concat(a,'" in Intl.DateTimeFormat. Using default locale: "').concat(o,'" as fallback. See https://formatjs.github.io/docs/react-intl#runtime-requirements for more details'))):(i&&i(new r9('"locale" was not configured, using "'.concat(o,'" as fallback. See https://formatjs.github.io/docs/react-intl/api#intlshape for more details'))),r.locale=r.defaultLocale||"en"),N9(r),de(de({},r),{formatters:n,formatNumber:k9.bind(null,r,n.getNumberFormat),formatNumberToParts:T9.bind(null,r,n.getNumberFormat),formatRelativeTime:C9.bind(null,r,n.getRelativeTimeFormat),formatDate:u9.bind(null,r,n.getDateTimeFormat),formatDateToParts:m9.bind(null,r,n.getDateTimeFormat),formatTime:h9.bind(null,r,n.getDateTimeFormat),formatDateTimeRange:p9.bind(null,r,n.getDateTimeFormat),formatTimeToParts:g9.bind(null,r,n.getDateTimeFormat),formatPlural:y9.bind(null,r,n.getPluralRules),formatMessage:_b.bind(null,r,n),$t:_b.bind(null,r,n),formatList:v9.bind(null,r,n.getListFormat),formatListToParts:dT.bind(null,r,n.getListFormat),formatDisplayName:_9.bind(null,r,n.getDisplayNames)})}function E9(e,s,n){if(n===void 0&&(n=Error),!e)throw new n(s)}function hT(e){E9(e,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}var pT=de(de({},cT),{textComponent:m.Fragment}),O9={key:42},L9=function(e){return m.isValidElement(e)?m.createElement(m.Fragment,O9,e):e},$9=function(e){var s;return(s=m.Children.map(e,L9))!==null&&s!==void 0?s:[]};function R9(e){return function(s){return e(m.Children.toArray(s))}}function bb(e,s){if(e===s)return!0;if(!e||!s)return!1;var n=Object.keys(e),r=Object.keys(s),a=n.length;if(r.length!==a)return!1;for(var o=0;o<a;o++){var i=n[o];if(e[i]!==s[i]||!Object.prototype.hasOwnProperty.call(s,i))return!1}return!0}var Jx=typeof window<"u"&&!window.__REACT_INTL_BYPASS_GLOBAL_CONTEXT__?window.__REACT_INTL_CONTEXT__||(window.__REACT_INTL_CONTEXT__=m.createContext(null)):m.createContext(null);Jx.Consumer;var B9=Jx.Provider,M9=B9,D9=Jx;function Xm(){var e=m.useContext(D9);return hT(e),e}var xb;(function(e){e.formatDate="FormattedDate",e.formatTime="FormattedTime",e.formatNumber="FormattedNumber",e.formatList="FormattedList",e.formatDisplayName="FormattedDisplayName"})(xb||(xb={}));var vb;(function(e){e.formatDate="FormattedDateParts",e.formatTime="FormattedTimeParts",e.formatNumber="FormattedNumberParts",e.formatList="FormattedListParts"})(vb||(vb={}));function mT(e){var s=function(n){var r=Xm(),a=n.value,o=n.children,i=Jc(n,["value","children"]),c=typeof a=="string"?new Date(a||0):a,l=e==="formatDate"?r.formatDateToParts(c,i):r.formatTimeToParts(c,i);return o(l)};return s.displayName=vb[e],s}function Ju(e){var s=function(n){var r=Xm(),a=n.value,o=n.children,i=Jc(n,["value","children"]),c=r[e](a,i);if(typeof o=="function")return o(c);var l=r.textComponent||m.Fragment;return m.createElement(l,null,c)};return s.displayName=xb[e],s}function gT(e){return e&&Object.keys(e).reduce(function(s,n){var r=e[n];return s[n]=qk(r)?R9(r):r,s},{})}var My=function(e,s,n,r){for(var a=[],o=4;o<arguments.length;o++)a[o-4]=arguments[o];var i=gT(r),c=_b.apply(void 0,or([e,s,n,i],a,!1));return Array.isArray(c)?$9(c):c},Dy=function(e,s){var n=e.defaultRichTextElements,r=Jc(e,["defaultRichTextElements"]),a=gT(n),o=A9(de(de(de({},pT),r),{defaultRichTextElements:a}),s),i={locale:o.locale,timeZone:o.timeZone,fallbackOnEmptyString:o.fallbackOnEmptyString,formats:o.formats,defaultLocale:o.defaultLocale,defaultFormats:o.defaultFormats,messages:o.messages,onError:o.onError,defaultRichTextElements:a};return de(de({},o),{formatMessage:My.bind(null,i,o.formatters),$t:My.bind(null,i,o.formatters)})};function U9(e,s){var n=e.values,r=Jc(e,["values"]),a=s.values,o=Jc(s,["values"]);return bb(a,n)&&bb(r,o)}function fT(e){var s=Xm(),n=s.formatMessage,r=s.textComponent,a=r===void 0?m.Fragment:r,o=e.id,i=e.description,c=e.defaultMessage,l=e.values,d=e.children,u=e.tagName,p=u===void 0?a:u,h=e.ignoreTag,g={id:o,description:i,defaultMessage:c},f=n(g,l,{ignoreTag:h});return typeof d=="function"?d(Array.isArray(f)?f:[f]):p?m.createElement(p,null,f):m.createElement(m.Fragment,null,f)}fT.displayName="FormattedMessage";var oi=m.memo(fT,U9);oi.displayName="MemoizedFormattedMessage";function rf(e){return{locale:e.locale,timeZone:e.timeZone,fallbackOnEmptyString:e.fallbackOnEmptyString,formats:e.formats,textComponent:e.textComponent,messages:e.messages,defaultLocale:e.defaultLocale,defaultFormats:e.defaultFormats,onError:e.onError,onWarn:e.onWarn,wrapRichTextChunksInFragment:e.wrapRichTextChunksInFragment,defaultRichTextElements:e.defaultRichTextElements}}var F9=function(e){an(s,e);function s(){var n=e!==null&&e.apply(this,arguments)||this;return n.cache=lT(),n.state={cache:n.cache,intl:Dy(rf(n.props),n.cache),prevConfig:rf(n.props)},n}return s.getDerivedStateFromProps=function(n,r){var a=r.prevConfig,o=r.cache,i=rf(n);return bb(a,i)?null:{intl:Dy(i,o),prevConfig:i}},s.prototype.render=function(){return hT(this.state.intl),m.createElement(M9,{value:this.state.intl},this.props.children)},s.displayName="IntlProvider",s.defaultProps=pT,s}(m.PureComponent);Ju("formatDate");Ju("formatTime");Ju("formatNumber");Ju("formatList");Ju("formatDisplayName");mT("formatDate");mT("formatTime");const z9=[{type:0,value:"General"}],q9=[{type:0,value:"Enabling logical replication:"}],H9=[{type:0,value:"Neon logo"}],V9=[{type:0,value:"Changes your Postgres "},{children:[{type:0,value:"wal_level"}],type:8,value:"code"},{type:0,value:" setting to "},{children:[{type:0,value:"logical"}],type:8,value:"code"}],W9=[{type:0,value:"Restarts all computes in your Neon project, dropping any active connections"}],G9={"/ZQlsK":[{type:0,value:"Can not be turned off once enabled"}],"GnN0x+":[{type:0,value:"Logical replication lets you replicate data changes from Neon to external data services and platforms."}],NJQjXS:z9,P4YirL:q9,QKRCCe:H9,VM21aR:V9,kT2zWj:W9},K9=G9,Q9=({children:e})=>t.jsx(F9,{defaultLocale:"en",locale:"en",messages:K9,children:e}),Y9=({children:e})=>{const[s,n]=m.useState(),[r,a]=m.useState(),[o,i]=m.useState();return t.jsx(W1.Provider,{value:{setProjectData:n,setBranchData:a,setRoleData:i,projectData:s,branchData:r,roleData:o},children:e})},eg=m.createContext({isKeycloakUser:!1}),J9=({config:e,children:s})=>t.jsx(eg.Provider,{value:{isKeycloakUser:e!==void 0},children:s}),_T=()=>{const{isKeycloakUser:e}=m.useContext(eg),{data:s,isError:n}=_t({queryKey:["user_auth_info"],queryFn:()=>W.getCurrentUserAuthInfo(),select:({data:i})=>({userHasPassword:i.password_stored,userAuthAccounts:i.auth_accounts,userLinkedAccounts:i.linked_accounts})}),r=_e(),a=m.useCallback(()=>{r.invalidateQueries({queryKey:["user_auth_info"]})},[r]);return{isKeycloakUser:e,isInitialized:s!==void 0,invalidate:a,isError:n,...s}},Z9={github:"GitHub",google:"Google",hasura:"Hasura",microsoft:"Microsoft",microsoftv2:"Microsoft",keycloak:"Keycloak",vercelmp:"Vercel Marketplace"},lm="upgrade";function Uy(){const{pathname:e,search:s,hash:n}=window.location,r=new URLSearchParams(s);r.delete(lm);const a=`${e}${r}${n}`;window.history.replaceState(null,"",a)}const X9=({targetPlan:e})=>{const{orgId:s}=ae(),{upgradeSubscription:n,isLoading:r}=P2(),{subscriptionType:a,hasSavedCreditCard:o}=fe(),[i,c]=m.useState(!1),l=()=>c(!0),d=()=>c(!1),u=bi(()=>{Uy(),n(e,s)}),p=m.useRef(!1);if(m.useEffect(()=>{if(!r&&!p.current){if(p.current=!0,a===e){Uy();const h=Qa[e];ze(t.jsx(tt,{children:`You are already on a "${h}" plan`}));return}o?l():u()}},[o,r,u,a,e,p]),a!==e)return t.jsx(N2,{isOpen:i,onRequestClose:d,subscriptionType:e,onConfirm:u})},e7=()=>{const{search:e}=gl(),s=m.useMemo(()=>{const n=new URLSearchParams(e).get(lm);if(!(!n||!Q_(n))&&(n==="launch"||n==="scale"))return n},[e]);return s?t.jsx(X9,{targetPlan:s}):null},t7="_menu_1l1gk_1",s7={menu:t7},n7=()=>{const{data:e}=bt(),{trackUiInteraction:s}=k(),{themeOption:n,changeTheme:r}=A2(),a=m.useCallback(()=>{s("user_menu_opened")},[s]),o=m.useCallback(()=>{s("user_menu_sign_out_clicked"),G1().then(()=>px())},[s]),i=m.useMemo(()=>ot([{header:{title:e==null?void 0:e.displayName,subtitle:e==null?void 0:e.email},items:ot([{label:"Account settings",href:C.UserSettings,onClick:()=>s("user_menu_account_clicked")},{label:`Theme: ${aR[n]}`,submenu:rR.map(({value:c,label:l})=>({label:l,icon:n===c?"check":void 0,onClick:()=>{s("user_menu_theme_submenu_clicked",{theme:c}),r(c)}}))}])},{items:[{label:"Logout",onClick:o}]}]),[e,n,o,s,r]);return e===void 0?null:t.jsx(t.Fragment,{children:t.jsx(Jt,{sections:i,onOpen:a,placement:"bottom right",menuClassName:s7.menu,children:t.jsx(oR,{name:e.displayName,image:e.image,"data-qa":"account_menu_button"})})})},r7=()=>{const e=le("growth_free_tier_autoscaling"),{isFreeSubscription:s}=fe(),{compute:n,dataTransfer:r,storage:a,nonPrimaryCompute:o}=Gx();return m.useMemo(()=>s&&(n&&e||r||a||o),[s,n,e,r,a,o])?t.jsx(Gq,{}):null};function Zx(){const{params:{projectId:e},path:s}=fl(),{data:n}=Du(),{data:r}=bt(),a=ca(r),o=n==null?void 0:n.some(i=>i.id===e);return a&&(o||s===C.ProjectsSharedList)}const us={modalTitle:"Create organization",conversionRadioLabel:"Convert personal account",creationRadioLabel:"Create new",showBenefitsToggleLabel:e=>`${e?"Hide":"Show"} plan benefits`,orgNameLabel:"Organization name",orgSubscriptionTypeLabel:"Select plan",conversionAlert:"When you convert your personal account, projects and billing are moved to the new organization. This action is permanent and cannot be undone. Your personal account switches to the Free Plan.",submitButton:"Create organization",success:"Your organization was successfully created.",error:"Something went wrong while creating the organization",integrations:{conversionInfo:"During the conversion, ownership of the integration with the GitHub App (as well as the API Keys created by this integration) and the Vercel integration will be changed from your current user to the new organization."},freeDisabled:"You already have a free organization. Upgrade to add more.",creditsLabel:"Transfer credits",creditsDescription:"You can transfer credits from your personal account to the new organization.",seeFullPricing:"See full pricing details"},a7="_root_n86oo_1",o7={root:a7},i7=({control:e,freeOrgAllowed:s})=>{const{trackUiInteraction:n}=k(),r=(i,c)=>{i.onChange(c),n(`create_org_modal_${z1(c)}_plan_clicked`)},a=$R(),o=m.useMemo(()=>s?a:a.filter(i=>!$1(i.subscriptionType)),[s,a]);return t.jsx(B,{label:us.orgSubscriptionTypeLabel,children:t.jsx(ye,{name:"subscription_type",control:e,render:({field:i})=>t.jsx("div",{className:o7.root,children:o.map(({subscriptionType:c,planName:l,isLegacyPlan:d,price:u,minimumSpend:p,featureGroups:h})=>t.jsx(RR,{planName:l,isLegacyPlan:d,planChangeData:{type:"select",subscriptionType:c,isSelected:i.value===c},price:u,minimumSpend:p,featureGroups:h,hideIncludedTitle:d,onChangePlanClick:g=>r(i,g)},c))})})})},c7="_root_1hj1f_1",l7="_root_disabled_1hj1f_8",d7="_inner_1hj1f_12",u7="_list_1hj1f_25",h7="_planNameBlock_1hj1f_30",p7="_selectCircle_1hj1f_35",m7="_textBlock_1hj1f_39",g7="_planName_1hj1f_30",f7="_priceBlock_1hj1f_50",_7="_price_1hj1f_50",b7="_description_1hj1f_61",x7="_item_1hj1f_81",v7="_icon_1hj1f_86",j7="_icon_includedFeature_1hj1f_90",y7="_icon_missingFeature_1hj1f_94",w7="_hint_1hj1f_98",Gt={root:c7,root_disabled:l7,inner:d7,list:u7,planNameBlock:h7,selectCircle:p7,textBlock:m7,planName:g7,priceBlock:f7,price:_7,description:b7,item:x7,icon:v7,icon_includedFeature:j7,icon_missingFeature:y7,hint:w7},wh=({planName:e,selected:s,pricePerMonth:n,features:r,disabled:a,disabledHint:o,onSelect:i})=>t.jsx("label",{className:V(Gt.root,{[Gt.root_disabled]:a}),children:t.jsx(sa,{checked:s,disabled:a,wide:!0,circle:({checked:c})=>t.jsxs("div",{className:Gt.inner,children:[t.jsxs("div",{className:Gt.planNameBlock,children:[t.jsx("div",{className:Gt.selectCircle,children:t.jsx(E2,{checked:c,disabled:a})}),t.jsxs("div",{className:Gt.textBlock,children:[t.jsxs("span",{className:Gt.planName,children:[e,a&&t.jsxs(t.Fragment,{children:[" ",t.jsx(sn,{icon:"info_italic",size:"l",className:Gt.hint,children:o})]})]}),t.jsxs("span",{className:Gt.priceBlock,children:[t.jsx("span",{className:Gt.price,children:Us(n,!0)}),"/month"]})]})]}),t.jsx("ul",{className:Gt.list,"data-test-qa":"upgrade_modal_feature_list",children:r.map(({id:l,description:d,hint:u,missingFeature:p})=>t.jsxs("li",{className:Gt.item,children:[p?t.jsx(q,{name:"cross_small",size:18,className:V(Gt.icon,Gt.icon_missingFeature)}):t.jsx(q,{name:"check",size:18,className:V(Gt.icon,Gt.icon_includedFeature)})," ",t.jsxs("span",{children:[t.jsx("span",{className:Gt.description,children:d}),u&&t.jsxs(t.Fragment,{children:[" ",t.jsx(sn,{icon:"info_italic",size:"l",className:Gt.hint,children:u})]})]})]},l))})]}),onChange:c=>{c.target.checked&&i()}})}),S7="_selectPlanLabel_trqdd_1",C7="_radioGroup_trqdd_7",Fy={selectPlanLabel:S7,radioGroup:C7},I7=3,Sh=(e,s)=>m.useMemo(()=>s?e:e.slice(0,I7),[e,s]),k7=({control:e,freeOrgAllowed:s})=>{const{trackUiInteraction:n}=k(),r=O2(),[a,o]=m.useState(!1),i=Sh(r.free_v2.usageMetrics,a),c=Sh(r.launch.usageMetrics,a),l=Sh(r.scale.usageMetrics,a),d=Sh(r.business.usageMetrics,a);return t.jsx(B,{label:t.jsxs("div",{className:Fy.selectPlanLabel,children:[t.jsx("div",{children:us.orgSubscriptionTypeLabel}),t.jsx(M,{onClick:()=>o(u=>!u),children:us.showBenefitsToggleLabel(a)})]}),children:t.jsx(ye,{name:"subscription_type",control:e,render:({field:u})=>t.jsxs("div",{className:Fy.radioGroup,children:[s&&t.jsx(wh,{planName:r.free_v2.title,selected:u.value==="free_v2",pricePerMonth:r.free_v2.cost??0,features:i,disabledHint:us.freeDisabled,onSelect:()=>{n("create_org_modal_free_plan_clicked"),u.onChange("free_v2")}}),t.jsx(wh,{planName:r.launch.title,selected:u.value==="launch",pricePerMonth:r.launch.cost??0,features:c,onSelect:()=>{n("create_org_modal_launch_plan_clicked"),u.onChange("launch")}}),t.jsx(wh,{planName:r.scale.title,selected:u.value==="scale",pricePerMonth:r.scale.cost??0,features:l,onSelect:()=>{n("create_org_modal_scale_plan_clicked"),u.onChange("scale")}}),t.jsx(wh,{planName:r.business.title,selected:u.value==="business",pricePerMonth:r.business.cost??0,features:d,onSelect:()=>{n("create_org_modal_business_plan_clicked"),u.onChange("business")}})]})})})},T7=({control:e,freeOrgAllowed:s,shouldDisplayPricingV3:n})=>n?t.jsx(i7,{control:e,freeOrgAllowed:s}):t.jsx(k7,{control:e,freeOrgAllowed:s}),P7="_personalAccount_1s8xa_1",N7="_arrowContainer_1s8xa_16",A7="_conversionAlert_1s8xa_25",Ch={personalAccount:P7,arrowContainer:N7,conversionAlert:A7},jb="#success_org_create",Ih=64,Xx=({onSuccess:e,onRequestClose:s})=>{var v,j;const{shouldDisplayPricingV3:n}=L2(),r=$2(),{data:a}=bt(),{isFreeSubscription:o}=V1(),{data:i}=Un(),{creditBalance:c}=Zm(),l=ca(a),d=!o&&!l,u=m.useMemo(()=>{var w;const y=((w=a==null?void 0:a.firstName)==null?void 0:w.trim())||(a==null?void 0:a.email)||"";return i!=null&&i.some(S=>S.name===y)?"":y},[i,a]),p=Ae({defaultValues:{user_id:a==null?void 0:a.id,name:u,subscription_type:n?"launch_v3":"launch",creation_type:d?"convert":"create",transfer_credits:!1}}),h=nt(),g=p.watch("creation_type"),f=async y=>{if(g==="create")try{const w=await r({organization:{name:y.name},subscription_type:y.subscription_type,transfer_credits:y.transfer_credits});e==null||e({type:"create"}),"session_url"in w?window.location.href=w.session_url:"id"in w?h.push(`${G(C.OrgProjectsList,{orgId:w.id})}${jb}`):Y(us.error)}catch(w){s==null||s(),Y(w)}else try{const S=(await W.convertUserToOrg({name:y.name})).data.id;e==null||e({type:"convert",orgId:S});const T=G(C.OrgProjectsList,{orgId:S});window.location.href=`${Va}${T}${jb}`}catch(w){Y(w)}},_=le("new_users_get_orgs"),{currentData:b}=K1(),x=_&&!b&&!(i!=null&&i.some(y=>y.plan==="free_v2"||y.plan==="free"));return t.jsxs(gs,{modalProps:{isOpen:!0,title:us.modalTitle,width:x?1100:n?950:850,onRequestClose:s},providerProps:p,onSubmit:f,children:[t.jsxs(qe,{gaps:!0,children:[d&&t.jsx(wu,{fullWidth:!1,children:t.jsx(ye,{name:"creation_type",control:p.control,render:({field:y})=>t.jsxs(t.Fragment,{children:[t.jsx("div",{children:t.jsx(sa,{...y,value:"convert",checked:y.value==="convert",children:us.conversionRadioLabel})}),t.jsx("div",{children:t.jsx(sa,{...y,value:"create",checked:y.value==="create",children:us.creationRadioLabel})})]})})}),g==="create"?t.jsxs(t.Fragment,{children:[t.jsx(B,{label:us.orgNameLabel,error:(v=p.formState.errors.name)==null?void 0:v.message,children:t.jsx(ce,{autoFocus:!0,...p.register("name",{trimWhitespace:!0,required:{value:!0,message:"This field is required"},maxLength:{value:Ih,message:`Name should be less than ${Ih} characters`}})})}),t.jsx(T7,{control:p.control,freeOrgAllowed:x,shouldDisplayPricingV3:n}),((c==null?void 0:c.balance_cents)??0)>0&&t.jsxs(t.Fragment,{children:[t.jsxs(_s,{...p.register("transfer_credits"),onChange:y=>{p.setValue("transfer_credits",y)},children:[us.creditsLabel," (",Us((c==null?void 0:c.balance_cents)??0),")"]}),t.jsx(P,{size:"s",children:us.creditsDescription})]})]}):t.jsxs("div",{children:[t.jsxs(wu,{children:[t.jsx(B,{label:"Personal account","data-qa":"personal-account-info",children:t.jsxs("div",{className:Ch.personalAccount,children:[t.jsx("div",{children:a==null?void 0:a.displayName}),t.jsx(jq,{})]})}),t.jsx("div",{className:Ch.arrowContainer,children:t.jsx(q,{name:"arrow_right",size:16})}),t.jsx(B,{label:"New organization name",error:(j=p.formState.errors.name)==null?void 0:j.message,children:t.jsx(ce,{autoFocus:!0,...p.register("name",{trimWhitespace:!0,required:{value:!0,message:"This field is required"},maxLength:{value:Ih,message:`Name should be less than ${Ih} characters`}})})})]}),t.jsx(X,{className:Ch.conversionAlert,children:us.conversionAlert}),g==="convert"&&t.jsx(X,{appearance:"warning",className:Ch.conversionAlert,children:us.integrations.conversionInfo})]})]}),t.jsxs(Ee,{children:[t.jsx(BR,{children:t.jsx(M,{openInNewTab:!0,href:ix,icon:"external_link",children:us.seeFullPricing})}),t.jsx(ln,{}),t.jsx(Ie,{children:us.submitButton})]})]})},E7="_logo_bmde7_1",O7={logo:E7};function L7(){const{trackUiInteraction:e}=k(),s=Zx(),{formatMessage:n}=Xm();return m.useMemo(()=>({...{href:s?C.ProjectsSharedList:C.Root,onClick:()=>e("breadcrumbs_root_link_clicked")},children:t.jsx(q,{name:"neon",size:26,className:O7.logo}),ariaLabel:n({id:"QKRCCe",defaultMessage:[{type:0,value:"Neon logo"}]})}),[n,s,e])}function $7(e){const{data:s}=bt(),{data:n}=Un(),{path:r}=fl(),{trackUiInteraction:a}=k(),{org:o,isLoading:i}=ae(),{data:c}=Du(),l=Zx();return m.useMemo(()=>{if(i||s===void 0)return{loading:!0};const d=ca(s);let u=C.ProjectsList;return o&&(u=G(C.OrgProjectsList,{orgId:o.id})),l&&(u=C.ProjectsSharedList),d&&r===C.UserSettings&&(u=C.UserSettings),{selectedKey:u,onOpen:()=>a("breadcrumbs_account_menu_opened"),items:ot([u===C.UserSettings&&{label:"Account settings",href:C.UserSettings,hidden:!0},!d&&{title:"Personal account",items:[{label:s.displayName,href:C.ProjectsList,onClick:()=>a("breadcrumbs_account_menu_personal_account_selected"),triggerSuffix:t.jsx(ky,{})}]},{title:"Organizations",items:ot([...(n??[]).map(({id:p,name:h})=>({href:G(C.OrgProjectsList,{orgId:p}),label:h,onClick:()=>a("breadcrumbs_account_menu_org_selected"),triggerSuffix:t.jsx(ky,{})})),{icon:"add",label:"Create organization",onClick:()=>{a("breadcrumbs_account_menu_create_orgs_clicked"),e()}}])},d&&(!!(c!=null&&c.length)||r===C.ProjectsSharedList)&&{title:"Shared projects",items:[{href:C.ProjectsSharedList,label:"Projects shared with me"}]}])}},[e,o,s,i,n,c,l,r,a])}function R7(e){const{params:s,path:n}=fl(),{trackUiInteraction:r}=k(),{data:a,isLoading:o}=R2(e),{data:i,isLoading:c}=qs(),{data:l}=Du(),d=Zx();return m.useMemo(()=>{if(!e)return null;if(!o&&a){if(c||!i)return{href:G(C.ProjectsItem,{projectId:a.id}),children:a.name};const u=({id:g,name:f})=>({href:s.branchId&&g!==e?G(C.ProjectsItem,{projectId:g}):G(n,{...s,projectId:g}),label:f,onClick:()=>r("breadcrumbs_project_menu_item_selected")}),p=i.map(u),h=(l==null?void 0:l.map(u))??[];return{filterable:!0,qa:"breadcrumbs_project_select",onOpen:()=>r("breadcrumbs_project_menu_opened"),items:d?h:h!=null&&h.length?[{title:"Your projects",items:p},{title:"Shared with you",items:h}]:p}}return{loading:!0}},[c,o,i,s,n,a,e,l,d,r])}const bT=m.memo(({projectId:e})=>{const{trackUiInteraction:s}=k(),n=L7(),r=it(st.CreateOrg),a=$7(r.openModal),o=R7(e),i=m.useMemo(()=>ot([n,a,o]),[n,a,o]);return t.jsxs(t.Fragment,{children:[t.jsx(u3,{items:i}),r.isModalOpen&&t.jsx(Xx,{onSuccess:c=>{c.type!=="convert"&&s("create_org_modal_confirmed")},onRequestClose:()=>{r.closeModal(),s("create_org_modal_dismissed")}})]})});bT.displayName="ConsoleBreadcrumbs";const kh=e=>{if(typeof e!="object"||e===null)return!1;const s=Object.getPrototypeOf(e);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},B7=new Set(["__proto__","prototype","constructor"]),yb=(e,s)=>{if(!kh(s))return e;e||(e={});for(const[n,r]of Object.entries(s)){if(B7.has(n))continue;const a=e[n];if(kh(a)&&kh(r))e[n]=yb(a,r);else{if(r===void 0)continue;kh(r)?e[n]=yb({},r):Array.isArray(r)?e[n]=[...r]:e[n]=r}}return e};function tg(e={},s={}){return yb(structuredClone(s),structuredClone(e))}const sg={apiUrl:"https://api.markprompt.com"},ev=["signal","apiUrl","headers"],tv={};async function M7(e,s,n={}){if(!s)throw new Error("A projectKey is required.");const r=Object.fromEntries(Object.entries(n??{}).filter(([c])=>ev.includes(c))),{signal:a,...o}=r??{},i=tg(o,{...sg,...tv});try{const c=await fetch(`${i.apiUrl}/messages/${e.messageId}`,{method:"POST",headers:new Headers({"Content-Type":"application/json","X-Markprompt-API-Version":"2024-05-21",...i.headers?i.headers:{}}),body:JSON.stringify({projectKey:s,vote:Number.parseInt(e.feedback.vote)}),signal:a});if(!c.ok){const l=await c.json();throw l&&typeof l=="object"&&"error"in l&&typeof l.error=="string"?new Error(`Failed to submit feedback: ${l.error}`,{cause:l}):new Error("Failed to submit feedback: 'Unknown error'",{cause:l})}}catch(c){if(c instanceof DOMException&&c.name==="AbortError")return;throw c}}async function D7(e,s,n={}){if(!s)throw new Error("A projectKey is required.");const r=Object.fromEntries(Object.entries(n??{}).filter(([c])=>ev.includes(c))),{signal:a,...o}=r??{},i=tg(o,{...sg,...tv});try{const c=await fetch(`${i.apiUrl}/threads/${e.threadId}`,{method:"POST",headers:new Headers({"Content-Type":"application/json","X-Markprompt-API-Version":"2024-05-21",...i.headers?i.headers:{}}),body:JSON.stringify({projectKey:s,csat:e.csat}),signal:a});if(!c.ok){const l=await c.json();throw l&&typeof l=="object"&&"error"in l&&typeof l.error=="string"?new Error(`Failed to submit feedback: ${l.error}`,{cause:l}):new Error("Failed to submit feedback: 'Unknown error'",{cause:l})}}catch(c){if(c instanceof DOMException&&c.name==="AbortError")return;throw c}}async function U7(e,s,n={}){if(!s)throw new Error("A projectKey is required.");const r=Object.fromEntries(Object.entries(n??{}).filter(([c])=>ev.includes(c))),{signal:a,...o}=r??{},i=tg(o,{...sg,...tv});try{const c=await fetch(`${i.apiUrl}/threads/${e.threadId}`,{method:"POST",headers:new Headers({"Content-Type":"application/json","X-Markprompt-API-Version":"2024-05-21",...i.headers?i.headers:{}}),body:JSON.stringify({projectKey:s,csatReason:e.reason}),signal:a});if(!c.ok){const l=await c.json();throw l&&typeof l=="object"&&"error"in l&&typeof l.error=="string"?new Error(`Failed to submit feedback: ${l.error}`,{cause:l}):new Error("Failed to submit feedback: 'Unknown error'",{cause:l})}}catch(c){if(c instanceof DOMException&&c.name==="AbortError")return;throw c}}function F7(){const e=m.useRef(void 0),s=m.useCallback(()=>{e.current&&(e.current.abort(),e.current=void 0)},[]);return{ref:e,abort:s}}function z7({feedbackOptions:e,projectKey:s,apiUrl:n}){if(!s)throw new Error("Markprompt: a project key is required. Make sure to pass your Markprompt project key to useFeedback.");const{ref:r,abort:a}=F7(),o=m.useCallback(async(l,d)=>{if(a(),!d)return;const u=new AbortController;r.current=u;try{await M7({feedback:l,messageId:d},s,{...e,signal:u.signal,apiUrl:n})}catch{}finally{r.current===u&&(r.current=void 0)}},[a,r,s,e,n]),i=m.useCallback(async(l,d)=>{a();const u=new AbortController;r.current=u;try{await D7({threadId:l,csat:d},s,{...e,apiUrl:n,signal:u.signal})}catch{}finally{r.current===u&&(r.current=void 0)}},[a,r,s,e,n]),c=m.useCallback(async(l,d)=>{a();const u=new AbortController;r.current=u;try{await U7({threadId:l,reason:d},s,{...e,apiUrl:n,signal:u.signal})}catch{}finally{r.current===u&&(r.current=void 0)}},[a,r,s,e,n]);return{submitFeedback:o,submitThreadCSAT:i,submitThreadCSATReason:c,abort:a}}function q7(e){return e instanceof DOMException&&e.name==="AbortError"||e instanceof Error&&e.message.includes("AbortError")}function H7(e){var s,n,r,a,o;return Array.isArray(e)&&typeof((n=(s=e.at(0))==null?void 0:s.file)==null?void 0:n.path)=="string"&&typeof((o=(a=(r=e.at(0))==null?void 0:r.file)==null?void 0:a.source)==null?void 0:o.type)=="string"}function V7(e){let s,n,r,a,o,i,c;return l(),{feed:d,reset:l};function l(){s=!0,n="",r=0,a=-1,o=void 0,i=void 0,c=""}function d(p){n=n?n+p:p,s&&W7(n)&&(n=n.slice(xT.length)),s=!1;const h=n.length;let g=0,f=!1;for(;g<h;){f&&(n[g]===`
`&&++g,f=!1);let _=-1,b=a,x;for(let v=r;_<0&&v<h;++v)x=n[v],x===":"&&b<0?b=v-g:x==="\r"?(f=!0,_=v-g):x===`
`&&(_=v-g);if(_<0){r=h-g,a=b;break}else r=0,a=-1;u(n,g,b,_),g+=_+1}g===h?n="":g>0&&(n=n.slice(g))}function u(p,h,g,f){if(f===0){c.length>0&&(e({type:"event",id:o,event:i||void 0,data:c.slice(0,-1)}),c="",o=void 0),i=void 0;return}const _=g<0,b=p.slice(h,h+(_?f:g));let x=0;_?x=f:p[h+g+1]===" "?x=g+2:x=g+1;const v=h+x,j=f-x,y=p.slice(v,v+j).toString();if(b==="data")c+=y?"".concat(y,`
`):`
`;else if(b==="event")i=y;else if(b==="id"&&!y.includes("\0"))o=y;else if(b==="retry"){const w=parseInt(y,10);Number.isNaN(w)||e({type:"reconnect-interval",value:w})}}}const xT=[239,187,191];function W7(e){return xT.every((s,n)=>e.charCodeAt(n)===s)}class zy extends TransformStream{constructor(){let s;super({start(n){s=V7(r=>{r.type==="event"&&n.enqueue(r)})},transform(n){s.feed(n)}})}}const G7=["additionalMetadata","agentSettings","allowFollowUpQuestions","apiUrl","assistantId","assistantVersionId","context","debug","doNotInjectContext","excludeFromInsights","frequencyPenalty","headers","iDontKnowMessage","jsonOutput","maxTokens","model","outputFormat","policiesOptions","messageTagOptions","presencePenalty","redact","retrievalOptions","sectionsMatchCount","sectionsMatchThreshold","skipSystemInstructions","stream","systemPrompt","temperature","threadId","threadMetadata","toolChoice","tools","topP","useReranker"],K7=e=>G7.includes(e);function So(e){if(e!=null&&e.aborted)throw e.reason instanceof Error?e.reason:new Error(typeof e.reason=="string"?e.reason:"Aborted")}const Q7=(e,s)=>{try{const n=e.headers.get(s);if(n){const r=new Uint8Array(n.split(",").map(Number)),o=new TextDecoder().decode(r);return JSON.parse(o)}}catch{}};function Th(e){return typeof e=="object"&&e!==null&&("threadId"in e&&typeof e.threadId=="string"||"messageId"in e&&typeof e.messageId=="string"||"references"in e&&H7(e.references))}function Y7(e){return typeof e=="object"&&e!==null&&"object"in e&&e.object==="chat.completion"}const J7=e=>typeof e=="object"&&e!==null&&"content"in e&&(typeof e.content=="string"||e.content===null)&&"role"in e&&e.role==="assistant",vT=e=>typeof e=="object"&&e!==null&&"id"in e&&typeof e.id=="string"&&"type"in e&&e.type==="function"&&"function"in e,qy=e=>Array.isArray(e)&&e.every(vT),Z7=e=>typeof e=="object"&&e!==null&&"object"in e&&typeof e.object=="string"&&e.object==="chat.completion.chunk",X7=e=>typeof e=="object"&&e!==null&&"text"in e,e8={frequencyPenalty:0,iDontKnowMessage:"Sorry, I am not sure how to answer that.",model:"gpt-4o",presencePenalty:0,temperature:.1,topP:1,stream:!0,outputFormat:"markdown"};async function*t8(e,s,n={}){if(!s)throw new Error("A projectKey is required.");if(!e||!Array.isArray(e)||e.length===0)return;const r=Object.fromEntries(Object.entries(n).filter(([R])=>K7(R))),{signal:a,tools:o,toolChoice:i,additionalMetadata:c,...l}=r,{debug:d,policiesOptions:u,messageTagOptions:p,retrievalOptions:h,...g}=tg({...l,tools:o==null?void 0:o.map(R=>({function:R.function,type:R.type})),toolChoice:i},{...sg,...r.assistantId?{}:e8}),f=crypto.randomUUID(),_=async function*(){let R;try{R=await fetch(`${g.apiUrl}/chat/events?messageId=${f}&projectKey=${s}`,{method:"GET",headers:new Headers({"X-Markprompt-API-Version":"2024-05-21",...g.headers?g.headers:{}}),signal:a})}catch(K){console.error("Caught error fetching events",K);return}if(So(n.signal),!R.ok||!R.body){console.error("Failed to fetch events",R);return}const $=R.body.pipeThrough(new TextDecoderStream).pipeThrough(new zy).getReader();for(;;){So(n.signal);const{value:K,done:Z}=await $.read();if(Z)return;if(!K||K.data==="[DONE]")continue;let U;try{U=JSON.parse(K.data)}catch(te){console.error("Error parsing event",te);continue}typeof U.message=="string"&&(yield{event:U})}},b=async function*(){var oe,se,L,ee;const R=e==null?void 0:e.slice(-1)[0],$=R==null?void 0:R.id,K=await fetch(`${g.apiUrl}/chat`,{method:"POST",headers:new Headers({"Content-Type":"application/json","X-Markprompt-API-Version":"2024-05-21",...g.headers?g.headers:{}}),body:JSON.stringify({projectKey:s,messages:e,debug:d,...g,policies:u,messageTags:p,retrieval:h,additionalMetadata:c,messageId:$}),signal:a}),Z=Q7(K,"x-markprompt-data");if(So(n.signal),(oe=K.headers.get("Content-Type"))!=null&&oe.includes("application/json")){const ie=await K.json();if(Y7(ie)&&Th(Z)&&((se=ie.choices)!=null&&se[0]))return{...ie.choices[0].message,...Z};if(Th(Z)&&(yield Z),X7(ie)){yield{content:ie.text,references:ie.references,steps:ie.steps,role:"assistant"};return}throw new Error("Malformed response from Markprompt API",{cause:ie})}if(Th(Z)&&(yield Z),!K.ok||!K.body){So(n.signal);const ie=await K.text();try{const He=JSON.parse(ie);if(He&&typeof He=="object"&&"error"in He&&typeof He.error=="string")throw new Error(He.error)}catch{}throw new Error(ie,{cause:{status:K.status,statusText:K.statusText}})}So(n.signal);const U={},te=K.body.pipeThrough(new TextDecoderStream).pipeThrough(new zy).getReader();for(;;){So(n.signal);const{value:ie,done:He}=await te.read();if(He)return;if(!ie||ie.data==="[DONE]")continue;const Ot=JSON.parse(ie.data);if(!Z7(Ot))throw new Error("Malformed response from Markprompt API",{cause:Ot});PU(U,(ee=(L=Ot.choices)==null?void 0:L[0])==null?void 0:ee.delta,s8),yield structuredClone(U)}},x=_(),v=b(),j={next:async()=>{const{value:R,done:$}=await x.next();return{type:"events",value:R,done:$}}},y={next:async()=>{const{value:R,done:$}=await v.next();return{type:"chat",value:R,done:$}}};let w;const S=[];let T,E,H=!1;for(;;){So(n.signal),T=T??y.next(),E=E??(H?void 0:j.next());const R=await Promise.race([T,...E?[E]:[]]);if(R.type==="events"){E=void 0,R.value&&(S.push(R.value.event),yield structuredClone({events:S})),R.done&&(H=!0);continue}T=void 0;const $=R.value;if($){if(Th($)){w=$,yield w;continue}if(R.done&&J7($)&&w)return{...$,...w};yield $}else if(R.done)return}}function s8(e,s){if(e==="assistant"&&s==="assistant")return"assistant";if(typeof e=="string"&&typeof s=="string")return e+s;if(typeof e=="string"&&!s)return e;if(typeof s=="string"&&!e)return s}const n8={},Hy=e=>{let s;const n=new Set,r=(u,p)=>{const h=typeof u=="function"?u(s):u;if(!Object.is(h,s)){const g=s;s=p??(typeof h!="object"||h===null)?h:Object.assign({},s,h),n.forEach(f=>f(s,g))}},a=()=>s,l={setState:r,getState:a,getInitialState:()=>d,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(n8?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=s=e(r,a,l);return l},r8=e=>e?Hy(e):Hy,{useDebugValue:a8}=La,{useSyncExternalStoreWithSelector:o8}=B2,i8=e=>e;function c8(e,s=i8,n){const r=o8(e.subscribe,e.getState,e.getServerState||e.getInitialState,s,n);return a8(r),r}const l8={};function jT(e,s){let n;try{n=e()}catch{return}return{getItem:a=>{var o;const i=l=>l===null?null:JSON.parse(l,s==null?void 0:s.reviver),c=(o=n.getItem(a))!=null?o:null;return c instanceof Promise?c.then(i):i(c)},setItem:(a,o)=>n.setItem(a,JSON.stringify(o,s==null?void 0:s.replacer)),removeItem:a=>n.removeItem(a)}}const Su=e=>s=>{try{const n=e(s);return n instanceof Promise?n:{then(r){return Su(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return Su(r)(n)}}}},d8=(e,s)=>(n,r,a)=>{let o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:b=>b,version:0,merge:(b,x)=>({...x,...b}),...s},i=!1;const c=new Set,l=new Set;let d;try{d=o.getStorage()}catch{}if(!d)return e((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(...b)},r,a);const u=Su(o.serialize),p=()=>{const b=o.partialize({...r()});let x;const v=u({state:b,version:o.version}).then(j=>d.setItem(o.name,j)).catch(j=>{x=j});if(x)throw x;return v},h=a.setState;a.setState=(b,x)=>{h(b,x),p()};const g=e((...b)=>{n(...b),p()},r,a);let f;const _=()=>{var b;if(!d)return;i=!1,c.forEach(v=>v(r()));const x=((b=o.onRehydrateStorage)==null?void 0:b.call(o,r()))||void 0;return Su(d.getItem.bind(d))(o.name).then(v=>{if(v)return o.deserialize(v)}).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==o.version){if(o.migrate)return o.migrate(v.state,v.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return v.state}).then(v=>{var j;return f=o.merge(v,(j=r())!=null?j:g),n(f,!0),p()}).then(()=>{x==null||x(f,void 0),i=!0,l.forEach(v=>v(f))}).catch(v=>{x==null||x(void 0,v)})};return a.persist={setOptions:b=>{o={...o,...b},b.getStorage&&(d=b.getStorage())},clearStorage:()=>{d==null||d.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>_(),hasHydrated:()=>i,onHydrate:b=>(c.add(b),()=>{c.delete(b)}),onFinishHydration:b=>(l.add(b),()=>{l.delete(b)})},_(),f||g},u8=(e,s)=>(n,r,a)=>{let o={storage:jT(()=>localStorage),partialize:_=>_,version:0,merge:(_,b)=>({...b,..._}),...s},i=!1;const c=new Set,l=new Set;let d=o.storage;if(!d)return e((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),n(..._)},r,a);const u=()=>{const _=o.partialize({...r()});return d.setItem(o.name,{state:_,version:o.version})},p=a.setState;a.setState=(_,b)=>{p(_,b),u()};const h=e((..._)=>{n(..._),u()},r,a);a.getInitialState=()=>h;let g;const f=()=>{var _,b;if(!d)return;i=!1,c.forEach(v=>{var j;return v((j=r())!=null?j:h)});const x=((b=o.onRehydrateStorage)==null?void 0:b.call(o,(_=r())!=null?_:h))||void 0;return Su(d.getItem.bind(d))(o.name).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==o.version){if(o.migrate)return[!0,o.migrate(v.state,v.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,v.state];return[!1,void 0]}).then(v=>{var j;const[y,w]=v;if(g=o.merge(w,(j=r())!=null?j:h),n(g,!0),y)return u()}).then(()=>{x==null||x(g,void 0),g=r(),i=!0,l.forEach(v=>v(g))}).catch(v=>{x==null||x(void 0,v)})};return a.persist={setOptions:_=>{o={...o,..._},_.storage&&(d=_.storage)},clearStorage:()=>{d==null||d.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>f(),hasHydrated:()=>i,onHydrate:_=>(c.add(_),()=>{c.delete(_)}),onFinishHydration:_=>(l.add(_),()=>{l.delete(_)})},o.skipHydration||f(),g||h},h8=(e,s)=>"getStorage"in s||"serialize"in s||"deserialize"in s?((l8?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),d8(e,s)):u8(e,s),p8=h8;var yT=Symbol.for("immer-nothing"),Vy=Symbol.for("immer-draftable"),Fs=Symbol.for("immer-state");function Ln(e,...s){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var nl=Object.getPrototypeOf;function rl(e){return!!e&&!!e[Fs]}function yi(e){var s;return e?wT(e)||Array.isArray(e)||!!e[Vy]||!!((s=e.constructor)!=null&&s[Vy])||rg(e)||ag(e):!1}var m8=Object.prototype.constructor.toString();function wT(e){if(!e||typeof e!="object")return!1;const s=nl(e);if(s===null)return!0;const n=Object.hasOwnProperty.call(s,"constructor")&&s.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===m8}function dm(e,s){ng(e)===0?Reflect.ownKeys(e).forEach(n=>{s(n,e[n],e)}):e.forEach((n,r)=>s(r,n,e))}function ng(e){const s=e[Fs];return s?s.type_:Array.isArray(e)?1:rg(e)?2:ag(e)?3:0}function wb(e,s){return ng(e)===2?e.has(s):Object.prototype.hasOwnProperty.call(e,s)}function ST(e,s,n){const r=ng(e);r===2?e.set(s,n):r===3?e.add(n):e[s]=n}function g8(e,s){return e===s?e!==0||1/e===1/s:e!==e&&s!==s}function rg(e){return e instanceof Map}function ag(e){return e instanceof Set}function Ko(e){return e.copy_||e.base_}function Sb(e,s){if(rg(e))return new Map(e);if(ag(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=wT(e);if(s===!0||s==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Fs];let a=Reflect.ownKeys(r);for(let o=0;o<a.length;o++){const i=a[o],c=r[i];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(r[i]={configurable:!0,writable:!0,enumerable:c.enumerable,value:e[i]})}return Object.create(nl(e),r)}else{const r=nl(e);if(r!==null&&n)return{...e};const a=Object.create(r);return Object.assign(a,e)}}function sv(e,s=!1){return og(e)||rl(e)||!yi(e)||(ng(e)>1&&(e.set=e.add=e.clear=e.delete=f8),Object.freeze(e),s&&Object.entries(e).forEach(([n,r])=>sv(r,!0))),e}function f8(){Ln(2)}function og(e){return Object.isFrozen(e)}var _8={};function wi(e){const s=_8[e];return s||Ln(0,e),s}var Cu;function CT(){return Cu}function b8(e,s){return{drafts_:[],parent_:e,immer_:s,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Wy(e,s){s&&(wi("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=s)}function Cb(e){Ib(e),e.drafts_.forEach(x8),e.drafts_=null}function Ib(e){e===Cu&&(Cu=e.parent_)}function Gy(e){return Cu=b8(Cu,e)}function x8(e){const s=e[Fs];s.type_===0||s.type_===1?s.revoke_():s.revoked_=!0}function Ky(e,s){s.unfinalizedDrafts_=s.drafts_.length;const n=s.drafts_[0];return e!==void 0&&e!==n?(n[Fs].modified_&&(Cb(s),Ln(4)),yi(e)&&(e=um(s,e),s.parent_||hm(s,e)),s.patches_&&wi("Patches").generateReplacementPatches_(n[Fs].base_,e,s.patches_,s.inversePatches_)):e=um(s,n,[]),Cb(s),s.patches_&&s.patchListener_(s.patches_,s.inversePatches_),e!==yT?e:void 0}function um(e,s,n){if(og(s))return s;const r=s[Fs];if(!r)return dm(s,(a,o)=>Qy(e,r,s,a,o,n)),s;if(r.scope_!==e)return s;if(!r.modified_)return hm(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const a=r.copy_;let o=a,i=!1;r.type_===3&&(o=new Set(a),a.clear(),i=!0),dm(o,(c,l)=>Qy(e,r,a,c,l,n,i)),hm(e,a,!1),n&&e.patches_&&wi("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Qy(e,s,n,r,a,o,i){if(rl(a)){const c=o&&s&&s.type_!==3&&!wb(s.assigned_,r)?o.concat(r):void 0,l=um(e,a,c);if(ST(n,r,l),rl(l))e.canAutoFreeze_=!1;else return}else i&&n.add(a);if(yi(a)&&!og(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;um(e,a),(!s||!s.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&hm(e,a)}}function hm(e,s,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&sv(s,n)}function v8(e,s){const n=Array.isArray(e),r={type_:n?1:0,scope_:s?s.scope_:CT(),modified_:!1,finalized_:!1,assigned_:{},parent_:s,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,o=nv;n&&(a=[r],o=Iu);const{revoke:i,proxy:c}=Proxy.revocable(a,o);return r.draft_=c,r.revoke_=i,c}var nv={get(e,s){if(s===Fs)return e;const n=Ko(e);if(!wb(n,s))return j8(e,n,s);const r=n[s];return e.finalized_||!yi(r)?r:r===af(e.base_,s)?(of(e),e.copy_[s]=Tb(r,e)):r},has(e,s){return s in Ko(e)},ownKeys(e){return Reflect.ownKeys(Ko(e))},set(e,s,n){const r=IT(Ko(e),s);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const a=af(Ko(e),s),o=a==null?void 0:a[Fs];if(o&&o.base_===n)return e.copy_[s]=n,e.assigned_[s]=!1,!0;if(g8(n,a)&&(n!==void 0||wb(e.base_,s)))return!0;of(e),kb(e)}return e.copy_[s]===n&&(n!==void 0||s in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[s])||(e.copy_[s]=n,e.assigned_[s]=!0),!0},deleteProperty(e,s){return af(e.base_,s)!==void 0||s in e.base_?(e.assigned_[s]=!1,of(e),kb(e)):delete e.assigned_[s],e.copy_&&delete e.copy_[s],!0},getOwnPropertyDescriptor(e,s){const n=Ko(e),r=Reflect.getOwnPropertyDescriptor(n,s);return r&&{writable:!0,configurable:e.type_!==1||s!=="length",enumerable:r.enumerable,value:n[s]}},defineProperty(){Ln(11)},getPrototypeOf(e){return nl(e.base_)},setPrototypeOf(){Ln(12)}},Iu={};dm(nv,(e,s)=>{Iu[e]=function(){return arguments[0]=arguments[0][0],s.apply(this,arguments)}});Iu.deleteProperty=function(e,s){return Iu.set.call(this,e,s,void 0)};Iu.set=function(e,s,n){return nv.set.call(this,e[0],s,n,e[0])};function af(e,s){const n=e[Fs];return(n?Ko(n):e)[s]}function j8(e,s,n){var a;const r=IT(s,n);return r?"value"in r?r.value:(a=r.get)==null?void 0:a.call(e.draft_):void 0}function IT(e,s){if(!(s in e))return;let n=nl(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,s);if(r)return r;n=nl(n)}}function kb(e){e.modified_||(e.modified_=!0,e.parent_&&kb(e.parent_))}function of(e){e.copy_||(e.copy_=Sb(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var y8=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(s,n,r)=>{if(typeof s=="function"&&typeof n!="function"){const o=n;n=s;const i=this;return function(l=o,...d){return i.produce(l,u=>n.call(this,u,...d))}}typeof n!="function"&&Ln(6),r!==void 0&&typeof r!="function"&&Ln(7);let a;if(yi(s)){const o=Gy(this),i=Tb(s,void 0);let c=!0;try{a=n(i),c=!1}finally{c?Cb(o):Ib(o)}return Wy(o,r),Ky(a,o)}else if(!s||typeof s!="object"){if(a=n(s),a===void 0&&(a=s),a===yT&&(a=void 0),this.autoFreeze_&&sv(a,!0),r){const o=[],i=[];wi("Patches").generateReplacementPatches_(s,a,o,i),r(o,i)}return a}else Ln(1,s)},this.produceWithPatches=(s,n)=>{if(typeof s=="function")return(i,...c)=>this.produceWithPatches(i,l=>s(l,...c));let r,a;return[this.produce(s,n,(i,c)=>{r=i,a=c}),r,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){yi(e)||Ln(8),rl(e)&&(e=w8(e));const s=Gy(this),n=Tb(e,void 0);return n[Fs].isManual_=!0,Ib(s),n}finishDraft(e,s){const n=e&&e[Fs];(!n||!n.isManual_)&&Ln(9);const{scope_:r}=n;return Wy(r,s),Ky(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,s){let n;for(n=s.length-1;n>=0;n--){const a=s[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(s=s.slice(n+1));const r=wi("Patches").applyPatches_;return rl(e)?r(e,s):this.produce(e,a=>r(a,s))}};function Tb(e,s){const n=rg(e)?wi("MapSet").proxyMap_(e,s):ag(e)?wi("MapSet").proxySet_(e,s):v8(e,s);return(s?s.scope_:CT()).drafts_.push(n),n}function w8(e){return rl(e)||Ln(10,e),kT(e)}function kT(e){if(!yi(e)||og(e))return e;const s=e[Fs];let n;if(s){if(!s.modified_)return s.base_;s.finalized_=!0,n=Sb(e,s.scope_.immer_.useStrictShallowCopy_)}else n=Sb(e,!0);return dm(n,(r,a)=>{ST(n,r,kT(a))}),s&&(s.finalized_=!1),n}var zs=new y8,S8=zs.produce;zs.produceWithPatches.bind(zs);zs.setAutoFreeze.bind(zs);zs.setUseStrictShallowCopy.bind(zs);zs.applyPatches.bind(zs);zs.createDraft.bind(zs);zs.finishDraft.bind(zs);const C8=e=>(s,n,r)=>(r.setState=(a,o,...i)=>{const c=typeof a=="function"?S8(a):a;return s(c,o,...i)},e(r.setState,n,r)),I8=C8,Yy=async e=>{const s=Uint8Array.from(atob(e),n=>n.charCodeAt(0));return await globalThis.crypto.subtle.importKey("raw",s,{name:"AES-GCM"},!0,["encrypt","decrypt"])},k8=(e,s)=>{const n=new Uint8Array(s.length+e.byteLength);return n.set(s,0),n.set(new Uint8Array(e),s.length),btoa(String.fromCharCode(...n))},T8=e=>{const s=atob(e),n=new Uint8Array([...s].map(o=>o.charCodeAt(0))),r=n.slice(0,12);return{ciphertext:n.slice(12).buffer,iv:r}},P8=async(e,s)=>{const n=globalThis.crypto.getRandomValues(new Uint8Array(12)),r=new TextEncoder().encode(e),a=await globalThis.crypto.subtle.encrypt({name:"AES-GCM",iv:n},s,r);return{iv:n,ciphertext:a}},N8=async(e,s,n)=>{const r=await globalThis.crypto.subtle.decrypt({name:"AES-GCM",iv:n},s,e);return new TextDecoder().decode(r)},A8=e=>{let s;return e?s=e:typeof fetch>"u"?s=(...n)=>fr(async()=>{const{default:r}=await Promise.resolve().then(()=>Pl);return{default:r}},void 0).then(({default:r})=>r(...n)):s=fetch,(...n)=>s(...n)};class rv extends Error{constructor(s,n="FunctionsError",r){super(s),this.name=n,this.context=r}}class E8 extends rv{constructor(s){super("Failed to send a request to the Edge Function","FunctionsFetchError",s)}}class O8 extends rv{constructor(s){super("Relay Error invoking the Edge Function","FunctionsRelayError",s)}}class L8 extends rv{constructor(s){super("Edge Function returned a non-2xx status code","FunctionsHttpError",s)}}var Pb;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Pb||(Pb={}));var $8=function(e,s,n,r){function a(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function c(u){try{d(r.next(u))}catch(p){i(p)}}function l(u){try{d(r.throw(u))}catch(p){i(p)}}function d(u){u.done?o(u.value):a(u.value).then(c,l)}d((r=r.apply(e,s||[])).next())})};class R8{constructor(s,{headers:n={},customFetch:r,region:a=Pb.Any}={}){this.url=s,this.headers=n,this.region=a,this.fetch=A8(r)}setAuth(s){this.headers.Authorization=`Bearer ${s}`}invoke(s,n={}){var r;return $8(this,void 0,void 0,function*(){try{const{headers:a,method:o,body:i}=n;let c={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(c["x-region"]=l);let d;i&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",d=i):typeof i=="string"?(c["Content-Type"]="text/plain",d=i):typeof FormData<"u"&&i instanceof FormData?d=i:(c["Content-Type"]="application/json",d=JSON.stringify(i)));const u=yield this.fetch(`${this.url}/${s}`,{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),a),body:d}).catch(f=>{throw new E8(f)}),p=u.headers.get("x-relay-error");if(p&&p==="true")throw new O8(u);if(!u.ok)throw new L8(u);let h=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return h==="application/json"?g=yield u.json():h==="application/octet-stream"?g=yield u.blob():h==="text/event-stream"?g=u:h==="multipart/form-data"?g=yield u.formData():g=yield u.text(),{data:g,error:null}}catch(a){return{data:null,error:a}}})}}var Yl={},Qi={},Yi={},Ji={},Zi={},Xi={},B8=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},al=B8();const M8=al.fetch,TT=al.fetch.bind(al),PT=al.Headers,D8=al.Request,U8=al.Response,Pl=Object.freeze(Object.defineProperty({__proto__:null,Headers:PT,Request:D8,Response:U8,default:TT,fetch:M8},Symbol.toStringTag,{value:"Module"})),F8=G$(Pl);var Ph={},Jy;function z8(){if(Jy)return Ph;Jy=1,Object.defineProperty(Ph,"__esModule",{value:!0});let e=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}};return Ph.default=e,Ph}var Zy;function NT(){if(Zy)return Xi;Zy=1;var e=Xi&&Xi.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Xi,"__esModule",{value:!0});const s=e(F8),n=e(z8());class r{constructor(o){this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=o.headers,this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=o.shouldThrowOnError,this.signal=o.signal,this.isMaybeSingle=o.isMaybeSingle,o.fetch?this.fetch=o.fetch:typeof fetch>"u"?this.fetch=s.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(o,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const c=this.fetch;let l=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var u,p,h;let g=null,f=null,_=null,b=d.status,x=d.statusText;if(d.ok){if(this.method!=="HEAD"){const w=await d.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?f=w:f=JSON.parse(w))}const j=(u=this.headers.Prefer)===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),y=(p=d.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");j&&y&&y.length>1&&(_=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(g={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,_=null,b=406,x="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const j=await d.text();try{g=JSON.parse(j),Array.isArray(g)&&d.status===404&&(f=[],g=null,b=200,x="OK")}catch{d.status===404&&j===""?(b=204,x="No Content"):g={message:j}}if(g&&this.isMaybeSingle&&(!((h=g==null?void 0:g.details)===null||h===void 0)&&h.includes("0 rows"))&&(g=null,b=200,x="OK"),g&&this.shouldThrowOnError)throw new n.default(g)}return{error:g,data:f,count:_,status:b,statusText:x}});return this.shouldThrowOnError||(l=l.catch(d=>{var u,p,h;return{error:{message:`${(u=d==null?void 0:d.name)!==null&&u!==void 0?u:"FetchError"}: ${d==null?void 0:d.message}`,details:`${(p=d==null?void 0:d.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(h=d==null?void 0:d.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),l.then(o,i)}}return Xi.default=r,Xi}var Xy;function AT(){if(Xy)return Zi;Xy=1;var e=Zi&&Zi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Zi,"__esModule",{value:!0});const s=e(NT());class n extends s.default{select(a){let o=!1;const i=(a??"*").split("").map(c=>/\s/.test(c)&&!o?"":(c==='"'&&(o=!o),c)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(a,{ascending:o=!0,nullsFirst:i,foreignTable:c,referencedTable:l=c}={}){const d=l?`${l}.order`:"order",u=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${u?`${u},`:""}${a}.${o?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:o,referencedTable:i=o}={}){const c=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(c,`${a}`),this}range(a,o,{foreignTable:i,referencedTable:c=i}={}){const l=typeof c>"u"?"offset":`${c}.offset`,d=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(l,`${a}`),this.url.searchParams.set(d,`${o-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:a=!1,verbose:o=!1,settings:i=!1,buffers:c=!1,wal:l=!1,format:d="text"}={}){var u;const p=[a?"analyze":null,o?"verbose":null,i?"settings":null,c?"buffers":null,l?"wal":null].filter(Boolean).join("|"),h=(u=this.headers.Accept)!==null&&u!==void 0?u:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${d}; for="${h}"; options=${p};`,d==="json"?this:this}rollback(){var a;return((a=this.headers.Prefer)!==null&&a!==void 0?a:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Zi.default=n,Zi}var ew;function av(){if(ew)return Ji;ew=1;var e=Ji&&Ji.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ji,"__esModule",{value:!0});const s=e(AT());class n extends s.default{eq(a,o){return this.url.searchParams.append(a,`eq.${o}`),this}neq(a,o){return this.url.searchParams.append(a,`neq.${o}`),this}gt(a,o){return this.url.searchParams.append(a,`gt.${o}`),this}gte(a,o){return this.url.searchParams.append(a,`gte.${o}`),this}lt(a,o){return this.url.searchParams.append(a,`lt.${o}`),this}lte(a,o){return this.url.searchParams.append(a,`lte.${o}`),this}like(a,o){return this.url.searchParams.append(a,`like.${o}`),this}likeAllOf(a,o){return this.url.searchParams.append(a,`like(all).{${o.join(",")}}`),this}likeAnyOf(a,o){return this.url.searchParams.append(a,`like(any).{${o.join(",")}}`),this}ilike(a,o){return this.url.searchParams.append(a,`ilike.${o}`),this}ilikeAllOf(a,o){return this.url.searchParams.append(a,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(a,o){return this.url.searchParams.append(a,`ilike(any).{${o.join(",")}}`),this}is(a,o){return this.url.searchParams.append(a,`is.${o}`),this}in(a,o){const i=Array.from(new Set(o)).map(c=>typeof c=="string"&&new RegExp("[,()]").test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(a,`in.(${i})`),this}contains(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cs.{${o.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(o)}`),this}containedBy(a,o){return typeof o=="string"?this.url.searchParams.append(a,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(a,`cd.{${o.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(o)}`),this}rangeGt(a,o){return this.url.searchParams.append(a,`sr.${o}`),this}rangeGte(a,o){return this.url.searchParams.append(a,`nxl.${o}`),this}rangeLt(a,o){return this.url.searchParams.append(a,`sl.${o}`),this}rangeLte(a,o){return this.url.searchParams.append(a,`nxr.${o}`),this}rangeAdjacent(a,o){return this.url.searchParams.append(a,`adj.${o}`),this}overlaps(a,o){return typeof o=="string"?this.url.searchParams.append(a,`ov.${o}`):this.url.searchParams.append(a,`ov.{${o.join(",")}}`),this}textSearch(a,o,{config:i,type:c}={}){let l="";c==="plain"?l="pl":c==="phrase"?l="ph":c==="websearch"&&(l="w");const d=i===void 0?"":`(${i})`;return this.url.searchParams.append(a,`${l}fts${d}.${o}`),this}match(a){return Object.entries(a).forEach(([o,i])=>{this.url.searchParams.append(o,`eq.${i}`)}),this}not(a,o,i){return this.url.searchParams.append(a,`not.${o}.${i}`),this}or(a,{foreignTable:o,referencedTable:i=o}={}){const c=i?`${i}.or`:"or";return this.url.searchParams.append(c,`(${a})`),this}filter(a,o,i){return this.url.searchParams.append(a,`${o}.${i}`),this}}return Ji.default=n,Ji}var tw;function ET(){if(tw)return Yi;tw=1;var e=Yi&&Yi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Yi,"__esModule",{value:!0});const s=e(av());class n{constructor(a,{headers:o={},schema:i,fetch:c}){this.url=a,this.headers=o,this.schema=i,this.fetch=c}select(a,{head:o=!1,count:i}={}){const c=o?"HEAD":"GET";let l=!1;const d=(a??"*").split("").map(u=>/\s/.test(u)&&!l?"":(u==='"'&&(l=!l),u)).join("");return this.url.searchParams.set("select",d),i&&(this.headers.Prefer=`count=${i}`),new s.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(a,{count:o,defaultToNull:i=!0}={}){const c="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),o&&l.push(`count=${o}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(a)){const d=a.reduce((u,p)=>u.concat(Object.keys(p)),[]);if(d.length>0){const u=[...new Set(d)].map(p=>`"${p}"`);this.url.searchParams.set("columns",u.join(","))}}return new s.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}upsert(a,{onConflict:o,ignoreDuplicates:i=!1,count:c,defaultToNull:l=!0}={}){const d="POST",u=[`resolution=${i?"ignore":"merge"}-duplicates`];if(o!==void 0&&this.url.searchParams.set("on_conflict",o),this.headers.Prefer&&u.push(this.headers.Prefer),c&&u.push(`count=${c}`),l||u.push("missing=default"),this.headers.Prefer=u.join(","),Array.isArray(a)){const p=a.reduce((h,g)=>h.concat(Object.keys(g)),[]);if(p.length>0){const h=[...new Set(p)].map(g=>`"${g}"`);this.url.searchParams.set("columns",h.join(","))}}return new s.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}update(a,{count:o}={}){const i="PATCH",c=[];return this.headers.Prefer&&c.push(this.headers.Prefer),o&&c.push(`count=${o}`),this.headers.Prefer=c.join(","),new s.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}delete({count:a}={}){const o="DELETE",i=[];return a&&i.push(`count=${a}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new s.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Yi.default=n,Yi}var Jl={},Zl={},sw;function q8(){return sw||(sw=1,Object.defineProperty(Zl,"__esModule",{value:!0}),Zl.version=void 0,Zl.version="0.0.0-automated"),Zl}var nw;function H8(){if(nw)return Jl;nw=1,Object.defineProperty(Jl,"__esModule",{value:!0}),Jl.DEFAULT_HEADERS=void 0;const e=q8();return Jl.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${e.version}`},Jl}var rw;function V8(){if(rw)return Qi;rw=1;var e=Qi&&Qi.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Qi,"__esModule",{value:!0});const s=e(ET()),n=e(av()),r=H8();class a{constructor(i,{headers:c={},schema:l,fetch:d}={}){this.url=i,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),c),this.schemaName=l,this.fetch=d}from(i){const c=new URL(`${this.url}/${i}`);return new s.default(c,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new a(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,c={},{head:l=!1,get:d=!1,count:u}={}){let p;const h=new URL(`${this.url}/rpc/${i}`);let g;l||d?(p=l?"HEAD":"GET",Object.entries(c).filter(([_,b])=>b!==void 0).map(([_,b])=>[_,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([_,b])=>{h.searchParams.append(_,b)})):(p="POST",g=c);const f=Object.assign({},this.headers);return u&&(f.Prefer=`count=${u}`),new n.default({method:p,url:h,headers:f,schema:this.schemaName,body:g,fetch:this.fetch,allowEmpty:!1})}}return Qi.default=a,Qi}var aw;function W8(){return aw||(aw=1,function(e){var s=Yl&&Yl.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),e.PostgrestBuilder=e.PostgrestTransformBuilder=e.PostgrestFilterBuilder=e.PostgrestQueryBuilder=e.PostgrestClient=void 0;var n=V8();Object.defineProperty(e,"PostgrestClient",{enumerable:!0,get:function(){return s(n).default}});var r=ET();Object.defineProperty(e,"PostgrestQueryBuilder",{enumerable:!0,get:function(){return s(r).default}});var a=av();Object.defineProperty(e,"PostgrestFilterBuilder",{enumerable:!0,get:function(){return s(a).default}});var o=AT();Object.defineProperty(e,"PostgrestTransformBuilder",{enumerable:!0,get:function(){return s(o).default}});var i=NT();Object.defineProperty(e,"PostgrestBuilder",{enumerable:!0,get:function(){return s(i).default}})}(Yl)),Yl}var G8=W8();const K8=K$(G8),{PostgrestClient:Q8,PostgrestQueryBuilder:AIe,PostgrestFilterBuilder:EIe,PostgrestTransformBuilder:OIe,PostgrestBuilder:LIe}=K8,Y8="2.10.2",J8={"X-Client-Info":`realtime-js/${Y8}`},Z8="1.0.0",OT=1e4,X8=1e3;var Wc;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Wc||(Wc={}));var Rs;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Rs||(Rs={}));var An;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(An||(An={}));var Nb;(function(e){e.websocket="websocket"})(Nb||(Nb={}));var Xo;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Xo||(Xo={}));class eH{constructor(){this.HEADER_LENGTH=1}decode(s,n){return s.constructor===ArrayBuffer?n(this._binaryDecode(s)):n(typeof s=="string"?JSON.parse(s):{})}_binaryDecode(s){const n=new DataView(s),r=new TextDecoder;return this._decodeBroadcast(s,n,r)}_decodeBroadcast(s,n,r){const a=n.getUint8(1),o=n.getUint8(2);let i=this.HEADER_LENGTH+2;const c=r.decode(s.slice(i,i+a));i=i+a;const l=r.decode(s.slice(i,i+o));i=i+o;const d=JSON.parse(r.decode(s.slice(i,s.byteLength)));return{ref:null,topic:c,event:l,payload:d}}}class LT{constructor(s,n){this.callback=s,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=s,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ct;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ct||(ct={}));const ow=(e,s,n={})=>{var r;const a=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(s).reduce((o,i)=>(o[i]=tH(i,e,s,a),o),{})},tH=(e,s,n,r)=>{const a=s.find(c=>c.name===e),o=a==null?void 0:a.type,i=n[e];return o&&!r.includes(o)?$T(o,i):Ab(i)},$T=(e,s)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return aH(s,n)}switch(e){case ct.bool:return sH(s);case ct.float4:case ct.float8:case ct.int2:case ct.int4:case ct.int8:case ct.numeric:case ct.oid:return nH(s);case ct.json:case ct.jsonb:return rH(s);case ct.timestamp:return oH(s);case ct.abstime:case ct.date:case ct.daterange:case ct.int4range:case ct.int8range:case ct.money:case ct.reltime:case ct.text:case ct.time:case ct.timestamptz:case ct.timetz:case ct.tsrange:case ct.tstzrange:return Ab(s);default:return Ab(s)}},Ab=e=>e,sH=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},nH=e=>{if(typeof e=="string"){const s=parseFloat(e);if(!Number.isNaN(s))return s}return e},rH=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(s){return console.log(`JSON parse error: ${s}`),e}return e},aH=(e,s)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let o;const i=e.slice(1,n);try{o=JSON.parse("["+i+"]")}catch{o=i?i.split(","):[]}return o.map(c=>$T(s,c))}return e},oH=e=>typeof e=="string"?e.replace(" ","T"):e,RT=e=>{let s=e;return s=s.replace(/^ws/i,"http"),s=s.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),s.replace(/\/+$/,"")};class cf{constructor(s,n,r={},a=OT){this.channel=s,this.event=n,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(s){this.timeout=s,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(s){this.payload=Object.assign(Object.assign({},this.payload),s)}receive(s,n){var r;return this._hasReceived(s)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:s,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const s=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},s),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(s,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:s,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:s,response:n}){this.recHooks.filter(r=>r.status===s).forEach(r=>r.callback(n))}_hasReceived(s){return this.receivedResp&&this.receivedResp.status===s}}var iw;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(iw||(iw={}));class su{constructor(s,n){this.channel=s,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:o,onLeave:i,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=su.syncState(this.state,a,o,i),this.pendingDiffs.forEach(l=>{this.state=su.syncDiff(this.state,l,o,i)}),this.pendingDiffs=[],c()}),this.channel._on(r.diff,{},a=>{const{onJoin:o,onLeave:i,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=su.syncDiff(this.state,a,o,i),c())}),this.onJoin((a,o,i)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:i})}),this.onLeave((a,o,i)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(s,n,r,a){const o=this.cloneDeep(s),i=this.transformState(n),c={},l={};return this.map(o,(d,u)=>{i[d]||(l[d]=u)}),this.map(i,(d,u)=>{const p=o[d];if(p){const h=u.map(b=>b.presence_ref),g=p.map(b=>b.presence_ref),f=u.filter(b=>g.indexOf(b.presence_ref)<0),_=p.filter(b=>h.indexOf(b.presence_ref)<0);f.length>0&&(c[d]=f),_.length>0&&(l[d]=_)}else c[d]=u}),this.syncDiff(o,{joins:c,leaves:l},r,a)}static syncDiff(s,n,r,a){const{joins:o,leaves:i}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(o,(c,l)=>{var d;const u=(d=s[c])!==null&&d!==void 0?d:[];if(s[c]=this.cloneDeep(l),u.length>0){const p=s[c].map(g=>g.presence_ref),h=u.filter(g=>p.indexOf(g.presence_ref)<0);s[c].unshift(...h)}r(c,u,l)}),this.map(i,(c,l)=>{let d=s[c];if(!d)return;const u=l.map(p=>p.presence_ref);d=d.filter(p=>u.indexOf(p.presence_ref)<0),s[c]=d,a(c,d,l),d.length===0&&delete s[c]}),s}static map(s,n){return Object.getOwnPropertyNames(s).map(r=>n(r,s[r]))}static transformState(s){return s=this.cloneDeep(s),Object.getOwnPropertyNames(s).reduce((n,r)=>{const a=s[r];return"metas"in a?n[r]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=a,n},{})}static cloneDeep(s){return JSON.parse(JSON.stringify(s))}onJoin(s){this.caller.onJoin=s}onLeave(s){this.caller.onLeave=s}onSync(s){this.caller.onSync=s}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var cw;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(cw||(cw={}));var lw;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes"})(lw||(lw={}));var dw;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(dw||(dw={}));class ov{constructor(s,n={config:{}},r){this.topic=s,this.params=n,this.socket=r,this.bindings={},this.state=Rs.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=s.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new cf(this,An.join,this.params,this.timeout),this.rejoinTimer=new LT(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Rs.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Rs.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Rs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Rs.errored,this.rejoinTimer.scheduleTimeout())}),this._on(An.reply,{},(a,o)=>{this._trigger(this._replyEventName(o),a)}),this.presence=new su(this),this.broadcastEndpointURL=RT(this.socket.endPoint)+"/api/broadcast"}subscribe(s,n=this.timeout){var r,a;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:o,presence:i,private:c}}=this.params;this._onError(u=>s&&s("CHANNEL_ERROR",u)),this._onClose(()=>s&&s("CLOSED"));const l={},d={broadcast:o,presence:i,postgres_changes:(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&a!==void 0?a:[],private:c};this.socket.accessToken&&(l.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:d},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",({postgres_changes:u})=>{var p;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),u===void 0){s&&s("SUBSCRIBED");return}else{const h=this.bindings.postgres_changes,g=(p=h==null?void 0:h.length)!==null&&p!==void 0?p:0,f=[];for(let _=0;_<g;_++){const b=h[_],{filter:{event:x,schema:v,table:j,filter:y}}=b,w=u&&u[_];if(w&&w.event===x&&w.schema===v&&w.table===j&&w.filter===y)f.push(Object.assign(Object.assign({},b),{id:w.id}));else{this.unsubscribe(),s&&s("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=f,s&&s("SUBSCRIBED");return}}).receive("error",u=>{s&&s("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{s&&s("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(s,n={}){return await this.send({type:"presence",event:"track",payload:s},n.timeout||this.timeout)}async untrack(s={}){return await this.send({type:"presence",event:"untrack"},s)}on(s,n,r){return this._on(s,n,r)}async send(s,n={}){var r,a;if(!this._canPush()&&s.type==="broadcast"){const{event:o,payload:i}=s,c={method:"POST",headers:{Authorization:this.socket.accessToken?`Bearer ${this.socket.accessToken}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:i}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=l.body)===null||a===void 0?void 0:a.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var i,c,l;const d=this._push(s.type,s,n.timeout||this.timeout);s.type==="broadcast"&&!(!((l=(c=(i=this.params)===null||i===void 0?void 0:i.config)===null||c===void 0?void 0:c.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})}updateJoinPayload(s){this.joinPush.updatePayload(s)}unsubscribe(s=this.timeout){this.state=Rs.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(An.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{const a=new cf(this,An.leave,{},s);a.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),a.send(),this._canPush()||a.trigger("ok",{})})}async _fetchWithTimeout(s,n,r){const a=new AbortController,o=setTimeout(()=>a.abort(),r),i=await this.socket.fetch(s,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(o),i}_push(s,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${s}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new cf(this,s,n,r);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(s,n,r){return n}_isMember(s){return this.topic===s}_joinRef(){return this.joinPush.ref}_trigger(s,n,r){var a,o;const i=s.toLocaleLowerCase(),{close:c,error:l,leave:d,join:u}=An;if(r&&[c,l,d,u].indexOf(i)>=0&&r!==this._joinRef())return;let h=this._onMessage(i,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(g=>{var f,_,b;return((f=g.filter)===null||f===void 0?void 0:f.event)==="*"||((b=(_=g.filter)===null||_===void 0?void 0:_.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===i}).map(g=>g.callback(h,r)):(o=this.bindings[i])===null||o===void 0||o.filter(g=>{var f,_,b,x,v,j;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in g){const y=g.id,w=(f=g.filter)===null||f===void 0?void 0:f.event;return y&&((_=n.ids)===null||_===void 0?void 0:_.includes(y))&&(w==="*"||(w==null?void 0:w.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const y=(v=(x=g==null?void 0:g.filter)===null||x===void 0?void 0:x.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return y==="*"||y===((j=n==null?void 0:n.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===i}).map(g=>{if(typeof h=="object"&&"ids"in h){const f=h.data,{schema:_,table:b,commit_timestamp:x,type:v,errors:j}=f;h=Object.assign(Object.assign({},{schema:_,table:b,commit_timestamp:x,eventType:v,new:{},old:{},errors:j}),this._getPayloadRecords(f))}g.callback(h,r)})}_isClosed(){return this.state===Rs.closed}_isJoined(){return this.state===Rs.joined}_isJoining(){return this.state===Rs.joining}_isLeaving(){return this.state===Rs.leaving}_replyEventName(s){return`chan_reply_${s}`}_on(s,n,r){const a=s.toLocaleLowerCase(),o={type:a,filter:n,callback:r};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(s,n){const r=s.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&ov.isEqual(a.filter,n))}),this}static isEqual(s,n){if(Object.keys(s).length!==Object.keys(n).length)return!1;for(const r in s)if(s[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(s){this._on(An.close,{},s)}_onError(s){this._on(An.error,{},n=>s(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(s=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Rs.joining,this.joinPush.resend(s))}_getPayloadRecords(s){const n={new:{},old:{}};return(s.type==="INSERT"||s.type==="UPDATE")&&(n.new=ow(s.columns,s.record)),(s.type==="UPDATE"||s.type==="DELETE")&&(n.old=ow(s.columns,s.old_record)),n}}const iH=()=>{},cH=typeof WebSocket<"u";class lH{constructor(s,n){var r;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=J8,this.params={},this.timeout=OT,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=iH,this.conn=null,this.sendBuffer=[],this.serializer=new eH,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=o=>{let i;return o?i=o:typeof fetch>"u"?i=(...c)=>fr(async()=>{const{default:l}=await Promise.resolve().then(()=>Pl);return{default:l}},void 0).then(({default:l})=>l(...c)):i=fetch,(...c)=>i(...c)},this.endPoint=`${s}/${Nb.websocket}`,this.httpEndpoint=RT(s),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const a=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;a&&(this.accessToken=a,this.apiKey=a),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:o=>[1e3,2e3,5e3,1e4][o-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(o,i)=>i(JSON.stringify(o)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new LT(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(cH){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new dH(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),fr(async()=>{const{default:s}=await import("./browser-Bnv4ZG4x.js").then(n=>n.b);return{default:s}},__vite__mapDeps([0,1,2])).then(({default:s})=>{this.conn=new s(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(s,n){this.conn&&(this.conn.onclose=function(){},s?this.conn.close(s,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(s){const n=await s.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const s=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),s}log(s,n,r){this.logger(s,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Wc.connecting:return Xo.Connecting;case Wc.open:return Xo.Open;case Wc.closing:return Xo.Closing;default:return Xo.Closed}}isConnected(){return this.connectionState()===Xo.Open}channel(s,n={config:{}}){const r=new ov(`realtime:${s}`,n,this);return this.channels.push(r),r}push(s){const{topic:n,event:r,payload:a,ref:o}=s,i=()=>{this.encode(s,c=>{var l;(l=this.conn)===null||l===void 0||l.send(c)})};this.log("push",`${n} ${r} (${o})`,a),this.isConnected()?i():this.sendBuffer.push(i)}setAuth(s){this.accessToken=s,this.channels.forEach(n=>{s&&n.updateJoinPayload({access_token:s}),n.joinedOnce&&n._isJoined()&&n._push(An.access_token,{access_token:s})})}_makeRef(){let s=this.ref+1;return s===this.ref?this.ref=0:this.ref=s,this.ref.toString()}_leaveOpenTopic(s){let n=this.channels.find(r=>r.topic===s&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${s}"`),n.unsubscribe())}_remove(s){this.channels=this.channels.filter(n=>n._joinRef()!==s._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=s=>this._onConnError(s),this.conn.onmessage=s=>this._onConnMessage(s),this.conn.onclose=s=>this._onConnClose(s))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Z8}))}_onConnMessage(s){this.decode(s.data,n=>{let{topic:r,event:a,payload:o,ref:i}=n;(i&&i===this.pendingHeartbeatRef||a===(o==null?void 0:o.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${o.status||""} ${r} ${a} ${i&&"("+i+")"||""}`,o),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(a,o,i)),this.stateChangeCallbacks.message.forEach(c=>c(n))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(s=>s())}_onConnClose(s){this.log("transport","close",s),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(s))}_onConnError(s){this.log("transport",s.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(s))}_triggerChanError(){this.channels.forEach(s=>s._trigger(An.error))}_appendParams(s,n){if(Object.keys(n).length===0)return s;const r=s.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${s}${r}${a}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(s=>s()),this.sendBuffer=[])}_sendHeartbeat(){var s;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(s=this.conn)===null||s===void 0||s.close(X8,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class dH{constructor(s,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Wc.connecting,this.send=()=>{},this.url=null,this.url=s,this.close=r.close}}class iv extends Error{constructor(s){super(s),this.__isStorageError=!0,this.name="StorageError"}}function ns(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class uH extends iv{constructor(s,n){super(s),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class uw extends iv{constructor(s,n){super(s),this.name="StorageUnknownError",this.originalError=n}}var hH=function(e,s,n,r){function a(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function c(u){try{d(r.next(u))}catch(p){i(p)}}function l(u){try{d(r.throw(u))}catch(p){i(p)}}function d(u){u.done?o(u.value):a(u.value).then(c,l)}d((r=r.apply(e,s||[])).next())})};const BT=e=>{let s;return e?s=e:typeof fetch>"u"?s=(...n)=>fr(async()=>{const{default:r}=await Promise.resolve().then(()=>Pl);return{default:r}},void 0).then(({default:r})=>r(...n)):s=fetch,(...n)=>s(...n)},pH=()=>hH(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield fr(()=>Promise.resolve().then(()=>Pl),void 0)).Response:Response});var Nl=function(e,s,n,r){function a(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function c(u){try{d(r.next(u))}catch(p){i(p)}}function l(u){try{d(r.throw(u))}catch(p){i(p)}}function d(u){u.done?o(u.value):a(u.value).then(c,l)}d((r=r.apply(e,s||[])).next())})};const lf=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),mH=(e,s)=>Nl(void 0,void 0,void 0,function*(){const n=yield pH();e instanceof n?e.json().then(r=>{s(new uH(lf(r),e.status||500))}).catch(r=>{s(new uw(lf(r),r))}):s(new uw(lf(e),e))}),gH=(e,s,n,r)=>{const a={method:e,headers:(s==null?void 0:s.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},s==null?void 0:s.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))};function ig(e,s,n,r,a,o){return Nl(this,void 0,void 0,function*(){return new Promise((i,c)=>{e(n,gH(s,r,a,o)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>i(l)).catch(l=>mH(l,c))})})}function Eb(e,s,n,r){return Nl(this,void 0,void 0,function*(){return ig(e,"GET",s,n,r)})}function Na(e,s,n,r,a){return Nl(this,void 0,void 0,function*(){return ig(e,"POST",s,r,a,n)})}function fH(e,s,n,r,a){return Nl(this,void 0,void 0,function*(){return ig(e,"PUT",s,r,a,n)})}function MT(e,s,n,r,a){return Nl(this,void 0,void 0,function*(){return ig(e,"DELETE",s,r,a,n)})}var Gs=function(e,s,n,r){function a(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function c(u){try{d(r.next(u))}catch(p){i(p)}}function l(u){try{d(r.throw(u))}catch(p){i(p)}}function d(u){u.done?o(u.value):a(u.value).then(c,l)}d((r=r.apply(e,s||[])).next())})};const _H={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},hw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class bH{constructor(s,n={},r,a){this.url=s,this.headers=n,this.bucketId=r,this.fetch=BT(a)}uploadOrUpdate(s,n,r,a){return Gs(this,void 0,void 0,function*(){try{let o;const i=Object.assign(Object.assign({},hw),a),c=Object.assign(Object.assign({},this.headers),s==="POST"&&{"x-upsert":String(i.upsert)});typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",i.cacheControl),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.append("cacheControl",i.cacheControl)):(o=r,c["cache-control"]=`max-age=${i.cacheControl}`,c["content-type"]=i.contentType);const l=this._removeEmptyFolders(n),d=this._getFinalPath(l),u=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:s,body:o,headers:c},i!=null&&i.duplex?{duplex:i.duplex}:{})),p=yield u.json();return u.ok?{data:{path:l,id:p.Id,fullPath:p.Key},error:null}:{data:null,error:p}}catch(o){if(ns(o))return{data:null,error:o};throw o}})}upload(s,n,r){return Gs(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",s,n,r)})}uploadToSignedUrl(s,n,r,a){return Gs(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(s),i=this._getFinalPath(o),c=new URL(this.url+`/object/upload/sign/${i}`);c.searchParams.set("token",n);try{let l;const d=Object.assign({upsert:hw.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",d.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",d.cacheControl)):(l=r,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const p=yield this.fetch(c.toString(),{method:"PUT",body:l,headers:u}),h=yield p.json();return p.ok?{data:{path:o,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(ns(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(s,n){return Gs(this,void 0,void 0,function*(){try{let r=this._getFinalPath(s);const a=Object.assign({},this.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const o=yield Na(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),i=new URL(this.url+o.url),c=i.searchParams.get("token");if(!c)throw new iv("No token returned by API");return{data:{signedUrl:i.toString(),path:s,token:c},error:null}}catch(r){if(ns(r))return{data:null,error:r};throw r}})}update(s,n,r){return Gs(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",s,n,r)})}move(s,n,r){return Gs(this,void 0,void 0,function*(){try{return{data:yield Na(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:s,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(ns(a))return{data:null,error:a};throw a}})}copy(s,n,r){return Gs(this,void 0,void 0,function*(){try{return{data:{path:(yield Na(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:s,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(ns(a))return{data:null,error:a};throw a}})}createSignedUrl(s,n,r){return Gs(this,void 0,void 0,function*(){try{let a=this._getFinalPath(s),o=yield Na(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${i}`)},{data:o,error:null}}catch(a){if(ns(a))return{data:null,error:a};throw a}})}createSignedUrls(s,n,r){return Gs(this,void 0,void 0,function*(){try{const a=yield Na(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:s},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${o}`):null})),error:null}}catch(a){if(ns(a))return{data:null,error:a};throw a}})}download(s,n){return Gs(this,void 0,void 0,function*(){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),i=o?`?${o}`:"";try{const c=this._getFinalPath(s);return{data:yield(yield Eb(this.fetch,`${this.url}/${a}/${c}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if(ns(c))return{data:null,error:c};throw c}})}getPublicUrl(s,n){const r=this._getFinalPath(s),a=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&a.push(o);const c=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&a.push(l);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${r}${d}`)}}}remove(s){return Gs(this,void 0,void 0,function*(){try{return{data:yield MT(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:s},{headers:this.headers}),error:null}}catch(n){if(ns(n))return{data:null,error:n};throw n}})}list(s,n,r){return Gs(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},_H),n),{prefix:s||""});return{data:yield Na(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(ns(a))return{data:null,error:a};throw a}})}_getFinalPath(s){return`${this.bucketId}/${s}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const n=[];return s.width&&n.push(`width=${s.width}`),s.height&&n.push(`height=${s.height}`),s.resize&&n.push(`resize=${s.resize}`),s.format&&n.push(`format=${s.format}`),s.quality&&n.push(`quality=${s.quality}`),n.join("&")}}const xH="2.6.0",vH={"X-Client-Info":`storage-js/${xH}`};var ec=function(e,s,n,r){function a(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function c(u){try{d(r.next(u))}catch(p){i(p)}}function l(u){try{d(r.throw(u))}catch(p){i(p)}}function d(u){u.done?o(u.value):a(u.value).then(c,l)}d((r=r.apply(e,s||[])).next())})};class jH{constructor(s,n={},r){this.url=s,this.headers=Object.assign(Object.assign({},vH),n),this.fetch=BT(r)}listBuckets(){return ec(this,void 0,void 0,function*(){try{return{data:yield Eb(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(s){if(ns(s))return{data:null,error:s};throw s}})}getBucket(s){return ec(this,void 0,void 0,function*(){try{return{data:yield Eb(this.fetch,`${this.url}/bucket/${s}`,{headers:this.headers}),error:null}}catch(n){if(ns(n))return{data:null,error:n};throw n}})}createBucket(s,n={public:!1}){return ec(this,void 0,void 0,function*(){try{return{data:yield Na(this.fetch,`${this.url}/bucket`,{id:s,name:s,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ns(r))return{data:null,error:r};throw r}})}updateBucket(s,n){return ec(this,void 0,void 0,function*(){try{return{data:yield fH(this.fetch,`${this.url}/bucket/${s}`,{id:s,name:s,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ns(r))return{data:null,error:r};throw r}})}emptyBucket(s){return ec(this,void 0,void 0,function*(){try{return{data:yield Na(this.fetch,`${this.url}/bucket/${s}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(ns(n))return{data:null,error:n};throw n}})}deleteBucket(s){return ec(this,void 0,void 0,function*(){try{return{data:yield MT(this.fetch,`${this.url}/bucket/${s}`,{},{headers:this.headers}),error:null}}catch(n){if(ns(n))return{data:null,error:n};throw n}})}}class yH extends jH{constructor(s,n={},r){super(s,n,r)}from(s){return new bH(this.url,this.headers,s,this.fetch)}}const wH="2.44.2";let qd="";typeof Deno<"u"?qd="deno":typeof document<"u"?qd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?qd="react-native":qd="node";const SH={"X-Client-Info":`supabase-js-${qd}/${wH}`},CH={headers:SH},IH={schema:"public"},kH={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},TH={};var PH=function(e,s,n,r){function a(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function c(u){try{d(r.next(u))}catch(p){i(p)}}function l(u){try{d(r.throw(u))}catch(p){i(p)}}function d(u){u.done?o(u.value):a(u.value).then(c,l)}d((r=r.apply(e,s||[])).next())})};const NH=e=>{let s;return e?s=e:typeof fetch>"u"?s=TT:s=fetch,(...n)=>s(...n)},AH=()=>typeof Headers>"u"?PT:Headers,EH=(e,s,n)=>{const r=NH(n),a=AH();return(o,i)=>PH(void 0,void 0,void 0,function*(){var c;const l=(c=yield s())!==null&&c!==void 0?c:e;let d=new a(i==null?void 0:i.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${l}`),r(o,Object.assign(Object.assign({},i),{headers:d}))})};function OH(e){return e.replace(/\/$/,"")}function LH(e,s){const{db:n,auth:r,realtime:a,global:o}=e,{db:i,auth:c,realtime:l,global:d}=s;return{db:Object.assign(Object.assign({},i),n),auth:Object.assign(Object.assign({},c),r),realtime:Object.assign(Object.assign({},l),a),global:Object.assign(Object.assign({},d),o)}}const DT="2.64.2",$H="http://localhost:9999",RH="supabase.auth.token",BH={"X-Client-Info":`gotrue-js/${DT}`},pw=10,Ob="X-Supabase-Api-Version",UT={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function MH(e){return Math.round(Date.now()/1e3)+e}function DH(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const s=Math.random()*16|0;return(e=="x"?s:s&3|8).toString(16)})}const Tn=()=>typeof document<"u",Co={tested:!1,writable:!1},nu=()=>{if(!Tn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Co.tested)return Co.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Co.tested=!0,Co.writable=!0}catch{Co.tested=!0,Co.writable=!1}return Co.writable};function df(e){const s={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,o)=>{s[o]=a})}catch{}return n.searchParams.forEach((r,a)=>{s[a]=r}),s}const FT=e=>{let s;return e?s=e:typeof fetch>"u"?s=(...n)=>fr(async()=>{const{default:r}=await Promise.resolve().then(()=>Pl);return{default:r}},void 0).then(({default:r})=>r(...n)):s=fetch,(...n)=>s(...n)},UH=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",zT=async(e,s,n)=>{await e.setItem(s,JSON.stringify(n))},Nh=async(e,s)=>{const n=await e.getItem(s);if(!n)return null;try{return JSON.parse(n)}catch{return n}},uf=async(e,s)=>{await e.removeItem(s)};function FH(e){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",r,a,o,i,c,l,d,u=0;for(e=e.replace("-","+").replace("_","/");u<e.length;)i=s.indexOf(e.charAt(u++)),c=s.indexOf(e.charAt(u++)),l=s.indexOf(e.charAt(u++)),d=s.indexOf(e.charAt(u++)),r=i<<2|c>>4,a=(c&15)<<4|l>>2,o=(l&3)<<6|d,n=n+String.fromCharCode(r),l!=64&&a!=0&&(n=n+String.fromCharCode(a)),d!=64&&o!=0&&(n=n+String.fromCharCode(o));return n}class cg{constructor(){this.promise=new cg.promiseConstructor((s,n)=>{this.resolve=s,this.reject=n})}}cg.promiseConstructor=Promise;function mw(e){const s=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=e.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!s.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=n[1];return JSON.parse(FH(r))}async function zH(e){return await new Promise(s=>{setTimeout(()=>s(null),e)})}function qH(e,s){return new Promise((r,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const i=await e(o);if(!s(o,null,i)){r(i);return}}catch(i){if(!s(o,i)){a(i);return}}})()})}function HH(e){return("0"+e.toString(16)).substr(-2)}function VH(){const s=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let a="";for(let o=0;o<56;o++)a+=n.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(s),Array.from(s,HH).join("")}async function WH(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(r);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}function GH(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function KH(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await WH(e);return GH(n)}async function tc(e,s,n=!1){const r=VH();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await zT(e,`${s}-code-verifier`,a);const o=await KH(r);return[o,r===o?"plain":"s256"]}const QH=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function YH(e){const s=e.headers.get(Ob);if(!s||!s.match(QH))return null;try{return new Date(`${s}T00:00:00.0Z`)}catch{return null}}class cv extends Error{constructor(s,n,r){super(s),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Be(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class JH extends cv{constructor(s,n,r){super(s,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function ZH(e){return Be(e)&&e.name==="AuthApiError"}class qT extends cv{constructor(s,n){super(s),this.name="AuthUnknownError",this.originalError=n}}class Oi extends cv{constructor(s,n,r,a){super(s,r,a),this.name=n,this.status=r}}class Io extends Oi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class hf extends Oi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ah extends Oi{constructor(s){super(s,"AuthInvalidCredentialsError",400,void 0)}}class Eh extends Oi{constructor(s,n=null){super(s,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class gw extends Oi{constructor(s,n=null){super(s,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Lb extends Oi{constructor(s,n){super(s,"AuthRetryableFetchError",n,void 0)}}function pf(e){return Be(e)&&e.name==="AuthRetryableFetchError"}class fw extends Oi{constructor(s,n,r){super(s,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}var XH=function(e,s){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&s.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)s.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};const Qo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),eV=[502,503,504];async function _w(e){var s;if(!UH(e))throw new Lb(Qo(e),0);if(eV.includes(e.status))throw new Lb(Qo(e),e.status);let n;try{n=await e.json()}catch(o){throw new qT(Qo(o),o)}let r;const a=YH(e);if(a&&a.getTime()>=UT["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new fw(Qo(n),e.status,((s=n.weak_password)===null||s===void 0?void 0:s.reasons)||[])}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,i)=>o&&typeof i=="string",!0))throw new fw(Qo(n),e.status,n.weak_password.reasons);throw new JH(Qo(n),e.status||500,r)}const tV=(e,s,n,r)=>{const a={method:e,headers:(s==null?void 0:s.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},s==null?void 0:s.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))};async function Fe(e,s,n,r){var a;const o=Object.assign({},r==null?void 0:r.headers);o[Ob]||(o[Ob]=UT["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const i=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const c=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await sV(e,s,n+c,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function sV(e,s,n,r,a,o){const i=tV(s,r,a,o);let c;try{c=await e(n,Object.assign({},i))}catch(l){throw console.error(l),new Lb(Qo(l),0)}if(c.ok||await _w(c),r!=null&&r.noResolveJson)return c;try{return await c.json()}catch(l){await _w(l)}}function Ia(e){var s;let n=null;oV(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=MH(e.expires_in)));const r=(s=e.user)!==null&&s!==void 0?s:e;return{data:{session:n,user:r},error:null}}function bw(e){const s=Ia(e);return!s.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(s.data.weak_password=e.weak_password),s}function Ra(e){var s;return{data:{user:(s=e.user)!==null&&s!==void 0?s:e},error:null}}function nV(e){return{data:e,error:null}}function rV(e){const{action_link:s,email_otp:n,hashed_token:r,redirect_to:a,verification_type:o}=e,i=XH(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:s,email_otp:n,hashed_token:r,redirect_to:a,verification_type:o},l=Object.assign({},i);return{data:{properties:c,user:l},error:null}}function aV(e){return e}function oV(e){return e.access_token&&e.refresh_token&&e.expires_in}var iV=function(e,s){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&s.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)s.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};class cV{constructor({url:s="",headers:n={},fetch:r}){this.url=s,this.headers=n,this.fetch=FT(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(s,n="global"){try{return await Fe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:s,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Be(r))return{data:null,error:r};throw r}}async inviteUserByEmail(s,n={}){try{return await Fe(this.fetch,"POST",`${this.url}/invite`,{body:{email:s,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ra})}catch(r){if(Be(r))return{data:{user:null},error:r};throw r}}async generateLink(s){try{const{options:n}=s,r=iV(s,["options"]),a=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await Fe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:rV,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Be(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(s){try{return await Fe(this.fetch,"POST",`${this.url}/admin/users`,{body:s,headers:this.headers,xform:Ra})}catch(n){if(Be(n))return{data:{user:null},error:n};throw n}}async listUsers(s){var n,r,a,o,i,c,l;try{const d={nextPage:null,lastPage:0,total:0},u=await Fe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=s==null?void 0:s.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(a=s==null?void 0:s.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:aV});if(u.error)throw u.error;const p=await u.json(),h=(i=u.headers.get("x-total-count"))!==null&&i!==void 0?i:0,g=(l=(c=u.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(f=>{const _=parseInt(f.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(f.split(";")[1].split("=")[1]);d[`${b}Page`]=_}),d.total=parseInt(h)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if(Be(d))return{data:{users:[]},error:d};throw d}}async getUserById(s){try{return await Fe(this.fetch,"GET",`${this.url}/admin/users/${s}`,{headers:this.headers,xform:Ra})}catch(n){if(Be(n))return{data:{user:null},error:n};throw n}}async updateUserById(s,n){try{return await Fe(this.fetch,"PUT",`${this.url}/admin/users/${s}`,{body:n,headers:this.headers,xform:Ra})}catch(r){if(Be(r))return{data:{user:null},error:r};throw r}}async deleteUser(s,n=!1){try{return await Fe(this.fetch,"DELETE",`${this.url}/admin/users/${s}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ra})}catch(r){if(Be(r))return{data:{user:null},error:r};throw r}}async _listFactors(s){try{const{data:n,error:r}=await Fe(this.fetch,"GET",`${this.url}/admin/users/${s.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:r}}catch(n){if(Be(n))return{data:null,error:n};throw n}}async _deleteFactor(s){try{return{data:await Fe(this.fetch,"DELETE",`${this.url}/admin/users/${s.userId}/factors/${s.id}`,{headers:this.headers}),error:null}}catch(n){if(Be(n))return{data:null,error:n};throw n}}}const lV={getItem:e=>nu()?globalThis.localStorage.getItem(e):null,setItem:(e,s)=>{nu()&&globalThis.localStorage.setItem(e,s)},removeItem:e=>{nu()&&globalThis.localStorage.removeItem(e)}};function xw(e={}){return{getItem:s=>e[s]||null,setItem:(s,n)=>{e[s]=n},removeItem:s=>{delete e[s]}}}function dV(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const sc={debug:!!(globalThis&&nu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class HT extends Error{constructor(s){super(s),this.isAcquireTimeout=!0}}class uV extends HT{}async function hV(e,s,n){sc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,s);const r=new globalThis.AbortController;return s>0&&setTimeout(()=>{r.abort(),sc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},s),await globalThis.navigator.locks.request(e,s===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){sc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await n()}finally{sc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(s===0)throw sc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new uV(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(sc.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}})}dV();const pV={url:$H,storageKey:RH,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:BH,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Xl=30*1e3,vw=3;async function jw(e,s,n){return await n()}class ku{constructor(s){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ku.nextInstanceID,ku.nextInstanceID+=1,this.instanceID>0&&Tn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},pV),s);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new cV({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=FT(a.fetch),this.lock=a.lock||jw,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Tn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=hV:this.lock=jw,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:nu()?this.storage=lV:(this.memoryStorage={},this.storage=xw(this.memoryStorage)):(this.memoryStorage={},this.storage=xw(this.memoryStorage)),Tn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}_debug(...s){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${DT}) ${new Date().toISOString()}`,...s),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const s=Tn()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",s),s||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:n,error:r}=await this._getSessionFromURL(s);if(r)return this._debug("#_initialize()","error detecting session from URL",r),(r==null?void 0:r.message)==="Identity is already linked"||(r==null?void 0:r.message)==="Identity is already linked to another user"?{error:r}:(await this._removeSession(),{error:r});const{session:a,redirectType:o}=n;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return Be(s)?{error:s}:{error:new qT("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(s){var n,r,a;try{await this._removeSession();const o=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=s==null?void 0:s.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=s==null?void 0:s.options)===null||a===void 0?void 0:a.captchaToken}},xform:Ia}),{data:i,error:c}=o;if(c||!i)return{data:{user:null,session:null},error:c};const l=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(o){if(Be(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(s){var n,r,a;try{await this._removeSession();let o;if("email"in s){const{email:u,password:p,options:h}=s;let g=null,f=null;this.flowType==="pkce"&&([g,f]=await tc(this.storage,this.storageKey)),o=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:p,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:g,code_challenge_method:f},xform:Ia})}else if("phone"in s){const{phone:u,password:p,options:h}=s;o=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:p,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Ia})}else throw new Ah("You must provide either an email or phone number and a password");const{data:i,error:c}=o;if(c||!i)return{data:{user:null,session:null},error:c};const l=i.session,d=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(o){if(Be(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(s){try{await this._removeSession();let n;if("email"in s){const{email:o,password:i,options:c}=s;n=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:i,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:bw})}else if("phone"in s){const{phone:o,password:i,options:c}=s;n=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:i,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:bw})}else throw new Ah("You must provide either an email or phone number and a password");const{data:r,error:a}=n;return a?{data:{user:null,session:null},error:a}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new hf}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(n){if(Be(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(s){var n,r,a,o;return await this._removeSession(),await this._handleProviderSignIn(s.provider,{redirectTo:(n=s.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=s.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=s.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=s.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(s){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(s))}async _exchangeCodeForSession(s){const n=await Nh(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(n??"").split("/"),{data:o,error:i}=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:s,code_verifier:r},xform:Ia});return await uf(this.storage,`${this.storageKey}-code-verifier`),i?{data:{user:null,session:null,redirectType:null},error:i}:!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new hf}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:i})}async signInWithIdToken(s){await this._removeSession();try{const{options:n,provider:r,token:a,access_token:o,nonce:i}=s,c=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:o,nonce:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ia}),{data:l,error:d}=c;return d?{data:{user:null,session:null},error:d}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new hf}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:d})}catch(n){if(Be(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(s){var n,r,a,o,i;try{if(await this._removeSession(),"email"in s){const{email:c,options:l}=s;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await tc(this.storage,this.storageKey));const{error:p}=await Fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in s){const{phone:c,options:l}=s,{data:d,error:u}=await Fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(a=l==null?void 0:l.data)!==null&&a!==void 0?a:{},create_user:(o=l==null?void 0:l.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(i=l==null?void 0:l.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new Ah("You must provide either an email or phone number.")}catch(c){if(Be(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(s){var n,r;try{s.type!=="email_change"&&s.type!=="phone_change"&&await this._removeSession();let a,o;"options"in s&&(a=(n=s.options)===null||n===void 0?void 0:n.redirectTo,o=(r=s.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:c}=await Fe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},s),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:Ia});if(c)throw c;if(!i)throw new Error("An error occurred on token verification.");const l=i.session,d=i.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(s.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(a){if(Be(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(s){var n,r,a;try{await this._removeSession();let o=null,i=null;return this.flowType==="pkce"&&([o,i]=await tc(this.storage,this.storageKey)),await Fe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in s?{provider_id:s.providerId}:null),"domain"in s?{domain:s.domain}:null),{redirect_to:(r=(n=s.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=s==null?void 0:s.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:s.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:i}),headers:this.headers,xform:nV})}catch(o){if(Be(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async s=>{const{data:{session:n},error:r}=s;if(r)throw r;if(!n)throw new Io;const{error:a}=await Fe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(s){if(Be(s))return{data:{user:null,session:null},error:s};throw s}}async resend(s){try{s.type!="email_change"&&s.type!="phone_change"&&await this._removeSession();const n=`${this.url}/resend`;if("email"in s){const{email:r,type:a,options:o}=s,{error:i}=await Fe(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in s){const{phone:r,type:a,options:o}=s,{data:i,error:c}=await Fe(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:c}}throw new Ah("You must provide either an email or phone number and a type")}catch(n){if(Be(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(s,n){this._debug("#_acquireLock","begin",s);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,s,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(s){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await s(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let s=null;const n=await Nh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?s=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!s)return{data:{session:null},error:null};const r=s.expires_at?s.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",s.expires_at),!r){if(this.storage.isServer){const i=this.suppressGetSessionWarning;s=new Proxy(s,{get(l,d,u){return!i&&d==="user"&&console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),Reflect.get(l,d,u)}})}return{data:{session:s},error:null}}const{session:a,error:o}=await this._callRefreshToken(s.refresh_token);return o?{data:{session:null},error:o}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(s){return s?await this._getUser(s):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(s){try{return s?await Fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:s,xform:Ra}):await this._useSession(async n=>{var r,a,o;const{data:i,error:c}=n;if(c)throw c;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Io}:await Fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=i.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:Ra})})}catch(n){if(Be(n))return{data:{user:null},error:n};throw n}}async updateUser(s,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(s,n))}async _updateUser(s,n={}){try{return await this._useSession(async r=>{const{data:a,error:o}=r;if(o)throw o;if(!a.session)throw new Io;const i=a.session;let c=null,l=null;this.flowType==="pkce"&&s.email!=null&&([c,l]=await tc(this.storage,this.storageKey));const{data:d,error:u}=await Fe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},s),{code_challenge:c,code_challenge_method:l}),jwt:i.access_token,xform:Ra});if(u)throw u;return i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(r){if(Be(r))return{data:{user:null},error:r};throw r}}_decodeJWT(s){return mw(s)}async setSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(s))}async _setSession(s){try{if(!s.access_token||!s.refresh_token)throw new Io;const n=Date.now()/1e3;let r=n,a=!0,o=null;const i=mw(s.access_token);if(i.exp&&(r=i.exp,a=r<=n),a){const{session:c,error:l}=await this._callRefreshToken(s.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!c)return{data:{user:null,session:null},error:null};o=c}else{const{data:c,error:l}=await this._getUser(s.access_token);if(l)throw l;o={access_token:s.access_token,refresh_token:s.refresh_token,user:c.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(Be(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(s))}async _refreshSession(s){try{return await this._useSession(async n=>{var r;if(!s){const{data:i,error:c}=n;if(c)throw c;s=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(s!=null&&s.refresh_token))throw new Io;const{session:a,error:o}=await this._callRefreshToken(s.refresh_token);return o?{data:{user:null,session:null},error:o}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Be(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(s){try{if(!Tn())throw new Eh("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Eh("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!s)throw new gw("Not a valid PKCE flow url.");const n=df(window.location.href);if(s){if(!n.code)throw new gw("No code detected.");const{data:v,error:j}=await this._exchangeCodeForSession(n.code);if(j)throw j;const y=new URL(window.location.href);return y.searchParams.delete("code"),window.history.replaceState(window.history.state,"",y.toString()),{data:{session:v.session,redirectType:null},error:null}}if(n.error||n.error_description||n.error_code)throw new Eh(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});const{provider_token:r,provider_refresh_token:a,access_token:o,refresh_token:i,expires_in:c,expires_at:l,token_type:d}=n;if(!o||!c||!i||!d)throw new Eh("No session defined in URL");const u=Math.round(Date.now()/1e3),p=parseInt(c);let h=u+p;l&&(h=parseInt(l));const g=h-u;g*1e3<=Xl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${p}s`);const f=h-p;u-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,h,u):u-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",f,h,u);const{data:_,error:b}=await this._getUser(o);if(b)throw b;const x={provider_token:r,provider_refresh_token:a,access_token:o,expires_in:p,expires_at:h,refresh_token:i,token_type:d,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:n.type},error:null}}catch(n){if(Be(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantFlow(){const s=df(window.location.href);return!!(Tn()&&(s.access_token||s.error_description))}async _isPKCEFlow(){const s=df(window.location.href),n=await Nh(this.storage,`${this.storageKey}-code-verifier`);return!!(s.code&&n)}async signOut(s={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(s))}async _signOut({scope:s}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:a,error:o}=n;if(o)return{error:o};const i=(r=a.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:c}=await this.admin.signOut(i,s);if(c&&!(ZH(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return s!=="others"&&(await this._removeSession(),await uf(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(s){const n=DH(),r={id:n,callback:s,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(s){return await this._useSession(async n=>{var r,a;try{const{data:{session:o},error:i}=n;if(i)throw i;await((r=this.stateChangeEmitters.get(s))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",s,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(s))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",s,"error",o),console.error(o)}})}async resetPasswordForEmail(s,n={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await tc(this.storage,this.storageKey,!0));try{return await Fe(this.fetch,"POST",`${this.url}/recover`,{body:{email:s,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(Be(o))return{data:null,error:o};throw o}}async getUserIdentities(){var s;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(s=n.user.identities)!==null&&s!==void 0?s:[]},error:null}}catch(n){if(Be(n))return{data:null,error:n};throw n}}async linkIdentity(s){var n;try{const{data:r,error:a}=await this._useSession(async o=>{var i,c,l,d,u;const{data:p,error:h}=o;if(h)throw h;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,s.provider,{redirectTo:(i=s.options)===null||i===void 0?void 0:i.redirectTo,scopes:(c=s.options)===null||c===void 0?void 0:c.scopes,queryParams:(l=s.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Fe(this.fetch,"GET",g,{headers:this.headers,jwt:(u=(d=p.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return Tn()&&!(!((n=s.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:s.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Be(r))return{data:{provider:s.provider,url:null},error:r};throw r}}async unlinkIdentity(s){try{return await this._useSession(async n=>{var r,a;const{data:o,error:i}=n;if(i)throw i;return await Fe(this.fetch,"DELETE",`${this.url}/user/identities/${s.identity_id}`,{headers:this.headers,jwt:(a=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(Be(n))return{data:null,error:n};throw n}}async _refreshAccessToken(s){const n=`#_refreshAccessToken(${s.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await qH(async a=>(a>0&&await zH(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await Fe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:s},headers:this.headers,xform:Ia})),(a,o)=>{const i=200*Math.pow(2,a);return o&&pf(o)&&Date.now()+i-r<Xl})}catch(r){if(this._debug(n,"error",r),Be(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(s){return typeof s=="object"&&s!==null&&"access_token"in s&&"refresh_token"in s&&"expires_at"in s}async _handleProviderSignIn(s,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,s,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",s,"options",n,"url",r),Tn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:s,url:r},error:null}}async _recoverAndRefresh(){var s;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Nh(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const a=Math.round(Date.now()/1e3),o=((s=r.expires_at)!==null&&s!==void 0?s:1/0)<a+pw;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${pw}s`),o){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),pf(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(s){var n,r;if(!s)throw new Io;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${s.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new cg;const{data:o,error:i}=await this._refreshAccessToken(s);if(i)throw i;if(!o.session)throw new Io;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const c={session:o.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(o){if(this._debug(a,"error",o),Be(o)){const i={session:null,error:o};return pf(o)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(s,n,r=!0){const a=`#_notifyAllSubscribers(${s})`;this._debug(a,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:s,session:n});const o=[],i=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(s,n)}catch(l){o.push(l)}});if(await Promise.all(i),o.length>0){for(let c=0;c<o.length;c+=1)console.error(o[c]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(s){this._debug("#_saveSession()",s),this.suppressGetSessionWarning=!0,await zT(this.storage,this.storageKey,s)}async _removeSession(){this._debug("#_removeSession()"),await uf(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const s=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{s&&Tn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",s)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const s=setInterval(()=>this._autoRefreshTokenTick(),Xl);this.autoRefreshTicker=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const s=this.autoRefreshTicker;this.autoRefreshTicker=null,s&&clearInterval(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const s=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-s)/Xl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Xl}ms, refresh threshold is ${vw} ticks`),a<=vw&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(s){if(s.isAcquireTimeout||s instanceof HT)this._debug("auto refresh token tick lock not available");else throw s}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Tn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(s){console.error("_handleVisibilityChange",s)}}async _onVisibilityChanged(s){const n=`#_onVisibilityChanged(${s})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),s||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(s,n,r){const a=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,i]=await tc(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(i)}`});a.push(c.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);a.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${s}?${a.join("&")}`}async _unenroll(s){try{return await this._useSession(async n=>{var r;const{data:a,error:o}=n;return o?{data:null,error:o}:await Fe(this.fetch,"DELETE",`${this.url}/factors/${s.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Be(n))return{data:null,error:n};throw n}}async _enroll(s){try{return await this._useSession(async n=>{var r,a;const{data:o,error:i}=n;if(i)return{data:null,error:i};const{data:c,error:l}=await Fe(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:s.friendlyName,factor_type:s.factorType,issuer:s.issuer},headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(Be(n))return{data:null,error:n};throw n}}async _verify(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:o}=n;if(o)return{data:null,error:o};const{data:i,error:c}=await Fe(this.fetch,"POST",`${this.url}/factors/${s.factorId}/verify`,{body:{code:s.code,challenge_id:s.challengeId},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:c})})}catch(n){if(Be(n))return{data:null,error:n};throw n}})}async _challenge(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:o}=n;return o?{data:null,error:o}:await Fe(this.fetch,"POST",`${this.url}/factors/${s.factorId}/challenge`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Be(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(s){const{data:n,error:r}=await this._challenge({factorId:s.factorId});return r?{data:null,error:r}:await this._verify({factorId:s.factorId,challengeId:n.id,code:s.code})}async _listFactors(){const{data:{user:s},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(s==null?void 0:s.factors)||[],a=r.filter(o=>o.factor_type==="totp"&&o.status==="verified");return{data:{all:r,totp:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async s=>{var n,r;const{data:{session:a},error:o}=s;if(o)return{data:null,error:o};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const i=this._decodeJWT(a.access_token);let c=null;i.aal&&(c=i.aal);let l=c;((r=(n=a.user.factors)===null||n===void 0?void 0:n.filter(p=>p.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:c,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}}ku.nextInstanceID=0;const mV=ku;class gV extends mV{constructor(s){super(s)}}var fV=function(e,s,n,r){function a(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function c(u){try{d(r.next(u))}catch(p){i(p)}}function l(u){try{d(r.throw(u))}catch(p){i(p)}}function d(u){u.done?o(u.value):a(u.value).then(c,l)}d((r=r.apply(e,s||[])).next())})};class _V{constructor(s,n,r){var a,o,i;if(this.supabaseUrl=s,this.supabaseKey=n,!s)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const c=OH(s);this.realtimeUrl=`${c}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${c}/auth/v1`,this.storageUrl=`${c}/storage/v1`,this.functionsUrl=`${c}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,d={db:IH,realtime:TH,auth:Object.assign(Object.assign({},kH),{storageKey:l}),global:CH},u=LH(r??{},d);this.storageKey=(a=u.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(o=u.global.headers)!==null&&o!==void 0?o:{},this.auth=this._initSupabaseAuthClient((i=u.auth)!==null&&i!==void 0?i:{},this.headers,u.global.fetch),this.fetch=EH(n,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},u.realtime)),this.rest=new Q8(`${c}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new R8(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new yH(this.storageUrl,this.headers,this.fetch)}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,n={},r={}){return this.rest.rpc(s,n,r)}channel(s,n={config:{}}){return this.realtime.channel(s,n)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var s,n;return fV(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(n=(s=r.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:n,detectSessionInUrl:r,storage:a,storageKey:o,flowType:i,debug:c},l,d){var u;const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new gV({url:this.authUrl,headers:Object.assign(Object.assign({},p),l),storageKey:o,autoRefreshToken:s,persistSession:n,detectSessionInUrl:r,storage:a,flowType:i,debug:c,fetch:d,hasCustomAuthorizationHeader:(u="Authorization"in this.headers)!==null&&u!==void 0?u:!1})}_initRealtimeClient(s){return new lH(this.realtimeUrl,Object.assign(Object.assign({},s),{params:Object.assign({apikey:this.supabaseKey},s==null?void 0:s.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(s,n,r){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):s==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const bV=(e,s,n)=>new _V(e,s,n),xV=(e,s)=>bV(e,s),ga=new WeakMap,Yo=new WeakMap,Yr=new WeakMap;var vV={};const pm=Symbol("anyProducer"),yw=Promise.resolve(),mm=Symbol("listenerAdded"),gm=Symbol("listenerRemoved");let fm=!1,mf=!1;const _m=e=>typeof e=="string"||typeof e=="symbol"||typeof e=="number";function nc(e){if(!_m(e))throw new TypeError("`eventName` must be a string, symbol, or number")}function Oh(e){if(typeof e!="function")throw new TypeError("listener must be a function")}function rc(e,s){const n=Yo.get(e);if(n.has(s))return n.get(s)}function ru(e,s){const n=_m(s)?s:pm,r=Yr.get(e);if(r.has(n))return r.get(n)}function jV(e,s,n){const r=Yr.get(e);if(r.has(s))for(const a of r.get(s))a.enqueue(n);if(r.has(pm)){const a=Promise.all([s,n]);for(const o of r.get(pm))o.enqueue(a)}}function ww(e,s){s=Array.isArray(s)?s:[s];let n=!1,r=()=>{},a=[];const o={enqueue(i){a.push(i),r()},finish(){n=!0,r()}};for(const i of s){let c=ru(e,i);c||(c=new Set,Yr.get(e).set(i,c)),c.add(o)}return{async next(){return a?a.length===0?n?(a=void 0,this.next()):(await new Promise(i=>{r=i}),this.next()):{done:!1,value:await a.shift()}:{done:!0}},async return(i){a=void 0;for(const c of s){const l=ru(e,c);l&&(l.delete(o),l.size===0&&Yr.get(e).delete(c))}return r(),arguments.length>0?{done:!0,value:await i}:{done:!0}},[Symbol.asyncIterator](){return this}}}function Sw(e){if(e===void 0)return Cw;if(!Array.isArray(e))throw new TypeError("`methodNames` must be an array of strings");for(const s of e)if(!Cw.includes(s))throw typeof s!="string"?new TypeError("`methodNames` element must be a string"):new Error(`${s} is not Emittery method`);return e}const Oc=e=>e===mm||e===gm;function Lh(e,s,n){if(Oc(s))try{fm=!0,e.emit(s,n)}finally{fm=!1}}class Si{static mixin(s,n){return n=Sw(n),r=>{if(typeof r!="function")throw new TypeError("`target` must be function");for(const i of n)if(r.prototype[i]!==void 0)throw new Error(`The property \`${i}\` already exists on \`target\``);function a(){return Object.defineProperty(this,s,{enumerable:!1,value:new Si}),this[s]}Object.defineProperty(r.prototype,s,{enumerable:!1,get:a});const o=i=>function(...c){return this[s][i](...c)};for(const i of n)Object.defineProperty(r.prototype,i,{enumerable:!1,value:o(i)});return r}}static get isDebugEnabled(){if(typeof vV!="object")return mf;const{env:s}=globalThis.process??{env:{}};return s.DEBUG==="emittery"||s.DEBUG==="*"||mf}static set isDebugEnabled(s){mf=s}constructor(s={}){ga.set(this,new Set),Yo.set(this,new Map),Yr.set(this,new Map),Yr.get(this).set(pm,new Set),this.debug=s.debug??{},this.debug.enabled===void 0&&(this.debug.enabled=!1),this.debug.logger||(this.debug.logger=(n,r,a,o)=>{try{o=JSON.stringify(o)}catch{o=`Object with the following keys failed to stringify: ${Object.keys(o).join(",")}`}(typeof a=="symbol"||typeof a=="number")&&(a=a.toString());const i=new Date,c=`${i.getHours()}:${i.getMinutes()}:${i.getSeconds()}.${i.getMilliseconds()}`;console.log(`[${c}][emittery:${n}][${r}] Event Name: ${a}
	data: ${o}`)})}logIfDebugEnabled(s,n,r){(Si.isDebugEnabled||this.debug.enabled)&&this.debug.logger(s,this.debug.name,n,r)}on(s,n,{signal:r}={}){Oh(n),s=Array.isArray(s)?s:[s];for(const o of s){nc(o);let i=rc(this,o);i||(i=new Set,Yo.get(this).set(o,i)),i.add(n),this.logIfDebugEnabled("subscribe",o,void 0),Oc(o)||Lh(this,mm,{eventName:o,listener:n})}const a=()=>{this.off(s,n),r==null||r.removeEventListener("abort",a)};return r==null||r.addEventListener("abort",a,{once:!0}),r!=null&&r.aborted&&a(),a}off(s,n){Oh(n),s=Array.isArray(s)?s:[s];for(const r of s){nc(r);const a=rc(this,r);a&&(a.delete(n),a.size===0&&Yo.get(this).delete(r)),this.logIfDebugEnabled("unsubscribe",r,void 0),Oc(r)||Lh(this,gm,{eventName:r,listener:n})}}once(s){let n;const r=new Promise(a=>{n=this.on(s,o=>{n(),a(o)})});return r.off=n,r}events(s){s=Array.isArray(s)?s:[s];for(const n of s)nc(n);return ww(this,s)}async emit(s,n){if(nc(s),Oc(s)&&!fm)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`");this.logIfDebugEnabled("emit",s,n),jV(this,s,n);const r=rc(this,s)??new Set,a=ga.get(this),o=[...r],i=Oc(s)?[]:[...a];await yw,await Promise.all([...o.map(async c=>{if(r.has(c))return c(n)}),...i.map(async c=>{if(a.has(c))return c(s,n)})])}async emitSerial(s,n){if(nc(s),Oc(s)&&!fm)throw new TypeError("`eventName` cannot be meta event `listenerAdded` or `listenerRemoved`");this.logIfDebugEnabled("emitSerial",s,n);const r=rc(this,s)??new Set,a=ga.get(this),o=[...r],i=[...a];await yw;for(const c of o)r.has(c)&&await c(n);for(const c of i)a.has(c)&&await c(s,n)}onAny(s,{signal:n}={}){Oh(s),this.logIfDebugEnabled("subscribeAny",void 0,void 0),ga.get(this).add(s),Lh(this,mm,{listener:s});const r=()=>{this.offAny(s),n==null||n.removeEventListener("abort",r)};return n==null||n.addEventListener("abort",r,{once:!0}),n!=null&&n.aborted&&r(),r}anyEvent(){return ww(this)}offAny(s){Oh(s),this.logIfDebugEnabled("unsubscribeAny",void 0,void 0),Lh(this,gm,{listener:s}),ga.get(this).delete(s)}clearListeners(s){s=Array.isArray(s)?s:[s];for(const n of s)if(this.logIfDebugEnabled("clear",n,void 0),_m(n)){const r=rc(this,n);r&&r.clear();const a=ru(this,n);if(a){for(const o of a)o.finish();a.clear()}}else{ga.get(this).clear();for(const[r,a]of Yo.get(this).entries())a.clear(),Yo.get(this).delete(r);for(const[r,a]of Yr.get(this).entries()){for(const o of a)o.finish();a.clear(),Yr.get(this).delete(r)}}}listenerCount(s){var r,a,o;s=Array.isArray(s)?s:[s];let n=0;for(const i of s){if(_m(i)){n+=ga.get(this).size+(((r=rc(this,i))==null?void 0:r.size)??0)+(((a=ru(this,i))==null?void 0:a.size)??0)+(((o=ru(this))==null?void 0:o.size)??0);continue}i!==void 0&&nc(i),n+=ga.get(this).size;for(const c of Yo.get(this).values())n+=c.size;for(const c of Yr.get(this).values())n+=c.size}return n}bindMethods(s,n){if(typeof s!="object"||s===null)throw new TypeError("`target` must be an object");n=Sw(n);for(const r of n){if(s[r]!==void 0)throw new Error(`The property \`${r}\` already exists on \`target\``);Object.defineProperty(s,r,{enumerable:!1,value:this[r].bind(this)})}}}const Cw=Object.getOwnPropertyNames(Si.prototype).filter(e=>e!=="constructor");Object.defineProperty(Si,"listenerAdded",{value:mm,writable:!1,enumerable:!0,configurable:!1});Object.defineProperty(Si,"listenerRemoved",{value:gm,writable:!1,enumerable:!0,configurable:!1});function VT(e){return e!=null}function yV(e){return e==null||typeof e!="object"?!1:typeof e[Symbol.iterator]=="function"}function wV(e){return s=>s[e]!==void 0&&s[e]!==null}function SV(e,s){return n=>n[e]===s}const CV=e=>typeof e=="object"&&e!==null&&"type"in e&&e.type==="error";new Si;function IV(e){return e.map((s,n)=>{switch(s.role){case"assistant":{const{id:r,content:a,role:o,tool_calls:i}=s,c={id:r,content:a??"",role:o};if(qy(i)){c.tool_calls=i;const l=e[n+1];if(l&&l.role!=="tool")return}return c}case"tool":{const{id:r,content:a,role:o,tool_call_id:i}=s;if(!i)throw new Error("tool_call_id is required");return{id:r,content:a??"",role:o,tool_call_id:i}}case"user":{const{id:r,content:a,role:o,name:i}=s;return{id:r,content:a??"",role:o,...i?{name:i}:{}}}}}).filter(VT).filter((s,n,r)=>!(n===r.length-1&&s.role==="assistant"&&qy(s.tool_calls)&&s.content===null))}const $b=(e,s)=>{const n={...e??{},...s??{}};for(const r of Object.keys(n))n[r]=typeof(e==null?void 0:e[r])=="object"&&typeof(s==null?void 0:s[r])=="object"?$b(e[r],s[r]):structuredClone(n[r]);return n},Iw="message",kV=({chatOptions:e,debug:s,persistChatHistory:n,maxHistorySize:r,projectKey:a,storeKey:o,apiUrl:i,headers:c})=>{if(!a)throw new Error("Markprompt: a project key is required. Make sure to pass your Markprompt project key to createChatStore.");if(r&&(!Number.isSafeInteger(r)||r<0))throw new Error("Markprompt: chatOptions.maxHistorySize must be a positive integer");return r8()(I8(p8((l,d)=>({apiUrl:i,headers:c,projectKey:a,messages:[],didAcceptDisclaimer:!1,threadIdsByProjectKey:{[a]:[]},messagesByThreadId:{},toolCallsByToolCallId:{},didAcceptDisclaimerByProjectKey:{},capMessagesByThreadId:()=>{l(u=>{if(!r||r<=0)return u;const p=Object.entries(u.messagesByThreadId).sort(([g,{lastUpdated:f}],[_,{lastUpdated:b}])=>new Date(b).getTime()-new Date(f).getTime()).slice(r).map(([g])=>g);for(const g of p)delete u.messagesByThreadId[g];const h=Object.keys(u.messagesByThreadId);u.threadIdsByProjectKey[a]=(u.threadIdsByProjectKey[a]||[]).filter(g=>h.includes(g)),Tw(u,a,n?"localStorage":"sessionStorage")})},setThreadId:u=>{l(p=>{var h;(h=p.threadIdsByProjectKey)[a]??(h[a]=[]),p.threadId=u,yV(p.threadIdsByProjectKey[a])||(p.threadIdsByProjectKey[a]=[]),p.threadIdsByProjectKey[a]=[...new Set([...p.threadIdsByProjectKey[a],u])],p.messagesByThreadId[u]={lastUpdated:new Date().toISOString(),messages:p.messages},p.capMessagesByThreadId()})},selectThread:u=>{var p,h,g,f;u&&u===d().threadId||((h=(p=d()).abort)==null||h.call(p),l(_=>{var b;if(!u){_.threadId=void 0,_.messages=[];return}_.threadId=u,_.messages=((b=_.messagesByThreadId[u])==null?void 0:b.messages)??[]}),(f=(g=d().options)==null?void 0:g.liveChatOptions)!=null&&f.enabled&&d().setupLiveChat())},setMessages:u=>{l(p=>{p.messages=u;const h=p.threadId;h&&(p.messagesByThreadId[h]={lastUpdated:new Date().toISOString(),messages:u},p.capMessagesByThreadId())})},setMessageById:(u,p)=>{l(h=>{let g=h.messages.findIndex(b=>b.id===u);g=g===-1?h.messages.length:g;let f=h.messages[g]??{};f={...f,...p},h.messages[g]=f;const _=h.threadId;_&&(h.messagesByThreadId[_]={lastUpdated:new Date().toISOString(),messages:h.messages},Tw(h,a,n?"localStorage":"sessionStorage"))})},setToolCallById(u,p){l(h=>{h.toolCallsByToolCallId[u]={...h.toolCallsByToolCallId[u],...p}})},submitChat:async(u,p)=>{var H,R,$,K,Z,U,te,oe,se;const h=d().realtimeChat;if(h&&u.some(L=>L.role==="user")){const L=u.find(ee=>ee.role==="user");if(L&&typeof L.content=="string"){h.sendMessage(L.content).catch(ee=>{console.error("Failed to send message via realtime chat:",ee)});return}}const g=Array.from({length:u.length},()=>self.crypto.randomUUID()),f=self.crypto.randomUUID();l(L=>{L.messages.push(...u.map((ee,ie)=>({...ee,id:g[ie],references:[],state:"indeterminate"})),{id:f,role:"assistant",state:"indeterminate"})}),(R=(H=d()).abort)==null||R.call(H);const _=($=d().messages.findLast(L=>L.role==="user"&&L.state!=="done"&&L.state!=="cancelled"&&!g.includes(L.id)))==null?void 0:$.id;_&&d().setMessageById(_,{state:"cancelled"});const b=new AbortController,x=()=>{b.abort();for(const L of[...g,f])d().setMessageById(L,{state:"cancelled"})};l(L=>{L.abort=x});const v=IV(d().messages);for(const L of[...g,f])d().setMessageById(L,{state:"preload"});const j=(K=d().options)==null?void 0:K.user,y=((Z=d().options)==null?void 0:Z.useConversations)??!1,w=$b($b(((U=d().options)==null?void 0:U.additionalMetadata)??{},p||{}),{internal:{...y?{storeAsConversation:y,assignToAi:!0}:{},...j?{user:j}:{}}}),S={apiUrl:d().apiUrl,headers:d().headers,threadId:d().threadId,signal:b.signal,debug:s,...d().options,tools:(oe=(te=d().options)==null?void 0:te.tools)==null?void 0:oe.map(L=>L.tool),additionalMetadata:w};try{for await(const L of t8(v,a,S))if(!b.signal.aborted){L.threadId&&d().setThreadId(L.threadId);for(const ee of g)d().setMessageById(ee,{state:"streaming-answer"});d().setMessageById(f,{state:"streaming-answer",...L})}}catch(L){if(console.error(L),q7(L))return;for(const ee of[...g,f])d().setMessageById(ee,{state:"cancelled"});d().setMessageById(f,{error:L instanceof Error?L:new Error(String(L))})}if(d().capMessagesByThreadId(),d().abort===x&&l(L=>{L.abort=void 0}),b.signal.aborted)return;for(const L of[...g,f]){const ee=d().messages.find(ie=>ie.id===L);ee&&ee.state!=="cancelled"&&d().setMessageById(L,{state:"done"})}const T=d().messages.find(L=>L.id===f);if(!((T==null?void 0:T.role)==="assistant"&&(T!=null&&T.tool_calls)))return;const E=(se=d().options)==null?void 0:se.tools;E&&T.tool_calls.every(L=>{var He;const ee=(He=L.function)==null?void 0:He.name,ie=E.find(Ot=>Ot.tool.function.name===ee);return(ie==null?void 0:ie.requireConfirmation)===!1})&&await d().submitToolCalls(T)},async submitToolCalls(u){var g;if(!(u.role==="assistant"&&u.tool_calls))return;const p=(g=d().options)==null?void 0:g.tools;if(!p)return;const h=await Promise.allSettled(u.tool_calls.filter(vT).map(async f=>{var b;const _=p.find(x=>{var v;return x.tool.function.name===((v=f.function)==null?void 0:v.name)});if(!_)throw new Error("Tool not found");try{d().setToolCallById(f.id,{status:"loading"});const x=d().threadId;if(!x)throw new Error("No Thread ID");const v=await _.call(((b=f.function)==null?void 0:b.arguments)||"{}",{threadId:x});return d().setToolCallById(f.id,{result:v,status:"done"}),{result:v,tool_call:f,tool:_}}catch(x){d().setToolCallById(f.id,{status:"error",error:x instanceof Error?x.message:String(x)})}}));d().submitChat(h.filter(SV("status","fulfilled")).filter(wV("value")).map(f=>{var _,b;return{role:"tool",name:(_=f.value)==null?void 0:_.tool.tool.function.name,tool_call_id:f.value.tool_call.id,content:(b=f.value)==null?void 0:b.result}}))},options:e??{},setOptions:u=>{var g;const p=(g=d().options)==null?void 0:g.liveChatOptions;l(f=>{f.options=u});const h=u.liveChatOptions;h!=null&&h.enabled?d().setupLiveChat():!(h!=null&&h.enabled)&&(p!=null&&p.enabled)&&d().closeLiveChat()},setDidAcceptDisclaimer:u=>{l(p=>{p.projectKey&&(p.didAcceptDisclaimerByProjectKey[p.projectKey]=u,p.didAcceptDisclaimer=u)})},regenerateLastAnswer:()=>{const u=[...d().messages],p=u.findLastIndex(g=>g.role==="user");if(p<0)return;const h=u[p];h.content&&(d().setMessages(u.slice(0,p)),d().submitChat([{role:"user",content:h.content}]))},setupLiveChat:async()=>{var h,g;d().closeLiveChat();const u=(h=d().options)==null?void 0:h.liveChatOptions,p=(g=d().options)==null?void 0:g.user;if(u!=null&&u.enabled&&p){const f=d().threadId??self.crypto.randomUUID();d().selectThread(f);const _=await fetch(`${d().apiUrl}/live-chat/sessions?projectKey=${d().projectKey}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({conversationId:f})}).then(b=>b.json()).then(b=>b);try{const b=xV(_.connectionInfo.url,_.connectionInfo.anonKey),x=_.channelName,v=b.channel(x);let j=!1;const y="name"in p?{name:p.name,email:p.email,type:"customer"}:{encrypted:p.encrypted,type:"customer"},w=await Yy(_.key);v.on("broadcast",{event:Iw},async E=>{const H=E.payload;if("name"in H.user&&"name"in p&&H.user.name===p.name||"encrypted"in H.user&&"encrypted"in p&&H.user.encrypted===p.encrypted)return;const{iv:R,ciphertext:$}=T8(H.content),K=await N8($,w,R),Z={id:H.id,role:"assistant",content:K,state:"done",references:[]};l(U=>{U.messages.push(Z),U.threadId&&(U.messagesByThreadId[U.threadId]={lastUpdated:new Date().toISOString(),messages:U.messages})})}).on("broadcast",{event:"assign-to-ai"},E=>{if(E.payload.conversationId===d().threadId){d().closeLiveChat();const R=d().messages.at(-1);(R==null?void 0:R.role)==="user"&&(l($=>{$.messages=$.messages.slice(0,-1)}),d().submitChat([R],{internal:{dontStoreUserMessage:!0}}))}}).subscribe(async E=>{var H,R;E==="SUBSCRIBED"?(j=!0,(R=(H=d()).liveChatConnectionCallback)==null||R.call(H,"connected"),await v.track(y)):await v.untrack(y)});const S={sendMessage:async E=>{if(!v||!j)return;const H=self.crypto.randomUUID(),R={id:H,role:"user",content:E,state:"done",references:[]};l(oe=>(oe.messages.push(R),oe.threadId&&(oe.messagesByThreadId[oe.threadId]={lastUpdated:new Date().toISOString(),messages:oe.messages}),oe));const $=await Yy(_.key),{ciphertext:K,iv:Z}=await P8(E,$),U=k8(K,Z),te={id:H,content:U,user:y,createdAt:new Date().toISOString()};await v.send({type:"broadcast",event:Iw,payload:te})},isConnected:!1,cleanup:()=>{b.removeChannel(v)}};Object.defineProperty(S,"isConnected",{get:()=>j}),l(E=>(E.realtimeChat=S,E));const T=setInterval(()=>{var H,R,$,K;const E=d().realtimeChat;E!=null&&E.isConnected?(R=(H=d()).liveChatConnectionCallback)==null||R.call(H,"connected"):(K=($=d()).liveChatConnectionCallback)==null||K.call($,"disconnected")},3e3);l(E=>(E.liveChatConnectionInterval=T,E))}catch(b){console.error("Failed to set up live chat:",b)}}},setLiveChatConnectionCallback:u=>{l(p=>(p.liveChatConnectionCallback=u,p))},closeLiveChat:()=>{const u=d().liveChatConnectionInterval;u&&(clearInterval(u),l(h=>(h.liveChatConnectionInterval=void 0,h)));const p=d().realtimeChat;p&&(p.cleanup(),l(h=>(h.realtimeChat=void 0,h)))},setHeaders:u=>{l(p=>(p.headers=u,p))}}),{name:o??"markprompt",version:1,storage:jT(()=>n?localStorage:sessionStorage,{reviver:(l,d)=>{if(d&&CV(d)){const u=new Error(d.message);return u.name=d.name,d.stack&&(u.stack=d.stack),d.cause&&(u.cause=d.cause),u}return d},replacer:(l,d)=>d instanceof Error?Object.fromEntries([["type","error"],["name",d.name],["message",d.message],["cause",d.cause]].filter(([,u])=>u!==void 0)):d}),partialize:l=>({threadIdsByProjectKey:l.threadIdsByProjectKey,messagesByThreadId:l.messagesByThreadId,toolCallsByToolCallId:l.toolCallsByToolCallId,didAcceptDisclaimerByProjectKey:l.didAcceptDisclaimerByProjectKey}),onRehydrateStorage:()=>l=>{var x,v,j;if(!l||typeof l!="object")return;(!((x=l.options)!=null&&x.disclaimerView)||a&&((v=l.didAcceptDisclaimerByProjectKey)!=null&&v[a]))&&l.setDidAcceptDisclaimer(!0),r&&r>0&&l.capMessagesByThreadId();const{threadIdsByProjectKey:d,messagesByThreadId:u}=l,p=(d==null?void 0:d[a])??[],h=new Date,g=new Date(h.getTime()-4*60*60*1e3),f=Object.entries(u).filter(([y])=>p.includes(y)).filter(([,{lastUpdated:y}])=>new Date(y)>g).sort(([,{lastUpdated:y}],[,{lastUpdated:w}])=>w.localeCompare(y));if(f.length===0||!VT(f[0]))return;const[_,{messages:b}]=f[0];l.setThreadId(_),l.setMessages(b.map(y=>({...y,state:y.state==="preload"||y.state==="streaming-answer"?"cancelled":y.state}))),(j=e==null?void 0:e.liveChatOptions)!=null&&j.enabled&&setTimeout(()=>{l.setupLiveChat()},0)}})))},WT=m.createContext(null);function Hr(e){const s=m.useContext(WT);if(!s)throw new Error("Missing ChatContext.Provider in the tree");return c8(s,e)}const kw=4e6;function Tw(e,s,n){try{const r=n==="localStorage"?localStorage:sessionStorage;if(new Blob(Object.values(r)).size<kw)return;console.warn("Storage limit exceeded, purging old threads...");const o=Object.entries(e.messagesByThreadId).sort(([,i],[,c])=>new Date(i.lastUpdated).getTime()-new Date(c.lastUpdated).getTime());for(;new Blob(Object.values(r)).size>kw&&o.length!==0;){const[i]=o.shift();delete e.messagesByThreadId[i],e.threadIdsByProjectKey[s]=e.threadIdsByProjectKey[s].filter(c=>c!==i)}}catch(r){console.error("Error purging storage:",r)}}function TV(e){var d,u,p;const{chatOptions:s,children:n,debug:r,projectKey:a,storeKey:o,apiUrl:i,headers:c}=e,l=m.useRef({storeKey:void 0,store:null});return(!((d=l.current)!=null&&d.store)||((u=l.current)==null?void 0:u.storeKey)!==o)&&(l.current={storeKey:o,store:kV({apiUrl:i,headers:c,projectKey:a,chatOptions:s,debug:r,persistChatHistory:s==null?void 0:s.history,maxHistorySize:s==null?void 0:s.maxHistorySize,storeKey:o})}),m.useEffect(()=>{var h,g;s&&((g=(h=l.current)==null?void 0:h.store)==null||g.getState().setOptions(s))},[s]),t.jsx(WT.Provider,{value:(p=l.current)==null?void 0:p.store,children:n})}const gf={feedback:"Did this solve your issue?",yes:"Yes",no:"No"},PV="_root_10or9_1",NV="_actions_10or9_8",Pw={root:PV,actions:NV},AV=({isLoading:e,onFeedbackSubmit:s})=>{const{trackUiInteraction:n}=k();return t.jsxs("div",{className:Pw.root,children:[t.jsx(P,{size:"s",appearance:"secondary",children:gf.feedback}),t.jsxs("div",{className:Pw.actions,children:[t.jsx(A,{appearance:"secondary",disabled:e,onClick:()=>{n("markprompt_get_help_feedback_positive_clicked"),s("positive")},children:gf.yes}),t.jsx(A,{appearance:"secondary",disabled:e,onClick:()=>{n("markprompt_get_help_feedback_negative_clicked"),s("negative")},children:gf.no})]})]})},Aa={title:"Get help",promptPlaceholder:"I am having trouble with...",clear:"Clear",ask:"Ask",feedbackResponse:"I'm glad to hear that the information helped resolve your issue! If you have any more questions or need further assistance, feel free to reach out.",feedbackNegative:"It did not help me",placeholder:e=>`${e?`Hi ${e}, `:""}I'm the Neon AI assistant. I'm designed to quickly answer your questions and guide you through any issues.
   If we need to dig deeper, I'll get you in touch with our support team.
    
  Can you provide me a little context on which area of Neon you are needing help with?`},EV="_content_77285_1",OV="_prompt_77285_8",LV="_promptActions_77285_15",ff={content:EV,prompt:OV,promptActions:LV};function ei(){return ei=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ei.apply(this,arguments)}const $V=["children","options"],be={blockQuote:"0",breakLine:"1",breakThematic:"2",codeBlock:"3",codeFenced:"4",codeInline:"5",footnote:"6",footnoteReference:"7",gfmTask:"8",heading:"9",headingSetext:"10",htmlBlock:"11",htmlComment:"12",htmlSelfClosing:"13",image:"14",link:"15",linkAngleBraceStyleDetector:"16",linkBareUrlDetector:"17",linkMailtoDetector:"18",newlineCoalescer:"19",orderedList:"20",paragraph:"21",ref:"22",refImage:"23",refLink:"24",table:"25",text:"27",textBolded:"28",textEmphasized:"29",textEscaped:"30",textMarked:"31",textStrikethroughed:"32",unorderedList:"33"};var Nw;(function(e){e[e.MAX=0]="MAX",e[e.HIGH=1]="HIGH",e[e.MED=2]="MED",e[e.LOW=3]="LOW",e[e.MIN=4]="MIN"})(Nw||(Nw={}));const Aw=["allowFullScreen","allowTransparency","autoComplete","autoFocus","autoPlay","cellPadding","cellSpacing","charSet","classId","colSpan","contentEditable","contextMenu","crossOrigin","encType","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","hrefLang","inputMode","keyParams","keyType","marginHeight","marginWidth","maxLength","mediaGroup","minLength","noValidate","radioGroup","readOnly","rowSpan","spellCheck","srcDoc","srcLang","srcSet","tabIndex","useMap"].reduce((e,s)=>(e[s.toLowerCase()]=s,e),{class:"className",for:"htmlFor"}),Ew={amp:"&",apos:"'",gt:">",lt:"<",nbsp:" ",quot:"“"},RV=["style","script"],BV=["src","href","data","formAction","srcDoc","action"],MV=/([-A-Z0-9_:]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|(?:\{((?:\\.|{[^}]*?}|[^}])*)\})))?/gi,DV=/mailto:/i,UV=/\n{2,}$/,GT=/^(\s*>[\s\S]*?)(?=\n\n|$)/,FV=/^ *> ?/gm,zV=/^(?:\[!([^\]]*)\]\n)?([\s\S]*)/,qV=/^ {2,}\n/,HV=/^(?:( *[-*_])){3,} *(?:\n *)+\n/,KT=/^(?: {1,3})?(`{3,}|~{3,}) *(\S+)? *([^\n]*?)?\n([\s\S]*?)(?:\1\n?|$)/,QT=/^(?: {4}[^\n]+\n*)+(?:\n *)+\n?/,VV=/^(`+)((?:\\`|(?!\1)`|[^`])+)\1/,WV=/^(?:\n *)*\n/,GV=/\r\n?/g,KV=/^\[\^([^\]]+)](:(.*)((\n+ {4,}.*)|(\n(?!\[\^).+))*)/,QV=/^\[\^([^\]]+)]/,YV=/\f/g,JV=/^---[ \t]*\n(.|\n)*\n---[ \t]*\n/,ZV=/^\s*?\[(x|\s)\]/,YT=/^ *(#{1,6}) *([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,JT=/^ *(#{1,6}) +([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,ZT=/^([^\n]+)\n *(=|-){3,} *(?:\n *)+\n/,Rb=/^ *(?!<[a-z][^ >/]* ?\/>)<([a-z][^ >/]*) ?((?:[^>]*[^/])?)>\n?(\s*(?:<\1[^>]*?>[\s\S]*?<\/\1>|(?!<\1\b)[\s\S])*?)<\/\1>(?!<\/\1>)\n*/i,XV=/&([a-z0-9]+|#[0-9]{1,6}|#x[0-9a-fA-F]{1,6});/gi,XT=/^<!--[\s\S]*?(?:-->)/,eW=/^(data|aria|x)-[a-z_][a-z\d_.-]*$/,Bb=/^ *<([a-z][a-z0-9:]*)(?:\s+((?:<.*?>|[^>])*))?\/?>(?!<\/\1>)(\s*\n)?/i,tW=/^\{.*\}$/,sW=/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,nW=/^<([^ >]+@[^ >]+)>/,rW=/^<([^ >]+:\/[^ >]+)>/,aW=/-([a-z])?/gi,eP=/^(\|.*)\n(?: *(\|? *[-:]+ *\|[-| :]*)\n((?:.*\|.*\n)*))?\n?/,oW=/^\[([^\]]*)\]:\s+<?([^\s>]+)>?\s*("([^"]*)")?/,iW=/^!\[([^\]]*)\] ?\[([^\]]*)\]/,cW=/^\[([^\]]*)\] ?\[([^\]]*)\]/,lW=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s)/,dW=/\t/g,uW=/(^ *\||\| *$)/g,hW=/^ *:-+: *$/,pW=/^ *:-+ *$/,mW=/^ *-+: *$/,lg="((?:\\[.*?\\][([].*?[)\\]]|<.*?>(?:.*?<.*?>)?|`.*?`|\\\\\\1|[\\s\\S])+?)",gW=new RegExp(`^([*_])\\1${lg}\\1\\1(?!\\1)`),fW=new RegExp(`^([*_])${lg}\\1(?!\\1)`),_W=new RegExp(`^(==)${lg}\\1`),bW=new RegExp(`^(~~)${lg}\\1`),xW=/^\\([^0-9A-Za-z\s])/,Ow=/\\([^0-9A-Za-z\s])/g,vW=/^([\s\S](?:(?!  |[0-9]\.)[^=*_~\-\n<`\\\[!])*)/,jW=/^\n+/,yW=/^([ \t]*)/,wW=/\\([^\\])/g,SW=/(?:^|\n)( *)$/,lv="(?:\\d+\\.)",dv="(?:[*+-])";function tP(e){return"( *)("+(e===1?lv:dv)+") +"}const sP=tP(1),nP=tP(2);function rP(e){return new RegExp("^"+(e===1?sP:nP))}const CW=rP(1),IW=rP(2);function aP(e){return new RegExp("^"+(e===1?sP:nP)+"[^\\n]*(?:\\n(?!\\1"+(e===1?lv:dv)+" )[^\\n]*)*(\\n|$)","gm")}const kW=aP(1),TW=aP(2);function oP(e){const s=e===1?lv:dv;return new RegExp("^( *)("+s+") [\\s\\S]+?(?:\\n{2,}(?! )(?!\\1"+s+" (?!"+s+" ))\\n*|\\s*\\n*$)")}const iP=oP(1),cP=oP(2);function Lw(e,s){const n=s===1,r=n?iP:cP,a=n?kW:TW,o=n?CW:IW;return{match:ol(function(i,c){const l=SW.exec(c.prevCapture);return l&&(c.list||!c.inline&&!c.simple)?r.exec(i=l[1]+i):null}),order:1,parse(i,c,l){const d=n?+i[2]:void 0,u=i[0].replace(UV,`
`).match(a);let p=!1;return{items:u.map(function(h,g){const f=o.exec(h)[0].length,_=new RegExp("^ {1,"+f+"}","gm"),b=h.replace(_,"").replace(o,""),x=g===u.length-1,v=b.indexOf(`

`)!==-1||x&&p;p=v;const j=l.inline,y=l.list;let w;l.list=!0,v?(l.inline=!1,w=Tu(b)+`

`):(l.inline=!0,w=Tu(b));const S=c(w,l);return l.inline=j,l.list=y,S}),ordered:n,start:d}},render:(i,c,l)=>e(i.ordered?"ol":"ul",{key:l.key,start:i.type===be.orderedList?i.start:void 0},i.items.map(function(d,u){return e("li",{key:u},c(d,l))}))}}const PW=new RegExp(`^\\[((?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*)\\]\\(\\s*<?((?:\\([^)]*\\)|[^\\s\\\\]|\\\\.)*?)>?(?:\\s+['"]([\\s\\S]*?)['"])?\\s*\\)`),NW=/^!\[(.*?)\]\( *((?:\([^)]*\)|[^() ])*) *"?([^)"]*)?"?\)/,lP=[GT,KT,QT,YT,ZT,JT,eP,iP,cP],AW=[...lP,/^[^\n]+(?:  \n|\n{2,})/,Rb,XT,Bb];function Tu(e){let s=e.length;for(;s>0&&e[s-1]<=" ";)s--;return e.slice(0,s)}function ed(e){return e.replace(/[ÀÁÂÃÄÅàáâãäåæÆ]/g,"a").replace(/[çÇ]/g,"c").replace(/[ðÐ]/g,"d").replace(/[ÈÉÊËéèêë]/g,"e").replace(/[ÏïÎîÍíÌì]/g,"i").replace(/[Ññ]/g,"n").replace(/[øØœŒÕõÔôÓóÒò]/g,"o").replace(/[ÜüÛûÚúÙù]/g,"u").replace(/[ŸÿÝý]/g,"y").replace(/[^a-z0-9- ]/gi,"").replace(/ /gi,"-").toLowerCase()}function EW(e){return mW.test(e)?"right":hW.test(e)?"center":pW.test(e)?"left":null}function $w(e,s,n,r){const a=n.inTable;n.inTable=!0;let o=[[]],i="";function c(){if(!i)return;const l=o[o.length-1];l.push.apply(l,s(i,n)),i=""}return e.trim().split(/(`[^`]*`|\\\||\|)/).filter(Boolean).forEach((l,d,u)=>{l.trim()==="|"&&(c(),r)?d!==0&&d!==u.length-1&&o.push([]):i+=l}),c(),n.inTable=a,o}function OW(e,s,n){n.inline=!0;const r=e[2]?e[2].replace(uW,"").split("|").map(EW):[],a=e[3]?function(i,c,l){return i.trim().split(`
`).map(function(d){return $w(d,c,l,!0)})}(e[3],s,n):[],o=$w(e[1],s,n,!!a.length);return n.inline=!1,a.length?{align:r,cells:a,header:o,type:be.table}:{children:o,type:be.paragraph}}function Rw(e,s){return e.align[s]==null?{}:{textAlign:e.align[s]}}function ol(e){return e.inline=1,e}function fa(e){return ol(function(s,n){return n.inline?e.exec(s):null})}function _a(e){return ol(function(s,n){return n.inline||n.simple?e.exec(s):null})}function Pr(e){return function(s,n){return n.inline||n.simple?null:e.exec(s)}}function td(e){return ol(function(s){return e.exec(s)})}function LW(e,s){if(s.inline||s.simple)return null;let n="";e.split(`
`).every(a=>(a+=`
`,!lP.some(o=>o.test(a))&&(n+=a,!!a.trim())));const r=Tu(n);return r==""?null:[n,,r]}const $W=/(javascript|vbscript|data(?!:image)):/i;function RW(e){try{const s=decodeURIComponent(e).replace(/[^A-Za-z0-9/:]/g,"");if($W.test(s))return null}catch{return null}return e}function Bw(e){return e.replace(wW,"$1")}function Vp(e,s,n){const r=n.inline||!1,a=n.simple||!1;n.inline=!0,n.simple=!0;const o=e(s,n);return n.inline=r,n.simple=a,o}function BW(e,s,n){const r=n.inline||!1,a=n.simple||!1;n.inline=!1,n.simple=!0;const o=e(s,n);return n.inline=r,n.simple=a,o}function MW(e,s,n){const r=n.inline||!1;n.inline=!1;const a=e(s,n);return n.inline=r,a}const _f=(e,s,n)=>({children:Vp(s,e[2],n)});function bf(){return{}}function xf(){return null}function DW(...e){return e.filter(Boolean).join(" ")}function vf(e,s,n){let r=e;const a=s.split(".");for(;a.length&&(r=r[a[0]],r!==void 0);)a.shift();return r||n}function UW(e="",s={}){function n(h,g,...f){const _=vf(s.overrides,`${h}.props`,{});return s.createElement(function(b,x){const v=vf(x,b);return v?typeof v=="function"||typeof v=="object"&&"render"in v?v:vf(x,`${b}.component`,b):b}(h,s.overrides),ei({},g,_,{className:DW(g==null?void 0:g.className,_.className)||void 0}),...f)}function r(h){h=h.replace(JV,"");let g=!1;s.forceInline?g=!0:s.forceBlock||(g=lW.test(h)===!1);const f=d(l(g?h:`${Tu(h).replace(jW,"")}

`,{inline:g}));for(;typeof f[f.length-1]=="string"&&!f[f.length-1].trim();)f.pop();if(s.wrapper===null)return f;const _=s.wrapper||(g?"span":"div");let b;if(f.length>1||s.forceWrapper)b=f;else{if(f.length===1)return b=f[0],typeof b=="string"?n("span",{key:"outer"},b):b;b=null}return s.createElement(_,{key:"outer"},b)}function a(h,g){const f=g.match(MV);return f?f.reduce(function(_,b){const x=b.indexOf("=");if(x!==-1){const v=function(S){return S.indexOf("-")!==-1&&S.match(eW)===null&&(S=S.replace(aW,function(T,E){return E.toUpperCase()})),S}(b.slice(0,x)).trim(),j=function(S){const T=S[0];return(T==='"'||T==="'")&&S.length>=2&&S[S.length-1]===T?S.slice(1,-1):S}(b.slice(x+1).trim()),y=Aw[v]||v;if(y==="ref")return _;const w=_[y]=function(S,T,E,H){return T==="style"?function(R){const $=[];let K="",Z=!1,U=!1,te="";if(!R)return $;for(let se=0;se<R.length;se++){const L=R[se];if(L!=='"'&&L!=="'"||Z||(U?L===te&&(U=!1,te=""):(U=!0,te=L)),L==="("&&K.endsWith("url")?Z=!0:L===")"&&Z&&(Z=!1),L!==";"||U||Z)K+=L;else{const ee=K.trim();if(ee){const ie=ee.indexOf(":");if(ie>0){const He=ee.slice(0,ie).trim(),Ot=ee.slice(ie+1).trim();$.push([He,Ot])}}K=""}}const oe=K.trim();if(oe){const se=oe.indexOf(":");if(se>0){const L=oe.slice(0,se).trim(),ee=oe.slice(se+1).trim();$.push([L,ee])}}return $}(E).reduce(function(R,[$,K]){return R[$.replace(/(-[a-z])/g,Z=>Z[1].toUpperCase())]=H(K,S,$),R},{}):BV.indexOf(T)!==-1?H(E,S,T):(E.match(tW)&&(E=E.slice(1,E.length-1)),E==="true"||E!=="false"&&E)}(h,v,j,s.sanitizer);typeof w=="string"&&(Rb.test(w)||Bb.test(w))&&(_[y]=r(w.trim()))}else b!=="style"&&(_[Aw[b]||b]=!0);return _},{}):null}s.overrides=s.overrides||{},s.sanitizer=s.sanitizer||RW,s.slugify=s.slugify||ed,s.namedCodesToUnicode=s.namedCodesToUnicode?ei({},Ew,s.namedCodesToUnicode):Ew,s.createElement=s.createElement||m.createElement;const o=[],i={},c={[be.blockQuote]:{match:Pr(GT),order:1,parse(h,g,f){const[,_,b]=h[0].replace(FV,"").match(zV);return{alert:_,children:g(b,f)}},render(h,g,f){const _={key:f.key};return h.alert&&(_.className="markdown-alert-"+s.slugify(h.alert.toLowerCase(),ed),h.children.unshift({attrs:{},children:[{type:be.text,text:h.alert}],noInnerParse:!0,type:be.htmlBlock,tag:"header"})),n("blockquote",_,g(h.children,f))}},[be.breakLine]:{match:td(qV),order:1,parse:bf,render:(h,g,f)=>n("br",{key:f.key})},[be.breakThematic]:{match:Pr(HV),order:1,parse:bf,render:(h,g,f)=>n("hr",{key:f.key})},[be.codeBlock]:{match:Pr(QT),order:0,parse:h=>({lang:void 0,text:Tu(h[0].replace(/^ {4}/gm,"")).replace(Ow,"$1")}),render:(h,g,f)=>n("pre",{key:f.key},n("code",ei({},h.attrs,{className:h.lang?`lang-${h.lang}`:""}),h.text))},[be.codeFenced]:{match:Pr(KT),order:0,parse:h=>({attrs:a("code",h[3]||""),lang:h[2]||void 0,text:h[4],type:be.codeBlock})},[be.codeInline]:{match:_a(VV),order:3,parse:h=>({text:h[2].replace(Ow,"$1")}),render:(h,g,f)=>n("code",{key:f.key},h.text)},[be.footnote]:{match:Pr(KV),order:0,parse:h=>(o.push({footnote:h[2],identifier:h[1]}),{}),render:xf},[be.footnoteReference]:{match:fa(QV),order:1,parse:h=>({target:`#${s.slugify(h[1],ed)}`,text:h[1]}),render:(h,g,f)=>n("a",{key:f.key,href:s.sanitizer(h.target,"a","href")},n("sup",{key:f.key},h.text))},[be.gfmTask]:{match:fa(ZV),order:1,parse:h=>({completed:h[1].toLowerCase()==="x"}),render:(h,g,f)=>n("input",{checked:h.completed,key:f.key,readOnly:!0,type:"checkbox"})},[be.heading]:{match:Pr(s.enforceAtxHeadings?JT:YT),order:1,parse:(h,g,f)=>({children:Vp(g,h[2],f),id:s.slugify(h[2],ed),level:h[1].length}),render:(h,g,f)=>n(`h${h.level}`,{id:h.id,key:f.key},g(h.children,f))},[be.headingSetext]:{match:Pr(ZT),order:0,parse:(h,g,f)=>({children:Vp(g,h[1],f),level:h[2]==="="?1:2,type:be.heading})},[be.htmlBlock]:{match:td(Rb),order:1,parse(h,g,f){const[,_]=h[3].match(yW),b=new RegExp(`^${_}`,"gm"),x=h[3].replace(b,""),v=(j=x,AW.some(E=>E.test(j))?MW:Vp);var j;const y=h[1].toLowerCase(),w=RV.indexOf(y)!==-1,S=(w?y:h[1]).trim(),T={attrs:a(S,h[2]),noInnerParse:w,tag:S};return f.inAnchor=f.inAnchor||y==="a",w?T.text=h[3]:T.children=v(g,x,f),f.inAnchor=!1,T},render:(h,g,f)=>n(h.tag,ei({key:f.key},h.attrs),h.text||(h.children?g(h.children,f):""))},[be.htmlSelfClosing]:{match:td(Bb),order:1,parse(h){const g=h[1].trim();return{attrs:a(g,h[2]||""),tag:g}},render:(h,g,f)=>n(h.tag,ei({},h.attrs,{key:f.key}))},[be.htmlComment]:{match:td(XT),order:1,parse:()=>({}),render:xf},[be.image]:{match:_a(NW),order:1,parse:h=>({alt:h[1],target:Bw(h[2]),title:h[3]}),render:(h,g,f)=>n("img",{key:f.key,alt:h.alt||void 0,title:h.title||void 0,src:s.sanitizer(h.target,"img","src")})},[be.link]:{match:fa(PW),order:3,parse:(h,g,f)=>({children:BW(g,h[1],f),target:Bw(h[2]),title:h[3]}),render:(h,g,f)=>n("a",{key:f.key,href:s.sanitizer(h.target,"a","href"),title:h.title},g(h.children,f))},[be.linkAngleBraceStyleDetector]:{match:fa(rW),order:0,parse:h=>({children:[{text:h[1],type:be.text}],target:h[1],type:be.link})},[be.linkBareUrlDetector]:{match:ol((h,g)=>g.inAnchor||s.disableAutoLink?null:fa(sW)(h,g)),order:0,parse:h=>({children:[{text:h[1],type:be.text}],target:h[1],title:void 0,type:be.link})},[be.linkMailtoDetector]:{match:fa(nW),order:0,parse(h){let g=h[1],f=h[1];return DV.test(f)||(f="mailto:"+f),{children:[{text:g.replace("mailto:",""),type:be.text}],target:f,type:be.link}}},[be.orderedList]:Lw(n,1),[be.unorderedList]:Lw(n,2),[be.newlineCoalescer]:{match:Pr(WV),order:3,parse:bf,render:()=>`
`},[be.paragraph]:{match:ol(LW),order:3,parse:_f,render:(h,g,f)=>n("p",{key:f.key},g(h.children,f))},[be.ref]:{match:fa(oW),order:0,parse:h=>(i[h[1]]={target:h[2],title:h[4]},{}),render:xf},[be.refImage]:{match:_a(iW),order:0,parse:h=>({alt:h[1]||void 0,ref:h[2]}),render:(h,g,f)=>i[h.ref]?n("img",{key:f.key,alt:h.alt,src:s.sanitizer(i[h.ref].target,"img","src"),title:i[h.ref].title}):null},[be.refLink]:{match:fa(cW),order:0,parse:(h,g,f)=>({children:g(h[1],f),fallbackChildren:h[0],ref:h[2]}),render:(h,g,f)=>i[h.ref]?n("a",{key:f.key,href:s.sanitizer(i[h.ref].target,"a","href"),title:i[h.ref].title},g(h.children,f)):n("span",{key:f.key},h.fallbackChildren)},[be.table]:{match:Pr(eP),order:1,parse:OW,render(h,g,f){const _=h;return n("table",{key:f.key},n("thead",null,n("tr",null,_.header.map(function(b,x){return n("th",{key:x,style:Rw(_,x)},g(b,f))}))),n("tbody",null,_.cells.map(function(b,x){return n("tr",{key:x},b.map(function(v,j){return n("td",{key:j,style:Rw(_,j)},g(v,f))}))})))}},[be.text]:{match:td(vW),order:4,parse:h=>({text:h[0].replace(XV,(g,f)=>s.namedCodesToUnicode[f]?s.namedCodesToUnicode[f]:g)}),render:h=>h.text},[be.textBolded]:{match:_a(gW),order:2,parse:(h,g,f)=>({children:g(h[2],f)}),render:(h,g,f)=>n("strong",{key:f.key},g(h.children,f))},[be.textEmphasized]:{match:_a(fW),order:3,parse:(h,g,f)=>({children:g(h[2],f)}),render:(h,g,f)=>n("em",{key:f.key},g(h.children,f))},[be.textEscaped]:{match:_a(xW),order:1,parse:h=>({text:h[1],type:be.text})},[be.textMarked]:{match:_a(_W),order:3,parse:_f,render:(h,g,f)=>n("mark",{key:f.key},g(h.children,f))},[be.textStrikethroughed]:{match:_a(bW),order:3,parse:_f,render:(h,g,f)=>n("del",{key:f.key},g(h.children,f))}};s.disableParsingRawHTML===!0&&(delete c[be.htmlBlock],delete c[be.htmlSelfClosing]);const l=function(h){let g=Object.keys(h);function f(_,b){let x,v,j=[],y="",w="";for(b.prevCapture=b.prevCapture||"";_;){let S=0;for(;S<g.length;){if(y=g[S],x=h[y],b.inline&&!x.match.inline){S++;continue}const T=x.match(_,b);if(T){w=T[0],b.prevCapture+=w,_=_.substring(w.length),v=x.parse(T,f,b),v.type==null&&(v.type=y),j.push(v);break}S++}}return b.prevCapture="",j}return g.sort(function(_,b){let x=h[_].order,v=h[b].order;return x!==v?x-v:_<b?-1:1}),function(_,b){return f(function(x){return x.replace(GV,`
`).replace(YV,"").replace(dW,"    ")}(_),b)}}(c),d=(u=function(h,g){return function(f,_,b){const x=h[f.type].render;return g?g(()=>x(f,_,b),f,_,b):x(f,_,b)}}(c,s.renderRule),function h(g,f={}){if(Array.isArray(g)){const _=f.key,b=[];let x=!1;for(let v=0;v<g.length;v++){f.key=v;const j=h(g[v],f),y=typeof j=="string";y&&x?b[b.length-1]+=j:j!==null&&b.push(j),x=y}return f.key=_,b}return u(g,h,f)});var u;const p=r(e);return o.length?n("div",null,p,n("footer",{key:"footer"},o.map(function(h){return n("div",{id:s.slugify(h.identifier,ed),key:h.identifier},h.identifier,d(l(h.footnote,{inline:!0})))}))):p}const FW=e=>{let{children:s="",options:n}=e,r=function(a,o){if(a==null)return{};var i,c,l={},d=Object.keys(a);for(c=0;c<d.length;c++)o.indexOf(i=d[c])>=0||(l[i]=a[i]);return l}(e,$V);return m.cloneElement(UW(s,n),r)},zW={LRNotice:"We have temporarily paused new enrollments in our Logical Replication Beta program. This pause is aimed at evaluating the feature's performance and incorporating feedback from our early adopters. Please stay tuned for updates, and thank you for your interest. We plan to reopen enrollment again soon."},qW="_root_7v7ia_1",HW="_title_7v7ia_19",VW="_subTitle_7v7ia_23",WW="_text_7v7ia_27",GW="_codeBlock_7v7ia_31",KW="_alert_7v7ia_35",QW="_img_7v7ia_39",YW="_tabs_7v7ia_43",ys={root:qW,title:HW,subTitle:VW,text:WW,codeBlock:GW,alert:KW,img:QW,tabs:YW},ba={component:()=>null},jf={bash:"text",sql:"sql",javascript:"javascript",ts:"javascript",toml:"toml",yaml:"yaml",text:"text",json:"json",graphql:"javascript",undefined:"text"},JW=e=>{var o;const s=JSON.parse((e==null?void 0:e.labels)||"[]").map((i,c)=>({label:i,value:c})),[n,r]=m.useState(0),a=i=>{r(i)};return s.length?t.jsxs(t.Fragment,{children:[t.jsx(jr,{options:s,value:n,onChange:a,className:ys.tabs}),(o=e.children)==null?void 0:o.filter(i=>typeof i!="string").map((i,c)=>c!==n?null:i)]}):null},ZW={h1:{component:J,props:{level:1,className:ys.title}},h2:{component:J,props:{level:2,className:ys.title}},h3:{component:J,props:{level:3,className:ys.subTitle}},h4:{component:J,props:{level:4,className:ys.subTitle}},h5:{component:J,props:{level:5,className:ys.subTitle}},h6:{component:J,props:{level:6,className:ys.subTitle}},p:{component:P,props:{className:ys.text}},pre:{component:e=>{var r,a;const s=(r=e.children.props.className)==null?void 0:r.match(/lang-([a-z]*)\b/gm),n=(a=s==null?void 0:s.at(0))==null?void 0:a.replace("lang-","");return t.jsx(vi,{className:ys.codeBlock,mode:jf[n]||"text",children:e.children.props.children})}},code:{component:e=>{const s=e.children.split(`
`),n=s[0];return Object.keys(jf).includes(n)?(s.shift(),t.jsx(vi,{className:ys.codeBlock,mode:jf[n]||"text",children:s.join(`
`)})):t.jsx(Pe,{children:e.children})}},video:{component:()=>null},a:{component:e=>{if(e.href.startsWith("#"))return e.children;const n=e.href.startsWith("/")?`${sm}${e.href.slice(1)}`:e.href;return t.jsx(M,{openInNewTab:!0,href:n,children:e.children})}},img:{component:e=>{const s=`${sm}${e.src.slice(1)}`;return t.jsx("img",{src:s,alt:e.alt,width:"100%",className:ys.img})}},Admonition:{component:X,props:{className:ys.alert}},DetailIconCards:{component:({children:e})=>t.jsx("ul",{children:e.map(s=>t.jsx("li",{children:s},s.key))})},Tabs:{component:JW},TabItem:{component:({children:e})=>e},LRNotice:{component:X,props:{className:ys.alert,appearance:"warning",children:zW.LRNotice}},NeedHelp:ba,YoutubeIframe:ba,DefinitionList:ba,CodeTabs:ba,TechnologyNavigation:ba,CommunityBanner:ba,CTA:ba,SignUp:ba},dP=({md:e})=>t.jsx("div",{className:ys.root,children:t.jsx(FW,{options:{overrides:ZW},children:e})}),XW={error:"Sorry...something went wrong on our side and we can't respond at the moment."},eG="_root_1ee3v_1",tG={root:eG},uP=({isLastMessage:e})=>{const{trackUiInteraction:s}=k(),n=Hr(r=>r.regenerateLastAnswer);return t.jsxs("div",{className:tG.root,children:[t.jsx(P,{children:XW.error}),e&&t.jsx(ta,{iconName:"reset",iconSize:16,onClick:()=>{s("markprompt_get_help_regenerate_response_clicked"),n()}})]})},sG="_root_r4l6r_1",nG="_content_r4l6r_11",rG="_loadingDots_r4l6r_19",aG="_dot_r4l6r_27",Bc={root:sG,content:nG,loadingDots:rG,dot:aG},oG=({state:e,isLastMessage:s})=>{switch(e){case"indeterminate":case"preload":return t.jsxs("div",{className:Bc.loadingDots,children:[t.jsx("span",{className:Bc.dot}),t.jsx("span",{className:Bc.dot}),t.jsx("span",{className:Bc.dot})]});case"cancelled":return t.jsx(uP,{isLastMessage:s});default:return null}},au=({role:e,content:s,state:n,userImage:r,userFirstName:a,children:o,isLastMessage:i})=>{const c=e==="user";return t.jsxs("div",{className:Bc.root,children:[t.jsx(Uu,{size:"m",image:c?r:t.jsx(q,{name:"neon",size:14}),name:c?a:void 0,isRounded:!0}),t.jsxs("div",{className:Bc.content,children:[e==="assistant"&&t.jsx(oG,{state:n,isLastMessage:i}),s&&t.jsx(dP,{md:s.toString()}),o]})]})},uv=({onChange:e,timeout:s=500,minLength:n=3,value:r,...a})=>{const[o,i]=m.useState(r||"");m.useEffect(()=>{r!==void 0&&i(r)},[r]);const c=m.useMemo(()=>Q1(s,e),[e,s]),l=m.useCallback(p=>{i(p.target.value)},[]);m.useEffect(()=>()=>c==null?void 0:c.cancel(),[c]);const d=m.useMemo(()=>o.trim().toLowerCase(),[o]),u=m.useCallback(p=>{p.key==="Enter"&&(c==null||c(d))},[c,d]);return m.useLayoutEffect(()=>{c==null||c(d.length<n?"":d)},[d,n,c]),t.jsx(ce,{placeholder:"Search...",...a,value:o,onChange:l,onKeyDown:u})},gi=e=>["integrations_by_project",e],hv=({enabled:e=!0})=>{const{orgId:s}=ae(),n=q1(s);return _t({queryKey:gi(s),queryFn:()=>W.listProjects({limit:200,org_id:s}),select:({data:r})=>r.integrations??r.applications,enabled:e&&!n})},iG="_root_2h35h_1",cG="_addIntegrationButton_2h35h_7",Mw={root:iG,addIntegrationButton:cG},lG={vercel:"vercel",github:"github",datadog:"datadog",opentelemetry:"opentelemetry"},hP=({projectId:e,integrations:s=[]})=>{const n=nt(),r=G(C.ProjectsItemIntegrations,{projectId:e}),a=()=>{n.push(r)};return t.jsxs("div",{className:Mw.root,children:[s.map(o=>t.jsx(q,{name:lG[o],size:16},o)),!s.length&&t.jsx(M,{icon:"add_outlined",onClick:a,className:Mw.addIntegrationButton,children:"Add"})]})},dg=()=>{const e=no("metrics_export");return{datadog:!e,opentelemetry:!e}},dG=()=>({datadog:dt.ExportMetrics,opentelemetry:dt.ExportMetrics}),pv=()=>({opentelemetry:!le("otel_integration_no_beta_badge")}),ms=e=>["integrations",e],Zu=()=>{const{projectId:e}=F();return _t({queryKey:ms(e),queryFn:async()=>{var o;const[s,n]=await Promise.all([W.listUserAvailableApplications({project_id:e}),W.getProjectMonitoringIntegrations(e).catch(()=>({data:{integrations:[],exported_telemetry_counts:[]}}))]),r=(o=n==null?void 0:n.data.integrations)==null?void 0:o.reduce((i,{status:c,config:l})=>{var d,u;switch(l.type){case"debug":return i;case"datadog":return{...i,datadog:{site:l.site,status:c,logs:l.logs,metrics:l.metrics,exportStats:(d=n==null?void 0:n.data.exported_telemetry_counts)==null?void 0:d.filter(({exporter:p})=>p==="datadog")}};case"opentelemetry":return{...i,opentelemetry:{status:c,connection:l.connection,telemetry:l.telemetry,resource:l.resource,exportStats:(u=n==null?void 0:n.data.exported_telemetry_counts)==null?void 0:u.filter(({exporter:p})=>p==="otlp")}}}return i},{});return{...s==null?void 0:s.data.applications.filter(i=>i.active).reduce((i,c)=>c.client_type==="vercel"?c.vercel?{...i,vercel:c.vercel}:i:c.client_type==="UNKNOWN"?i:{...i,[c.client_type]:{}},{}),...r}}})},sd={orgAdmin:"You must be an admin to transfer organization projects",vercelOrg:"Project transfers are not currently supported for Vercel-managed organizations",noOrgs:"Project cannot be transferred because you are not a member of any valid target organizations",sharedProjects:"Shared projects cannot be transferred",integrations:"Unable to transfer due to existing integrations. Please remove them first, then reinstall after the transfer."},uG=({isOwnProject:e,isMyOrgProject:s,isOrgAdmin:n,hasOrgDestinations:r,isVercelOrg:a,hasIntegrations:o})=>{if(o)return sd.integrations;if(!r)return sd.noOrgs;if(s)return n?a?sd.vercelOrg:void 0:sd.orgAdmin;if(!e)return sd.sharedProjects},pP=e=>{const{data:s,isLoading:n}=Un();if(e===void 0||n)return{isLoading:!0,orgs:void 0};const r=e[0].org_id,a=e.some(i=>{var c;return(c=i==null?void 0:i.settings)==null?void 0:c.hipaa});return{isLoading:!1,orgs:s==null?void 0:s.filter(i=>i.id!==r&&(!!i.allow_hipaa_projects||!a))}},mP=()=>{const{project:e,isOwnProject:s}=F(),{data:n}=Un(),{orgs:r,isLoading:a}=pP(e?[e]:void 0),{isVercelOrg:o,isLoading:i}=ae(),{isOrgAdmin:c,isLoading:l}=qt(),{data:d,isLoading:u}=Zu();if(i||l||u||a)return{enabled:!1,isLoading:!0,disabledMessage:void 0};const p=!!(e!=null&&e.org_id&&(n!=null&&n.some(b=>b.id===(e==null?void 0:e.org_id)))),g=((r==null?void 0:r.length)??0)>0,f=(d==null?void 0:d.vercel)!==void 0||(d==null?void 0:d.github)!==void 0,_=uG({isOwnProject:s,isMyOrgProject:p,isOrgAdmin:c,hasOrgDestinations:g,isVercelOrg:o,hasIntegrations:f});return{enabled:!_,isLoading:!1,disabledMessage:_}},xa={title:e=>`Transfer ${Ms("project",e)}`,descriptionSingle:e=>t.jsxs(t.Fragment,{children:["Transfer ",t.jsx("b",{children:e})," to"]}),descriptionMultiple:e=>`Transfer ${e} projects to`,tableColumnLabel:"Organization",confirmationButtonText:"Transfer",successSingle:(e,s)=>t.jsxs(t.Fragment,{children:["Project ",t.jsx("b",{children:e})," was successfully moved to ",t.jsx("b",{children:s}),". Existing members can now access the project through the org, and are no longer listed as collaborators."]}),successMultiple:(e,s)=>t.jsxs(t.Fragment,{children:[e," projects were successfully moved to ",t.jsx("b",{children:s}),". Existing members can now access the projects through the org, and are no longer listed as collaborators."]}),noOrgs:e=>`${Ms("Project",e)} cannot be transferred because you are not a member of any valid target organizations`},gP=({projects:e,onRequestClose:s,onSuccess:n,disabledMessage:r,isLoading:a})=>{const{orgs:o,isLoading:i}=pP(e);let c=r;!c&&(o==null?void 0:o.length)===0&&(c=xa.noOrgs(e.length));const l=Ae({defaultValues:{targetOrgId:void 0}}),d=M2(),u=m.useCallback(async({targetOrgId:g})=>{const f=o.find(_=>_.id===g).name;try{await d({fromOrgId:e[0].org_id,projectIds:e.map(b=>b.id),toOrgId:g});const _=e.length===1?xa.successSingle(e[0].name,f):xa.successMultiple(e.length,f);pe(_),n(g)}catch(_){l5(_)}},[n,o,e,d]),{field:p}=mx({name:"targetOrgId",control:l.control}),h=m.useMemo(()=>[{key:"id",label:xa.tableColumnLabel,renderValue:({id:g,name:f})=>t.jsx("div",{children:t.jsx(sa,{name:p.name,checked:p.value===g,onChange:()=>p.onChange(g),children:f})})}],[p]);return t.jsx(gs,{providerProps:l,onSubmit:u,modalProps:{isOpen:!0,title:xa.title(e.length),onRequestClose:s},children:a||i?t.jsx(Se,{}):t.jsxs(t.Fragment,{children:[t.jsx(qe,{gaps:!0,children:c?t.jsx(P,{appearance:"secondary",children:c}):t.jsxs(t.Fragment,{children:[t.jsx(P,{appearance:"secondary",children:e.length===1?xa.descriptionSingle(e[0].name):xa.descriptionMultiple(e.length)}),t.jsx(Mn,{cols:h,isLoading:o===void 0,data:o===void 0?[]:o,maxHeight:350})]})}),t.jsxs(Ee,{children:[t.jsx(ln,{}),t.jsx(Ie,{"data-qa":"project_transfer_confirmation_submit_button",disabled:o===void 0||p.value===void 0||!!c,children:xa.confirmationButtonText})]})]})})},fP=({project:e,...s})=>{const{isLoading:n,disabledMessage:r}=mP();return t.jsx(gP,{projects:[e],disabledMessage:r,isLoading:n,...s})};function _P(e){const s=ur(e);m.useEffect(()=>(window.addEventListener("resize",s,{passive:!0}),()=>{window.removeEventListener("resize",s)}),[s])}const hG=960;function bP({rootRef:e,shouldShowGlobe:s}){const n=m.useCallback(()=>s?s():e.current?e.current.clientWidth>=hG:!1,[e,s]),[r,a]=m.useState(n);return m.useEffect(()=>{a(n)},[n]),_P(()=>{a(n)}),r}var Dw=["x","y","z"],Dr=function(e){Object.assign(this,{uniforms:{},geometry:{vertices:[{x:0,y:0,z:0}]},mode:0,modifiers:{},attributes:[],multiplier:1,buffers:[]}),Object.assign(this,e),this.prepareProgram(),this.prepareUniforms(),this.prepareAttributes()};Dr.prototype.compileShader=function(e,s){var n=this.gl.createShader(e);return this.gl.shaderSource(n,s),this.gl.compileShader(n),n},Dr.prototype.prepareProgram=function(){var e=this.gl,s=this.vertex,n=this.fragment,r=e.createProgram();e.attachShader(r,this.compileShader(35633,s)),e.attachShader(r,this.compileShader(35632,n)),e.linkProgram(r),e.useProgram(r),this.program=r},Dr.prototype.prepareUniforms=function(){for(var e=Object.keys(this.uniforms),s=0;s<e.length;s+=1){var n=this.gl.getUniformLocation(this.program,e[s]);this.uniforms[e[s]].location=n}},Dr.prototype.prepareAttributes=function(){this.geometry.vertices!==void 0&&this.attributes.push({name:"aPosition",size:3}),this.geometry.normal!==void 0&&this.attributes.push({name:"aNormal",size:3}),this.attributeKeys=[];for(var e=0;e<this.attributes.length;e+=1)this.attributeKeys.push(this.attributes[e].name),this.prepareAttribute(this.attributes[e])},Dr.prototype.prepareAttribute=function(e){for(var s=this.geometry,n=this.multiplier,r=s.vertices,a=s.normal,o=new Float32Array(n*r.length*e.size),i=0;i<n;i+=1)for(var c=e.data&&e.data(i,n),l=i*r.length*e.size,d=0;d<r.length;d+=1)for(var u=0;u<e.size;u+=1){var p=this.modifiers[e.name];o[l]=p!==void 0?p(c,d,u,this):e.name==="aPosition"?r[d][Dw[u]]:e.name==="aNormal"?a[d][Dw[u]]:c[u],l+=1}this.attributes[this.attributeKeys.indexOf(e.name)].data=o,this.prepareBuffer(this.attributes[this.attributeKeys.indexOf(e.name)])},Dr.prototype.prepareBuffer=function(e){var s=e.data,n=e.name,r=e.size,a=this.gl.createBuffer();this.gl.bindBuffer(34962,a),this.gl.bufferData(34962,s,35044);var o=this.gl.getAttribLocation(this.program,n);this.gl.enableVertexAttribArray(o),this.gl.vertexAttribPointer(o,r,5126,!1,0,0),this.buffers[this.attributeKeys.indexOf(e.name)]={buffer:a,location:o,size:r}},Dr.prototype.render=function(e){var s=this,n=this.uniforms,r=this.multiplier,a=this.gl;a.useProgram(this.program);for(var o=0;o<this.buffers.length;o+=1){var i=this.buffers[o],c=i.location,l=i.buffer,d=i.size;a.enableVertexAttribArray(c),a.bindBuffer(34962,l),a.vertexAttribPointer(c,d,5126,!1,0,0)}Object.keys(e).forEach(function(u){n[u].value=e[u].value}),Object.keys(n).forEach(function(u){var p=n[u];s.uniformMap[p.type](p.location,p.value)}),a.drawArrays(this.mode,0,r*this.geometry.vertices.length),this.onRender&&this.onRender(this)},Dr.prototype.destroy=function(){for(var e=0;e<this.buffers.length;e+=1)this.gl.deleteBuffer(this.buffers[e].buffer);this.gl.deleteProgram(this.program),this.gl=null};var Jo=function(e){var s=this,n=e||{},r=n.canvas;r===void 0&&(r=document.querySelector("canvas"));var a=n.context;a===void 0&&(a={});var o=n.contextType;o===void 0&&(o="experimental-webgl");var i=n.settings;i===void 0&&(i={});var c=r.getContext(o,Object.assign({alpha:!1,antialias:!1},a));Object.assign(this,{gl:c,canvas:r,uniforms:{},instances:new Map,shouldRender:!0}),Object.assign(this,{devicePixelRatio:1,clearColor:[1,1,1,1],position:{x:0,y:0,z:2},clip:[.001,100]}),Object.assign(this,i),this.uniformMap={float:function(l,d){return c.uniform1f(l,d)},vec2:function(l,d){return c.uniform2fv(l,d)},vec3:function(l,d){return c.uniform3fv(l,d)},vec4:function(l,d){return c.uniform4fv(l,d)},mat2:function(l,d){return c.uniformMatrix2fv(l,!1,d)},mat3:function(l,d){return c.uniformMatrix3fv(l,!1,d)},mat4:function(l,d){return c.uniformMatrix4fv(l,!1,d)}},c.enable(c.DEPTH_TEST),c.depthFunc(c.LEQUAL),c.getContextAttributes().alpha===!1&&(c.clearColor.apply(c,this.clearColor),c.clearDepth(1)),this.onSetup&&this.onSetup(c),window.addEventListener("resize",function(){return s.resize()}),this.resize(),this.render()};Jo.prototype.resize=function(){var e=this.gl,s=this.canvas,n=this.devicePixelRatio,r=this.position;s.width=s.clientWidth*n,s.height=s.clientHeight*n;var a=e.drawingBufferWidth,o=e.drawingBufferHeight,i=a/o;e.viewport(0,0,a,o);var c=Math.tan(Math.PI/180*22.5),l=[1,0,0,0,0,1,0,0,0,0,1,0,r.x,r.y,(i<1?1:i)*-r.z,1];this.uniforms.uProjectionMatrix={type:"mat4",value:[.5/c,0,0,0,0,i/c*.5,0,0,0,0,-(this.clip[1]+this.clip[0])/(this.clip[1]-this.clip[0]),-1,0,0,-2*this.clip[1]*(this.clip[0]/(this.clip[1]-this.clip[0])),0]},this.uniforms.uViewMatrix={type:"mat4",value:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},this.uniforms.uModelMatrix={type:"mat4",value:l}},Jo.prototype.toggle=function(e){e!==this.shouldRender&&(this.shouldRender=e!==void 0?e:!this.shouldRender,this.shouldRender&&this.render())},Jo.prototype.render=function(){var e=this;this.gl.clear(16640),this.instances.forEach(function(s){s.render(e.uniforms)}),this.onRender&&this.onRender(this),this.shouldRender&&requestAnimationFrame(function(){return e.render()})},Jo.prototype.add=function(e,s){s===void 0&&(s={uniforms:{}}),s.uniforms===void 0&&(s.uniforms={}),Object.assign(s.uniforms,JSON.parse(JSON.stringify(this.uniforms))),Object.assign(s,{gl:this.gl,uniformMap:this.uniformMap});var n=new Dr(s);return this.instances.set(e,n),n},Jo.prototype.remove=function(e){var s=this.instances.get(e);s!==void 0&&(s.destroy(),this.instances.delete(e))},Jo.prototype.destroy=function(){var e=this;this.instances.forEach(function(s,n){s.destroy(),e.instances.delete(n)}),this.toggle(!1)};var xP="phi",vP="theta",jP="mapSamples",yP="mapBrightness",wP="baseColor",SP="markerColor",CP="glowColor",nd="markers",IP="diffuse",Uw="devicePixelRatio",kP="dark",TP="offset",PP="scale",NP="opacity",AP="mapBaseBrightness",Fw={[xP]:"A",[vP]:"B",[jP]:"m",[yP]:"E",[wP]:"R",[SP]:"S",[CP]:"z",[IP]:"F",[kP]:"G",[TP]:"y",[PP]:"C",[NP]:"H",[AP]:"I"},{PI:yf,sin:zw,cos:qw}=Math,Hw=e=>[].concat(...e.map(s=>{let[n,r]=s.location;n=n*yf/180,r=r*yf/180-yf;let a=qw(n),o=[-a*qw(r),zw(n),a*zw(r),s.size],i=s.color?[...s.color,1]:[0,0,0,0];return[...o,...i]}),[0,0,0,0,0,0,0,0]),pG=(e,s)=>{let n=(o,i,c)=>({type:o,value:typeof s[i]>"u"?c:s[i]}),r=e.getContext("webgl2")?"webgl2":e.getContext("webgl")?"webgl":"experimental-webgl",a=new Jo({canvas:e,contextType:r,context:{alpha:!0,stencil:!1,antialias:!0,depth:!1,preserveDrawingBuffer:!1,...s.context},settings:{[Uw]:s[Uw]||1,onSetup:o=>{let i=o.RGB,c=o.UNSIGNED_BYTE,l=o.TEXTURE_2D,d=o.createTexture();o.bindTexture(l,d),o.texImage2D(l,0,i,1,1,0,i,c,new Uint8Array([0,0,0,0]));let u=new Image;u.onload=()=>{o.bindTexture(l,d),o.texImage2D(l,0,i,i,c,u),o.generateMipmap(l);let p=o.getParameter(o.CURRENT_PROGRAM),h=o.getUniformLocation(p,"J");o.texParameteri(l,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(l,o.TEXTURE_MAG_FILTER,o.NEAREST),o.uniform1i(h,0)},u.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAACAAQAAAADMzoqnAAAAAXNSR0IArs4c6QAABA5JREFUeNrV179uHEUAx/Hf3JpbF+E2VASBsmVKTBcpKJs3SMEDcDwBiVJAAewYEBUivIHT0uUBIt0YCovKD0CRjUC4QfHYh8hYXu+P25vZ2Zm9c66gMd/GJ/tz82d3bk8GN4SrByYF2366FNTACIAkivVAAazQdnf3MvAlbNUQfOPAdQDvSAimMWhwy4I2g4SU+Kp04ISLpPBAKLxPyic3O/CCi+Y7rUJbiodcpDOFY7CgxCEXmdYD2EYK2s5lApOx5pEDDYCUwM1XdJUwBV11QQMg59kePSCaPAASQMEL2hwo6TJFgxpg+TgC2ymXPbuvc40awr3D1QCFfbH9kcoqAOkZozpQo0aqAGQRKCog/+tjkgbNFEtg2FffBvBGlSxHoAaAa1u6X4PBAwDiR8FFsrQgeUhfJTSALaB9jy5NCybJPn1SVFiWk7ywN+KzhH1aKAuydhGkbEF4lWohLXDXavlyFgHY7LBnLRdlAP6BS5Cc8RfVDXbkwN/oIvmY+6obbNeBP0JwTuMGu9gTzy1Q4RS/cWpfzszeYwd+CAFrtBW/Hur0gLbJGlD+/OjVwe/drfBxkbbg63dndEDfiEBlAd7ac0BPe1D6Jd8dfbLH+RI0OzseFB5s01/M+gMdAeluLOCAuaUA9Lezo/vSgXoCX9rtEiXnp7Q1W/CNyWcd8DXoS6jH/YZ5vAJEWY2dXFQe2TUgaFaNejCzJ98g6HnlVrsE58sDcYqg+9XY75fPqdoh/kRQWiXKg8MWlJQxUFMPjqnyujhFBE7UxIMjyszk0QwQlFsezImsyvUYYYVED2pk6m0Tg8T04Fwjk2kdAwSACqlM6gRRt3vQYAFGX0Ah7Ebx1H+MDRI5ui0QldH4j7FGcm90XdxD2Jg1AOEAVAKhEFXSn4cKUELurIAKwJ3MArypPscQaLhJFICJ0ohjDySAdH8AhDtCiTuMycH8CXzhH9jUACAO5uMhoAwA5i+T6WAKmmAqnLy80wxHqIPFYpqCwxGaYLt4Dyievg5kEoVEUAhs6pqKgFtDQYOuaXypaWKQfIuwwoGSZgfLsu/XAtI8cGN+h7Cc1A5oLOMhwlIPXuhu48AIvsSBkvtV9wsJRKCyYLfq5lTrQMFd1a262oqBck9K1V0YjQg0iEYYgpS1A9GlXQV5cykwm4A7BzVsxQqo7E+zCegO7Ma7yKgsuOcfKbMBwLC8wvVNYDsANYalEpOAa6zpWjTeMKGwEwC1CiQewJc5EKfgy7GmRAZA4vUVGwE2dPM/g0xuAInE/yG5aZ8ISxWGfYigUVbdyBElTHh2uCwGdfCkOLGgQVBh3Ewp+/QK4CDlR5Ws/Zf7yhCf8pH7vinWAvoVCQ6zz0NX5V/6GkAVV+2/5qsJ/gU8bsxpM8IeAQAAAABJRU5ErkJggg=="}}});return a.add("",{vertex:"attribute vec3 aPosition;uniform mat4 uProjectionMatrix;uniform mat4 uModelMatrix;uniform mat4 uViewMatrix;void main(){gl_Position=uProjectionMatrix*uModelMatrix*uViewMatrix*vec4(aPosition,1.);}",fragment:"precision highp float;uniform vec2 t,y;uniform vec3 R,S,z;uniform vec4 v[64*2];uniform float A,B,m,C,D,E,F,G,H,I;uniform sampler2D J;float K=1./m;mat3 L(float a,float b){float c=cos(a),d=cos(b),e=sin(a),f=sin(b);return mat3(d,f*e,-f*c,0.,c,e,f,d*-e,d*c);}vec3 w(vec3 c,out float x){c=c.xzy;float p=max(2.,floor(log2(2.236068*m*3.141593*(1.-c.z*c.z))*.72021));vec2 g=floor(pow(1.618034,p)/2.236068*vec2(1.,1.618034)+.5),d=fract((g+1.)*.618034)*6.283185-3.883222,e=-2.*g,f=vec2(atan(c.y,c.x),c.z-1.),q=floor(vec2(e.y*f.x-d.y*(f.y*m+1.),-e.x*f.x+d.x*(f.y*m+1.))/(d.x*e.y-e.x*d.y));float n=3.141593;vec3 r;for(float h=0.;h<4.;h+=1.){vec2 s=vec2(mod(h,2.),floor(h*.5));float j=dot(g,q+s);if(j>m)continue;float a=j,b=0.;if(a>=524288.)a-=524288.,b+=.803894;if(a>=262144.)a-=262144.,b+=.901947;if(a>=131072.)a-=131072.,b+=.950973;if(a>=65536.)a-=65536.,b+=.475487;if(a>=32768.)a-=32768.,b+=.737743;if(a>=16384.)a-=16384.,b+=.868872;if(a>=8192.)a-=8192.,b+=.934436;if(a>=4096.)a-=4096.,b+=.467218;if(a>=2048.)a-=2048.,b+=.733609;if(a>=1024.)a-=1024.,b+=.866804;if(a>=512.)a-=512.,b+=.433402;if(a>=256.)a-=256.,b+=.216701;if(a>=128.)a-=128.,b+=.108351;if(a>=64.)a-=64.,b+=.554175;if(a>=32.)a-=32.,b+=.777088;if(a>=16.)a-=16.,b+=.888544;if(a>=8.)a-=8.,b+=.944272;if(a>=4.)a-=4.,b+=.472136;if(a>=2.)a-=2.,b+=.236068;if(a>=1.)a-=1.,b+=.618034;float k=fract(b)*6.283185,i=1.-2.*j*K,l=sqrt(1.-i*i);vec3 o=vec3(cos(k)*l,sin(k)*l,i);float u=length(c-o);if(u<n)n=u,r=o;}x=n;return r.xzy;}void main(){vec2 b=(gl_FragCoord.xy/t*2.-1.)/C-y*vec2(1.,-1.)/t;b.x*=t.x/t.y;float c=dot(b,b);vec4 x=vec4(0.);float n=0.;if(c<=.64){for(int g=0;g<2;g++){vec4 e=vec4(0.);float a;vec3 u=vec3(0.,0.,1.),h=normalize(vec3(b,sqrt(.64-c)));h.z*=g>0?-1.:1.,u.z*=g>0?-1.:1.;vec3 i=h*L(B,A),j=w(i,a);float o=asin(j.y),k=acos(-j.x/cos(o));k=j.z<0.?-k:k;float M=max(texture2D(J,vec2(k*.5/3.141593,-(o/3.141593+.5))).x,I),N=smoothstep(8e-3,0.,a),l=dot(h,u),p=pow(l,F)*E,q=M*N*p,T=mix((1.-q)*pow(l,.4),q,G)+.1;e+=vec4(R*T,1.);int U=int(D);float V=0.;for(int d=0;d<64;d++){if(d>=U)break;vec4 r=v[d*2],O=v[d*2+1];vec3 s=r.xyz,P=s-i;float f=r.w;if(dot(P,P)>f*f*4.)continue;vec3 W=w(s,a);a=length(W-i);if(a<f)V+=smoothstep(f*.5,0.,a),e.xyz=O.w>.5?mix(e.xyz,O.xyz,smoothstep(f*.5,0.,a)*p):mix(e.xyz,S,smoothstep(f*.5,0.,a)*p);}e.xyz+=pow(1.-l,4.)*z,x+=e*(1.+(g>0?-H:H))/2.;}n=pow(dot(normalize(vec3(-b,sqrt(1.-c))),vec3(0.,0.,1.)),4.)*smoothstep(0.,1.,.2/(c-.64));}else{float Q=sqrt(.2/(c-.64));n=smoothstep(.5,1.,Q/(Q+1.));}gl_FragColor=x+vec4(n*z,n);}",uniforms:{t:{type:"vec2",value:[s.width,s.height]},A:n("float",xP),B:n("float",vP),m:n("float",jP),E:n("float",yP),I:n("float",AP),R:n("vec3",wP),S:n("vec3",SP),F:n("float",IP),z:n("vec3",CP),G:n("float",kP),v:{type:"vec4",value:Hw(s[nd])},D:{type:"float",value:s[nd].length},y:n("vec2",TP,[0,0]),C:n("float",PP,1),H:n("float",NP,1)},mode:4,geometry:{vertices:[{x:-100,y:100,z:0},{x:-100,y:-100,z:0},{x:100,y:100,z:0},{x:100,y:-100,z:0},{x:-100,y:-100,z:0},{x:100,y:100,z:0}]},onRender:({uniforms:o})=>{let i={};if(s.onRender){i=s.onRender(i)||i;for(let c in Fw)i[c]!==void 0&&(o[Fw[c]].value=i[c]);i[nd]!==void 0&&(o.v.value=Hw(i[nd]),o.D.value=i[nd].length),i.width&&i.height&&(o.t.value=[i.width,i.height])}}}),a};const mG="_root_7dhda_1",gG="_root_hiding_7dhda_9",fG="_wrapper_7dhda_13",_G="_canvas_7dhda_28",bG="_regionHint_7dhda_33",rd={root:mG,root_hiding:gG,wrapper:fG,canvas:_G,regionHint:bG},xG={dark:0,diffuse:0,mapBrightness:12,mapBaseBrightness:0,opacity:.95,baseColor:[.9490196078431372,1,.9803921568627451],glowColor:[1,1,1],markerColor:[.2784313725490196,.9372549019607843,.5764705882352941]},vG={dark:.8,diffuse:2.5,mapBrightness:3,mapBaseBrightness:.1,opacity:1,baseColor:[.3843137254901961,.3843137254901961,.3843137254901961],glowColor:[.09803921568627451,.09803921568627451,.09803921568627451],markerColor:[.2784313725490196,.9372549019607843,.5764705882352941]};function jG({size:e,pixelRatio:s,position:n,marker:r,theme:a,onRender:o}){return{...a==="light"?xG:vG,devicePixelRatio:s,width:e*s,height:e*s,phi:n.phi,theta:n.theta,scale:1.115,mapSamples:39e3,offset:[0,0],markers:r?[{location:[r.position.lat,r.position.lng],size:.04}]:[],onRender:o}}const wf={regionTitle:"Region",descriptionTitle:"Your free plan includes:",descriptionPoints:["0.5 GB storage","Scales to zero when inactive","Autoscaling up to 2 CU","10 branches per project"]},yG="_wrapper_lygj5_1",wG="_wrapper_appearing_lygj5_19",SG="_iconColumn_lygj5_24",CG="_icon_lygj5_24",IG="_contentColumn_lygj5_32",kG="_regionBlock_lygj5_38",TG="_blockTitle_lygj5_44",PG="_regionName_lygj5_51",NG="_specBlock_lygj5_57",AG="_featureList_lygj5_63",_n={wrapper:yG,wrapper_appearing:wG,iconColumn:SG,icon:CG,contentColumn:IG,regionBlock:kG,blockTitle:TG,regionName:PG,specBlock:NG,featureList:AG},EG=250,OG=({className:e,regionName:s})=>{const[n,r]=m.useState(s),[a,o]=m.useState("HIDING"),{isFreeSubscription:i}=fe();return m.useEffect(()=>{o("HIDING");const c=window.setTimeout(()=>{r(s),o("APPEARING")},EG);return()=>{window.clearTimeout(c)}},[s]),t.jsxs("div",{className:V(e,_n.wrapper,{[_n.wrapper_appearing]:a==="APPEARING"}),children:[t.jsx("div",{className:_n.iconColumn,children:t.jsx(q,{className:_n.icon,name:"compute_time",size:24})}),t.jsxs("div",{className:_n.contentColumn,children:[t.jsxs("div",{className:_n.regionBlock,children:[t.jsx("h2",{className:_n.blockTitle,children:wf.regionTitle}),t.jsx("div",{className:_n.regionName,children:n})]}),i&&t.jsxs("div",{className:_n.specBlock,children:[t.jsx("h2",{className:_n.blockTitle,children:wf.descriptionTitle}),t.jsx("ul",{className:_n.featureList,children:wf.descriptionPoints.map((c,l)=>t.jsx("li",{children:c},l))})]})]})]})};var Wp=(e=>(e.SHOW="SHOW",e.HIDING="HIDING",e.HIDE="HIDE",e))(Wp||{});function EP({wrapperRef:e,maxSize:s,adjustHeight:n}){const[r,a]=m.useState("HIDE"),[o,i]=m.useState(0);function c(p){return Math.min(s,p.clientWidth)}function l({clientWidth:p,clientHeight:h}){return Math.min(p,h)}const d=ur(()=>{if(e.current){a("SHOW");const p=Math.min(s,n?l(e.current):c(e.current));i(p)}}),u=m.useMemo(()=>Ux(d,500,{leading:!1,trailing:!0}),[d]);return m.useLayoutEffect(()=>{d()},[d]),_P(()=>{if(!e.current)return;l(e.current)!==o&&(a("HIDING"),u())}),{globeState:r,size:o}}function LG({lat:e,lng:s}){return{phi:Math.PI-(s*Math.PI/180-Math.PI/2),theta:e*Math.PI/180}}const bm=700,$G=.008,Vw=5e-4,$h=.08,Ww={phi:4.26,theta:.39},RG=({marker:e,globeClassName:s,adjustHeight:n=!1})=>{const r=m.useRef(null),a=m.useMemo(()=>window.devicePixelRatio??1,[]),o=m.useRef(void 0),i=m.useRef(null),{colorScheme:c}=ro(),{size:l,globeState:d}=EP({wrapperRef:i,maxSize:bm,adjustHeight:n}),[u,p]=m.useState(e?"MARKER":"SPINNING"),h=m.useRef(!0),g=m.useRef(Ww),f=m.useRef(Ww),_=m.useRef(void 0),b=ur(()=>{h.current=!1;const x=performance.now(),v=_.current;_.current=x;const{current:j}=f;let y=0;if(v&&(y=Math.max(0,x-v)),y===0)return j;const w=y*.0625,S=Math.PI*2,T=o.current,E=g.current;if(u==="SPINNING")j.phi+=$G*w;else{const H=(E.phi-j.phi+S)%S,R=(j.phi-E.phi+S)%S;let $;H<R?$=H*$h:$=-R*$h;const K=j.theta*(1-$h)+E.theta*$h-j.theta;!h.current&&Math.abs($)<Vw&&Math.abs(K)<Vw&&T.toggle(!1),j.phi+=$*w,j.theta+=K*w}return j});return m.useEffect(()=>{let x=window.setTimeout(()=>{try{x=void 0,h.current=!0,_.current=void 0,o.current=pG(r.current,jG({size:l,position:f.current,pixelRatio:a,marker:e,theme:c,onRender:b}))}catch(v){const j=Zt(v);Ct(j)}},0);return()=>{x&&window.clearTimeout(x),o.current&&(o.current.destroy(),o.current=void 0)}},[c,e,l,a,b]),m.useEffect(()=>{var x;if(e){const v=LG(e.position);g.current={phi:v.phi,theta:v.theta-.22},p("MARKER")}else p("SPINNING");_.current=void 0,(x=o.current)==null||x.toggle(!0)},[e]),t.jsx("div",{ref:i,className:V(rd.root,{[rd.root_hiding]:d===Wp.HIDING}),children:t.jsx("div",{className:V(s,rd.wrapper),style:{"--local-globe-size":`${l}px`,"--local-max-globe-size":`${bm}px`},children:(d===Wp.SHOW||d===Wp.HIDING)&&t.jsxs(t.Fragment,{children:[t.jsx("canvas",{ref:r,className:rd.canvas,width:l*a,height:l*a,style:{width:l,height:l}}),e&&t.jsx(OG,{className:rd.regionHint,regionName:e.label})]})})})},BG=Object.freeze(Object.defineProperty({__proto__:null,Globe:RG,MAX_GLOBE_SIZE:bm},Symbol.toStringTag,{value:"Module"})),MG=()=>{const e=m.useRef(null),{size:s}=EP({wrapperRef:e,maxSize:bm,adjustHeight:!1});return t.jsx("div",{ref:e,style:{height:s}})},DG="_root_wmqqq_1",UG={root:DG},FG=m.lazy(async()=>({default:(await fr(()=>Promise.resolve().then(()=>BG),void 0)).Globe})),OP=({globeClassName:e,adjustHeight:s})=>{const{watch:n}=kt(),r=EB(),a=n("platformId"),o=n("regionId"),i=m.useMemo(()=>r.find(d=>d.id===a),[r,a]),c=m.useMemo(()=>i&&i.regions.find(d=>d.id===o),[i,o]),l=m.useMemo(()=>c&&c.geo_coordinates?{id:c.id,label:c.name,position:c.geo_coordinates}:void 0,[c]);return t.jsx("div",{className:UG.root,children:t.jsx(m.Suspense,{fallback:t.jsx(MG,{}),children:t.jsx(FG,{marker:l,globeClassName:e,adjustHeight:s})})})},zG="_content_k7ay8_1",qG="_globe_k7ay8_8",Gw={content:zG,globe:qG},HG=1024,VG=()=>window.innerWidth>=HG,WG=({isOpen:e,onRequestClose:s,settings:n,onSuccess:r,preferredDefaults:a,createdBy:o})=>{const{trackUiInteraction:i}=k(),c=nt(),l=m.useRef(null),d=bP({rootRef:l,shouldShowGlobe:VG}),{onProjectCreate:u}=Y1(),{setPassword:p}=Sl(),h=m.useCallback(()=>{i("project_form_dismissed"),s==null||s()},[i,s]),g=m.useCallback(_=>{u(_),c.push(G(C.ProjectsItem,{projectId:_.project.id}))},[c,u]),f=m.useCallback(_=>{if(p(_.project.id,_.roles),s==null||s(),r){r(_);return}g(_)},[g,s,r,p]);return t.jsx(Fx,{isOpen:e,onRequestClose:h,title:"Create project",width:1318,height:720,footer:t.jsxs(t.Fragment,{children:[t.jsx(A,{type:"submit",form:"create_project_form_id",onClick:()=>{i("project_form_submitted")},size:"l",children:"Create"}),t.jsx(dn,{appearance:"secondary",size:"l",children:"Cancel"})]}),children:t.jsxs(OB,{id:"create_project_form_id",settings:n,onSuccess:f,preferredDefaults:a,formBodyClassName:Gw.content,createdBy:o,children:[t.jsx(xI,{}),d&&t.jsx(OP,{globeClassName:Gw.globe,adjustHeight:!0})]})})},Rh={vercelOrg:"To create a new project, use the Neon Postgres integration in Vercel",projectCreationForbidden:"Sorry, you can't create projects for now",projectCreationAvailable:e=>`You can create ${e} more ${Ms("project",e)}`,limitReached:"You can not create any more projects for now"},mv=({children:e,settings:s,onSuccess:n,preferredDefaults:r,...a})=>{const{trackUiInteraction:o}=k(),{flags:{projectCreationForbidden:i}}=D2(),c=U2(),{data:l}=qs(),{max_projects:d}=hx(),u=fe(),{isVercelOrg:p}=ae(),h=u.isFreeSubscription||u.subscriptionType==="launch",g=!n,{isModalOpen:f,openModal:_,closeModal:b}=it(st.CreateProject,g),[x,v]=m.useState(!1),j=(l==null?void 0:l.length)||0,y=d!==-1&&j>=d,w=m.useMemo(()=>{if(p)return Rh.vercelOrg;if(i)return Rh.projectCreationForbidden;if(os(d)){if(!y){const S=d-j;return Rh.projectCreationAvailable(S)}return Rh.limitReached}},[y,j,i,d,p]);return t.jsxs(t.Fragment,{children:[t.jsx(WG,{isOpen:f,onRequestClose:b,settings:s,preferredDefaults:r,onSuccess:n}),h&&t.jsx(Pt,{type:dt.ProjectsLimitReached,isOpen:x,onRequestClose:()=>v(!1)}),h&&!i&&y&&!u.isMarketplaceAccount?t.jsx(A,{...a,"data-qa":"project_create_button",onClick:()=>{o("create_project_button_limited_clicked"),v(!0)},children:e||"Create project"}):t.jsx(ne,{content:w,disabled:!w,children:t.jsx("div",{style:{display:"inline-block"},children:t.jsx(A,{...a,disabled:c||i||p||a.disabled,"data-qa":"project_create_button",onClick:()=>{o("create_project_button_clicked"),_()},children:e||"New project"})})})]})},LP=({project:e,isUserProject:s,onProjectTransfer:n})=>{const{trackUiInteraction:r}=k(),a=m.useCallback(()=>{r("projects_list_item_menu_opened")},[r]),{data:o}=Un(),i=(o==null?void 0:o.length)??0,c=!!(e!=null&&e.org_id&&(o!=null&&o.some(h=>h.id===e.org_id))),d=i>(c?1:0),u=(s||c)&&d,p=m.useMemo(()=>[{items:ot([{icon:"overview",label:"Dashboard",href:G(C.ProjectsItem,{projectId:e.id}),onClick(){r("projects_list_item_menu_dashboard_clicked")},"data-qa":"project-dashboard-link"},{icon:"editor",label:"SQL Editor",href:G(ue.ProjectsItemQuery,{projectId:e.id}),onClick(){r("projects_list_item_menu_sql_editor_clicked")},"data-qa":"project-sql-editor-link"},u&&{icon:"connect_with",label:"Transfer project",onClick(){r("projects_list_item_menu_transfer_project_clicked"),n==null||n()},"data-qa":"project-transfer-link"},{icon:"settings",label:"Settings",href:G(C.ProjectsItemSettings,{projectId:e.id}),onClick(){r("projects_list_item_menu_settings_clicked")},"data-qa":"project-settings-link"}])}],[e,r,u,n]);return t.jsx(Jt,{sections:p,placement:"bottom right",children:t.jsx(fs,{"data-qa":"project-actions","aria-label":`Actions with project ${e.name}`,onClick:a})})},ws={normal:"",warning:"",error:"",unlimited:""},Kw={storage:{normal:e=>`Your storage usage is well within the ${e} GB limit. You've got space to grow.`,warning:e=>`You're nearing your storage limit of ${e} GB. Free up space or upgrade to avoid issues.`,error:"Storage limit reached. Further database operations will fail unless you free up space or upgrade.",unlimited:""},compute:{normal:"Your compute usage is within the limits of your plan.",warning:"You're approaching your compute usage limit. Consider upgrading to avoid suspension.",error:"Compute limit exceeded. Compute operations are suspended until your next billing cycle or upgrade.",unlimited:"24/7 availability at the default 0.25 vCPU with 1 GB RAM"},branchCompute:{normal:e=>`Your branch computes are within the allowed ${e} hours per month across all branches.`,warning:e=>`You're nearing the ${e}-hour limit for branch computes. Consider optimizing or upgrading your plan.`,error:"Branch compute limit reached. Further operations on non-default branches will be paused until the next billing cycle or upgrade.",unlimited:""},dataTransfer:{normal:e=>`Network transfer is within your plan's ${e} GB-month limit.`,warning:e=>`You're close to reaching your network transfer limit of ${e} GB-month. Monitor usage to avoid suspension.`,error:"Network transfer limit exceeded. Compute is suspended until the next billing cycle or upgrade.",unlimited:""},branches:{normal:e=>`You're within the allowed number of ${e} branches for your plan.`,warning:e=>`You're nearing the maximum number of ${e} branches. Upgrade for more.`,error:"Branch limit reached. Remove unused branches or upgrade your plan.",unlimited:""},projects:{normal:e=>`You're within the allowed number of ${e} projects for your plan.`,warning:"You're nearing the maximum number of projects. Upgrade for more.",error:"Projects limit reached. Remove unused projects or upgrade your plan.",unlimited:""},publicDataTransfer:ws,privateDataTransfer:ws},Ur={storage:{normal:e=>`Your storage usage is well within your ${e} GB allowance.`,warning:e=>`You're nearing your storage allowance of ${e} GB. Extra charges will apply if you go over.`,error:"You've reached your storage allowance. You'll be charged for any extra storage you add.",unlimited:""},compute:{normal:"Your compute usage is within your plan's allowance.",warning:"You're almost at your compute allowance. Extra charges will apply if you go over.",error:"You've reached your compute allowance. You'll be charged for any additional compute time.",unlimited:""},branches:{normal:e=>`You're within the allowed number of ${e} branches for your project.`,warning:e=>`You're nearing the maximum number of ${e} branches. Remove unused branches or upgrade for more.`,error:"Branch limit reached. Remove unused branches or upgrade your plan.",unlimited:""},projects:{normal:e=>`You're within the allowed number of ${e} projects for your plan.`,warning:e=>`You're nearing the maximum number of ${e} projects. Remove unused projects to stay within your limit.`,error:"You've reached your project limit. Remove unused projects to continue.",unlimited:""},branchCompute:ws,dataTransfer:ws,publicDataTransfer:ws,privateDataTransfer:ws},ad={...Ur.projects,warning:e=>`You're nearing the maximum number of ${e} projects. Extra charges will apply if you go over.`,error:"You've reached your project limit. Extra charges will apply for any new projects you create.",unlimited:""},GG={free_v2:Kw,free_v3:Kw,launch_v3:Ur,launch:Ur,scale:{...Ur,projects:ad},business:{...Ur,projects:ad},scale_v3:{...Ur,projects:ad},aws_marketplace:{...Ur,projects:ad},direct_sales:{...Ur,projects:ad},vercel_pg_legacy:{...Ur},UNKNOWN:{branchCompute:ws,storage:ws,compute:ws,dataTransfer:ws,branches:ws,projects:ws,publicDataTransfer:ws,privateDataTransfer:ws}},il={titleForProjectLevel:"Usage since",titleForAccountLevel:"Account Usage",upgradeButtonContent:"Upgrade",extendLimitsButtonContent:"Upgrade to extend limits",toNow:"to now",divider:"•"},KG=(e,s,n)=>GG[n][e][s],QG=(e,s)=>os(s)?e>=s?"error":e>=s*.8?"warning":"normal":"unlimited",YG=({usageType:e,usage:s,allowance:n,subscriptionType:r})=>{const a=QG(s,n);return{usageState:a,tooltip:KG(e,a,r)}},Qw=({converterFn:e,value:s})=>s===void 0?"-":(e?e(s):s.toString()).split(" ")[0],JG=({converterFn:e,value:s})=>s===void 0?"":(e?e(s):s.toString()).split(" ")[1]||"",ZG=(e,s)=>e&&!os(s),as=({usageType:e,usage:s,allowance:n,isFreeSubscription:r,converterFn:a,showAllowance:o,isPaidSubscription:i,subscriptionType:c})=>{const l=Yc(s)?s.value:s,d=JG({converterFn:a,value:l}),{usageState:u,tooltip:p}=YG({usageType:e,usage:l,allowance:n,subscriptionType:c}),h=n===-1?"∞":Qw({converterFn:a,value:n}),g=typeof p=="function"?p(h):p;let f=Qw({converterFn:a,value:l});return Yc(s)&&s.isMoreThanFetched&&(f=`${f}+`),i?{usageType:e,usage:f,allowance:h,usageState:"normal",tooltip:g,isUnlimited:!1,showAllowance:o,unit:d}:{usageType:e,usage:f,allowance:h,usageState:u,tooltip:g,isUnlimited:ZG(r,n),converterFn:a,showAllowance:o,unit:d}},$P=e=>e.map(s=>({...s,tooltip:"",usageState:"normal"})),XG=()=>{const e=le("growth_remove_non_primary_compute_limit"),{isFreeSubscription:s,isPaidSubscription:n,subscriptionType:r}=fe(),{usage:a,isLoading:o}=Ox(),{startPeriod:i}=Vm(),c=Lx();return{items:m.useMemo(()=>[as({isFreeSubscription:s,usageType:"storage",usage:a.storage,allowance:c.storage,converterFn:Ds,showAllowance:s,isPaidSubscription:n,subscriptionType:r}),as({isFreeSubscription:s,usageType:"compute",usage:a.compute,allowance:c.compute,converterFn:Ya,showAllowance:s,isPaidSubscription:n,subscriptionType:r}),!e&&s&&as({isFreeSubscription:s,usageType:"branchCompute",usage:a.nonPrimaryCompute,allowance:c.nonPrimaryCompute,converterFn:Ya,showAllowance:!0,isPaidSubscription:n,subscriptionType:r}),as({isFreeSubscription:s,usageType:"dataTransfer",usage:a.dataTransfer,allowance:c.dataTransfer,converterFn:Ds,showAllowance:s,isPaidSubscription:n,subscriptionType:r}),as({isFreeSubscription:s,usageType:"projects",usage:a.projects,allowance:c.projects,showAllowance:!0,isPaidSubscription:n,subscriptionType:r})].filter(Boolean),[s,a.storage,a.compute,a.nonPrimaryCompute,a.dataTransfer,a.projects,c.storage,c.compute,c.nonPrimaryCompute,c.dataTransfer,c.projects,n,r,e]),isLoading:o,startPeriod:mr(i,ke.Date)}},eK="_statisticValues_o7viv_1",tK="_statisticIcon_o7viv_7",sK="_color_warning_o7viv_11",nK="_color_error_o7viv_15",ac={statisticValues:eK,statisticIcon:tK,color_warning:sK,color_error:nK},rK=({usageState:e,usage:s,showAllowance:n,allowance:r,unit:a})=>t.jsxs("span",{className:ac.statisticValues,"data-qa":`usage-card-usage-${e}`,children:[t.jsx(J,{level:2,className:V({[ac.color_error]:e==="error",[ac.color_warning]:e==="warning"}),children:s}),n&&t.jsxs(t.Fragment,{children:[t.jsx(P,{children:"/"}),t.jsx(P,{"data-qa":"usage-card-allowance",children:r})]}),t.jsx(P,{children:a}),e!=="normal"&&e!=="unlimited"&&t.jsx(q,{"data-qa":`usage-card-icon-${e}`,className:V(ac.statisticIcon,{[ac.color_error]:e==="error",[ac.color_warning]:e==="warning"}),name:"warning",size:12})]}),aK={storage:"Storage",compute:"Compute",branchCompute:"Branch compute",dataTransfer:"Network transfer",publicDataTransfer:"Public transfer",privateDataTransfer:"Private transfer",branches:"Branches",projects:"Projects"},oK={unlimited:"Unlimited"},iK="_root_1x3wy_1",cK="_statisticTitle_1x3wy_13",lK="_statisticValues_1x3wy_18",Bh={root:iK,statisticTitle:cK,statisticValues:lK},dK=({data:e,isLoading:s=!0})=>s||!e?t.jsx("div",{className:Bh.root,children:t.jsx(D,{"data-qa":"usage-card-loading",width:"100%",height:30})}):t.jsx(ne,{content:e.tooltip,maxWidth:200,children:t.jsxs("div",{className:Bh.root,"data-qa":"usage-card",children:[t.jsx(J,{level:6,className:Bh.statisticTitle,children:aK[e.usageType]}),e.isUnlimited?t.jsx(J,{level:5,className:Bh.statisticValues,children:oK.unlimited}):t.jsx(rK,{...e})]})}),uK="_root_1uexv_1",hK={root:uK},pK=()=>t.jsxs(P,{size:"s",className:hK.root,children:["Metrics may be delayed up to one hour."," ",t.jsx(Ke,{href:F2,openInNewTab:!0,children:"Learn more here"}),"."]}),mK="_cards_5erur_1",gK={cards:mK},fK=({setUpgradePopupOpened:e,setEnterpriseTrialModalOpened:s,upgradePopupOpened:n,enterpriseTrialModalOpened:r})=>{const a=fe(),{trackUiInteraction:o}=k(),i=m.useMemo(()=>a.subscriptionType==="scale",[a.subscriptionType]),c=m.useMemo(()=>!i&&a.subscriptionType!=="business"&&a.subscriptionType!=="scale_v3",[i,a.subscriptionType]);return t.jsxs(t.Fragment,{children:[t.jsx(Pt,{type:dt.Default,isOpen:n,onRequestClose:()=>e(!1)}),t.jsx(Zk,{isOpen:r,onRequestClose:()=>s(!1)}),t.jsx(M,{onClick:()=>{o("usage_widget_upgrade_clicked"),i||c?e(!0):s(!0)},children:c?il.upgradeButtonContent:il.extendLimitsButtonContent})]})},_K=e=>{const s=fe(),[n,r]=m.useState(!1),[a,o]=m.useState(!1),i=m.useMemo(()=>e.type==="project",[e.type]);if(!e.showUpgrade)return null;const c=!i&&t.jsxs("span",{children:[e.startPeriod," ",il.toNow]}),l=s.isFreeSubscription&&t.jsx(fK,{setUpgradePopupOpened:r,setEnterpriseTrialModalOpened:o,upgradePopupOpened:n,enterpriseTrialModalOpened:a});return t.jsxs("div",{children:[c,c&&l&&t.jsx("span",{children:` ${il.divider} `}),l]})},gv=({data:{items:e,isLoading:s,startPeriod:n},showUpgrade:r,type:a})=>{const{isMarketplaceAccount:o}=fe(),i=m.useMemo(()=>a==="project"?`${il.titleForProjectLevel} ${n}`:il.titleForAccountLevel,[n,a]);return t.jsxs(Ti,{title:i,links:!o&&t.jsx(_K,{type:a,startPeriod:n,showUpgrade:r}),children:[t.jsx("div",{className:gK.cards,children:e.map(c=>t.jsx(dK,{data:c,isLoading:s},c.usageType))}),t.jsx(pK,{})]})},bK=({showUpgrade:e})=>{const s=XG();return t.jsx(gv,{data:s,showUpgrade:e,type:"account"})},xK={migrateToNeon:"Import data"},vK="_steps_18n6i_1",jK="_stepHeader_18n6i_30",yK="_stepCompletedIcon_18n6i_36",wK="_stepCounter_18n6i_40",SK="_stepDescription_18n6i_57",ou={steps:vK,stepHeader:jK,stepCompletedIcon:yK,stepCounter:wK,stepDescription:SK},RP=({children:e})=>t.jsx("div",{className:ou.steps,children:e}),CK=({title:e,isStepCompleted:s})=>t.jsxs("div",{className:ou.stepHeader,children:[s?t.jsx(q,{name:"check_circle_inverted2",className:ou.stepCompletedIcon,size:24}):t.jsx("div",{className:ou.stepCounter}),t.jsx(J,{level:4,children:e})]}),Mb=({title:e,description:s,children:n,isStepCompleted:r,isStepCollapsed:a,onStepCollapse:o})=>t.jsxs(Kk,{header:t.jsx(CK,{title:e,isStepCompleted:r}),isCollapsed:a,onCollapseStateChange:o,children:[s?t.jsx(P,{as:"p",appearance:"secondary",className:ou.stepDescription,children:s}):null,n]}),IK=["run_checks","create_project","move_data","actual_import"],BP=m.createContext(null),Al=z2(BP),xm=()=>{const{currentStepIdx:e,setCurrentStepIdx:s,setStepCollapsed:n,mode:r}=Al(),a=m.useMemo(()=>IK.filter(l=>r==="auto"?l!=="move_data":l!=="actual_import"),[r]),o=m.useCallback(l=>{for(let d=0;d<a.length;d+=1)if(l===a[d])return d<=e;return!1},[e,a]),i=m.useCallback(l=>{for(let d=0;d<a.length;d+=1)if(l===a[d])return d<e;return!1},[e,a]),c=m.useCallback((l,d=!1)=>{d&&n(a[e],!0);const u=Math.max(a.indexOf(l),e);s(u),n(l,!1)},[e,s,n,a]);return{isStepEnabled:o,continueTo:c,isStepCompleted:i}},kK=({project:e,children:s,mode:n})=>{const[r,a]=m.useState(""),[o,i]=m.useState(""),[c,l]=m.useState(),[d,u]=m.useState(0),[p,h]=m.useState(new Set(["create_project","move_data","actual_import"])),[g,f]=m.useState(e??null),[_,b]=m.useState(null),x=m.useCallback(y=>p.has(y),[p]),v=m.useCallback((y,w)=>{h(S=>w?new Set([...S,y]):new Set([...S].filter(T=>T!==y)))},[h]),j=m.useMemo(()=>({sourceDatabaseUrl:r,setSourceDatabaseUrl:a,targetDatabaseUrl:o,setTargetDatabaseUrl:i,newProjectConfiguration:c,setNewProjectConfiguration:l,currentStepIdx:d,setCurrentStepIdx:u,isStepCollapsed:x,setStepCollapsed:v,createdProject:g,setCreatedProject:f,createdBranch:_,setCreatedBranch:b,mode:n}),[r,o,c,d,x,v,g,_,n]);return t.jsx(BP.Provider,{value:j,children:s})},TK=({id:e,title:s,description:n,content:r})=>{const{isStepCollapsed:a,setStepCollapsed:o}=Al(),{isStepCompleted:i}=xm(),{trackUiInteraction:c}=k(),l=m.useCallback(d=>{o(e,d),c(d?"migration_assistant_step_collapsed":"migration_assistant_step_expanded",{step:e})},[e,o,c]);return t.jsx(Mb,{title:s,isStepCompleted:i(e),isStepCollapsed:a(e),description:n,onStepCollapse:l,children:r})},PK=({steps:e})=>t.jsx(RP,{children:e.map(s=>t.jsx(TK,{...s},s.id))}),Mh={title:"Import Data Assistant",subtitle:"Quickly import your existing Postgres database to Neon. Follow these steps to check compatibility, and import your data.",learnMore:"Learn more"},NK="_content_1d2xh_1",AK="_title_1d2xh_8",Yw={content:NK,title:AK},iu={stepTitle:"Start import process",startImport:"Start import",description:"Click the button below to start the import process.",importLockedTooltip:"Project is being created, please wait.",importWarning:`This data import feature is currently in beta and may not be fully stable.
    Users should expect that some imports may fail.
    We're actively improving the stability and will update as the feature matures.`},EK="_tooltipButtonWrapper_1t02y_1",OK="_importWarning_1t02y_5",Jw={tooltipButtonWrapper:EK,importWarning:OK},LK=()=>{const{sourceDatabaseUrl:e,createdProject:s}=Al(),[n,r]=m.useState(!1),a=nt(),{trackUiInteraction:o}=k(),i=m.useCallback(async()=>{if(!s)throw new Error("Project not created");r(!0);try{o("migration_assistant_actual_import_start_clicked");const{data:{branch:d}}=await W.createProjectBranchImport(s.id,{import_options:{source_connection_string:e},branch_create:{branch:{name:"import"},endpoints:[{type:"read_write"}]}});a.push(G(C.ProjectsItemBranchesItem,{projectId:s.id,branchId:d.id}))}catch(d){Y(d)}finally{r(!1)}},[s,a,e,o]),{data:c}=Wm({projectId:s==null?void 0:s.id}),l=m.useMemo(()=>{if(!c)return!0;for(const d of c.pages)for(const u of d.operations)if(u.status==="running"||u.status==="scheduling")return!0;return!1},[c]);return t.jsxs("div",{children:[t.jsx(X,{className:Jw.importWarning,children:iu.importWarning}),t.jsx(ne,{content:l?iu.importLockedTooltip:void 0,placement:"top",zIndex:100,children:t.jsx("div",{className:Jw.tooltipButtonWrapper,children:t.jsx(A,{appearance:"primary",loading:n,onClick:i,disabled:n||!s||!e||l,children:iu.startImport})})})]})},$K={id:"actual_import",title:iu.stepTitle,description:iu.description,content:t.jsx(LK,{})},Db={stepTitle:"Create a Neon project",createProjectButton:"Create new project",description:"Create a project to host your database. We've tried to match defaults to your source database (region, Postgres version)."},RK="_container_4s2wx_1",BK={container:RK},MK=()=>{const{setTargetDatabaseUrl:e,setCreatedProject:s,setCreatedBranch:n,newProjectConfiguration:r}=Al(),{isStepEnabled:a,continueTo:o,isStepCompleted:i}=xm(),{trackUiInteraction:c}=k(),l=r!=null&&r.region?`aws-${r.region}`:"aws-us-east-2",d={platformId:"aws",databaseVersion:r==null?void 0:r.databaseVersion,regionId:l},u=m.useCallback(p=>{c("migration_assistant_on_new_project_created",{project_id:p.project.id}),s(p.project),n(p.branch),p.connection_uris.length>0&&(e(p.connection_uris[0].connection_uri),o("actual_import"))},[o,n,s,e,c]);return t.jsx("div",{className:BK.container,children:t.jsx(mv,{disabled:!a("create_project")||i("create_project"),preferredDefaults:d,onSuccess:u,children:Db.createProjectButton})})},MP={id:"create_project",title:Db.stepTitle,description:Db.description,content:t.jsx(MK,{})},Vr={stepTitle:"Import data to Neon",description:"Use the commands below to import your database data. First, download your data using pg_dump. Then, upload it to Neon with pg_restore.",pgdumpMessage:"Download a copy of your database",pgdumpInstructions:e=>`pg_dump --no-owner --no-privileges --no-publications --no-subscriptions --no-tablespaces -Fc -v -d "${e}" -f database.bak`,pgrestoreMessage:"Upload the database to Neon",pgrestoreInstructions:e=>`pg_restore -v -d "${e}" database.bak`,monitorProgressMessage:"Monitor the operations progress in your terminal.",allDone:"All done?",goToProject:"Go to project"},DK="_container_1u5zb_1",UK="_group_1u5zb_7",FK="_hint_1u5zb_13",zK="_goToProjectButton_1u5zb_20",oc={container:DK,group:UK,hint:FK,goToProjectButton:zK},qK={databaseUrlPlaceholder:"<postgres connection string>"},Zw=e=>e.length>0?e:qK.databaseUrlPlaceholder,HK=()=>{const{sourceDatabaseUrl:e,targetDatabaseUrl:s,createdProject:n}=Al(),r=nt(),{trackUiInteraction:a}=k(),o=m.useCallback(()=>{if(!n)throw new Error("Project should be created at this point");a("migration_assistant_go_to_project_clicked"),r.push(G(C.ProjectsItem,{projectId:n.id}))},[r,n,a]);return t.jsxs("div",{className:oc.container,children:[t.jsxs("div",{className:oc.group,children:[t.jsx(P,{as:"p",appearance:"secondary",children:Vr.pgdumpMessage}),t.jsx(vi,{mode:"text",copy:{onCopy:()=>a("migration_assistant_copy_pgdump_clicked")},children:Vr.pgdumpInstructions(Zw(e))})]}),t.jsxs("div",{className:oc.group,children:[t.jsx(P,{as:"p",appearance:"secondary",children:Vr.pgrestoreMessage}),t.jsx(vi,{mode:"text",copy:{onCopy:()=>a("migration_assistant_copy_pgrestore_clicked")},children:Vr.pgrestoreInstructions(Zw(s))})]}),t.jsxs("div",{className:oc.hint,children:[t.jsx(q,{name:"terminal",size:16}),Vr.monitorProgressMessage]}),t.jsxs("div",{className:oc.group,children:[Vr.allDone,t.jsx(A,{appearance:"secondary",onClick:o,disabled:!n,className:oc.goToProjectButton,children:Vr.goToProject})]})]})},DP={id:"move_data",title:Vr.stepTitle,description:Vr.description,content:t.jsx(HK,{})},VK="_container_1aadf_1",WK="_colorCheckPassed_1aadf_7",GK="_checksPassedContainer_1aadf_11",Ub={container:VK,colorCheckPassed:WK,checksPassedContainer:GK},Xw={buttonLabel:"Contact support",modalTitle:"Report a problem"},UP=({subject:e,description:s})=>{const[n,r]=m.useState(!1),a=m.useCallback(()=>r(!0),[r]),o=m.useCallback(()=>r(!1),[r]);return t.jsxs(t.Fragment,{children:[t.jsx(ao,{onRequestClose:o,isOpen:n,title:Xw.modalTitle,defaultValues:{subject:e,description:s}}),t.jsx(A,{appearance:"secondary",onClick:a,children:Xw.buttonLabel})]})},KK={db_is_reachable:{title:"Cannot connect to the source database",description:"We were not able to connect to the source database.",recoverySuggestion:"Please check your connection string and try again."},db_version:{title:"Postgres version is not supported",description:"Neon currently supports Postgres 14 - 17",recoverySuggestion:"Please upgrade your database to a supported version or contact support."},db_version_too_new:{title:"Source Postgres version is too new",recoverySuggestion:"Create project with the same or newer PostgreSQL version than your source database."},non_default_tablespaces:{title:"Non-default tablespaces"},non_default_settings:{title:"Non-default settings"},extension_support:{title:"Found unsupported extensions"},extension_compatibility:{title:"Found incompatible extension versions"},cu_limits:{title:"We were not able to determine appropriate instance size"},database_list:{title:"We were not able to query databases"},service_type:{title:"We were not able to detect source database service provider"},service_region:{title:"We were not able to detect database region"}},e0={supportMessageSubject:e=>`Migration Assistant:"${e}"`,supportMessageDescription:(e,s)=>`Migration Assistant check "${e}" has failed with the error: "${s}"`},QK="_container_vv55i_1",YK="_title_vv55i_8",JK="_error_vv55i_13",ZK="_warning_vv55i_17",Dh={container:QK,title:YK,error:JK,warning:ZK},XK=({rule:e,description:s,warning:n})=>{const r=KK[e];if(!r)return null;const{title:a,description:o=s,recoverySuggestion:i}=r,c=e0.supportMessageSubject(a),l=e0.supportMessageDescription(e,s),d=!!n;return t.jsx(Kk,{initiallyCollapsed:!0,size:"s",header:t.jsxs(J,{className:Dh.title,level:6,children:[t.jsx(q,{name:"warning",size:20,className:V({[Dh.error]:!d,[Dh.warning]:d})}),a]}),children:t.jsxs("div",{className:Dh.container,children:[t.jsx("p",{children:o}),i&&t.jsx("p",{children:i}),!d&&t.jsx(UP,{subject:c,description:l})]})})},eQ=()=>t.jsxs("div",{className:Ub.checksPassedContainer,children:[t.jsx(q,{name:"check",size:20,className:Ub.colorCheckPassed}),"All checks have passed!"]}),FP=({checks:e})=>{if(!e.length)return null;const s=e.filter(n=>!n.succeed);return s.length?t.jsx("div",{className:Ub.container,children:s.map(n=>t.jsx(XK,{...n},n.rule))}):t.jsx(eQ,{})},cu={stepTitle:"Check compatibility",loaderText:"Running checks...",description:"We'll analyze your database and provide recommendations for a successful data import. No changes will be made to your source database.",connectionStringLabel:"Current database connection string",runChecksButtonLabel:"Run Checks"},tQ="_container_m4alz_1",sQ="_form_m4alz_7",nQ="_connectionStringFormField_m4alz_14",rQ="_loaderContainer_m4alz_18",Uh={container:tQ,form:sQ,connectionStringFormField:nQ,loaderContainer:rQ},aQ=()=>{const{isStepCompleted:e}=xm(),{sourceDatabaseUrl:s,setSourceDatabaseUrl:n,setNewProjectConfiguration:r}=Al(),{continueTo:a}=xm(),[o,i]=m.useState(!1),[c,l]=m.useState([]),{trackUiInteraction:d}=k(),u=m.useCallback(g=>{n(g.target.value)},[n]),p=!o&&s.trim()&&!e("run_checks"),h=m.useCallback(async()=>{if(d("migration_assistant_run_checks_clicked"),!!p)try{i(!0),l([]);const{data:{data:g,new_project_configuration:f}}=await W.getMigrationChecklist({connection_uri:s.trim()});f&&r({databaseVersion:f.database_version,region:f.service_region}),l(g);const _=g.filter(x=>x.warning===!0&&!x.succeed).map(x=>x.rule),b=g.filter(x=>!x.succeed&&!x.warning).map(x=>x.rule);d("migration_assistant_run_checks_completed",{warnings:_,errors:b}),b.length||a("create_project",!_.length)}catch(g){Y(g)}finally{i(!1)}},[a,r,p,s,d]);return t.jsxs("div",{className:Uh.container,children:[t.jsxs(Ht,{onSubmit:h,formBodyClassName:Uh.form,children:[t.jsx(B,{label:cu.connectionStringLabel,className:Uh.connectionStringFormField,children:t.jsx(ce,{disabled:o||e("run_checks"),placeholder:"postgresql://",size:"s",value:s,onChange:u})}),t.jsx(A,{onClick:h,appearance:"primary",type:"submit",disabled:!p,children:cu.runChecksButtonLabel})]}),o?t.jsxs("div",{className:Uh.loaderContainer,children:[t.jsx(on,{}),cu.loaderText]}):t.jsx(FP,{checks:c})]})},oQ={id:"run_checks",title:cu.stepTitle,description:cu.description,content:t.jsx(aQ,{})},iQ=[oQ,MP,DP],zP=({project:e,onCloseDrawer:s})=>{const{importAvailableRegions:n}=oo(),r=!e||n.find(c=>c.id===(e==null?void 0:e.region_id)),a=r?"auto":"manual";k({mountEvent:{name:"migration_assistant_drawer_opened",params:{mode:a}},unmountEvent:{name:"migration_assistant_drawer_closed",params:{mode:a}}});const o=!!e,i=m.useMemo(()=>iQ.map(c=>r&&c===DP?$K:c).filter(c=>!(o&&c===MP)),[r,o]);return t.jsx(la,{isOpen:!0,size:"l","aria-label":Mh.title,onRequestClose:s,children:t.jsx(da,{title:t.jsxs("div",{className:Yw.title,children:[Mh.title," ",t.jsx(Ne,{appearance:"experimental",size:"m",children:"Beta"})]}),children:t.jsxs("div",{className:Yw.content,children:[t.jsxs(P,{as:"p",appearance:"secondary",children:[Mh.subtitle," ",t.jsx(M,{href:q2,openInNewTab:!0,icon:"external_link",children:Mh.learnMore})]}),t.jsx(kK,{project:e,mode:a,children:t.jsx(PK,{steps:i})})]})})})},qP=()=>{const e=it(st.ImportDataAssistant),{isSuspendedAccount:s}=fe();return t.jsxs(t.Fragment,{children:[e.isModalOpen&&t.jsx(zP,{onCloseDrawer:()=>e.closeModal()}),t.jsx(A,{onClick:()=>e.openModal(),appearance:"secondary",disabled:s,children:xK.migrateToNeon})]})},Sf={title:"You currently have no projects",description:"Create a project to get started with your Postgres database.",createProject:"Create project"},cQ="_root_xtvp2_1",lQ="_icon_xtvp2_12",dQ="_description_xtvp2_16",uQ="_actions_xtvp2_21",Fh={root:cQ,icon:lQ,description:dQ,actions:uQ},hQ=()=>t.jsxs("div",{className:Fh.root,"data-qa":"no_projects",children:[t.jsx(q,{name:"project",size:36,className:Fh.icon}),t.jsx(J,{level:3,children:Sf.title}),t.jsx(P,{appearance:"secondary",size:"l",className:Fh.description,children:Sf.description}),t.jsxs("div",{className:Fh.actions,children:[t.jsx(mv,{children:Sf.createProject}),t.jsx(qP,{})]})]}),pQ="_usageContainer_6lgen_1",mQ="_projectNameCell_6lgen_5",gQ="_projectName_6lgen_5",Cf={usageContainer:pQ,projectNameCell:mQ,projectName:gQ},zh={title:"Unable to fetch projects list",titleShared:"Unable to fetch shared projects list",description:"We couldn't fetch your current projects, please refresh to try again.",descriptionShared:"We couldn't fetch your shared projects, please refresh to try again."},Fb=({variant:e})=>t.jsx(Gu,{title:e==="shared"?zh.titleShared:zh.title,subtitle:e==="shared"?zh.descriptionShared:zh.description,actions:t.jsx(A,{appearance:"primary",onClick:()=>window.location.reload(),size:"s","data-qa":"refresh_page_button",children:"Refresh page"})}),fQ=(e,s)=>e?s?"Projects":`${e.name}'s projects`:"Your projects",vm=(e,s)=>{const n=(e??[]).map(a=>({id:a.id,project:a})),r=(s??[]).map(a=>({id:a}));return[...n,...r]},_Q=()=>{const e=le("project_integrations_column"),s=le("project_list_pagination"),{trackUiInteraction:n}=k(),{data:r,isFetching:a,unavailableIds:o,error:i}=qs(),{isPricingV3Account:c,isFetching:l}=fe();m.useEffect(()=>{window.location.hash===jb&&(pe("Your organization was successfully created."),window.history.replaceState(null,""," "))},[]);const d=m.useMemo(()=>vm(r,o),[r,o]),{data:u,isLoading:p,unavailableIds:h,error:g}=gx(),f=m.useMemo(()=>vm(u,h),[u,h]),{org:_,isLoading:b,isVercelOrg:x}=ae(),{data:v,isLoading:j}=hv({enabled:e}),y=a||p||j||b||l,w=nt(),{getRegionSafe:S}=oo(),T=m.useMemo(()=>[{key:"name",label:"Name",renderValue:({project:L})=>L?t.jsxs("div",{className:Cf.projectNameCell,children:[t.jsx(P,{className:Cf.projectName,bold:!0,children:L.name}),L.hipaa_enabled_at!==void 0&&t.jsx(ne,{content:"HIPAA compliant",children:t.jsx(Ne,{children:"HIPAA"})})]}):t.jsx(D,{height:12})},{key:"region_name",label:"Region",renderValue:({project:L})=>{var ee;return L?t.jsx(P,{children:(ee=S(L.platform_id,L.region_id))==null?void 0:ee.name}):t.jsx(D,{height:12})}},{key:"created_at",label:"Created at",renderValue:({project:L})=>L?t.jsx(P,{appearance:"secondary",children:xe(L.created_at)}):t.jsx(D,{height:12})},{key:"synthetic_storage_size",label:"Storage",renderValue:({project:L})=>L?t.jsx(P,{nowrap:!0,bold:!0,children:L.synthetic_storage_size?_l(L.synthetic_storage_size):"-"}):t.jsx(D,{height:12,width:24})},{key:"pg_version",label:"Postgres version",renderValue:({project:L})=>L?t.jsx(P,{children:L.pg_version}):t.jsx(D,{height:12,width:24})}],[S]),E=it(st.TransferProject),[H,R]=m.useState(),$={key:"actions",label:"",renderValue:({project:L})=>L?t.jsx(LP,{project:L,isUserProject:_===void 0&&!!(r!=null&&r.some(({id:ee})=>ee===L.id)),onProjectTransfer:()=>{R(L),E.openModal()}}):null,tdAttrs:{style:{width:"62px"}}},K=m.useMemo(()=>e?[{key:"integrations",label:"Integrations",renderValue:({project:L})=>L?t.jsx(hP,{projectId:L.id,integrations:v==null?void 0:v[L.id]}):null}]:[],[e,v]),Z=m.useCallback(({project:L},ee)=>{if(!L)return;const ie=G(C.ProjectsItem,{projectId:L.id});if(ee.metaKey||ee.ctrlKey){n("project_list_project_opened_new_tab"),window.open(Va+ie,"");return}n("project_list_project_opened"),w.push(ie)},[w,n]),U=fQ(_,x),te=!!(d!=null&&d.length),oe=!!(f!=null&&f.length),se=te||oe;return t.jsxs(t.Fragment,{children:[E.isModalOpen&&H&&t.jsx(fx,{projectId:H.id,children:t.jsx(fP,{project:H,onRequestClose:()=>{E.closeModal(),n("transfer_project_modal_dismissed")},onSuccess:L=>{E.closeModal(),n("transfer_project_modal_confirmed"),w.push(G(C.OrgProjectsList,{orgId:L}))}})}),t.jsx(Il,{title:U,actions:se&&t.jsxs(t.Fragment,{children:[t.jsx(mv,{}),t.jsx(qP,{})]})}),!l&&!c&&t.jsx("div",{className:Cf.usageContainer,children:t.jsx(bK,{showUpgrade:te})}),(y||te||!!i)&&t.jsx(Mg,{children:i?t.jsx(Fb,{variant:"owned"}):s?t.jsx(SQ,{onClickTransfer:L=>{R(L),E.openModal()}}):t.jsx(Mn,{isLoading:y,cols:[...T,...K,$],data:y||d===void 0?[]:d,onRowClick:Z,keyField:"id",style:{tableLayout:"fixed"}})}),(f&&f.length>0||!!g)&&t.jsxs(t.Fragment,{children:[t.jsx(Mg,{children:t.jsx(MR,{children:"Shared with you"})}),t.jsx(Mg,{children:g?t.jsx(Fb,{variant:"shared"}):t.jsx(Mn,{isLoading:y,cols:[...T,$],data:y?[]:f,onRowClick:Z,style:{tableLayout:"fixed"}})})]}),!se&&!y&&!i&&!g&&t.jsx(hQ,{})]})},bQ="_wrapper_1prkq_1",xQ="_projectNameCell_1prkq_7",vQ="_projectName_1prkq_7",zb={wrapper:bQ,projectNameCell:xQ,projectName:vQ},jQ=()=>{const{trackUiInteraction:e}=k(),s=m.useCallback(()=>{e("projects_list_item_menu_opened")},[e]),{data:n}=Un();return{createActions:m.useCallback(({project:a,isUserProject:o,onProjectTransfer:i})=>{const c=(n==null?void 0:n.length)??0,l=!!(a!=null&&a.org_id&&(n!=null&&n.some(h=>h.id===a.org_id))),u=c>(l?1:0),p=(o||l)&&u;return ot([{icon:"overview",label:"Dashboard",href:G(C.ProjectsItem,{projectId:a.id}),onClick(){e("projects_list_item_menu_dashboard_clicked")},"data-qa":"project-dashboard-link"},{icon:"editor",label:"SQL Editor",href:G(ue.ProjectsItemQuery,{projectId:a.id}),onClick(){e("projects_list_item_menu_sql_editor_clicked")},"data-qa":"project-sql-editor-link"},p&&{icon:"connect_with",label:"Transfer project",onClick(){e("projects_list_item_menu_transfer_project_clicked"),i()},"data-qa":"project-transfer-link"},{icon:"settings",label:"Settings",href:G(C.ProjectsItemSettings,{projectId:a.id}),onClick(){e("projects_list_item_menu_settings_clicked")},"data-qa":"project-settings-link"}])},[n,e]),onOpen:s}},yQ=({search:e})=>{const{trackUiInteraction:s}=k(),n=m.useRef(new Set),[r,a]=m.useState(iR[0]),[o,i]=m.useState(void 0),{orgId:c}=ae(),{data:l,cursor:d,...u}=J_(c,r,o,e),{data:p}=J_(c,r,d,e),h=p&&p.length>0,g=!!o,f=m.useCallback(()=>{if(!d||!h)return;n.current.add(d),i(d)},[d,h]),_=m.useCallback(()=>{if(!o)return;const y=Array.from(n.current),w=y.findIndex(T=>T===o)??-1;if(w<0)return;const S=w-1;i(y[S])},[o]),b=m.useCallback(()=>{i(void 0)},[]),x=m.useCallback(y=>{switch(s("projects_list_pagination_page_changed",{...y}),y.direction){case"first":b();break;case"next":f();break;case"previous":_();break}},[b,f,_,s]),v=m.useCallback(y=>{s("projects_list_pagination_page_size_changed",{...y}),a(y.pageSize),b()},[b,s]),j=m.useMemo(()=>({pageSize:r,onPageSizeChange:v,onPageChange:x,hasNextPage:h,hasPreviousPage:g}),[r,v,x,h,g]);return{data:l,pagination:j,...u}},wQ=(e,s)=>[{rowHeader:!0,id:"name",header:"Name",render:({project:n})=>n?t.jsxs("div",{className:zb.projectNameCell,children:[t.jsx(QC,{title:n.name,className:zb.projectName,searchWords:s.split(" "),textToHighlight:n.name}),n.hipaa_enabled_at!==void 0&&t.jsx(ne,{content:"HIPAA compliant",children:t.jsx(Ne,{children:"HIPAA"})})]}):t.jsx(D,{height:12})},{id:"region_name",header:"Region",render:({project:n})=>{var r;return n?(r=e(n.platform_id,n.region_id))==null?void 0:r.name:t.jsx(D,{height:12})}},{id:"created_at",header:"Created at",render:({project:n})=>n?xe(n.created_at):t.jsx(D,{height:12})},{id:"synthetic_storage_size",header:"Storage",render:({project:n})=>n?t.jsx(P,{nowrap:!0,bold:!0,children:n.synthetic_storage_size?_l(n.synthetic_storage_size):"-"}):t.jsx(D,{height:12,width:24})},{id:"pg_version",header:"Postgres version",render:({project:n})=>n?t.jsx(P,{children:n.pg_version}):t.jsx(D,{height:12,width:24})}],SQ=({onClickTransfer:e})=>{const s=le("project_integrations_column"),[n,r]=m.useState(""),{data:a,isFetching:o,unavailableIds:i,pagination:c}=yQ({search:n}),{org:l,isLoading:d}=ae(),{trackUiInteraction:u}=k(),{data:p,isLoading:h}=hv({enabled:s}),g=d||o||h,{getRegionSafe:f}=oo(),_=m.useMemo(()=>vm(a,i),[a,i]),{createActions:b,onOpen:x}=jQ(),v=m.useMemo(()=>s?[{id:"integrations",header:"Integrations",render:({project:y})=>y?t.jsx(hP,{projectId:y.id,integrations:p==null?void 0:p[y.id]}):null}]:[],[s,p]),j=m.useCallback(({project:y})=>{y&&u("project_list_project_opened")},[u]);return t.jsxs("div",{className:zb.wrapper,children:[t.jsx(uv,{onChange:r,size:"s"}),t.jsx(Ps,{"data-qa":"data-table","aria-label":"Owned projects list",columns:[...wQ(f,n),...v],rowActions:({project:y})=>y?b({project:y,isUserProject:l===void 0&&!!(a!=null&&a.some(({id:w})=>w===y.id)),onProjectTransfer:()=>e(y)}):[],onOpenActionsMenu:x,pageSize:c.pageSize,onRowClick:g?void 0:j,rowHref:({project:y})=>y&&!g?G(C.ProjectsItem,{projectId:y.id}):void 0,getRowId:({id:y})=>y,isLoading:g,rows:_,onPageChange:c.onPageChange,onPageSizeChange:c.onPageSizeChange,hasNextPage:c.hasNextPage,hasPreviousPage:c.hasPreviousPage,manualPagination:!0,hideTotalCount:!0})]})},ii={title:{project:"What project are you referring to?",branch:"What branch are you referring to?"},orgLabel:"Select organization",projectLabel:"Select project",branchLabel:"Select branch",createTicketDescription:"You can contact support by opening a support ticket. Describe your issue in detail, select the appropriate severity level, and submit the ticket.",createTicketButton:"Create a support ticket",discordDescription:t.jsxs(t.Fragment,{children:["You can get support joining"," ",t.jsx(M,{href:xu,openInNewTab:!0,children:"Neon Discord Community"}),". There you can ask questions from Neon team members and community."]})},CQ="_root_29frr_1",IQ="_selectTool_29frr_5",kQ="_selectItem_29frr_11",TQ="_createTicketTool_29frr_17",Mc={root:CQ,selectTool:IQ,selectItem:kQ,createTicketTool:TQ};var fi=(e=>(e.AskForProject="askForProject",e.AskForBranch="askForBranch",e.CreateTicket="createTicket",e))(fi||{});const t0=({saveContext:e,onToolSubmit:s,isDisabled:n,type:r})=>{const[a,o]=m.useState(),[i,c]=m.useState(),[l,d]=m.useState(),{data:u}=Un(),{data:p}=bt(),h=ca(p),{data:g}=J_(a==="personal_account"?void 0:a),f=m.useMemo(()=>{const w=(u==null?void 0:u.map(S=>({value:S.id,label:S.name})))??[];return h||w.push({value:"personal_account",label:"Personal account"}),w},[u,h]),_=(g==null?void 0:g.map(w=>({value:w.id,label:w.name})))??[],{branchOptions:b}=_x(i),x=({accountId:w,projectId:S,branchId:T})=>{const E=f.find($=>$.value===w),H=_.find($=>$.value===S),R=b.find($=>$.value===T);e==null||e({account:E,project:H,branch:R})},v=w=>{w&&(o(String(w)),c(void 0),d(void 0))},j=w=>{w&&(c(String(w)),d(void 0),r==="project"&&(x({accountId:a,projectId:w}),s==null||s()))},y=w=>{w&&(d(String(w)),r==="branch"&&(x({accountId:a,projectId:i,branchId:w}),s==null||s()))};return m.useEffect(()=>{(f==null?void 0:f.length)===1&&o(f[0].value)},[f]),t.jsxs("div",{className:Mc.selectTool,children:[t.jsx(P,{children:ii.title[r]}),(f==null?void 0:f.length)>1&&t.jsxs("div",{className:Mc.selectItem,children:[t.jsx(P,{children:ii.orgLabel}),t.jsx(lt,{value:a,options:f,onChange:v,disabled:n})]}),t.jsxs("div",{className:Mc.selectItem,children:[t.jsx(P,{children:ii.projectLabel}),t.jsx(lt,{"aria-label":"Select project",value:i,options:_,onChange:j,disabled:n||!a})]}),r==="branch"&&t.jsxs("div",{className:Mc.selectItem,children:[t.jsx(P,{children:ii.branchLabel}),t.jsx(lt,{"aria-label":"Select branch",value:l,options:b,onChange:y,disabled:n||!i})]})]})},PQ=({openSupport:e,isDisabled:s,confirmationText:n})=>Hr(a=>{var o;return(o=a.options)==null?void 0:o.context.isSupportFormEnabled})?t.jsxs("div",{className:Mc.createTicketTool,children:[t.jsx(P,{children:n??ii.createTicketDescription}),t.jsx(A,{appearance:"secondary",onClick:e,disabled:s,children:ii.createTicketButton})]}):t.jsx(P,{children:ii.discordDescription}),NQ=e=>{var s;return e&&((s=JSON.parse(e))==null?void 0:s.confirmationText)},HP=({toolCalls:e,saveContext:s,onToolSubmit:n,openSupport:r,isLastMessage:a})=>e?e.map(({id:o,function:i})=>t.jsx("div",{className:Mc.root,children:(()=>{switch(i.name){case fi.AskForProject:return t.jsx(t0,{type:"project",saveContext:s,onToolSubmit:n,isDisabled:!a});case fi.AskForBranch:return t.jsx(t0,{type:"branch",saveContext:s,onToolSubmit:n,isDisabled:!a});case fi.CreateTicket:return t.jsx(PQ,{openSupport:r,isDisabled:!a,confirmationText:NQ(i.arguments)});default:return t.jsx(uP,{isLastMessage:a})}})()},o)):null,AQ=e=>({id:"markprompt-assistant-placeholder-message-id",role:"assistant",content:Aa.placeholder(e==null?void 0:e.firstName),state:"done"}),VP=e=>({id:`markprompt-assistant-resolved-message-${e}`,role:"assistant",content:Aa.feedbackResponse,state:"done"}),EQ=({userData:e,threadId:s,threadMessages:n,isResolved:r})=>t.jsxs(t.Fragment,{children:[n.map(a=>a.role!=="tool"&&t.jsx(au,{...a,userFirstName:e==null?void 0:e.firstName,userImage:e==null?void 0:e.image,children:a.role==="assistant"&&t.jsx(HP,{toolCalls:a.tool_calls})},a.id)),r&&t.jsx(au,{...VP(s)})]}),OQ=({isOpen:e,onRequestClose:s,openSupport:n,saveContext:r,clearContext:a,isLoading:o})=>{const{trackUiInteraction:i}=k(),c=m.useRef(null),{data:l}=bt(),[d,u]=m.useState(""),[p,h]=m.useState(!1),[g,f]=nn(gt.MarkpromptFeedbackState,"resolvedByThreadId",{}),_=Hr(U=>U.messages),b=Hr(U=>U.messagesByThreadId),x=Hr(U=>U.submitChat),v=Hr(U=>U.submitToolCalls),j=Hr(U=>U.projectKey),{submitFeedback:y}=z7({projectKey:j}),w=Hr(U=>U.selectThread),S=Hr(U=>U.threadId),T=m.useRef(!!(S&&g[S])),E=()=>u(""),H=()=>{i("markprompt_get_help_ask_clicked"),T.current&&(w(void 0),T.current=!1),x([{role:"user",content:d.trim()}]),E()},R=U=>()=>{setTimeout(()=>v(U))},$=U=>{U.key==="Enter"&&(U.ctrlKey||U.metaKey)&&H()},K=U=>async te=>{try{switch(h(!0),te){case"positive":await y({vote:"1"},U),S&&f(oe=>({...oe,[S]:!0})),a(),T.current=!0;break;case"negative":await y({vote:"-1"},U),x([{role:"user",content:Aa.feedbackNegative}]);break}}catch(oe){const se=Zt(oe);Ct(se)}finally{h(!1)}},Z=m.useCallback(()=>{c.current&&c.current.scrollIntoView({behavior:"instant"})},[]);return m.useEffect(()=>{e&&(i("markprompt_get_help_opened"),Z())},[e,Z,i]),m.useEffect(()=>{_.length&&Z()},[_,Z]),t.jsx(la,{zIndex:2,isOpen:e,"aria-label":Aa.title,onRequestClose:s,size:"l",children:o?t.jsx(Se,{}):t.jsxs(t.Fragment,{children:[t.jsxs(da,{title:Aa.title,children:[t.jsxs("div",{className:ff.content,children:[t.jsx(au,{...AQ(l)}),Object.entries(b).filter(([U])=>U!==S).sort(([,U],[,te])=>mt(U.lastUpdated).unix()-mt(te.lastUpdated).unix()).map(([U,{messages:te}])=>t.jsx(EQ,{threadId:U,threadMessages:te,isResolved:!!g[U],userData:l},U)),_.map((U,te)=>U.role!=="tool"&&t.jsxs(au,{...U,userFirstName:l==null?void 0:l.firstName,userImage:l==null?void 0:l.image,isLastMessage:_.length-1===te,children:[U.role==="assistant"&&U.state==="done"&&t.jsx(HP,{toolCalls:U.tool_calls,onToolSubmit:R(U),saveContext:r,openSupport:()=>{i("markprompt_get_help_create_ticket_clicked"),n(S)},isLastMessage:_.length-1===te}),U.role==="assistant"&&_.length-1===te&&U.state==="done"&&!U.tool_calls&&U.messageId&&S&&!g[S]&&t.jsx(AV,{isLoading:p,onFeedbackSubmit:K(U.messageId)})]},U.id)),S&&g[S]&&t.jsx(au,{...VP(S)})]}),t.jsx("div",{ref:c,style:{height:1}})]}),t.jsx(Ax,{children:t.jsxs("div",{className:ff.prompt,children:[t.jsx(eo,{value:d,onChange:U=>u(U.target.value),onKeyDown:$,placeholder:Aa.promptPlaceholder,rows:5,autoFocus:!0}),t.jsxs("div",{className:ff.promptActions,children:[!!d.length&&t.jsx(A,{appearance:"clear",onClick:()=>{i("markprompt_get_help_clear_clicked"),E()},children:Aa.clear}),t.jsx(A,{onClick:H,disabled:!d.length,children:Aa.ask})]})]})})]})})},LQ=({isOpen:e,onRequestClose:s})=>{var S,T,E,H,R,$;const{trackUiInteraction:n}=k(),{markprompt:r}=H2(),[a,o]=m.useState(!1),{data:i,isLoading:c}=bt(),{data:l,isLoading:d}=K1(),u=V2(),p=!(u.isLoading||u.isEverythingDisabled),h=u.isLoading||d||c,g=l==null?void 0:l.subscription_type,f=g&&Qa[g],[_,b]=m.useState(),[x,v]=m.useState(),j=m.useCallback(()=>{b(void 0)},[]),y=m.useCallback(K=>{v(K),o(!0)},[]),w=m.useCallback(async(K,Z)=>{try{await fetch(`https://api.markprompt.com/threads/${K}`,{method:"POST",headers:{"Content-Type":"application/json","X-Markprompt-API-Version":"2024-05-21"},body:JSON.stringify({projectKey:(r==null?void 0:r.projectKey)||"local",metadata:{caseNumber:Z},strategy:"merge"})})}catch(U){Ct(Zt(U))}},[r==null?void 0:r.projectKey]);return t.jsxs(t.Fragment,{children:[t.jsx(ao,{isOpen:a,onRequestClose:()=>{n("support_form_dismissed"),o(!1),v(void 0)},defaultValues:{accountIdOption:_==null?void 0:_.account,projectIdOption:_==null?void 0:_.project,branchIdOption:_==null?void 0:_.branch,markpromptThreadId:x},onSuccess:m.useCallback(K=>{x&&w(x,K)},[x,w])}),t.jsx(TV,{projectKey:(r==null?void 0:r.projectKey)||"local",storeKey:i==null?void 0:i.id,chatOptions:{maxHistorySize:3,assistantId:(r==null?void 0:r.assistantId)||"local",assistantVersionId:r==null?void 0:r.agentVersion,toolChoice:"auto",tools:[{tool:{type:"function",function:{name:fi.AskForProject}},call:()=>{var K;return Promise.resolve(`The projectId was provided, projectId: ${(K=_==null?void 0:_.project)==null?void 0:K.value}`)},requireConfirmation:!0},{tool:{type:"function",function:{name:fi.AskForBranch}},call:()=>{var K;return Promise.resolve(`The branchId was provided, branchId: ${(K=_==null?void 0:_.branch)==null?void 0:K.value}`)},requireConfirmation:!0},{tool:{type:"function",function:{name:fi.CreateTicket}},call:()=>Promise.resolve("Create support ticket modal is opened"),requireConfirmation:!0}],context:{accountId:(S=_==null?void 0:_.account)==null?void 0:S.value,accountName:(T=_==null?void 0:_.account)==null?void 0:T.label,projectId:(E=_==null?void 0:_.project)==null?void 0:E.value,projectName:(H=_==null?void 0:_.project)==null?void 0:H.label,branchId:(R=_==null?void 0:_.branch)==null?void 0:R.value,branchName:($=_==null?void 0:_.branch)==null?void 0:$.label,billingPlan:f,isSupportFormEnabled:p},threadMetadata:{userId:i==null?void 0:i.id,billingPlan:f,isSupportFormEnabled:p},history:!1},children:t.jsx(OQ,{isOpen:e,onRequestClose:s,openSupport:y,saveContext:b,clearContext:j,isLoading:h})})]})},$Q=()=>{const{trackUiInteraction:e}=k(),s=bx("support_agent"),n=m.useCallback(()=>{e("resources_menu_opened")},[e]),{isModalOpen:r,openModal:a,closeModal:o}=it(st.Support),{isModalOpen:i,openModal:c,closeModal:l}=it(st.Feedback),d=m.useMemo(()=>[{items:[{label:"Feedback",icon:"feedback",onClick:()=>{e("resources_menu_feedback_clicked"),c()}},s?{label:"Get help",icon:"help",onClick:()=>{e("resources_menu_get_help_clicked"),a()}}:{label:"Support",icon:"help",onClick:()=>{e("resources_menu_support_clicked"),a()}},{label:"Docs",href:W2,openInNewTab:!0,icon:"docs",onClick:()=>{e("resources_menu_docs_clicked")}},{label:"API Reference",icon:"docs",href:G2,openInNewTab:!0,onClick:()=>{e("resources_menu_api_reference_clicked")}},{label:"Changelog",href:K2,openInNewTab:!0,icon:"release",onClick:()=>{e("resources_menu_changelog_clicked")}},{label:"Trust Center",href:Q2,openInNewTab:!0,icon:"trust",onClick:()=>{e("resources_menu_trust_center_clicked")}},{label:"neon.com",href:"https://neon.com/home",openInNewTab:!0,icon:"neon_circle",onClick:()=>{e("resources_menu_open_homepage")}}]}],[c,a,e,s]);return t.jsxs(t.Fragment,{children:[i&&t.jsx(J1,{isOpen:!0,onRequestClose:()=>{e("feedback_form_dismissed"),l()},openSupport:()=>{l(),a()}}),s?t.jsx(LQ,{isOpen:r,onRequestClose:()=>{e("markprompt_get_help_closed"),o()}}):t.jsx(ao,{isOpen:r,onRequestClose:()=>{e("support_form_dismissed"),o()}}),t.jsx(Jt,{sections:d,onOpen:n,placement:"bottom right",children:t.jsx(A,{appearance:"secondary","aria-label":"Resources menu",icon:"question"})})]})},If={description:t.jsxs(t.Fragment,{children:[t.jsx("b",{children:"Your account has been suspended."})," Update your payment information or contact support"]}),azurePortal:"Go to Azure portal",support:"Contact support"},RQ="_root_1ujo2_1",BQ="_icon_1ujo2_10",MQ="_actions_1ujo2_14",kf={root:RQ,icon:BQ,actions:MQ},DQ=()=>{const{trackUiInteraction:e}=k(),{isAzureOrg:s,isLoading:n}=ae(),{isSuspendedAccount:r,isFetching:a}=fe(),{isModalOpen:o,openModal:i,closeModal:c}=it(st.Support);return r&&!(n&&a)?t.jsxs(t.Fragment,{children:[t.jsx(ao,{onRequestClose:()=>{e("support_form_dismissed"),c()},isOpen:o}),t.jsxs("div",{className:kf.root,children:[t.jsx(q,{name:"warning",size:20,className:kf.icon}),t.jsx(P,{children:If.description}),t.jsxs("div",{className:kf.actions,children:[s&&t.jsx(A,{appearance:"primary",as:Ke,openInNewTab:!0,href:Y2,onClick:()=>{e("suspended_account_banner_go_to_azure_clicked")},children:If.azurePortal}),t.jsx(A,{appearance:"secondary",onClick:()=>{e("suspended_account_banner_support_clicked"),i()},children:If.support})]})]})]}):null},UQ=()=>{const e=nt(),{orgId:s}=ae(),[n,r]=m.useState(!1),{trackUiInteraction:a}=k(),{isFreeSubscription:o,subscriptionType:i,isMarketplaceAccount:c,isSelfServedAccount:l}=fe(),{creditBalance:d}=Zm();if(!(o||l&&(i==="launch"||i==="scale")))return null;const p=()=>{if(a("global_upgrade_button_clicked",{is_marketplace_account:c}),c){const h=s?G(C.OrgBilling,{orgId:s}):C.UserBilling;return e.push(h)}r(!0)};return t.jsxs(t.Fragment,{children:[t.jsxs(A,{onClick:p,appearance:o?"primary":"secondary",size:"s",children:["Upgrade"," ",(d==null?void 0:d.balance_cents)!==void 0&&d.balance_cents>0&&`($${J2(d.balance_cents/100,2)} Credit)`]}),t.jsx(Pt,{type:dt.Default,isOpen:n,onRequestClose:()=>{r(!1)}})]})},FQ="_root_coijc_1",zQ="_image_coijc_6",qQ="_card_coijc_11",HQ="_body_coijc_17",VQ="_header_coijc_23",WQ="_infoIcon_coijc_28",GQ="_dismissButton_coijc_34",KQ="_icon_coijc_38",QQ="_content_coijc_42",Kn={root:FQ,image:zQ,card:qQ,body:HQ,header:VQ,infoIcon:WQ,dismissButton:GQ,icon:KQ,content:QQ},YQ=({title:e,image:s,children:n,onDismiss:r})=>t.jsxs("div",{className:Kn.root,children:[t.jsx("img",{src:s,alt:"","aria-hidden":!0,className:Kn.image}),t.jsxs("div",{className:Kn.card,children:[t.jsx("div",{className:Kn.infoIcon,children:t.jsx(q,{name:"info_italic",size:16,className:Kn.icon})}),t.jsxs("div",{className:Kn.body,children:[t.jsx("div",{className:Kn.header,children:e}),t.jsx("div",{className:Kn.content,children:n})]}),r&&t.jsx("button",{type:"button",title:"Dismiss",className:Kn.dismissButton,onClick:r,children:t.jsx(q,{name:"cross_small",size:20,className:Kn.icon})})]})]}),JQ="/assets/assets/slack_image-BAo_HRN4.png",ZQ="_footer_17f6w_1",XQ={footer:ZQ},eY=({onDismiss:e})=>{const{trackUiInteraction:s}=k({mountEvent:"notifications_announcement_slack_app_shown"});return t.jsxs(YQ,{title:"Track your Neon projects in Slack",image:JQ,children:["Monitor your projects, track account and project usage, and invite users to your organization directly from Slack.",t.jsxs("div",{className:XQ.footer,children:[t.jsx(A,{as:Ke,icon:"external_link",iconSide:"right",href:"https://neon.com/docs/manage/slack-app",openInNewTab:!0,onClick:()=>{s("notifications_announcement_slack_app_link_clicked")},children:"Add Neon App to Slack"}),t.jsx(A,{appearance:"secondary",onClick:()=>{s("notifications_announcement_slack_app_dismissed"),e()},children:"Dismiss"})]})]})},tY=({announcements:e,onAnnouncementDismiss:s,onMount:n,onUnmount:r})=>(m.useEffect(()=>(n(),r),[]),t.jsx(t.Fragment,{children:e.map(a=>{switch(a){case"slack_app":return t.jsx(eY,{onDismiss:()=>s(a)},a)}return null})})),WP=gt.NotificationAnnouncements;function jm(){let e;try{e=ks.get(WP)}catch{}return e??{seen:[],dismissed:[]}}function GP(e){try{ks.set(WP,e)}catch{}}function sY(e){const s=jm();GP({...s,seen:[...new Set([...s.seen,...e]).keys()]})}function nY(e){const s=jm(),n={...s,dismissed:[...new Set([...s.dismissed,e]).keys()]};return GP(n),n}function rY(){const{trackUiInteraction:e}=k(),[s,n]=m.useState(jm),r=xx("growth_slack_app_announcement")==="notification",a=m.useMemo(()=>{const u=[];return r&&u.push("slack_app"),u.filter(p=>!s.dismissed.includes(p))},[r,s.dismissed]),o=u=>{n(nY(u))},i=()=>{sY(a)},c=()=>{n(u=>({...u,seen:jm().seen}))},l=a.filter(u=>!s.seen.includes(u)).length,d=l>0;return m.useEffect(()=>{d&&e("notifications_unread_badge_shown")},[e,d]),{unreadCount:l,announcements:a.length>0?t.jsx(tY,{announcements:a,onAnnouncementDismiss:o,onMount:i,onUnmount:c}):null}}const cl=nb.createApi({reducerPath:"notifications",baseQuery:Z1,endpoints:e=>({getNotifications:e.query({query:({projectId:s})=>W.getProjectNotifications(s)})})}),aY=vx({name:"monitoringAlerts",initialState:{isLoading:!1,isOpen:!1,showModal:!1,selectedNotificationItem:null,isEndpointEditFormOpened:!1,notificationItems:[],showUpgradePlanModal:!1,isCleared:!1,prevNotificationCount:0},extraReducers:e=>{e.addMatcher(cl.endpoints.getNotifications.matchFulfilled,(s,{payload:n})=>{var a;s.prevNotificationCount||(s.prevNotificationCount=((a=n.data)==null?void 0:a.length)??0),n.data&&n.data.length>s.prevNotificationCount&&(s.isCleared=!1)}),e.addMatcher(cl.endpoints.getNotifications.matchRejected,(s,n)=>{let r;n.payload&&typeof n.payload=="object"&&"message"in n.payload&&typeof n.payload.message=="string"?r=n.payload.message:n.error&&(r=n.error.message),Z2({message:`api call getNotifications failed: ${r||"getNotifications rejected"}`,level:"warning"})})},reducers:{setIsCleared:(e,{payload:s})=>{e.isCleared=s},setPrevNotificationCount:(e,{payload:s})=>{e.prevNotificationCount=s},setShowUpgradePlanModal:(e,{payload:s})=>{e.showUpgradePlanModal=s},setIsLoading:(e,{payload:s})=>{e.isLoading=s},setIsOpen:(e,{payload:s})=>{e.isOpen=s},setShowModal:(e,{payload:s})=>{e.showModal=s},setSelectedNotificationItem:(e,{payload:s})=>{e.selectedNotificationItem=s},setIsEndpointEditFormOpened:(e,{payload:s})=>{e.isEndpointEditFormOpened=s}}}),Pu=jx(aY);function*oY(){try{const e=ks.get(gt.MonitoringAlertsState);if(e){const s=JSON.parse(e);yield tC(Pu.actions.setIsCleared(!!(s!=null&&s.isCleared)))}}catch{ks.remove(gt.MonitoringAlertsState)}}function*iY(){yield WC(Pu.actionTypes,function*(){const s=yield sC(Pu.selector);ks.set(gt.MonitoringAlertsState,JSON.stringify(s))})}function*cY(){yield X1(oY),yield eC(iY)}Pu.setSaga(cY);const Yt=Pu,lY="_notificationCount_1it9d_1",dY="_notificationButton_custom_1it9d_5",uY="_notificationButton_info_1it9d_22",hY="_notificationButton_warning_1it9d_29",qh={notificationCount:lY,notificationButton_custom:dY,notificationButton_info:uY,notificationButton_warning:hY},pY=({unreadAnnouncementsCount:e})=>{var g;const{projectId:s}=F(),{data:n}=cl.useGetNotificationsQuery({projectId:s}),{isOpen:r,isCleared:a}=bl(Yt.selector),o=Dn(),{trackUiInteraction:i}=k(),c=((g=n==null?void 0:n.data)==null?void 0:g.length)??0,l=c>0&&!a,d=e>0,u=c+e,p=l||d;let h;return l?h="warning":d&&(h="info"),t.jsx(A,{className:V({[qh.notificationButton_custom]:!!h,[qh.notificationButton_info]:h==="info",[qh.notificationButton_warning]:h==="warning"}),icon:"notification",iconSide:"left",onClick:()=>{i("monitoring_alerts_opened"),o(Yt.actions.setIsOpen(!r))},appearance:"secondary","aria-label":"Open notification panel",children:p&&t.jsx("span",{className:qh.notificationCount,children:u})})},mY="_notificationInfoContainer_6xwvd_1",gY="_iconAndTextContainer_6xwvd_9",fY="_notificationInfoTitle_6xwvd_13",_Y="_notificationStatBase_6xwvd_19",bY="_notificationStat_info_6xwvd_23",xY="_notificationStat_warning_6xwvd_28",vY="_iconContainer_6xwvd_33",jY="_infoIcon_6xwvd_37",yY="_warningIcon_6xwvd_41",wY="_arrayIcon_6xwvd_45",Qn={notificationInfoContainer:mY,iconAndTextContainer:gY,notificationInfoTitle:fY,notificationStatBase:_Y,notificationStat_info:bY,notificationStat_warning:xY,iconContainer:vY,infoIcon:jY,warningIcon:yY,arrayIcon:wY},SY=e=>{switch(e){case"cpu":return"monitoring_alerts_notification_shown_cpu";case"connections":return"monitoring_alerts_notification_shown_connections";case"ram":return"monitoring_alerts_notification_shown_ram"}},CY=({item:e})=>{const s=Dn(),{trackUiInteraction:n}=k({mountEvent:{name:SY(e.metric),params:{formattedValue:e.formattedValue}}});return t.jsxs("button",{type:"button",className:Qn.notificationInfoContainer,onClick:()=>{n("monitoring_alerts_notification_clicked",{type:e.metric,formattedValue:e.formattedValue}),s(Yt.actions.setIsOpen(!1)),s(Yt.actions.setSelectedNotificationItem(e)),s(Yt.actions.setShowModal(!0))},children:[t.jsxs("div",{className:Qn.iconAndTextContainer,children:[t.jsx("div",{className:Qn.iconContainer,children:t.jsx(q,{className:V({[Qn.infoIcon]:e.type==="info",[Qn.warningIcon]:e.type==="warning"}),name:e.type==="info"?"info_italic":"warning",size:16})}),t.jsxs("div",{children:[t.jsx("p",{className:Qn.notificationInfoTitle,children:e.title}),t.jsx("p",{className:V(Qn.notificationStatBase,{[Qn.notificationStat_info]:e.type==="info",[Qn.notificationStat_warning]:e.type==="warning"}),children:e.formattedValue})]})]}),t.jsx("div",{children:t.jsx(q,{className:Qn.arrayIcon,name:"arrow_right",size:16})})]})},IY=e=>cl.useGetNotificationsQuery({projectId:e}),kY={empty:"No new notifications"},TY="_container_1w84n_1",PY="_loaderContainer_1w84n_5",NY="_empty_1w84n_13",AY="_timeStampContainer_1w84n_19",EY="_timeStampContent_1w84n_26",od={container:TY,loaderContainer:PY,empty:NY,timeStampContainer:AY,timeStampContent:EY};mt.extend(X2);const OY=({announcements:e})=>{var a;const{projectId:s}=xl(),{data:n,isLoading:r}=IY(s);return r?t.jsx("div",{children:t.jsx("div",{className:od.loaderContainer,children:t.jsx(on,{size:20})})}):!(n!=null&&n.data)&&!e?t.jsx("div",{children:t.jsx("p",{className:od.empty,children:kY.empty})}):t.jsxs("div",{className:od.container,children:[(a=n==null?void 0:n.data)==null?void 0:a.map(o=>t.jsx(CY,{item:o},o.formattedValue)),e,(n==null?void 0:n.rw_endpoint_last_active_at)&&t.jsx("div",{className:od.timeStampContainer,children:t.jsx("p",{className:od.timeStampContent,children:`Last updated ${mt(new Date(n.rw_endpoint_last_active_at)).fromNow()}`})})]})},fv=e=>{switch(e){case 0:return"5 minutes (default)";case-1:return"never";default:{const{highestValue:s,highestUnit:n}=Rm(e);return`${s} ${Ms(n,s)}`}}};function KP(e){return!e||e<1?1:e}const LY="_root_1ousv_1",$Y={root:LY},Gc=({icon:e,className:s,children:n})=>t.jsxs("div",{className:V($Y.root,s),children:[t.jsx(q,{name:e,size:16}),t.jsx("div",{children:n})]}),ug=()=>{const{limits:e}=Et();return e==null?void 0:e.max_autoscaling_cu},_v=()=>{const{limits:e}=Et();return e==null?void 0:e.max_fixed_size_cu},s0=Intl.NumberFormat("en-US"),$t={headers:{autoscaling:"Autoscaling",computeSize:"Compute size"},autoscaling:{fromTitle:"Scale from",toTitle:"Scale up to",minSelectLabel:"Autoscaling minimal value",maxSelectLabel:"Autoscaling maximum value",hint:"Configure the autoscaling range",warning:"Autoscaling range is invalid: (max-min)>8"},largeScaling:{scaleButton:"Autoscale",largeProvisionedButton:"Larger Computes",selectLabel:"Large provisioned CU value",hint:"Choose a fixed size for larger computes"},maxConnections:{message:(e,s,n)=>t.jsxs(t.Fragment,{children:["Connections limit: ",s0.format(e)," direct connections / ",s0.format(eL)," ","pooled connections."," ",t.jsx(ne,{appearance:"rich",content:n,children:s})]}),tooltip:e=>t.jsx("span",{className:e,children:"Learn more"}),tooltipHeader:"Connection pooling",tooltipBody:t.jsxs(t.Fragment,{children:["Use a pooled connection string for connection pooling. This adds the"," ",t.jsx(Pe,{children:"-pooler"})," option to your endpoint ID."]}),tooltipLink:"Learn more"},upgradeForMore:"Upgrade for larger computes"},RY="_root_kjhlj_1",BY="_header_kjhlj_7",MY="_withHint_kjhlj_14",DY="_values_kjhlj_20",UY="_value_kjhlj_20",FY="_title_kjhlj_31",zY="_cu_kjhlj_36",qY="_selectsWrap_kjhlj_41",HY="_selects_kjhlj_41",VY="_select_kjhlj_41",WY="_selectInput_kjhlj_56",GY="_toggleButton_kjhlj_62",KY="_tooltip_kjhlj_68",QY="_tooltipContent_kjhlj_72",YY="_tooltipBody_kjhlj_78",Ut={root:RY,header:BY,withHint:MY,values:DY,value:UY,title:FY,cu:zY,selectsWrap:qY,selects:HY,select:VY,selectInput:WY,toggleButton:GY,tooltip:KY,tooltipContent:QY,tooltipBody:YY},QP=m.memo(({value:e,onChange:s,maxValue:n,scale:r,disabled:a})=>{const o=Og(r,n),i=Og(r,e.min),c=Og(r,e.max),l=c>o?o:c,d=i===l&&i-1<0?0:i,u=m.useCallback(g=>s({min:r[Math.min(...g)],max:r[Math.max(...g)]}),[s,r]),p=g=>{const f=r[Math.min(...g)],_=r[Math.max(...g)];return nC({min:f,max:_})},h=m.useCallback(g=>r[g].toString().replace(/^0(?=\.)/,""),[r]);return t.jsx(tL,{left:d,right:l,disabled:a||o===0,min:0,max:o===0?r.length-1:o,onChange:u,formatMark:h,isValidRange:p})});QP.displayName="CPUUnitsSlider";const bv=({autoscalingRange:e})=>t.jsx(Gc,{icon:"pooler",children:$t.maxConnections.message(rC(e),$t.maxConnections.tooltip(Ut.tooltip),t.jsxs("div",{className:Ut.tooltipContent,children:[t.jsx(J,{level:6,children:$t.maxConnections.tooltipHeader}),t.jsx("div",{className:Ut.tooltipBody,children:$t.maxConnections.tooltipBody}),t.jsx(M,{openInNewTab:!0,href:aC,children:$t.maxConnections.tooltipLink})]}))}),YP=()=>{var a,o;const{trigger:e,formState:{isValid:s,errors:n}}=kt();m.useEffect(()=>{e("autoscaling")},[e,s]);const r=(o=(a=n.autoscaling)==null?void 0:a.min)==null?void 0:o.message;return t.jsxs(t.Fragment,{children:[!s&&n.autoscaling?t.jsx(P,{appearance:"warning",children:$t.autoscaling.warning}):null,r?t.jsx(P,{appearance:"error",children:r}):null]})},JY=()=>{const{control:e}=kt(),s=_v(),n=m.useMemo(()=>(s?ui.filter(a=>a<=s):ui).map(a=>({value:a,label:M1(a)})),[s]);return t.jsxs(t.Fragment,{children:[t.jsx("span",{children:$t.largeScaling.hint}),t.jsx(ye,{name:"largeProvisioned",control:e,render:({field:r})=>t.jsxs(t.Fragment,{children:[t.jsx(lt,{...r,options:n,"aria-label":$t.largeScaling.selectLabel}),t.jsx(bv,{autoscalingRange:{min:r.value,max:r.value}})]})})]})},ZY=()=>{const{control:e,watch:s}=kt(),n=ug(),r=m.useMemo(()=>(n?Zr.filter(o=>o<=n):Zr).map(o=>({value:o,label:nL(o)})),[n]);return t.jsxs("div",{className:Ut.selectsWrap,children:[t.jsx("span",{children:$t.autoscaling.hint}),t.jsxs("div",{className:Ut.selects,children:[t.jsx(ye,{name:"autoscaling.min",control:e,render:({field:a})=>t.jsx(B,{className:Ut.select,label:$t.autoscaling.fromTitle,children:t.jsxs("div",{className:Ut.selectInput,children:[t.jsx(lt,{...a,options:r,disabled:a.disabled||!n,"aria-label":$t.autoscaling.minSelectLabel}),t.jsx("span",{className:Ut.cu,children:$n(a.value)})]})})}),t.jsx(ye,{name:"autoscaling.max",control:e,render:({field:a})=>t.jsx(B,{className:Ut.select,label:$t.autoscaling.toTitle,children:t.jsxs("div",{className:Ut.selectInput,children:[t.jsx(lt,{...a,options:r,"aria-label":$t.autoscaling.maxSelectLabel}),t.jsx("span",{className:Ut.cu,children:$n(a.value)})]})})})]}),t.jsx(YP,{}),t.jsx(bv,{autoscalingRange:s("autoscaling")})]})},n0=({value:e,title:s})=>t.jsxs("div",{className:Ut.value,children:[t.jsx("span",{className:Ut.title,children:s}),t.jsx("span",{className:Ut.cu,"data-qa":"autoscaling-slider-value",children:$n(e)})]}),XY=()=>{const e=kt();return t.jsx(ye,{name:"largeProvisionedEnabled",control:e.control,render:({field:s})=>t.jsxs(Fu,{children:[t.jsx(gr,{active:!s.value,onClick:()=>s.onChange(!1),children:$t.largeScaling.scaleButton}),t.jsxs(gr,{active:s.value,onClick:()=>s.onChange(!0),disabled:s.disabled,className:Ut.toggleButton,children:[$t.largeScaling.largeProvisionedButton," ",t.jsx(Ne,{appearance:"experimental",size:"m",children:"Beta"})]})]})})},eJ=()=>{const{control:e}=kt(),s=ug();return t.jsx(ye,{name:"autoscaling",control:e,render:({field:n})=>t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:Ut.withHint,children:[t.jsx("span",{children:$t.autoscaling.hint}),t.jsx(QP,{value:n.value,onChange:n.onChange,maxValue:s??Zr[Zr.length-1],disabled:!s,scale:Zr})]}),t.jsxs("div",{className:Ut.values,children:[t.jsx(n0,{value:n.value.min,title:$t.autoscaling.fromTitle}),t.jsx(n0,{value:n.value.max,title:$t.autoscaling.toTitle})]}),t.jsx(YP,{}),t.jsx(bv,{autoscalingRange:n.value})]})})},r0=()=>{const e=ug();return!e||e<=sL?t.jsx(eJ,{}):t.jsx(ZY,{})},tJ=({upgradeable:e,warning:s})=>{const n=_v(),[r,a]=m.useState(!1),o=n&&ui.some(l=>l<=n),c=kt().watch("largeProvisionedEnabled");return t.jsxs("div",{className:Ut.root,children:[t.jsxs("div",{className:Ut.header,children:[t.jsx(J,{level:3,size:"h4",children:o?$t.headers.computeSize:$t.headers.autoscaling}),e?t.jsx(M,{onClick:()=>a(!0),children:$t.upgradeForMore}):null,t.jsx(Pt,{type:dt.ComputeSizeLimitReached,isOpen:r,onRequestClose:()=>a(!1)})]}),s,o?t.jsxs("div",{className:Ut.withHint,children:[t.jsx(XY,{}),c?t.jsx(JY,{}):t.jsx(r0,{})]}):t.jsx(r0,{})]})},sJ={value:Math.floor(oC/hr[Xr.Minutes]),unit:Xr.Minutes},a0=[{label:"Seconds",value:Xr.Seconds},{label:"Minutes",value:Xr.Minutes},{label:"Hours",value:Xr.Hours},{label:"Days",value:Xr.Days}];function JP(e){if(!e||e<0)return sJ;const{highestValue:s,highestUnit:n}=Rm(e);return{value:s,unit:n}}function nJ(e){return e.value*hr[e.unit]}const $s={header:"Scale to zero",enable:"Scale to zero after",enableV2:`Scale to zero after ${zu(oC)} of inactivity`,never:"Never",coldStart:"Compute activation takes only a few hundred milliseconds.",alwaysActive:"The compute remains active at all times. It will only be restarted for scheduled updates.",unitLabel:"Scale to zero time unit",timeoutLabel:"Scale to zero timeout",autosuspendDisabled:e=>t.jsxs(t.Fragment,{children:["Scales to zero after ",t.jsx("strong",{children:"5 minutes"})," of inactivity."," ",e," to configure this setting."]}),autosuspendDisabledV2:t.jsxs(t.Fragment,{children:["Scales to zero after ",t.jsx("strong",{children:"5 minutes"})," of inactivity."]}),upgradeLinkText:"Upgrade your plan"},rJ="_root_2ai5k_1",aJ="_elements_2ai5k_7",oJ="_inputs_2ai5k_13",iJ="_valueInput_2ai5k_18",cJ="_unitInput_2ai5k_22",id={root:rJ,elements:aJ,inputs:oJ,valueInput:iJ,unitInput:cJ},lJ=()=>{var a,o;const{trigger:e,formState:{isValid:s,errors:n}}=kt();m.useEffect(()=>{e("autosuspend")},[e,s]);const r=(o=(a=n.autosuspend)==null?void 0:a.value)==null?void 0:o.message;return t.jsx(t.Fragment,{children:r?t.jsx(P,{appearance:"error",children:r}):null})},dJ=()=>{const{control:e,watch:s,trigger:n}=kt(),{trackUiInteraction:r}=k(),{subscriptionType:a}=fe(),o=no("edit_suspend_timeout"),i=le("disallow_autosuspend_timeout_customization"),{limits:c}=Et(),l=KP(c==null?void 0:c.min_autosuspend_seconds),[d,u]=m.useState(!1),p=s("autosuspend"),h=!i||a==="direct_sales"||p.enabled&&!(p.value===5&&p.unit==="minutes"),[g,f]=m.useState(h);return!g&&h&&f(!0),t.jsxs("div",{className:id.root,children:[t.jsx(J,{level:3,size:"h4",children:$s.header}),o?t.jsxs("div",{className:id.elements,children:[t.jsx(ye,{name:"autosuspend.enabled",control:e,render:({field:_})=>t.jsx(_s,{isSelected:_.value,isDisabled:_.disabled,onChange:b=>{r(b?"compute_drawer_autosuspend_enabled":"compute_drawer_autosuspend_disabled"),_.onChange(b),n("autosuspend")},"aria-label":g?$s.enable:$s.enableV2,children:g?$s.enable:$s.enableV2})}),p.enabled?t.jsxs(t.Fragment,{children:[g&&t.jsxs("div",{className:id.inputs,children:[t.jsx(ye,{name:"autosuspend.value",control:e,render:({field:_,fieldState:b})=>t.jsx(B,{error:!!b.error,"aria-label":$s.timeoutLabel,children:t.jsx(ce,{..._,onChange:x=>_.onChange(Number(x.target.value)),type:"number",className:id.valueInput})})}),t.jsx(ye,{name:"autosuspend.unit",control:e,render:({field:_,fieldState:b})=>t.jsx(B,{error:!!b.error,"aria-label":$s.unitLabel,children:t.jsx(lt,{..._,options:_.value!=="seconds"&&l>=60?a0.filter(({value:x})=>x!=="seconds"):a0,"aria-label":$s.unitLabel,className:id.unitInput})})})]}),t.jsx(lJ,{}),t.jsx(Gc,{icon:"info",children:$s.coldStart})]}):t.jsx(Gc,{icon:"lightning",children:$s.alwaysActive})]}):t.jsxs(Gc,{icon:"pause",children:[i?$s.autosuspendDisabledV2:$s.autosuspendDisabled(t.jsx(M,{onClick:()=>u(!0),children:$s.upgradeLinkText})),t.jsx(Pt,{type:dt.ComputeSizeLimitReached,isOpen:d,onRequestClose:()=>u(!1)})]})]})},Ss={createTitle:e=>{switch(e){case"read_only":return"Add read replica";case"read_write":return"Add primary compute"}},editTitle:e=>{switch(e){case"read_only":return"Edit read replica";case"read_write":return"Edit primary compute"}},buttons:{save:"Save",add:"Add",delete:"Delete",cancel:"Cancel",addButtonLimitMessage:"You reached the limit of computes."},loadingBranchWarning:"Please wait for a branch to load...",protectedBranchWarning:"You can't delete computes on protected branches. Unprotect this branch and try again.",vercelWarning:"Deleting the read-write compute on the root branch is not available for Vercel-managed projects.",autoscalingWarning:"Changing compute size settings will briefly interrupt database connections."},uJ="_wrapper_1bf1f_1",hJ="_form_1bf1f_7",pJ="_divider_1bf1f_11",mJ="_addSaveCancel_1bf1f_18",gJ="_buttons_1bf1f_23",lr={wrapper:uJ,form:hJ,divider:pJ,addSaveCancel:mJ,buttons:gJ},Hh={errors:{minBiggerThanMax:"Minimum value should be less or equal to maximum value",suspendTimeToLow:({min:e})=>`The minimum setting is ${$j(e)}.`,suspendTimeToHigh:({max:e})=>`The maximum setting is ${$j(e)}.`,suspendTimeEmpty:"Auto suspend timeout can not be empty."}},fJ=e=>Up({largeProvisionedEnabled:el().optional(),autoscaling:Up({min:en(),max:en()}).refine(({min:s,max:n})=>s<=n,{message:Hh.errors.minBiggerThanMax,path:["min"]}).refine(s=>nC(s)),largeProvisioned:en(),autosuspend:Up({enabled:el(),value:en().gt(0,Hh.errors.suspendTimeEmpty),unit:SI([Fd("seconds"),Fd("minutes"),Fd("hours"),Fd("days")])}).refine(({enabled:s,value:n,unit:r})=>s?n>=Math.ceil(e/hr[r]):!0,()=>({path:["value"],message:Hh.errors.suspendTimeToLow({min:e})})).refine(({enabled:s,value:n,unit:r})=>s?n<=Math.floor(Rj/hr[r]):!0,()=>({path:["value"],message:Hh.errors.suspendTimeToHigh({max:Rj})})),name:at().max(64).min(1).optional()}),ZP=(e,s)=>s?e.autosuspend.enabled?{suspend_timeout_seconds:nJ({...e.autosuspend,unit:e.autosuspend.unit})}:{suspend_timeout_seconds:-1}:{},XP=e=>e.largeProvisionedEnabled?{autoscaling_limit_min_cu:e.largeProvisioned,autoscaling_limit_max_cu:e.largeProvisioned}:{autoscaling_limit_min_cu:e.autoscaling.min,autoscaling_limit_max_cu:e.autoscaling.max},_J=(e,s)=>{const n=iC(s);return{provisioner:e.provisioner!==n?n:void 0}},eN=e=>e.name!=null?{name:e.name}:null,bJ=(e,s,n)=>{const{trackUiInteraction:r}=k(),{getRegion:a}=oo(),o=no("edit_suspend_timeout"),i=cx({projectId:s.project_id},{onSuccess:n});return m.useCallback(c=>{r("compute_drawer_save_clicked"),i.mutate({endpointId:s.id,request:{endpoint:{..._J(s,a(e.platform_id,e.region_id)),...XP(c),...ZP(c,o),...eN(c)}}})},[a,e.platform_id,e.region_id,r,i,s,o])},xJ=(e,s,n)=>{var d;const{trackUiInteraction:r}=k(),{getRegion:a}=oo(),o=Hs({projectId:e.id,branchId:s}),i=no("edit_suspend_timeout"),c=rL({projectId:e.id},{onSuccess:n}),l=(d=o.data)!=null&&d.endpoints.some(_r)?"read_only":"read_write";return m.useCallback(u=>{r("compute_drawer_create_clicked"),c.mutate({request:{endpoint:{branch_id:s,type:l,provisioner:iC(a(e.platform_id,e.region_id)),...XP(u),...ZP(u,i),...eN(u)}}})},[r,c,e.platform_id,e.region_id,s,l,a,i])},tN=(e,s)=>{const{trackUiInteraction:n}=k(),r=cC(),a=lC({projectId:e.project_id},{onSuccess:s});return m.useCallback(async()=>{n("compute_drawer_delete_clicked"),await r(e)&&a.mutate({endpointId:e.id})},[r,a,e,n])},vJ=(e,s)=>({largeProvisionedEnabled:ui.includes(e.autoscaling_limit_min_cu),autoscaling:{min:Zr.includes(e.autoscaling_limit_min_cu)?e.autoscaling_limit_min_cu:Zr[0],max:Zr.includes(e.autoscaling_limit_max_cu)?e.autoscaling_limit_max_cu:Zr[0]},largeProvisioned:ui.includes(e.autoscaling_limit_min_cu)?e.autoscaling_limit_min_cu:ui[0],autosuspend:{enabled:s?e.suspend_timeout_seconds!==-1:!1,...JP(e.suspend_timeout_seconds)},name:e.name}),jJ=e=>{const s=no("edit_suspend_timeout"),{subscriptionType:n}=fe(),r=le("disallow_autosuspend_timeout_customization"),a=ug(),o=_v(),i=e.default_endpoint_settings,c=(i==null?void 0:i.autoscaling_limit_min_cu)??0,l=(i==null?void 0:i.autoscaling_limit_max_cu)??0,d=c===l?c:0,u=o?qc(d,ui[0],o):d,p=r&&n!=="direct_sales"?0:(i==null?void 0:i.suspend_timeout_seconds)??0;return{autoscaling:{min:a?qc(c,Bj,a):c,max:a?qc(l,Bj,a):l},largeProvisioned:u,largeProvisionedEnabled:u===d,autosuspend:{enabled:s&&p>=0,...JP(p)}}},sN=e=>{const{limits:s}=Et(),n=KP(s==null?void 0:s.min_autosuspend_seconds),r=Ae({defaultValues:e,resolver:Pi(fJ(n))}),{trigger:a}=r;return m.useEffect(()=>{a()},[a]),r},yJ=({children:e,onCancel:s,onRequestClose:n,...r})=>{var u,p;const{trackUiInteraction:a}=k(),o=sN(jJ(r.project)),i=Et(),c=cn({projectId:r.project.id}),l=i.isLoading?null:((u=i.limits)==null?void 0:u.max_read_only_endpoints)??-1;m.useEffect(()=>{var x;const h=((x=c.data)==null?void 0:x.endpoints)??[],g=h.filter(v=>v.branch_id===r.branchId),f=l===null||c.isLoading||h.filter(aL).length>=(l===-1?1/0:l),_=c.isLoading||g.some(_r),b=r.endpointType==="read_only"?f:_;b&&!o.formState.errors.root?o.setError("root",{type:"disabled",message:Ss.buttons.addButtonLimitMessage}):!b&&o.formState.errors.root&&o.clearErrors("root")},[o,l,c.data,c.isLoading,r.branchId,r.endpointType]);const d=xJ(r.project,r.branchId,n);return t.jsx(es,{...o,children:t.jsx("form",{onSubmit:o.handleSubmit(d),className:lr.form,children:t.jsx(da,{title:Ss.createTitle(r.endpointType),alwaysShowScrollbar:!0,footer:t.jsxs("div",{className:lr.addSaveCancel,children:[t.jsx(A,{appearance:"secondary",onClick:()=>{a("compute_drawer_create_form_cancelled"),s()},children:Ss.buttons.cancel}),t.jsx(ne,{content:((p=o.formState.errors.root)==null?void 0:p.message)??"-",disabled:!o.formState.errors.root,children:t.jsx("div",{children:t.jsx(Ie,{children:Ss.buttons.add})})})]}),children:t.jsxs("div",{className:lr.wrapper,children:[t.jsxs(B,{id:"endpoint_name",children:[t.jsx(Bm,{children:"Name"}),t.jsx(ce,{placeholder:"Name your compute (Optional)",...o.register("name",{setValueAs:h=>h||void 0})})]}),t.jsx("div",{className:lr.divider}),e]})})})})},wJ=({children:e,onCancel:s,onRequestClose:n,...r})=>{const{trackUiInteraction:a}=k(),o=no("edit_suspend_timeout"),i=sN(vJ(r.endpoint,o)),c=bJ(r.project,r.endpoint,()=>{n(),pe("Endpoint is updated successfully!")}),l=tN(r.endpoint,n),{branchesById:d}=xt(),u=d[r.endpoint.branch_id],{isVercelOrg:p}=ae(),h=u?u.protected?Ss.protectedBranchWarning:p&&r.endpoint.type==="read_write"&&!u.parent_id?Ss.vercelWarning:void 0:Ss.loadingBranchWarning;return t.jsx(es,{...i,children:t.jsx("form",{onSubmit:i.handleSubmit(c),className:lr.form,children:t.jsx(da,{title:Ss.editTitle(r.endpoint.type),alwaysShowScrollbar:!0,footer:t.jsxs("div",{className:lr.buttons,children:[t.jsx(ne,{content:h,disabled:!h,children:t.jsx("div",{children:t.jsx(A,{appearance:"danger",onClick:l,disabled:!!h,children:Ss.buttons.delete})})}),t.jsxs("div",{className:lr.addSaveCancel,children:[t.jsx(A,{appearance:"secondary",onClick:()=>{a("compute_drawer_edit_form_cancelled"),s()},children:Ss.buttons.cancel}),t.jsx(Ie,{children:Ss.buttons.save})]})]}),children:t.jsxs("div",{className:lr.wrapper,children:[t.jsxs(B,{id:"endpoint_name",children:[t.jsx(Bm,{children:"Name"}),t.jsx(ce,{...i.register("name",{setValueAs:g=>g||void 0}),placeholder:r.endpoint.id})]}),t.jsx("div",{className:lr.divider}),e]})})})})},uo=({isOpen:e=!1,drawerZIndex:s,onRequestClose:n,...r})=>{var c;const{trackUiInteraction:a}=k();m.useEffect(()=>{e&&a("compute_drawer_shown")},[e,a]);const o=r.mode==="edit"?t.jsx(X,{appearance:"warning",children:Ss.autoscalingWarning}):null,i=t.jsxs(t.Fragment,{children:[t.jsx(tJ,{upgradeable:["launch","free_v2"].includes((c=r.project.owner)==null?void 0:c.subscription_type),warning:o}),t.jsx("div",{className:lr.divider}),t.jsx(dJ,{})]});return t.jsx(la,{isOpen:e,"aria-label":r.mode==="create"?Ss.createTitle(r.endpointType):Ss.editTitle(r.endpoint.type),onRequestClose:n,size:"m",zIndex:s,children:r.mode==="create"?t.jsx(yJ,{...r,onCancel:n,onRequestClose:n,children:i}):t.jsx(wJ,{...r,onCancel:n,onRequestClose:n,children:i})})},SJ="_alertContainer_x3tvp_1",CJ="_alertTitle_x3tvp_7",IJ="_alertIcon_x3tvp_11",kJ="_subDescription_x3tvp_16",TJ="_solution_x3tvp_20",ko={alertContainer:SJ,alertTitle:CJ,alertIcon:IJ,subDescription:kJ,solution:TJ},o0={upgrade_plan:"Upgrade",upgrade_cu:"Edit compute"},PJ=({content:e})=>{const s=nt(),{selectedNotificationItem:n}=bl(Yt.selector),r=Dn(),{trackUiInteraction:a}=k(),{billingUrl:o}=to(),i=()=>{r(Yt.actions.setShowModal(!1))},c=()=>{a("monitoring_alerts_notification_upgrade_clicked"),i(),r(Yt.actions.setShowUpgradePlanModal(!0))},l=h=>{a("monitoring_alerts_notification_edit_compute_clicked"),i(),r(Yt.actions.setIsEndpointEditFormOpened(h))};m.useEffect(()=>()=>{r(Yt.actions.setShowModal(!1))},[r]);const d=m.useCallback(()=>{s.push(`${o}#usage`)},[s,o]),u=n&&n.action==="upgrade_cu"?o0.upgrade_cu:o0.upgrade_plan,p=e.action&&n&&(e==null?void 0:e.action[n.action]);return n?t.jsxs(t.Fragment,{children:[t.jsxs(qe,{children:[t.jsxs("div",{className:ko.alertContainer,children:[t.jsx(q,{name:"info_italic",size:16,className:ko.alertIcon}),t.jsx(J,{level:2,size:"h5",className:ko.alertTitle,children:e.alertTitle})]}),t.jsx("p",{children:e.alertDescription(n==null?void 0:n.value)}),e.alertSubDescription&&t.jsx("p",{className:ko.subDescription,children:e.alertSubDescription(n.value)}),e.action&&t.jsx("p",{className:ko.subDescription,children:p}),e.tipsTitle&&e.tips&&t.jsxs("div",{className:ko.solution,children:[t.jsx(J,{level:2,size:"h5",className:ko.alertTitle,children:e.tipsTitle}),e.tips&&t.jsx("ol",{children:e.tips.map(h=>t.jsx("li",{children:h},h))})]})]}),t.jsxs(Ee,{children:[t.jsx(A,{appearance:"secondary",size:"l",onClick:()=>{i(),d()},children:"Review Usage"}),t.jsx(A,{appearance:"primary",size:"l",onClick:()=>{n&&(n.action==="upgrade_plan"?c():l(!0))},children:u})]})]}):null},NJ={connections:[{modalTile:()=>"You're approaching your connection limit",alertTitle:"Alert details",alertDescription:()=>"You are nearing the maximum limit of 112 concurrent connections provided by your Free Plan .25 vCPU compute size.",alertSubDescription:()=>"Upgrade to a paid plan to get more connections.",plans:["free_v2"]},{modalTile:()=>"You're approaching your connection limit",alertTitle:"Alert details",alertDescription:()=>"You are nearing the maximum limit of concurrent connections for your current compute.",action:{upgrade_plan:"Upgrade your plan to get more connections.",upgrade_cu:"Edit your compute endpoint to a larger size to get more connections."},plans:["launch"]},{modalTile:()=>"You're approaching your connection limit",alertTitle:"Alert details",alertDescription:()=>"You are nearing the maximum limit of concurrent connections for your current compute.",action:{upgrade_plan:"Contact Sales to ask about upgrading your plan.",upgrade_cu:"Edit your compute endpoint to a larger size to get more connections."},plans:["scale"]}],ram:[{modalTile:()=>"Upgrade to address possible performance issues",alertTitle:"Alert details",alertDescription:()=>"You're close to your RAM limit",alertSubDescription:()=>"You're close to reaching the maximum RAM usage for your plan. Upgrade to a paid plan to increase your compute.",tipsTitle:"Sizing Tips",tips:["Check your RAM usage on the Monitoring dashboard","For best performance, try to fit frequently accessed data in RAM","Upgrade to a paid plan for larger compute sizes with more RAM"],plans:["free_v2"]},{modalTile:()=>"Increase compute to address possible performance issues",alertTitle:"Alert details",alertDescription:()=>"You're close to your RAM limit",alertSubDescription:()=>"You're close to reaching the maximum RAM allotted by your compute. Avoid performance issues by increasing your compute size.",tipsTitle:"Sizing Tips",tips:["Check your RAM usage on the Monitoring dashboard","For best performance, try to fit frequently accessed data in RAM","Upgrade your plan for larger compute sizes with more RAM"],action:{upgrade_plan:"Upgrade your plan to get more RAM.",upgrade_cu:"Edit your compute endpoint to a larger size to get more RAM."},plans:["launch"]},{modalTile:()=>"Upgrade your plan to get more compute",alertTitle:"Alert details",alertDescription:()=>"You're close to the max RAM for your plan",alertSubDescription:()=>"You're close to reaching the maximum RAM usage for your plan. Avoid performance issues by upgrading your plan and increasing your compute size.",tipsTitle:"Sizing Tips",tips:["Check your RAM usage on the Monitoring dashboard","For best performance, try to fit frequently accessed data in RAM"],action:{upgrade_plan:"Contact Sales to ask about upgrading your plan.",upgrade_cu:"Edit your compute endpoint to a larger size to get more RAM."},plans:["scale"]}],cpu:[{modalTile:()=>"Upgrade to address possible performance issues",alertTitle:"Alert details",alertDescription:()=>"You're close to your CU limit",alertSubDescription:()=>"You're close to reaching the maximum CU usage for your plan. Upgrade to a paid plan to increase your compute.",tipsTitle:"Sizing Tips",tips:["Check your CPU usage on the Monitoring dashboard","Upgrade your plan to get more compute"],plans:["free_v2"]},{modalTile:()=>"Increase compute to address possible performance issues",alertTitle:"Alert details",alertDescription:()=>"You're close to your CU limit",alertSubDescription:()=>"You're close to reaching the max CU allotted by your compute. Avoid performance issues by increasing your compute size.",tipsTitle:"Sizing Tips",tips:["Check your CPU usage on the Monitoring dashboard","Enable autoscaling to automatically adjust compute size based on load","Upgrade your plan to get more compute"],action:{upgrade_plan:"Upgrade your plan to get more CU.",upgrade_cu:"Edit your compute endpoint to get more CU."},plans:["launch"]},{modalTile:()=>"Upgrade your plan to get more compute",alertTitle:"Alert details",alertDescription:()=>"You're close to the max CU for your plan",alertSubDescription:()=>"You're close to reaching the maximum CU usage for your plan. Avoid performance issues by upgrading your plan and increasing your compute size.",tipsTitle:"Sizing Tips",tips:["Check your CPU usage on the Monitoring dashboard","Enable autoscaling to automatically adjust compute size based on load"],action:{upgrade_plan:"Contact Sales to ask about upgrading your plan.",upgrade_cu:"Edit your compute endpoint to get more CU."},plans:["scale"]}]},AJ=()=>{const{data:e}=bt(),{selectedNotificationItem:s}=bl(Yt.selector);return m.useMemo(()=>{if(!s||e===void 0)return;const n=NJ[s.metric];return n==null?void 0:n.find(r=>r.plans.includes(e.plan))},[e,s])},EJ=()=>{var g,f;const{showModal:e,showUpgradePlanModal:s,isEndpointEditFormOpened:n,selectedNotificationItem:r}=bl(Yt.selector),a=Dn(),{project:o,projectId:i}=F(),{data:c}=cl.useGetNotificationsQuery({projectId:i}),l=cn({projectId:i}),d=AJ(),u=()=>{a(Yt.actions.setShowUpgradePlanModal(!1))},p=_=>{a(Yt.actions.setIsEndpointEditFormOpened(_))},h=c?(f=(g=l.data)==null?void 0:g.endpoints)==null?void 0:f.find(_=>_.id===c.endpointId):void 0;return!r||!d||!c||!o?null:t.jsxs(t.Fragment,{children:[t.jsx(It,{width:800,isOpen:e,onRequestClose:()=>{a(Yt.actions.setShowModal(!1))},title:d.modalTile(r.value),children:t.jsx(PJ,{content:d})}),s&&t.jsx(Pt,{type:dt.Default,isOpen:s,onRequestClose:()=>{u()}}),n&&h&&t.jsx(uo,{isOpen:!0,mode:"edit",project:o,endpoint:h,onRequestClose:()=>p(!1)})]})},OJ="_menu_m4x1n_1",LJ={menu:OJ},$J=()=>{const{isOpen:e}=bl(Yt.selector),s=Dn(),{unreadCount:n,announcements:r}=rY(),a=m.useRef(null),o=()=>{s(Yt.actions.setIsOpen(!1))};return t.jsxs(t.Fragment,{children:[t.jsxs("div",{ref:a,children:[t.jsx(pY,{unreadAnnouncementsCount:n}),t.jsx(EJ,{})]}),t.jsx(Om,{triggerRef:a,isOpen:e,placement:"bottom right",className:LJ.menu,onOpenChange:o,children:t.jsx(OY,{announcements:r})})]})},RJ=()=>{const{pathname:e}=k1(),{projectId:s}=xl(),n=le("growth_monitoring_alerts"),r=e.startsWith(`/projects/${s}`);return!n||!r?null:t.jsx($J,{})},i0={OK:{tooltip:"All Systems Operational",badge:"All ok"},INCIDENTS:{tooltip:"There are ongoing incidents",badge:"Incidents"},INCIDENT:{tooltip:"There is an ongoing incident",badge:"Incident"},MAINTENANCE:{tooltip:"Scheduled maintenance going on",badge:"Maintenance"}},BJ="_container_y8x8c_1",MJ="_dot_y8x8c_7",DJ="_ok_y8x8c_13",UJ="_incidents_y8x8c_17",FJ="_maintenance_y8x8c_21",cd={container:BJ,dot:MJ,ok:DJ,incidents:UJ,maintenance:FJ},zJ=({status:e})=>t.jsx(ne,{content:i0[e].tooltip,children:t.jsx("a",{href:oL,target:"_blank",rel:"noreferrer",children:t.jsx(Ne,{children:t.jsxs("div",{className:cd.container,children:[t.jsx("p",{"data-qa":"system-status-text",className:V(cd.dot,{[cd.incidents]:e==="INCIDENTS"||e==="INCIDENT",[cd.maintenance]:e==="MAINTENANCE",[cd.ok]:e==="OK"})}),i0[e].badge]})})})}),qJ=zt({page_title:at(),page_url:at(),ongoing_incidents:mi(Fp()),in_progress_maintenances:mi(Fp()),scheduled_maintenances:mi(Fp())}),HJ=zt({subpage:at(),summary:qJ}),VJ=zt({subpages:mi(HJ)}),Tf={FETCH_ERROR:"Failed to fetch status",PARSE_ERROR:"Invalid data received from status API",UNKNOWN_ERROR:"An unknown error occurred while fetching status"},WJ=e=>{const{subpages:s}=e,n=MU(s,a=>a.summary.ongoing_incidents.length),r=s.some(a=>a.summary.in_progress_maintenances.length>0);return n>1?"INCIDENTS":n===1?"INCIDENT":r?"MAINTENANCE":"OK"},GJ=async()=>{try{const e=await fetch(iL);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const s=await e.json(),n=VJ.safeParse(s);if(!n.success)throw new rb(n.error.errors);return WJ(n.data)}catch(e){throw e instanceof rb?new Error(`${Tf.PARSE_ERROR}: ${e.message}`):e instanceof Error?new Error(`${Tf.FETCH_ERROR}: ${e.message}`):new Error(Tf.UNKNOWN_ERROR)}},KJ=()=>{const{data:e,error:s}=_t({queryKey:["system-status"],queryFn:GJ,staleTime:3e5});return m.useEffect(()=>{s&&xi(s)},[s]),e?t.jsx(zJ,{"data-qa":"system-status-badge",status:e}):null},QJ="_header_u9hf1_1",YJ="_header_compact_u9hf1_12",JJ="_quickNav_u9hf1_20",Pf={header:QJ,header_compact:YJ,quickNav:JJ},ym=m.memo(({projectId:e,isError:s})=>t.jsxs(t.Fragment,{children:[!s&&t.jsx(r7,{}),t.jsxs("div",{className:V(Pf.header,{[Pf.header_compact]:!1}),children:[s?t.jsx("div",{}):t.jsx(bT,{projectId:e}),t.jsxs("div",{className:Pf.quickNav,children:[t.jsxs(t.Fragment,{children:[t.jsx(KJ,{}),t.jsx(RJ,{}),t.jsx($Q,{}),t.jsx(UQ,{})]}),t.jsx(n7,{})]})]}),!s&&t.jsx(DQ,{})]}));ym.displayName="LayoutHeader";const nN=m.memo(()=>{const{projectId:e,project:s,isLoading:n,error:r}=F();return t.jsx(ym,{projectId:e,isError:!n&&!s||!!r})});nN.displayName="ProjectHeader";const hg=()=>null,qb="branchId",ZJ=()=>Ni(qb),xv=(e,{projectId:s,branchId:n,queryString:r})=>{const a=new URLSearchParams(r);n&&(e.includes(":branchId")?a.delete(qb):a.set(qb,n));const o=a.size>0?`?${a.toString()}`:"";return`${G(e,{projectId:s,branchId:n})}${o}`},XJ="_root_3tpbz_1",eZ="_trigger_3tpbz_18",tZ="_selectedValue_3tpbz_30",sZ="_dropdownIcon_3tpbz_41",nZ="_dropdownIcon_hidden_3tpbz_47",rZ="_popover_3tpbz_52",aZ="_searchInput_3tpbz_64",oZ="_list_3tpbz_73",iZ="_section_3tpbz_81",cZ="_item_3tpbz_94",lZ="_label_3tpbz_122",dZ="_check_3tpbz_128",Ks={root:XJ,trigger:eZ,selectedValue:tZ,dropdownIcon:sZ,dropdownIcon_hidden:nZ,popover:rZ,searchInput:aZ,list:oZ,section:iZ,item:cZ,label:lZ,check:dZ},uZ=({iconName:e,sections:s,selectedId:n,isLoading:r,tooltip:a,"data-qa":o,"aria-label":i,searchAriaLabel:c,searchPlaceholder:l,openEvent:d,selectEvent:u,onSelect:p})=>{const{trackUiInteraction:h}=k(),{isCollapsed:g}=cR(),{contains:f}=T1({sensitivity:"base"});return t.jsx(ne,{content:a,placement:"right",delay:100,disabled:!g,children:t.jsxs(cL,{"aria-label":i,className:Ks.root,selectedKey:n,placeholder:r?"":void 0,"data-qa":o,isDisabled:r,onOpenChange:_=>{_&&d&&h(d)},onSelectionChange:_=>{_&&u&&h(u),p==null||p(_)},children:[t.jsxs($u,{className:Ks.trigger,children:[t.jsx(q,{size:16,name:e}),t.jsx(lL,{className:Ks.selectedValue}),t.jsx(q,{size:16,name:"select",className:V(Ks.dropdownIcon,{[Ks.dropdownIcon_hidden]:g})})]}),t.jsx(Om,{className:Ks.popover,children:t.jsxs(P1,{filter:f,children:[t.jsx(N1,{autoFocus:!0,"aria-label":c,children:t.jsx(ox,{placeholder:l,className:Ks.searchInput})}),!r&&t.jsx(dL,{className:Ks.list,children:s.map(_=>t.jsxs(uL,{className:Ks.section,children:[t.jsx(A1,{children:_.title}),t.jsx(ax,{items:_.items,children:b=>t.jsx(hL,{id:b.id,textValue:b.label,className:Ks.item,href:b.href,children:({isSelected:x})=>t.jsxs(t.Fragment,{children:[t.jsx(E1,{slot:"label",className:Ks.label,children:b.label}),x&&t.jsx(q,{name:"check",size:16,className:Ks.check})]})},b.id)})]}))})]})})]})})},hZ=()=>{const{branch:e,setBranch:s}=Tt(),{branches:n,branchesById:r}=xt(),{params:a,path:o}=fl(),i=!!a.branchId,c=m.useMemo(()=>[{title:"Branches",items:n.map(l=>({id:l.id,label:l.name,href:i?G(o,{...a,branchId:l.id}):void 0}))}],[n,i,o,a]);return t.jsx(uZ,{sections:c,selectedId:e==null?void 0:e.id,tooltip:e?`Branch: ${e.name}`:"Branch",iconName:"branch","aria-label":"Branch",searchAriaLabel:"Search branches",searchPlaceholder:"Search for a branch...",openEvent:"global_nav_branch_menu_open",selectEvent:"global_nav_branch_menu_change",onSelect:l=>{if(!l||i)return;const d=r[l];d&&s(d)}})},Gp="database",El=()=>Ni(Gp),rN=(e,s,n)=>{if(!e||!s)return;let r="";if(n.has(Gp)){const a=new URLSearchParams;a.set(Gp,n.get(Gp)),r=`?${a.toString()}`}return`${G(C.ProjectsItemDrizzle,{projectId:e,branchId:s})}${r}`};function Xu(e,s){return s.map(n=>({...n,analyticsEvent:void 0,onClick:r=>{var a;e(n.analyticsEvent),(a=n.onClick)==null||a.call(n,r)}}))}function pZ(){const{trackUiInteraction:e}=k();return m.useMemo(()=>({label:"Account",items:Xu(e,[{title:"Projects",icon:"project",href:C.ProjectsList,analyticsEvent:"global_nav_projects_list_clicked"},{title:"Billing",icon:"billing",href:C.UserBilling,analyticsEvent:"global_nav_billing_clicked"},{title:"Integrations",icon:"integrations",href:C.UserIntegrations,analyticsEvent:"global_nav_integrations_clicked"},{title:"Settings",icon:"settings",href:C.UserSettings,analyticsEvent:"global_nav_account_settings_clicked"}])}),[e])}function mZ(){const{trackUiInteraction:e}=k(),{orgId:s,isVercelOrg:n}=ae();return m.useMemo(()=>s&&{label:"Organization",items:Xu(e,ot([{title:"Projects",icon:"project",exact:!0,href:G(C.OrgProjectsList,{orgId:s}),analyticsEvent:"global_nav_org_projects_list_clicked"},{title:"People",icon:"team",href:G(C.OrgPeople,{orgId:s}),analyticsEvent:"global_nav_org_members_clicked"},{title:"Billing",icon:"billing",exact:!0,href:G(C.OrgBilling,{orgId:s}),analyticsEvent:"global_nav_org_billing_clicked"},{title:"Integrations",icon:"integrations",href:G(C.OrgIntegrations,{orgId:s}),analyticsEvent:"global_nav_org_integrations_clicked"},{title:"Settings",icon:"settings",exact:!0,href:G(C.OrgSettings,{orgId:s}),analyticsEvent:"global_nav_org_settings_clicked"}])).filter(r=>r.title!=="Integrations"||!n)},[s,e,n])}function gZ({projectId:e,branchId:s}){const{trackUiInteraction:n}=k(),r=le("identity"),{search:a}=gl();return m.useMemo(()=>{if(e)return{label:"Project",prefix:void 0,items:Xu(n,ot([{title:"Dashboard",icon:"overview",href:xv(C.ProjectsItem,{projectId:e,branchId:s,queryString:a}),exact:!0,analyticsEvent:"project_nav_dashboard_clicked"},{title:"Branches",icon:"branch",href:G(C.ProjectsItemBranches,{projectId:e}),exact:!0,analyticsEvent:"project_nav_branches_clicked"},{title:"Integrations",icon:"integrations",href:G(C.ProjectsItemIntegrations,{projectId:e}),analyticsEvent:"project_nav_integrations_link_clicked"},r&&{title:"Auth",icon:"access",href:G(C.ProjectsItemIdentity,{projectId:e}),analyticsEvent:"project_nav_identity_link_clicked"},{title:"Settings",icon:"settings",href:G(C.ProjectsItemSettings,{projectId:e}),analyticsEvent:"project_nav_settings_clicked"}]))}},[e,n,s,a,r])}function fZ({projectId:e,branchId:s}){const{trackUiInteraction:n}=k(),r=le("disable_drizzle_studio"),a=le("snapshot_system"),o=le("data_api"),{search:i}=gl(),c=m.useMemo(()=>new URLSearchParams(i),[i]),l=m.useMemo(()=>rN(e,s,c),[e,s,c]);return m.useMemo(()=>{if(!(!e||!s))return{label:"Branch",prefix:t.jsx(hZ,{}),items:Xu(n,ot([{title:"Overview",icon:"overview",href:G(C.ProjectsItemBranchesItem,{projectId:e,branchId:c.get("branchId")??s}),analyticsEvent:"project_nav_branch_overview_clicked"},o&&{title:"Data API",icon:"endpoint",href:G(C.ProjectsItemBranchesDataAPI,{projectId:e,branchId:s}),analyticsEvent:"project_nav_data_api_clicked"},{title:"Monitoring",icon:"graph",href:G(C.ProjectsItemBranchesItemMonitoring,{projectId:e,branchId:s}),analyticsEvent:"project_nav_monitoring_clicked"},{title:"SQL Editor",icon:"editor",href:xv(C.ProjectsItemBranchesSQLEditor,{projectId:e,branchId:s,queryString:i}),analyticsEvent:"project_nav_sql_editor_clicked"},{title:"Tables",icon:"table",href:l,disabled:r,hint:r?"The Tables page was temporarily disabled. We are working on bringing it back soon.":void 0,analyticsEvent:"project_nav_drizzle_studio_clicked"},{title:a?"Backup & Restore":"Restore",icon:"restore",href:G(C.ProjectsItemBranchesRestore,{projectId:e,branchId:s}),analyticsEvent:"project_nav_restore_clicked"}]))}},[e,s,n,c,l,r,a,o,i])}function _Z({openFeedback:e}){const{trackUiInteraction:s}=k();return m.useMemo(()=>({items:Xu(s,ot([{title:"Feedback",icon:"feedback",analyticsEvent:"feedback_link_clicked",onClick:e}]))}),[s,e])}function bZ({projectId:e,branchId:s}){const n=pZ(),r=mZ(),a=gZ({projectId:e,branchId:s}),o=fZ({projectId:e,branchId:s});return m.useMemo(()=>ot([!e&&(r||n),a,o]),[e,r,n,a,o])}const xZ=()=>{var f;const{params:e}=fl(),{trackUiInteraction:s}=k(),{projectId:n}=e,r=pL(),{isModalOpen:a,openModal:o,closeModal:i}=it(st.Support),{isModalOpen:c,openModal:l,closeModal:d}=it(st.Feedback),u=bZ({projectId:n,branchId:(f=r==null?void 0:r.branch)==null?void 0:f.id}),[p,h]=nn(gt.Sidebar,"isCollapsed",!1),g=_Z({openFeedback:l});return t.jsxs(t.Fragment,{children:[c&&t.jsx(J1,{isOpen:!0,onRequestClose:()=>{s("feedback_form_dismissed"),d()},openSupport:()=>{d(),o()}}),a&&t.jsx(ao,{isOpen:!0,onRequestClose:()=>{s("support_form_dismissed"),i()}}),t.jsx(lR,{menu:u,isCollapsed:p,onCollapseStateChange:h,footer:g})]})},ll=m.memo(({isError:e=!1,showSidebarFn:s=!0,userIsOrgBased:n=!1,...r})=>{const a=typeof s=="function"?s(n):s;return t.jsx(dR,{...r,...a?{}:{contentWidth:"l"},breadcrumbs:t.jsx(hg,{}),sidebar:!e&&a&&t.jsx(xZ,{})})});ll.displayName="ConsoleLayout";const Kp=()=>t.jsx(ll,{children:t.jsx(is,{preset:404})}),aN="postgresql://{{{pgEncodedRole}}}{{#storePasswords}}{{#pgEncodedPasswordOrPlaceholder}}:{{{pgEncodedPasswordOrPlaceholder}}}{{/pgEncodedPasswordOrPlaceholder}}{{/storePasswords}}@{{#preferPooled}}{{{poolerHost}}}{{/preferPooled}}{{^preferPooled}}{{{host}}}{{/preferPooled}}/{{{pgEncodedDatabase}}}?sslmode=require&channel_binding=require",oN="Host={{#preferPooled}}{{{poolerHost}}}{{/preferPooled}}{{^preferPooled}}{{{host}}}{{/preferPooled}}; Database={{{pgEncodedDatabase}}}; Username={{{pgEncodedRole}}}; {{#storePasswords}}{{#pgEncodedPasswordOrPlaceholder}}Password={{{pgEncodedPasswordOrPlaceholder}}}; {{/pgEncodedPasswordOrPlaceholder}}{{/storePasswords}}SSL Mode=VerifyFull; Channel Binding=Require;",vZ=`# Add these at the top of your settings.py
import os
from dotenv import load_dotenv
from urllib.parse import urlparse, parse_qsl

load_dotenv()

# Replace the DATABASES section of your settings.py with this
tmpPostgres = urlparse(os.getenv("DATABASE_URL"))

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': tmpPostgres.path.replace('/', ''),
        'USER': tmpPostgres.username,
        'PASSWORD': tmpPostgres.password,
        'HOST': tmpPostgres.hostname,
        'PORT': 5432,
        'OPTIONS': dict(parse_qsl(tmpPostgres.query)),
    }
}
`,jZ="DATABASE_URL='{{> connstring}}'",yZ=`"{{> connstring_dotnet }}"
`,wZ=`{
  ...
  "ConnectionStrings": {
    "DefaultConnection": "{{> connstring_dotnet }}"
  },
  ...
}
`,SZ=`package main

import (
	"context"
	"fmt"
	"log"
	"os"

	"github.com/jackc/pgx/v5"
	"github.com/joho/godotenv"
)

func main() {
	err := godotenv.Load()
	if err != nil {
		log.Fatal("Error loading .env file")
	}
	connStr := os.Getenv("DATABASE_URL")
	conn, err := pgx.Connect(context.Background(), connStr)
	if err != nil {
		panic(err)
	}
	defer conn.Close(context.Background())
	_, err = conn.Exec(context.Background(), "CREATE TABLE IF NOT EXISTS playing_with_neon(id SERIAL PRIMARY KEY, name TEXT NOT NULL, value REAL);")
	if err != nil {
		panic(err)
	}
	_, err = conn.Exec(context.Background(), "INSERT INTO playing_with_neon(name, value) SELECT LEFT(md5(i::TEXT), 10), random() FROM generate_series(1, 10) s(i);")
	if err != nil {
		panic(err)
	}
	rows, err := conn.Query(context.Background(), "SELECT * FROM playing_with_neon")
	if err != nil {
		panic(err)
	}
	defer rows.Close()
	for rows.Next() {
		var id int32
		var name string
		var value float32
		if err := rows.Scan(&id, &name, &value); err != nil {
			panic(err)
		}
		fmt.Printf("%d | %s | %f\\n", id, name, value)
	}
}`,CZ="DATABASE_URL='{{> connstring}}'",IZ=`//Let it be table 't' with a single column 'text' of a type 'Text'. Once created, you can put some rows into it and finally navigate to the API section for endpoint creation. In the GraphQL tab, we can query our table with GraphQL, for example:

query MyQuery {
t {
text
}
}
Save this GraphQL query as an HTTP API endpoint by clicking the REST tab. Let us call the endpoint 'query_t'.

Finally, you can use this endpoint to get the table content now. For example, that is how it works from the shell:

$ curl -H 'x-hasura-admin-secret: {admin_secret}' https://{projectName}.hasura.app/api/rest/query_t
{"t":[{"text":"test"}]}
`,kZ=`jdbc:postgresql://{{#preferPooled}}{{{poolerHost}}}{{/preferPooled}}{{^preferPooled}}{{{host}}}{{/preferPooled}}/{{{pgEncodedDatabase}}}?user={{{pgEncodedRole}}}{{#storePasswords}}&password={{{pgEncodedPasswordOrPlaceholder}}}{{/storePasswords}}&sslmode=require&channelBinding=require
`,TZ=`// database.service.ts
import { neon } from '@neondatabase/serverless';
import { Injectable } from '@nestjs/common';
import { ConfigService } from '@nestjs/config';

@Injectable()
export class DatabaseService {
    private readonly sql;

    constructor(private configService: ConfigService) {
        const databaseUrl = this.configService.get('DATABASE_URL');
        this.sql = neon(databaseUrl);
    }
        async getData() {
        const data = await this.sql\`...\`;
        return data;
    }
}
`,PZ=`# keep Neon credentials secure: do not expose them to client-side code

DATABASE_URL='{{> connstring}}'
`,NZ=`// app/actions.ts
"use server";
import { neon } from "@neondatabase/serverless";

export async function getData() {
    const sql = neon(process.env.DATABASE_URL);
    const data = await sql\`...\`;
    return data;
}
`,AZ=`# keep Neon credentials secure: do not expose them to client-side code

DATABASE_URL='{{> connstring}}'
`,EZ=`require("dotenv").config();

const http = require("http");
const { neon } = require("@neondatabase/serverless");

const sql = neon(process.env.DATABASE_URL);

const requestHandler = async (req, res) => {
  const result = await sql\`SELECT version()\`;
  const { version } = result[0];
  res.writeHead(200, { "Content-Type": "text/plain" });
  res.end(version);
};

http.createServer(requestHandler).listen(3000, () => {
  console.log("Server running at http://localhost:3000");
});`,OZ="DATABASE_URL='{{> connstring}}'",LZ=`{{#preferPooled}}
PGHOST='{{{poolerHost}}}'
{{/preferPooled}}
{{^preferPooled}}
PGHOST='{{{host}}}'
{{/preferPooled}}
PGDATABASE='{{{pgEncodedDatabase}}}'
PGUSER='{{{pgEncodedRole}}}'
{{#pgEncodedPasswordOrPlaceholder}}PGPASSWORD='{{{pgEncodedPasswordOrPlaceholder}}}'{{/pgEncodedPasswordOrPlaceholder}}
PGSSLMODE='require'
PGCHANNELBINDING='require'
`,$Z=`// prisma/schema.prisma
datasource db {
  provider  = "postgresql"
  url  	    = env("DATABASE_URL")
  // uncomment next line if you use Prisma <5.10
  // directUrl = env("DATABASE_URL_UNPOOLED")
}
`,RZ=`DATABASE_URL="postgresql://{{{pgEncodedRole}}}{{#storePasswords}}:{{{pgEncodedPasswordOrPlaceholder}}}{{/storePasswords}}@{{{poolerHost}}}/{{{pgEncodedDatabase}}}?sslmode=require&channel_binding=require"
# uncomment next line if you use Prisma <5.10
# DATABASE_URL_UNPOOLED="postgresql://{{{pgEncodedRole}}}{{#storePasswords}}:{{{pgEncodedPasswordOrPlaceholder}}}{{/storePasswords}}@{{{host}}}/{{{pgEncodedDatabase}}}?sslmode=require&channel_binding=require"
`,BZ=`psql '{{> connstring}}'
`,MZ=`psql -h pg.neon.tech
`,DZ="# To be done",UZ=`import { neon } from '@neondatabase/serverless';

const sql = neon('{{> connstring}}');

const posts = await sql('SELECT * FROM posts');

// See https://neon.com/docs/serverless/serverless-driver
// for more information
`,FZ=`import { neon } from '@neondatabase/serverless';

// Retrieve the JWT token (implementation depends on your auth system)
const authToken = getAuthToken();

// Initialize the Neon client with connection string and auth token
const sql = neon('{{> connstring}}', { authToken });

// Run a query
const posts = await sql('SELECT * FROM posts');

// See https://neon.com/docs/serverless/serverless-driver
// for more information
`,zZ=`import { Pool } from '@neondatabase/serverless';

const pool = new Pool({ connectionString: '{{> connstring}}' });

const { rows: [post] } = await pool.query('SELECT * FROM posts');

pool.end();
`,qZ=`import os
import asyncio
import re
from sqlalchemy import text
from dotenv import load_dotenv
from sqlalchemy.ext.asyncio import create_async_engine

load_dotenv()

async def async_main() -> None:
    engine = create_async_engine(re.sub(r'^postgresql:', 'postgresql+asyncpg:', os.getenv('DATABASE_URL')), echo=True)
    async with engine.connect() as conn:
        result = await conn.execute(text("select 'hello world'"))
        print(result.fetchall())
    await engine.dispose()

asyncio.run(async_main())`,HZ="DATABASE_URL='{{> connstring}}'",VZ=`# cat .env | grep DATABASE_URL
DATABASE_URL="{{> connstring}}&charset=utf8"
`,WZ=Object.freeze(Object.defineProperty({__proto__:null,_connstring:aN,_connstring_dotnet:oN,django:vZ,django_env:jZ,dotnet_appsettings:wZ,dotnet_ssl:yZ,go:SZ,go_env:CZ,hasura:IZ,java:kZ,nestjs:TZ,nestjs_env:PZ,nextjs:NZ,nextjs_env:AZ,nodejs:EZ,nodejs_env:OZ,parameters:LZ,prismajs:$Z,prismajs_env:RZ,psql:BZ,psql_passwordless:MZ,ruby:DZ,serverless_http:UZ,serverless_http_jwt:FZ,serverless_web_sockets:zZ,sql_alchemy:qZ,sql_alchemy_env:HZ,symfony:VZ},Symbol.toStringTag,{value:"Module"}));var he=(e=>(e.ConnectionString="connection_string",e.ParametersOnly="parameters_only",e.Psql="psql",e.NextJS="nextjs",e.PrismaJS="prismajs",e.Django="django",e.Java="java",e.SQLAlchemy="sql_alchemy",e.NodeJS="nodejs",e.Symfony="symfony",e.Go="go",e.Serverless="serverless",e.ServerlessJWT="serverless_jwt",e.NestJS="nestjs",e.DotNet="dotnet",e))(he||{});const GZ=["psql","connection_string","parameters_only","nextjs","prismajs","nodejs","dotnet","django","sql_alchemy","java","symfony","go","serverless","nestjs"],KZ=["connection_string","parameters_only","serverless_jwt"],QZ={connstring:aN.trim(),connstring_dotnet:oN.trim()},vv={[he.ConnectionString]:{value:he.ConnectionString,label:"Connection string",tabs:[{value:he.ConnectionString,label:"Connection string",template:"_connstring",hasSecrets:!0,language:"text"}]},[he.ParametersOnly]:{value:he.ParametersOnly,label:"Parameters only",tabs:[{value:he.ParametersOnly,label:"Parameters only",template:"parameters",hasSecrets:!0,language:"nix"}]},[he.Psql]:{value:he.Psql,label:"psql",tabs:[{value:he.Psql,label:"connection string",template:"psql",hasSecrets:!0,language:"nix"},{value:"passwordless_auth",label:"passwordless auth",template:"psql_passwordless",hasSecrets:!1,language:"nix"}]},[he.NextJS]:{value:he.NextJS,label:"Next.js",tabs:[{value:he.NextJS,label:"actions.ts",template:"nextjs",language:"javascript"},{value:"env",label:".env",template:"nextjs_env",hasSecrets:!0,language:"nix"}]},[he.PrismaJS]:{value:he.PrismaJS,label:"Prisma",tabs:[{value:he.PrismaJS,label:"schema.prisma",template:"prismajs",language:"prisma"},{value:"env",label:".env",template:"prismajs_env",hasSecrets:!0,language:"nix"}]},[he.DotNet]:{value:he.DotNet,label:".NET",tabs:[{value:he.DotNet,label:"Connection string",template:"dotnet_ssl",hasSecrets:!0,language:"java"},{value:"appsettings",label:"Entity Framework (appsettings.json)",template:"dotnet_appsettings",hasSecrets:!0,language:"nix"}]},[he.Django]:{value:he.Django,label:"Django",tabs:[{value:he.Django,label:"settings.py",template:"django",hasSecrets:!1,language:"python"},{value:"env",label:".env",template:"django_env",hasSecrets:!0,language:"nix"}]},[he.Java]:{value:he.Java,label:"Java",tabs:[{value:he.Java,label:"Java",template:"java",hasSecrets:!0,language:"text"}]},[he.SQLAlchemy]:{value:he.SQLAlchemy,label:"SQLAlchemy",tabs:[{value:he.SQLAlchemy,label:"SQLAlchemy",template:"sql_alchemy",language:"python"},{value:"env",label:".env",template:"sql_alchemy_env",hasSecrets:!0,language:"nix"}]},[he.NodeJS]:{value:he.NodeJS,label:"Node.js",tabs:[{value:he.NodeJS,label:"src/app.js",template:"nodejs",language:"javascript"},{value:"env",label:".env",template:"nodejs_env",hasSecrets:!0,language:"nix"}]},[he.Symfony]:{value:he.Symfony,label:"Symfony",tabs:[{value:he.Symfony,label:"Symfony",template:"symfony",hasSecrets:!0,language:"nix"}]},[he.Go]:{value:he.Go,label:"Go",tabs:[{value:he.Go,label:"Go",template:"go",language:"golang"},{value:"env",label:".env",template:"go_env",hasSecrets:!0,language:"nix"}]},[he.Serverless]:{value:he.Serverless,label:"Neon Serverless Driver",tabs:[{value:"http",label:"HTTP (Recommended)",template:"serverless_http",hasSecrets:!0,language:"javascript"},{value:"websockets",label:"WebSockets",template:"serverless_web_sockets",hasSecrets:!0,language:"javascript"}]},[he.ServerlessJWT]:{value:he.ServerlessJWT,label:"Neon Serverless Driver (JWT)",tabs:[{value:"http-jwt",label:"HTTP (Recommended)",template:"serverless_http_jwt",language:"javascript",hasSecrets:!0}]},[he.NestJS]:{value:he.NestJS,label:"NestJS",tabs:[{value:he.NestJS,label:"database.service.ts",template:"nestjs",language:"javascript"},{value:"env",label:".env",template:"nestjs_env",hasSecrets:!0,language:"nix"}]}},YZ=(e="password")=>(e==="passwordless"?KZ:GZ).map(n=>vv[n]),JZ=Object.fromEntries(Object.values(vv).flatMap(e=>e.tabs.map(s=>[s.template,WZ[s.template].trim()]))),ZZ="_django_1jdvk_1",XZ="_go_1jdvk_5",eX="_java_1jdvk_9",tX="_neonServerless_1jdvk_13",sX="_nextJs_1jdvk_17",nX="_nodeJs_1jdvk_21",rX="_postgres_1jdvk_25",aX="_parameters_1jdvk_29",oX="_prisma_1jdvk_33",iX="_sqlAlchemy_1jdvk_37",cX="_nestJs_1jdvk_41",lX="_dotNet_1jdvk_45",Qs={django:ZZ,go:XZ,java:eX,neonServerless:tX,nextJs:sX,nodeJs:nX,postgres:rX,parameters:aX,prisma:oX,sqlAlchemy:iX,nestJs:cX,dotNet:lX},c0=[{snippedType:he.ConnectionString,icon:Qs.postgres,title:"Postgres"},{snippedType:he.ParametersOnly,icon:Qs.parameters,title:"Parameters only"},{snippedType:he.Serverless,icon:Qs.neonServerless,title:"NeonDriver"},{snippedType:he.NextJS,icon:Qs.nextJs,title:"NextJS"},{snippedType:he.PrismaJS,icon:Qs.prisma,title:"Prisma"},{snippedType:he.NodeJS,icon:Qs.nodeJs,title:"Node.js"},{snippedType:he.DotNet,icon:Qs.dotNet,title:".NET"},{snippedType:he.Django,icon:Qs.django,title:"Django"},{snippedType:he.Java,icon:Qs.java,title:"Java"},{snippedType:he.Go,icon:Qs.go,title:"Go"},{snippedType:he.NestJS,icon:Qs.nestJs,title:"NestJS"},{snippedType:he.SQLAlchemy,icon:Qs.sqlAlchemy,title:"SQLA"}];/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var dX=Object.prototype.toString,Ol=Array.isArray||function(s){return dX.call(s)==="[object Array]"};function jv(e){return typeof e=="function"}function uX(e){return Ol(e)?"array":typeof e}function Nf(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function l0(e,s){return e!=null&&typeof e=="object"&&s in e}function hX(e,s){return e!=null&&typeof e!="object"&&e.hasOwnProperty&&e.hasOwnProperty(s)}var pX=RegExp.prototype.test;function mX(e,s){return pX.call(e,s)}var gX=/\S/;function fX(e){return!mX(gX,e)}var _X={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function bX(e){return String(e).replace(/[&<>"'`=\/]/g,function(n){return _X[n]})}var xX=/\s*/,vX=/\s+/,d0=/\s*=/,jX=/\s*\}/,yX=/#|\^|\/|>|\{|&|=|!/;function wX(e,s){if(!e)return[];var n=!1,r=[],a=[],o=[],i=!1,c=!1,l="",d=0;function u(){if(i&&!c)for(;o.length;)delete a[o.pop()];else o=[];i=!1,c=!1}var p,h,g;function f(E){if(typeof E=="string"&&(E=E.split(vX,2)),!Ol(E)||E.length!==2)throw new Error("Invalid tags: "+E);p=new RegExp(Nf(E[0])+"\\s*"),h=new RegExp("\\s*"+Nf(E[1])),g=new RegExp("\\s*"+Nf("}"+E[1]))}f(s||rn.tags);for(var _=new eh(e),b,x,v,j,y,w;!_.eos();){if(b=_.pos,v=_.scanUntil(p),v)for(var S=0,T=v.length;S<T;++S)j=v.charAt(S),fX(j)?(o.push(a.length),l+=j):(c=!0,n=!0,l+=" "),a.push(["text",j,b,b+1]),b+=1,j===`
`&&(u(),l="",d=0,n=!1);if(!_.scan(p))break;if(i=!0,x=_.scan(yX)||"name",_.scan(xX),x==="="?(v=_.scanUntil(d0),_.scan(d0),_.scanUntil(h)):x==="{"?(v=_.scanUntil(g),_.scan(jX),_.scanUntil(h),x="&"):v=_.scanUntil(h),!_.scan(h))throw new Error("Unclosed tag at "+_.pos);if(x==">"?y=[x,v,b,_.pos,l,d,n]:y=[x,v,b,_.pos],d++,a.push(y),x==="#"||x==="^")r.push(y);else if(x==="/"){if(w=r.pop(),!w)throw new Error('Unopened section "'+v+'" at '+b);if(w[1]!==v)throw new Error('Unclosed section "'+w[1]+'" at '+b)}else x==="name"||x==="{"||x==="&"?c=!0:x==="="&&f(v)}if(u(),w=r.pop(),w)throw new Error('Unclosed section "'+w[1]+'" at '+_.pos);return CX(SX(a))}function SX(e){for(var s=[],n,r,a=0,o=e.length;a<o;++a)n=e[a],n&&(n[0]==="text"&&r&&r[0]==="text"?(r[1]+=n[1],r[3]=n[3]):(s.push(n),r=n));return s}function CX(e){for(var s=[],n=s,r=[],a,o,i=0,c=e.length;i<c;++i)switch(a=e[i],a[0]){case"#":case"^":n.push(a),r.push(a),n=a[4]=[];break;case"/":o=r.pop(),o[5]=a[2],n=r.length>0?r[r.length-1][4]:s;break;default:n.push(a)}return s}function eh(e){this.string=e,this.tail=e,this.pos=0}eh.prototype.eos=function(){return this.tail===""};eh.prototype.scan=function(s){var n=this.tail.match(s);if(!n||n.index!==0)return"";var r=n[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r};eh.prototype.scanUntil=function(s){var n=this.tail.search(s),r;switch(n){case-1:r=this.tail,this.tail="";break;case 0:r="";break;default:r=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=r.length,r};function dl(e,s){this.view=e,this.cache={".":this.view},this.parent=s}dl.prototype.push=function(s){return new dl(s,this)};dl.prototype.lookup=function(s){var n=this.cache,r;if(n.hasOwnProperty(s))r=n[s];else{for(var a=this,o,i,c,l=!1;a;){if(s.indexOf(".")>0)for(o=a.view,i=s.split("."),c=0;o!=null&&c<i.length;)c===i.length-1&&(l=l0(o,i[c])||hX(o,i[c])),o=o[i[c++]];else o=a.view[s],l=l0(a.view,s);if(l){r=o;break}a=a.parent}n[s]=r}return jv(r)&&(r=r.call(this.view)),r};function bs(){this.templateCache={_cache:{},set:function(s,n){this._cache[s]=n},get:function(s){return this._cache[s]},clear:function(){this._cache={}}}}bs.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};bs.prototype.parse=function(s,n){var r=this.templateCache,a=s+":"+(n||rn.tags).join(":"),o=typeof r<"u",i=o?r.get(a):void 0;return i==null&&(i=wX(s,n),o&&r.set(a,i)),i};bs.prototype.render=function(s,n,r,a){var o=this.getConfigTags(a),i=this.parse(s,o),c=n instanceof dl?n:new dl(n,void 0);return this.renderTokens(i,c,r,s,a)};bs.prototype.renderTokens=function(s,n,r,a,o){for(var i="",c,l,d,u=0,p=s.length;u<p;++u)d=void 0,c=s[u],l=c[0],l==="#"?d=this.renderSection(c,n,r,a,o):l==="^"?d=this.renderInverted(c,n,r,a,o):l===">"?d=this.renderPartial(c,n,r,o):l==="&"?d=this.unescapedValue(c,n):l==="name"?d=this.escapedValue(c,n,o):l==="text"&&(d=this.rawValue(c)),d!==void 0&&(i+=d);return i};bs.prototype.renderSection=function(s,n,r,a,o){var i=this,c="",l=n.lookup(s[1]);function d(h){return i.render(h,n,r,o)}if(l){if(Ol(l))for(var u=0,p=l.length;u<p;++u)c+=this.renderTokens(s[4],n.push(l[u]),r,a,o);else if(typeof l=="object"||typeof l=="string"||typeof l=="number")c+=this.renderTokens(s[4],n.push(l),r,a,o);else if(jv(l)){if(typeof a!="string")throw new Error("Cannot use higher-order sections without the original template");l=l.call(n.view,a.slice(s[3],s[5]),d),l!=null&&(c+=l)}else c+=this.renderTokens(s[4],n,r,a,o);return c}};bs.prototype.renderInverted=function(s,n,r,a,o){var i=n.lookup(s[1]);if(!i||Ol(i)&&i.length===0)return this.renderTokens(s[4],n,r,a,o)};bs.prototype.indentPartial=function(s,n,r){for(var a=n.replace(/[^ \t]/g,""),o=s.split(`
`),i=0;i<o.length;i++)o[i].length&&(i>0||!r)&&(o[i]=a+o[i]);return o.join(`
`)};bs.prototype.renderPartial=function(s,n,r,a){if(r){var o=this.getConfigTags(a),i=jv(r)?r(s[1]):r[s[1]];if(i!=null){var c=s[6],l=s[5],d=s[4],u=i;l==0&&d&&(u=this.indentPartial(i,d,c));var p=this.parse(u,o);return this.renderTokens(p,n,r,u,a)}}};bs.prototype.unescapedValue=function(s,n){var r=n.lookup(s[1]);if(r!=null)return r};bs.prototype.escapedValue=function(s,n,r){var a=this.getConfigEscape(r)||rn.escape,o=n.lookup(s[1]);if(o!=null)return typeof o=="number"&&a===rn.escape?String(o):a(o)};bs.prototype.rawValue=function(s){return s[1]};bs.prototype.getConfigTags=function(s){return Ol(s)?s:s&&typeof s=="object"?s.tags:void 0};bs.prototype.getConfigEscape=function(s){if(s&&typeof s=="object"&&!Ol(s))return s.escape};var rn={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){Nu.templateCache=e},get templateCache(){return Nu.templateCache}},Nu=new bs;rn.clearCache=function(){return Nu.clearCache()};rn.parse=function(s,n){return Nu.parse(s,n)};rn.render=function(s,n,r,a){if(typeof s!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+uX(s)+'" was given as the first argument for mustache#render(template, view, partials)');return Nu.render(s,n,r,a)};rn.escape=bX;rn.Scanner=eh;rn.Context=dl;rn.Writer=bs;const IX=({database:e,endpoint:s,role:n,password:r,poolerEnabled:a})=>({pgEncodedRole:qi(n==null?void 0:n.name),singleQuoteEscapedRole:Lg(n==null?void 0:n.name),roleIsEncoded:(n==null?void 0:n.name)!==qi(n==null?void 0:n.name),pgEncodedDatabase:qi(e==null?void 0:e.name),singleQuoteEscapedDatabase:Lg(e==null?void 0:e.name),databaseIsEncoded:(e==null?void 0:e.name)!==qi(e==null?void 0:e.name),projectName:`${(s==null?void 0:s.id)??""}${a?"-pooler":""}`,host:X_(s),poolerHost:X_(s,!0),preferPooled:a,pgEncodedPassword:qi(r),singleQuoteEscapedPassword:Lg(r),passwordIsEncoded:r!==qi(r)}),Hb=(e,s)=>{const n=IX(s);let r="";return s.roleAuthMode==="passwordless"?r="":r=n.pgEncodedPassword||$g.pgEncodedPassword,rn.render(JZ[e],{...$g,...n,pgEncodedPasswordOrPlaceholder:r,singleQuoteEscapedPasswordOrPlaceholder:n.singleQuoteEscapedPassword||$g.pgEncodedPassword,storePasswords:s.storePasswords??!1},QZ)};function kX(){document.dispatchEvent(new CustomEvent("OPButtonAdded"))}function TX(e){const s=["none","name","honorific-prefix","given-name","additional-name","family-name","honorific-suffix","nickname","organization-title","username","new-password","current-password","one-time-code","organization","street-address","address-line1","address-line2","address-line3","address-level1","address-level2","address-level3","address-level4","country","country-name","postal-code","cc-name","cc-given-name","cc-additional-name","cc-family-name","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc","cc-type","transaction-currency","transaction-amount","language","bday","bday-day","bday-month","bday-year","sex","url","tel","tel-country-code","tel-national","tel-area-code","tel-local","tel-local-prefix","tel-local-suffix","tel-extension","email","impp"];if(!e.fields){console.error("Missing 'fields' array in save request.");return}e.fields.forEach(c=>{c.autocomplete?s.find(l=>l===c.autocomplete)||console.error(`String '${c.autocomplete}' is an invalid input. Autocomplete type must be one of the following: ${s.join(", ")}.`):console.error("Fields array is missing 'autocomplete' designation.")});const r=new TextEncoder().encode(JSON.stringify(e)),a=r.length,o=[];for(let c=0;c<a;c++)o[c]=String.fromCharCode(r[c]);const i=o.join("");return btoa(i)}const PX=()=>NX().crypto.getRandomValues(new Uint32Array(1))[0].toString(36);function NX(){if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate global object")}class AX extends HTMLElement{constructor(){super(),this.internalId=PX(),this.errorMessages=[],this.ctaUrls={en:"https://1password.com/landing/save-button/?utm_medium=promo&utm_source=save-button&utm_campaign=save-in-1password",es:"https://1password.com/es/landing/save-button/?utm_medium=promo&utm_source=save-button&utm_campaign=save-in-1password",de:"https://1password.com/de/landing/save-button/?utm_medium=promo&utm_source=save-button&utm_campaign=save-in-1password",fr:"https://1password.com/fr/landing/save-button/?utm_medium=promo&utm_source=save-button&utm_campaign=save-in-1password",it:"https://1password.com/it/landing/save-button/?utm_medium=promo&utm_source=save-button&utm_campaign=save-in-1password",ja:"https://1password.com/jp/landing/save-button/?utm_medium=promo&utm_source=save-button&utm_campaign=save-in-1password",ko:"https://1password.com/ko/landing/save-button/?utm_medium=promo&utm_source=save-button&utm_campaign=save-in-1password",pt:"https://1password.com/pt/landing/save-button/?utm_medium=promo&utm_source=save-button&utm_campaign=save-in-1password",ru:"https://1password.com/ru/landing/save-button/?utm_medium=promo&utm_source=save-button&utm_campaign=save-in-1password","zh-CN":"https://1password.com/zh-cn/landing/save-button/?utm_medium=promo&utm_source=save-button&utm_campaign=save-in-1password","zh-TW":"https://1password.com/zh-tw/landing/save-button/?utm_medium=promo&utm_source=save-button&utm_campaign=save-in-1password"},document.addEventListener("OPButtonEvent",s=>{const n=s.detail;n.buttonId===this.internalId&&(n.error?this._setModalContent(this._localize(n.header),n.body,!0,!0):this._setModalContent(this._localize(n.header),n.body,!0))})}_loadFonts(){if(document.querySelector('style[data-description="onepassword-font-faces"]'))return;const n=`@font-face {
      font-display: swap;
      font-family: "Inter";
      font-style: normal;
      font-weight: 400 600;
      src: url(./src/fonts/Inter-roman.var.woff2) format("woff2");
    }`,r=document.createElement("style");r.dataset.description="onepassword-font-faces",r.appendChild(document.createTextNode(n)),document.head.appendChild(r)}_infoIconSvg(s){switch(s){case"dark":return'<path fill-rule="evenodd" clip-rule="evenodd" d="M16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM7 8C7 7.44772 7.44772 7 8 7C8.55229 7 9 7.44772 9 8V11C9 11.5523 8.55229 12 8 12C7.44772 12 7 11.5523 7 11V8ZM8 6C8.55229 6 9 5.55228 9 5C9 4.44772 8.55229 4 8 4C7.44772 4 7 4.44772 7 5C7 5.55228 7.44772 6 8 6Z" fill="#85BEFF"/>';default:return'<path fill-rule="evenodd" clip-rule="evenodd" d="M8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14ZM16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM7 8C7 7.44772 7.44772 7 8 7C8.55229 7 9 7.44772 9 8V11C9 11.5523 8.55229 12 8 12C7.44772 12 7 11.5523 7 11V8ZM9 5C9 5.55228 8.55229 6 8 6C7.44772 6 7 5.55228 7 5C7 4.44772 7.44772 4 8 4C8.55229 4 9 4.44772 9 5Z" fill="#0364D3"/>'}}_findSupportedLocaleCode(s){if(s){const r=["de","en","es","fr","it","ja","ko","pt","ru","zh-CN","zh-TW"].find(a=>s.startsWith(a));if(r)return r}return"en"}_validateAttributes(s,n,r){if(this.hasAttribute(n)){const o=this.getAttribute(n);if(!s.find(i=>i===o)){const i=`"${o}" is an invalid input. ${n} can only be one of the following: ${s.join(", ")}.`;return this.errorMessages.push(i),console.error(i),r}return o}return r}get lang(){const s=this.getAttribute("lang");return s&&this._findSupportedLocaleCode(s)?this._findSupportedLocaleCode(s):navigator.language&&this._findSupportedLocaleCode(navigator.language)?this._findSupportedLocaleCode(navigator.language):"en"}set lang(s){this.setAttribute("lang",s)}get class(){const s=["black","white"];return this._validateAttributes(s,"class",null)}set class(s){this.setAttribute("class",s??"")}get value(){return this.getAttribute("value")}set value(s){this.setAttribute("value",s??"")}get data_onepassword_type(){const s=["login","credit-card","api-key"];return this._validateAttributes(s,"data-onepassword-type",null)}set data_onepassword_type(s){this.setAttribute("data_onepassword_type",s??"")}get modal_position(){return"top"}set modal_position(s){this.setAttribute("modal_position",s)}get visible(){return this.hasAttribute("visible")}set visible(s){s?this.setAttribute("visible",""):this.removeAttribute("visible")}get color_mode(){const s=["light","dark"];return this._validateAttributes(s,"data-theme","light")}set color_mode(s){this.setAttribute("color_mode",s)}get hide_call_to_action(){return this.hasAttribute("hide_call_to_action")}set hide_call_to_action(s){s?this.setAttribute("hide_call_to_action",""):this.removeAttribute("hide_call_to_action")}get padding(){const s=["compact","normal","none"];return this._validateAttributes(s,"padding","normal")}set padding(s){this.setAttribute("padding",s)}static get observedAttributes(){return["visible","modal_position","color_mode","hide_call_to_action","padding"]}attributeChangedCallback(s,n,r){var a,o,i,c,l,d;if(this.shadowRoot&&n!==r)switch(s){case"visible":case"hide_call_to_action":typeof r=="string"?(a=this.shadowRoot.querySelector(".wrapper"))===null||a===void 0||a.setAttribute(s,r):(o=this.shadowRoot.querySelector(".wrapper"))===null||o===void 0||o.removeAttribute("visible");break;case"modal_position":(i=this.shadowRoot.querySelector(".wrapper"))===null||i===void 0||i.setAttribute(s,r);break;case"color_mode":(c=this.shadowRoot.querySelector(".wrapper"))===null||c===void 0||c.setAttribute(s,r);case"padding":(l=this.shadowRoot.querySelector(".wrapper"))===null||l===void 0||l.setAttribute(s,r);break;case"modal_position":(d=this.shadowRoot.querySelector(".wrapper"))===null||d===void 0||d.setAttribute(s,r);break}}_localize(s){return s}_elementGenerator(s,n,r,a){const o=document.createElement(s);return o.innerHTML=n,o.setAttribute("aria-hidden",r.toString()),a&&o.setAttribute("class",a),o}_setModalContent(s,n,r,a){var o,i,c,l;const d=(o=this.shadowRoot)===null||o===void 0?void 0:o.querySelector("#op-modal-header"),u=(i=this.shadowRoot)===null||i===void 0?void 0:i.querySelector("#op-modal-body");d.innerText=s,u.innerText="";const p=[];n.forEach(g=>{if(g.url){if(g.url){const f=this._elementGenerator("a",`${g.text} `,!0);f.setAttribute("href",g.url),f.setAttribute("tabindex","3"),f.setAttribute("target","_blank"),f.setAttribute("rel","noopener noreferrer"),u.appendChild(f)}}else{const f=document.createTextNode(g.text);u.appendChild(f)}p.push(g.text)});const h=p.join(" ");r&&this.setAttribute("hide_call_to_action",""),d.appendChild(this._elementGenerator("span",h,!1,"sr-only")),a&&(((c=this.shadowRoot)===null||c===void 0?void 0:c.querySelector(".onepasswordSaveBtn")).setAttribute("title",h),this.setAttribute("visible",""),((l=this.shadowRoot)===null||l===void 0?void 0:l.querySelector("#onepassword-modal")).focus())}_toggleInfoModal(){var s,n,r,a;const o=(s=this.shadowRoot)===null||s===void 0?void 0:s.querySelector("#onepassword-modal"),i=(n=this.shadowRoot)===null||n===void 0?void 0:n.querySelector("#close-icon"),c=(r=this.shadowRoot)===null||r===void 0?void 0:r.querySelector("#onepassword-info-icon"),l=(a=this.shadowRoot)===null||a===void 0?void 0:a.querySelector(".main");document.body.addEventListener("click",d=>{d.target!==this&&this.removeAttribute("visible")}),l==null||l.addEventListener("click",d=>{const u=d.target;this.hasAttribute("visible")&&!(o!=null&&o.contains(u))&&!(c!=null&&c.contains(u))&&this.removeAttribute("visible")}),i==null||i.addEventListener("click",d=>{this.removeAttribute("visible")}),i==null||i.addEventListener("keyup",d=>{d.key==="Enter"&&(d.preventDefault(),this.removeAttribute("visible"),c==null||c.focus())}),c==null||c.addEventListener("click",d=>{this._positionModal(),this.setAttribute("visible",""),o==null||o.focus()}),c==null||c.addEventListener("keyup",d=>{d.key==="Enter"&&(d.preventDefault(),this._positionModal(),this.setAttribute("visible",""),o==null||o.focus())})}_positionModal(){var s,n,r,a;const o=(n=(s=this.shadowRoot)===null||s===void 0?void 0:s.querySelector("#onepassword-info-icon"))===null||n===void 0?void 0:n.getBoundingClientRect();if(!this.visible){const i=(a=(r=this.shadowRoot)===null||r===void 0?void 0:r.querySelector("#onepassword-modal"))===null||a===void 0?void 0:a.getBoundingClientRect();if(i&&o){const c=i.y+i.height;i.y<0||c<0||o.y<140?this.setAttribute("modal_position","bottom"):this.setAttribute("modal_position","top")}}}_focusTrap(s,n,r,a){var o;const i=(o=this.shadowRoot)===null||o===void 0?void 0:o.activeElement;i===a&&n==="next"?(s.preventDefault(),r.focus()):i===r&&n==="back"&&(s.preventDefault(),a.focus())}_focusListener(s){var n,r,a;const o=(r=(n=this.shadowRoot)===null||n===void 0?void 0:n.querySelector(".wrapper"))===null||r===void 0?void 0:r.hasAttribute("visible");if(s.key!=="Tab"||!o)return;const i=(a=this.shadowRoot)===null||a===void 0?void 0:a.querySelector("#onepassword-modal"),c=this.hasAttribute("hide_call_to_action"),l=i.querySelector("#op-modal-cta");let d=l;const u=i.querySelector("#close-icon");c&&(this.errorMessages.length?this.errorMessages.length&&(d=i.querySelector("a")?i.querySelector("a"):u):(l.removeAttribute("tabindex"),d=u)),s.shiftKey?this._focusTrap(s,"back",d,u):this._focusTrap(s,"next",d,u)}connectedCallback(){this._render(),this._toggleInfoModal(),this.addEventListener("keydown",this._focusListener)}disconnectedCallback(){this.removeEventListener("keydown",this._focusListener)}_render(){const s=document.createElement("div");s.innerHTML=`
      <style>

      span, h3, p {
        font-family: "-apple-system", "BlinkMacSystemFont", "Segoe UI", "Roboto", "Noto Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif;
      }
      h3 {
        font-weight: 600;
        font-size: 0.875rem;
      }
      .wrapper {
        flex-direction: column;
        justify-content: space-between;
        position: relative;
      }
      #onepassword-modal {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        padding: 16px;
        width: 299px;
        min-height: 94px;
        background: #FFFFFF;
        border: 1px solid rgba(0, 0, 0, 0.1);
        box-shadow: 0px 5px 10px 1px rgba(0, 0, 0, 0.1);
        border-radius: 12px;
        opacity: 0;
        visibility: hidden;
        transition: visibility 0s linear 0.1s, opacity 0.3s ease;
        position: absolute;
        text-align: left;
        z-index: 10;
      }
      [hide_call_to_action] #onepassword-modal {
        min-height: 50px;
      }
      [hide_call_to_action] #op-modal-cta {
        display: none;
      }
      [modal_position="top"] #onepassword-modal {
        bottom: 64px;
      }
      [modal_position="bottom"] #onepassword-modal {
        top: 64px;
      }
      [visible] #onepassword-modal {
        visibility: visible;
        opacity: 1;
        transition-delay: 0s;
      }
      #onepassword-modal:focus {
        box-shadow: 0px 0px 0px 3px rgb(0 119 255 / 30%), 0px 0px 0px 3px rgb(0 119 255 / 30%);
        outline: none;
      }
      [data-theme="dark"] #onepassword-modal:focus {
        box-shadow: 0px 0px 0px 3px rgb(0 119 255 / 50%), 0px 0px 0px 3px rgb(0 119 255 / 50%);
      }
      [visible] a:focus {
        border-radius: 4px;
        box-shadow: 0px 0px 0px 2px rgb(0 119 255 / 30%), 0px 0px 0px 2px rgb(0 119 255 / 30%);
        outline: none;
      }
      #header {
        width: 100%;
        height: 18px;
        left: 0px;
        top: 0px;
        line-height: 130%;
        color: #000000;
        flex: none;
        order: 0;
        flex-grow: 0;
        margin: 0px 0px;
      }
      #close-icon {
        width: 18px;
        height: 18px;
        border-radius: 24px;
        margin: -4px -4px 0 0;
        order: 1;
      }
      #close-icon:active {
        background: rgba(0, 119, 255, 0.15);
      }
      #close-icon:active path {
        fill: #0364D3;
        fill-opacity: 1;
      }
      #close-icon:focus {
        border: 2px solid rgba(0, 119, 255, 0.35);
        background: transparent;
        margin-top: -5px;
      }
      #close-icon:hover {
        background: rgba(0, 119, 255, 0.15);
      }
      #close-icon:hover path {
        fill: #0364D3;
        fill-opacity: 1;
      }
      #message {
        font-size: 0.8125rem;
        color: #000;
        order: 1;
        width: 100%;
        align-items: flex-start;
        display: flex;
        flex-grow: 1;
        flex-direction: column;
        min-height: calc(100% - 34px);
        padding: 4px 0 0 0;
      }
      #message div:first-child {
        flex-grow: 1;
        align-items: flex-start;
        margin: 0 0 4px 0;
        width: 100%;
      }
      #message a {
        color: #0472ec;
        text-decoration-color: #0472ec;
        padding: 1px;
      }
      #message a:hover {
        color: #0a2d4d;
        text-decoration-color: #0a2d4d;
      }
      #message p {
        margin: 0;
        width: 100%;
        letter-spacing: -0.015em;
      }
      .iconButton {
        cursor: pointer;
        padding: 0;
        background: transparent;
        border: none;
      }
      .iconButton:hover {
        background: rgba(0, 119, 255, 0.15);
        border-radius: 24px;
        outline: none;
      }
      [data-theme="dark"] .iconButton:hover {
        background: rgba(0, 119, 255, 0.5);
      }
      .iconButton:focus {
        border-radius: 24px;
        background: rgba(0, 119, 255, 0.3);
        outline: none;
      }
      [data-theme="dark"] .iconButton:focus {
        background: rgba(0, 119, 255, 0.5);
      }
      [data-theme="light"] .iconButton:focus circle {
        fill: #FFFFFF;
      }
      [data-theme="dark"] #onepassword-info-icon:focus path {
        fill: #FFFFFF;
      }
      #onepassword-icon {
        width: 24px;
        min-width: 24px;
      }
      [data-theme="dark"] [disabled] #onepassword-icon path {
        fill: #bbbbbb;
      }
      #onepassword-info-icon {
        display: inline-flex;
        padding: 4px;
        margin-right: 4px;
      }
      [padding="none"] .main {
        padding: 0px 0;
      }
      [padding="compact"] .main {
        padding: 16px 0;
      }
      .main {
        padding: 24px 0;
      }
      div {
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      .onepasswordSaveBtn {
        display: flex;
        flex-direction: row;
        align-items: center;
        cursor: pointer;
        margin-right: 5px;
        user-select: none;
        /* 163px equivalent */
        min-width: 10.1875rem;
        /* 165px equivalent */
        max-width: 10.3125rem;
        font-size: 0.83125rem;
      }
      .onepasswordSaveBtn:focus {
        border-radius: 8px;
        box-shadow: 0px 0px 0px 3px rgb(0 119 255 / 30%), 0px 0px 0px 3px rgb(0 119 255 / 30%);
        outline: none;
      }
      .label {
          width: 100%;
          text-align: center;
          color: #fff;
          flex: auto;
          order: 1;
          flex-grow: 0;
          padding: 3px 0px 3px 3px;
          word-break: break-word;
          align-self: center;
          line-height: 1em;
          letter-spacing: -0.1px;
          font-weight: 500;
      }
      .onepasswordSaveBtn {
        padding-bottom: 2px;
        width: auto;
        min-height: 32px;
        left: 0px;
        top: 0px;
        box-sizing: border-box;
        border-radius: 8px;
        border: 1px solid rgba(0, 0, 0, 0.3);
        background: linear-gradient(141.91deg, #0572EC 10.24%, rgba(3, 100, 211, 0.42) 81.93%), #0364D3;
      }
      .onepasswordSaveBtn:hover:enabled {
        background: #0567D5;
      }
      .onepasswordSaveBtn:active:enabled {
        background: #0450A6;
      }
      .black.onepasswordSaveBtn {
        border: 1px solid rgba(255, 255, 255, 0.1);
        background: #333333;
      }
      .black.onepasswordSaveBtn:hover:enabled {
        background: #1A1A1A;
      }
      [data-theme="dark"] .black.onepasswordSaveBtn:hover:enabled {
        background: #2d2d2d;
      }
      .black.onepasswordSaveBtn:active:enabled {
        background: #000000;
      }
      .white.onepasswordSaveBtn {
        background: #F7F7F7;
        border: 1px solid rgba(0, 0, 0, 0.3);
      }
      .white.onepasswordSaveBtn:hover:enabled {
        border: 1px solid rgba(0, 119, 255, 0.6);
        background: #F5FAFF;
      }
      [data-theme="dark"] .white.onepasswordSaveBtn:hover:enabled {
        background: #e7f3ff;
      }
      .white.onepasswordSaveBtn:active:enabled {
        border: 1px solid rgba(0, 0, 0, 0.3);
      }
      .white.onepasswordSaveBtn .label {
        color: #262626;
      }
      .white.onepasswordSaveBtn:enabled #onepassword-icon circle {
        fill: #0572EC;
      }
      .onepasswordSaveBtn:disabled {
        background: rgba(0, 0, 0, 0.06);
        border: 1px solid rgba(0, 0, 0, 0.1);
        box-sizing: border-box;
        border-radius: 8px;
        cursor: not-allowed;
      }
      [data-theme="dark"] .onepasswordSaveBtn:disabled {
        background: #aaaaaa;
      }
      .onepasswordSaveBtn:disabled .label {
        color: rgba(0, 0, 0, 0.5);
      }
      .onepasswordSaveBtn:disabled svg circle {
        fill: rgb(68 68 68 / 20%);
      }

      /* #a11y */
      .sr-only:not(:focus):not(:active) {
        clip: rect(0 0 0 0);
        clip-path: inset(100%);
        height: 1px;
        overflow: hidden;
        position: absolute;
        white-space: nowrap;
        width: 1px;
      }


      </style>

      <div class="wrapper" modal_position=${this.modal_position} data-theme=${this.color_mode} padding=${this.padding}>
        <div id="onepassword-modal" tabindex="2" role="dialog">
        <div id="header">
          <h3 id="op-modal-header">${this._localize("What's 1Password")}<span aria-hidden="false" class="sr-only">${this._localize("1Password is a secure place to keep your passwords, credit cards, and other important items and share them with your family or team.")}</span></h3>
            <button id="close-icon" class="iconButton" tabindex="4">
              <svg aria-hidden="true" width="10" height="10" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M5 2.83056L2.46898 0.299538C2.0696 -0.0998459 1.42207 -0.0998459 1.02269 0.299538L0.299538 1.02269C-0.0998459 1.42207 -0.0998459 2.0696 0.299538 2.46898L2.83056 5L0.299538 7.53102C-0.0998456 7.9304 -0.0998459 8.57793 0.299538 8.97731L1.02269 9.70046C1.42207 10.0998 2.0696 10.0998 2.46898 9.70046L5 7.16944L7.53102 9.70046C7.9304 10.0998 8.57793 10.0998 8.97731 9.70046L9.70046 8.97731C10.0998 8.57793 10.0998 7.9304 9.70046 7.53102L7.16944 5L9.70046 2.46898C10.0998 2.0696 10.0998 1.42207 9.70046 1.02269L8.97731 0.299538C8.57793 -0.0998459 7.9304 -0.0998459 7.53102 0.299538L5 2.83056Z" fill="black" fill-opacity="0.55"/>
              </svg>
              <span aria-hidden="false" class="sr-only">${this._localize("Close this modal")}</span>
            </button>
          </div>
          <div id="message" aria-hidden="true">
            <div><p id="op-modal-body">${this._localize("1Password is a secure place to keep your passwords, credit cards, and other important items and share them with your family or team.")}</p></div>
          <div><p><a id="op-modal-cta" tabindex="3" href=${this.ctaUrls[this.lang]} target="_blank" rel="noopener noreferrer">${this._localize("Sign up for free")}</a></p></div>
          </div>
        </div>

        <div class="main">
          <button
            class="${this.class?this.class:""} onepasswordSaveBtn"
            tabindex="1"
            disabled
            data-onepassword-save-button
            data-onepassword-save-request
            value=${this.value}
            data-onepassword-type=${this.data_onepassword_type}
            id=${this.internalId}
            >
            <svg id="onepassword-icon" aria-hidden="true" width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="12" cy="12.5" r="10"></circle>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M12 21.5C6.94409 21.5 2.84547 17.4707 2.84547 12.5C2.84547 7.52943 6.94409 3.5 12 3.5C17.0559 3.5 21.1545 7.52943 21.1545 12.5C21.1545 17.4707 17.0559 21.5 12 21.5ZM19.4906 12.5009C19.4906 8.43408 16.1371 5.13724 12.0005 5.13724C7.8639 5.13724 4.51044 8.43408 4.51044 12.5009C4.51044 16.5678 7.8639 19.8645 12.0005 19.8645C16.1371 19.8645 19.4906 16.5678 19.4906 12.5009Z" fill="white"/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M17.493 12.5369C17.493 9.51835 15.0338 7.10065 12.0372 7.10065C8.96681 7.10065 6.5076 9.51835 6.5076 12.5369C6.5076 15.4831 8.96681 17.9006 12.0372 17.9006C15.0338 17.9006 17.493 15.4831 17.493 12.5369ZM13.3321 9.04622C13.3321 8.78466 13.142 8.57262 12.9076 8.57262H11.0934C10.859 8.57262 10.6689 8.78466 10.6689 9.04622V10.8016C10.6689 10.8853 10.6988 10.9656 10.7518 11.0248L11.0171 11.3208C11.1276 11.4441 11.1276 11.644 11.0171 11.7673L10.7518 12.0633C10.6988 12.1225 10.6689 12.2028 10.6689 12.2866V15.9536C10.6689 16.2151 10.859 16.4272 11.0934 16.4272H12.9076C13.142 16.4272 13.3321 16.2151 13.3321 15.9536V14.1982C13.3321 14.1145 13.3023 14.0342 13.2492 13.975L12.9839 13.679C12.8734 13.5557 12.8734 13.3558 12.9839 13.2325L13.2492 12.9365C13.3023 12.8773 13.3321 12.7969 13.3321 12.7132V9.04622Z" fill="white"/>
            </svg>

            <span class="label">${this._localize("Save in 1Password")}</span>
          </button>

          <button id="onepassword-info-icon" class="iconButton" tabindex="1">
            <svg aria-hidden="true" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="8" cy="8" r="7"></circle>
              ${this._infoIconSvg(this.color_mode)}
            </svg>
            <span aria-hidden="false" class="sr-only">${this._localize("Click to learn more about 1Password")}</span>
          </button>

        </div>

      </div>
    `,this.attachShadow({mode:"open"}).appendChild(s)}}const EX="customElements"in window;EX&&customElements.define("onepassword-save-button",AX);const OX="_hidden_16oif_1",LX={hidden:OX},$X=(e,s,n)=>{const{fetchPassword:r}=Sl(),{database:a,endpoint:o,role:i,poolerEnabled:c,roleAuthMode:l}=e;return m.useCallback(async()=>{if(!i||!n||!a||!s)return;let d="";if(s.store_passwords)try{d=await r(s.id,i)??""}catch(h){Y(h)}const u=Hb("_connstring",{database:a,endpoint:o,role:i,password:d,storePasswords:s.store_passwords,poolerEnabled:c,roleAuthMode:l}),p={title:s.name,fields:[{autocomplete:"current-password",value:u},{autocomplete:"none",value:`Database: ${a.name}`},{autocomplete:"none",value:`Branch: ${n.name}`}]};return TX(p)},[n,a,o,r,c,s,i,l])},iN=e=>{var s,n,r;return(r=(n=(s=e.current)==null?void 0:s.querySelector("onepassword-save-button"))==null?void 0:n.shadowRoot)==null?void 0:r.querySelector("button[data-onepassword-save-button]")},RX=()=>{var e,s,n;(n=(s=(e=document.querySelector("onepassword-save-button"))==null?void 0:e.shadowRoot)==null?void 0:s.getElementById("onepassword-info-icon"))==null||n.remove()},BX=e=>{const[s,n]=m.useState(!0);return m.useEffect(()=>{const r=iN(e);if(!r)return;const a=new MutationObserver(()=>{n(r.getAttribute("disabled")!=null)});return a.observe(r,{attributes:!0,attributeFilter:["disabled"]}),kX(),()=>{a.disconnect()}},[e]),s},MX=({value:e})=>{const{trackUiInteraction:s}=k(),n=m.useRef(null),r=ro(),a=BX(n);m.useEffect(()=>{var i;(i=iN(n))==null||i.setAttribute("value",e)},[e]),m.useLayoutEffect(RX);const o=m.useCallback(()=>s("save_to_one_password_clicked"),[s]);return t.jsx("div",{ref:n,className:V({[LX.hidden]:a}),onClick:o,children:t.jsx("onepassword-save-button",{"data-onepassword-type":"login",value:e,"data-theme":r,class:"black",padding:"none"})})},DX=({connectionData:e,project:s,branch:n})=>{const[r,a]=m.useState(),o=$X(e,s,n);return m.useEffect(()=>{o().then(a).catch(()=>a(void 0))},[o]),r?t.jsx(MX,{value:r}):void 0},UX="_root_jdgrz_1",FX="_snippet_jdgrz_11",wm={root:UX,snippet:FX},cN=({className:e,branch:s,project:n,snippet:r,connectionData:a,noActions:o,imperativeActionsRef:i,onReveal:c,onCopy:l})=>{const[d,u]=m.useState(r.tabs[0]),{fetchPassword:p}=Sl(),{database:h,endpoint:g,role:f,poolerEnabled:_,roleAuthMode:b}=a,{tabs:x}=r;r.tabs.includes(d)||u(r.tabs[0]);const v=m.useCallback(S=>{const T=x.find(E=>E.value===S);u(T)},[x]),j=ur(async()=>{if(!f||!s||!h)return"";let S="";if(n&&n.store_passwords)try{S=await p(n.id,f)??""}catch(T){Y(T)}return Hb(d.template,{database:h,endpoint:g,role:f,password:S,storePasswords:n==null?void 0:n.store_passwords,poolerEnabled:_,roleAuthMode:b})}),w=b!=="passwordless"&&(n!=null&&n.store_passwords)&&d.hasSecrets?{getUnmaskedValue:j,onReveal:c}:void 0;return t.jsxs("div",{className:V(wm.root,e),"data-qa":"connection_snipet_block",children:[x.length>1&&t.jsx(jr,{variant:"contained",options:x,value:d.value,onChange:v}),t.jsx(vi,{className:wm.snippet,variant:x.length>1?"contained":"default",mode:d.language,"data-qa":"connection_snippet_code_block",scrollable:!0,copy:{getUnmaskedValue:j,onCopy:l},reveal:w,noActions:o,imperativeActionsRef:i,actionBarItems:t.jsx(DX,{connectionData:a,project:n,branch:s}),children:Hb(d.template,a)})]})},zX=()=>t.jsx("div",{className:wm.root,children:t.jsx(Bn,{copy:!1,className:wm.snippet,"aria-disabled":!0,children:"Loading..."})}),qX="_root_77xyy_1",HX="_list_77xyy_7",VX="_switchButton_77xyy_16",WX="_switchButton_active_77xyy_28",GX="_icon_77xyy_33",ld={root:qX,list:HX,switchButton:VX,switchButton_active:WX,icon:GX},KX=({snippets:e,className:s,activeSnippetType:n,setActiveSnippetType:r})=>t.jsx("div",{className:V(ld.root,s),children:t.jsx("div",{className:V(ld.list),children:e.map(({snippedType:a,icon:o,title:i})=>t.jsx(sa,{checked:a===n,wide:!0,circle:({checked:c})=>t.jsxs("p",{className:V(ld.switchButton,{[ld.switchButton_active]:c}),children:[t.jsx("span",{className:V(ld.icon,o)}),i]}),onChange:()=>r(a)},a))})}),QX="_content_167dn_1",YX="_snippetsContainer_167dn_7",JX="_verticalSnippets_167dn_12",ZX="_codeBlock_verticalLayout_167dn_16",XX="_footer_167dn_21",dd={content:QX,snippetsContainer:YX,verticalSnippets:JX,codeBlock_verticalLayout:ZX,footer:XX},eee=({project:e,role:s,database:n,branch:r,endpoint:a})=>{const{trackUiInteraction:o}=k({mountEvent:"create_project_success_modal_shown"}),[i,c]=m.useState(!1),l=DR(1500,()=>{c(!1)},{leading:!1,trailing:!0,actionOnUnmount:"nothing"}),d=m.useRef(null),[u,p]=m.useState(c0[0].snippedType),h={database:n,endpoint:a,role:s,poolerEnabled:!0,storePasswords:e==null?void 0:e.store_passwords};return t.jsxs(t.Fragment,{children:[t.jsxs(qe,{className:dd.content,children:[t.jsx(P,{children:"Choose your preferred connection method:"}),t.jsxs("div",{className:dd.snippetsContainer,children:[t.jsx(KX,{snippets:c0,className:dd.verticalSnippets,activeSnippetType:u,setActiveSnippetType:g=>{p(g),o("create_project_success_modal_snippet_clicked",{snippet:g})}}),h?t.jsx(cN,{className:dd.codeBlock_verticalLayout,project:e,snippet:vv[u],branch:r,connectionData:h,noActions:!0,imperativeActionsRef:d,onCopy:()=>{o("create_project_success_modal_snippet_copied",{snippet:u})}}):t.jsx(zX,{})]})]}),t.jsxs("div",{className:dd.footer,children:[t.jsxs(qx,{children:["View our"," ",t.jsx(M,{href:"https://neon.com/docs/get-started-with-neon/frameworks",openInNewTab:!0,children:"frameworks"})," ","and"," ",t.jsx(M,{href:"https://neon.com/docs/get-started-with-neon/languages",openInNewTab:!0,children:"languages"})," ","quick start guides."]}),t.jsx(A,{icon:i?"check":void 0,iconSide:"right",size:"l",onClick:async()=>{await d.current.triggerCopy(),c(!0),l.cancel(),l()},children:i?"Copied":"Copy code"})]})]})},tee=({data:e,isOpen:s,onRequestClose:n})=>{const{trackUiInteraction:r}=k(),{project:a,branch:o}=e,{database:i,role:c,endpoint:l}=dC(e);return!c||!i||!o||!l?null:t.jsx(It,{isOpen:s,width:740,title:"Your database is live","data-qa":"create_project_success",onRequestClose:()=>{n&&(n(),r("create_project_success_modal_dismissed"))},children:t.jsx(eee,{project:a,role:c,database:i,branch:o,endpoint:l})})},lN=e=>{const{trackUiInteraction:s}=k(),n=Dn(),r=Ru(i=>Z$(i,e)),a=(r==null?void 0:r.connectionType)??"pooler",o=m.useCallback(i=>{n(GC.actions.updateProjectSettings({projectId:e,settings:{connectionType:i}})),s("connection_details_pooler_changed")},[n,e,s]);return{connectionType:a,setConnectionType:o}},see="_connectionBlockHeader_14e8z_1",nee="_select_14e8z_11",u0={connectionBlockHeader:see,select:nee},yv=({children:e,branchId:s,appearance:n,drawerZIndex:r,onClick:a,...o})=>{var w;const{project:i,projectId:c}=F(),[l,d]=m.useState(!1),u=cI({projectId:c}),p=Gm({projectId:c}),{trackUiInteraction:h}=k(),g=m.useCallback(()=>{h("create_endpoint_button_clicked"),a==null||a(),d(!0)},[a,h]),_=(w=Hs({projectId:c,branchId:s??""}).data)==null?void 0:w.endpoints.some(_r),b=yr(m.useMemo(()=>s?{shared:{projects:[c],branches:[s]}}:null,[s,c]));if(u.isLoading||p.isLoading||!i)return null;const x=[u.isLimitExceeded?u.message:null,p.isLimitExceeded&&_?p.message:null,b].filter(Boolean).join(`
`),v=x.length>0,j={...o,disabled:v,onClick:g,children:e};let y;return n==="link"?y=t.jsx(M,{...j,disabled:!!b||j.disabled}):y=t.jsx(A,{...j,appearance:n,disabled:!!b||j.disabled}),t.jsxs(t.Fragment,{children:[l&&s&&t.jsx(uo,{isOpen:l,onRequestClose:()=>d(!1),mode:"create",project:i,branchId:s,endpointType:_?"read_only":"read_write",drawerZIndex:r}),t.jsx(ne,{content:x,disabled:!v,children:t.jsx("div",{style:{display:"inline-block"},children:y})})]})},ree="_noCompute_pociv_1",aee="_noComputeText_pociv_8",h0={noCompute:ree,noComputeText:aee},oee=({branchId:e})=>t.jsx("div",{className:h0.noCompute,children:t.jsxs("div",{className:h0.noComputeText,children:[t.jsx(yv,{appearance:"link",branchId:e,drawerZIndex:110,children:"Add compute"}),t.jsx("span",{children:"to connect to this branch"})]})}),Vh={label:"Connection pooling",hint:{title:"Supports up to 10,000 concurrent connections",description:e=>t.jsxs(t.Fragment,{children:[t.jsx("p",{children:"Uses PgBouncer to pool connections, which is recommended for most use cases."}),t.jsxs("p",{children:["Use a direct connection for ",t.jsx(Pe,{children:"pg_dump"}),", session-dependent features, or schema migrations."]}),t.jsxs("p",{children:["The connection limit without pooling is"," ",t.jsx(Pe,{children:e??"-"}),"."]})]}),learnMore:"Learn more"}},iee="_wrapper_1o67u_1",cee="_tooltip_1o67u_7",p0={wrapper:iee,tooltip:cee},lee=({projectId:e,endpoint:s,disabled:n})=>{const{connectionType:r,setConnectionType:a}=lN(e),o=s&&rC({min:s.autoscaling_limit_min_cu,max:s.autoscaling_limit_max_cu});return t.jsxs("div",{className:p0.wrapper,children:[t.jsx(_s,{isSelected:r==="pooler",onChange:i=>a(i?"pooler":"direct"),isDisabled:n,children:Vh.label}),t.jsx(sn,{icon:"info_italic",size:"l",tooltipAppearance:"rich",children:t.jsxs("div",{className:p0.tooltip,children:[t.jsx(J,{level:6,children:Vh.hint.title}),t.jsx("div",{children:Vh.hint.description(o)}),t.jsx(M,{href:aC,openInNewTab:!0,children:Vh.hint.learnMore})]})})]})},dN=({branch:e,endpoint:s,role:n,database:r})=>{const{trackUiInteraction:a}=k(),{project:o,projectId:i}=F(),{checkRoleIsPasswordless:c}=Sl(),[l,d]=nn(gt.ConnectionSnippetFormat,"authMode","password"),u=YZ(l),[p,h]=nn(gt.ConnectionSnippetFormat,"default",u[0]),g=m.useRef(n);u.map(v=>v.value).includes(p.value)||h(u[0]),(o==null?void 0:o.store_passwords)&&n&&n!==g.current&&(c(i,n).then(v=>{d(v?"passwordless":"password")}),g.current=n);const{connectionType:_}=lN(i),b=_==="pooler",x=m.useCallback(v=>{a("code_samples_sample_type_clicked",{snippet:v.value}),h(v)},[a,h]);return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:u0.connectionBlockHeader,children:[t.jsx("div",{children:t.jsx(na,{"data-qa":"connection-snippet-format-select",containerClassName:u0.select,appearance:"secondary",options:u,value:p,onChange:v=>{v&&x(v)},noSearch:!0})}),t.jsx(lee,{projectId:i,endpoint:s,disabled:!s||p.value==="prismajs"})]}),e&&s?t.jsx(cN,{project:o,snippet:p,branch:e,connectionData:{database:r,endpoint:s,poolerEnabled:b,role:n,storePasswords:o==null?void 0:o.store_passwords,roleAuthMode:l},onCopy:()=>{a("connection_details_connstring_copied",{snippet:p==null?void 0:p.value})},onReveal:()=>{a("connection_details_connstring_revealed",{snippet:p==null?void 0:p.value})}}):t.jsx(oee,{branchId:e==null?void 0:e.id})]})},Af={title:"Connection details for your new branch",success:(e,s)=>`The ${e} branch was created successfully${s?` and will expire on ${xe(s,ke.DateTimeWithTimezone)}`:""}`,useEndpoint:"Use the endpoint details below to connect to your branch.",footer:e=>t.jsxs("div",{children:["Manage users and passwords on the"," ",t.jsx(M,{href:G(ue.ProjectsItemRoles,{projectId:e}),children:"Roles"})," ","page. For more information, see"," ",t.jsx(M,{openInNewTab:!0,href:"https://neon.com/docs/manage/branches#connect-to-a-branch",children:"Connect to a branch"}),"."]})},dee="_alert_11n0x_1",uee="_footer_11n0x_5",m0={alert:dee,footer:uee},hee=({data:e,onRequestClose:s,...n})=>{const{branch:r}=e,{database:a,role:o,endpoint:i}=dC(e);return!o||!a||!r||!i?null:t.jsxs(It,{...n,onRequestClose:s,title:Af.title,"data-qa":"create_branch_success",maxWidth:770,children:[t.jsxs(qe,{children:[t.jsx(X,{appearance:e.branch.expires_at?"info":"success",className:m0.alert,children:Af.success(e.branch.name,e.branch.expires_at)}),t.jsx(dN,{branch:r,endpoint:i,role:o,database:a})]}),t.jsxs(Ee,{children:[t.jsx(qx,{className:m0.footer,children:Af.footer(r.project_id)}),t.jsx(dn,{"data-qa":"connection_details_modal_close_button"})]})]})},pee="_buttonContainer_1besf_1",mee={buttonContainer:pee},gee=({data:e,...s})=>{const{role:n}=e,{trackUiInteraction:r}=k(),{project:a}=F(),o=m.useMemo(()=>{if(!n)return"";const i=`PGUSER=${n.name}
PGPASSWORD=${n.password}`,c=new Blob([i],{type:""});return window.URL.createObjectURL(c)},[n]);return m.useEffect(()=>()=>window.URL.revokeObjectURL(o),[o]),!n||!a?null:t.jsx(It,{...s,"data-qa":"created_role_modal",title:"Role created!",children:t.jsxs(qe,{children:[t.jsxs(P,{children:["Role ",t.jsx(Pe,{children:n.name})," was successfully created. Copy the password or download the .env file.",!a.store_passwords&&t.jsxs(t.Fragment,{children:[" ","The password cannot be displayed again after closing this dialog."]}),t.jsx("br",{}),t.jsx("br",{}),"Password:"]}),t.jsx("br",{}),t.jsx(Bn,{copy:{getUnmaskedValue:()=>Promise.resolve(n.password??""),onCopy:()=>r("role_created_popup_copy_password_clicked")},reveal:{getUnmaskedValue:()=>Promise.resolve(n.password??"")},"data-qa":"role_password",children:"*******"}),t.jsx("br",{}),o&&t.jsxs(t.Fragment,{children:[t.jsx(P,{children:"Download the .env file to save the user's password."}),t.jsx("br",{}),t.jsx("div",{className:mee.buttonContainer,children:t.jsx(A,{as:"a",target:"_blank",href:o,download:".env",size:"l",onClick:()=>r("role_created_popup_download_credentials_clicked"),children:"Download .env"})})]})]})})},wv=e=>{const s=xx("growth_onboarding_experience"),{projectData:n,branchData:r,roleData:a,setProjectData:o,setBranchData:i,setRoleData:c}=m.useContext(W1),l=m.useCallback(()=>{if(e==="project"){o();return}e==="branch"&&i(),e==="role"&&c()},[e,o,i,c]),d=m.useMemo(()=>e==="project"&&n?s!=="control"&&s!=="connection_modal_and_get_started"?null:t.jsx(tee,{data:n,isOpen:!0,onRequestClose:l}):e==="role"&&a?t.jsx(gee,{data:a,isOpen:!!a,onRequestClose:l}):e==="branch"&&r?t.jsx(hee,{data:r,isOpen:!!r,onRequestClose:l}):null,[e,n,a,r,s,l]);return m.useEffect(()=>l,[e,l]),d},uN=()=>{const{data:e}=bt(),s=Dn(),n=KC(e==null?void 0:e.id),{orgId:r,isLoading:a}=ae();m.useEffect(()=>{if(a||e===void 0)return;const o=ca(e);let i;if(r!==void 0)i={type:"org",id:r};else{if(o)return;i={type:"user"}}CI(i,n)||s(X$({lastAccount:i,userId:e.id}))},[a,r,e,n,s])},xs=(e,s={},n)=>{const r=m.memo(a=>{const{projectId:o,project:i,isLoading:c,error:l}=F(),d=wv("role");uN();const u=n==null?void 0:n({projectId:o});return!c&&(!i||l)?t.jsx(ll,{isError:!0,children:t.jsx(is,{title:l||"Something went wrong",imgSrc:uC,actions:t.jsx(A,{as:hC,to:C.ProjectsList,size:"l",children:"Back to Project List"})})}):t.jsxs(t.Fragment,{children:[d,t.jsx(ll,{...s,secondLevelNav:u,children:t.jsx(e,{...a})})]})});return r.displayName=`withProjectConsoleLayout(${e.displayName})`,r},Bt=({path:e,to:s})=>{const{projectId:n}=F(),{defaultBranch:r}=xt();return t.jsx(yt,{path:e,exact:!0,children:r?t.jsx(we,{to:G(s,{projectId:n,branchId:r.id})}):null})},fee=xs(({projectId:e})=>{const{branchId:s,isLoading:n}=Tt();return n?t.jsx(Se,{}):t.jsx(we,{to:s?G(C.ProjectsItemBranchesItem,{projectId:e,branchId:s}):G(C.ProjectsItemBranches,{projectId:e})})}),_ee=({from:e,to:s,exact:n})=>{const r=gl(),o=new URLSearchParams(r.search).get(lm);let i=s;if(o){const c=new URL(s,"https://n");c.searchParams.set(lm,o),i=`${c.pathname}${c.search}`}return t.jsx(we,{from:e,to:i,exact:n})},ua=(e,s={},n)=>{const r=m.memo(a=>{const{params:o}=fl(),i=rT(),c=le("referral_codes"),{isKeycloakUser:l}=m.useContext(eg),{data:d}=bt(),u=ca(d);uN();const{orgId:p,org:h,isLoading:g,isOrgFetching:f,isVercelOrg:_}=ae(),{isFreeSubscription:b}=fe(),{data:x}=yx(),v=x&&x.length>0;return!g&&p&&!f&&!h?t.jsx(ll,{isError:!0,children:t.jsx(is,{title:`Org ${p} was not found`,imgSrc:uC,actions:t.jsx(A,{as:hC,to:C.Root,size:"l",children:"Back to Console"})})}):t.jsx(ll,{...s,userIsOrgBased:u,secondLevelNav:n==null?void 0:n({billingSections:i,orgId:o.orgId,isReferralCodesEnabled:c,isVercelOrg:_,isKeycloakUser:l,isFreeSubscription:b,orgHasCollaborators:v,userIsOrgBased:u}),children:t.jsx(e,{...a})})});return r.displayName=`withConsoleLayout(${e.displayName})`,r},hN=m.memo(({children:e})=>t.jsxs(Pc,{children:[e,t.jsx(Je,{component:Kp})]}));hN.displayName="BranchPreviewSwitch";const bee="_root_14p4c_1",xee="_root_island_14p4c_9",vee="_icon_14p4c_16",jee="_codeBlock_14p4c_21",yee="_command_14p4c_34",wee="_codePrefix_14p4c_39",ic={root:bee,root_island:xee,icon:vee,codeBlock:jee,command:yee,codePrefix:wee},See=()=>{const{trackUiInteraction:e}=k(),{psqlConnectHost:s}=Q$(),n=`psql -h ${s}`;return s?t.jsxs("div",{className:V(ic.root,{[ic.root_island]:!1}),children:[t.jsx(q,{className:ic.icon,name:"info",size:20}),"Passwordless connect with psql:",t.jsxs("div",{className:ic.codeBlock,children:[t.jsxs("span",{className:ic.command,children:[t.jsx("span",{className:ic.codePrefix,children:"$"}),n]}),t.jsx(vl,{text:n,onCopy:()=>e("psql_connect_banner_command_copied")})]})]}):(mL("Psql connect host hasn't set"),null)},Ef={noPastInvoices:"There are no past invoices",viewPastInvoices:"View past invoices"},Cee="_disabledBtn_1aaln_1",Iee={disabledBtn:Cee},Fr={noInvoices:"For now just enjoy Neon! Your very first invoice will be due on",reference:"Reference",due:"Due",issued:"Issued",total:"Total",actionsLabel:"Actions for an invoice",download:"Download",requestSubject:{paid:"Request refund",issued:"Request credit note"}},kee="_root_1dwho_1",Tee="_item_1dwho_8",Pee="_bill_1dwho_14",Gr={root:kee,item:Tee,bill:Pee},Of=()=>t.jsxs(Rn,{className:Gr.root,children:[t.jsxs("div",{className:Gr.item,children:[t.jsx(D,{width:50,height:20}),t.jsx(D,{width:150,height:20})]}),t.jsxs("div",{className:Gr.item,children:[t.jsx(D,{width:30,height:20}),t.jsx(D,{width:150,height:20})]}),t.jsxs("div",{className:Gr.item,children:[t.jsx(D,{width:70,height:20}),t.jsx(D,{width:150,height:20})]}),t.jsxs("div",{className:Gr.item,children:[t.jsx(D,{width:40,height:20}),t.jsx(D,{width:150,height:20})]}),t.jsxs("div",{className:Gr.bill,children:[t.jsx(D,{width:50,height:20}),t.jsx(D,{width:20,height:20})]})]}),Nee=()=>t.jsx(Rn,{children:t.jsx(ts,{children:`${Fr.noInvoices} ${mt().add(1,"month").date(1).utc().format(ke.Date)}`})}),Wh=({label:e,value:s="-"})=>t.jsxs("div",{className:Gr.item,children:[t.jsx(ts,{children:e}),t.jsx(ts,{appearance:"secondary",children:s})]}),Aee={paid:"success",issued:"default"},Eee=({invoice_number:e,due_date:s,status:n,pdf_url:r,issued_at:a,total:o,currency:i})=>{const c=le("refund_request"),{trackUiInteraction:l}=k(),[d,u]=m.useState(!1),p=()=>u(!1),h=m.useMemo(()=>[{items:[{label:Fr.download,href:r,onClick(){l("billing_invoice_download_clicked")}},Number(o)&&{label:Fr.requestSubject[n],onClick(){l("billing_invoice_refund_request_clicked"),u(!0)}}].filter(f=>!!f)}],[r,o,n,l]),g=`Invoice: ${e}, Issued: ${xe(a,ke.Date)} Total: ${o} ${i}`;return t.jsxs(t.Fragment,{children:[t.jsx(v5,{isOpen:d,chargeInfo:g,onRequestClose:p,invoiceId:e,amount:Number(o),requestSubject:Fr.requestSubject[n],invoiceStatus:n}),t.jsxs(Rn,{className:Gr.root,role:"listitem",children:[t.jsx(Wh,{label:Fr.issued,value:xe(a,ke.Date)}),t.jsx(Wh,{label:Fr.due,value:s&&xe(s,ke.Date)}),t.jsx(Wh,{label:Fr.reference,value:e}),t.jsx(Wh,{label:Fr.total,value:`${o} ${i}`}),t.jsxs("div",{className:Gr.bill,children:[t.jsx(Ne,{appearance:Aee[n],children:n}),c?t.jsx(Jt,{sections:h,children:t.jsx(fs,{"aria-label":Fr.actionsLabel})}):t.jsx(M,{icon:"download",href:r,download:!0})]})]})]})},Oee="_cards_eoxag_1",g0={cards:Oee},Lee=({invoices:e,isLoading:s=!1})=>s?t.jsxs("div",{className:g0.cards,children:[t.jsx(Of,{}),t.jsx(Of,{}),t.jsx(Of,{})]}):e!=null&&e.length?t.jsx("div",{className:g0.cards,role:"list",children:e.map(({invoice_id:n,...r})=>t.jsx(Eee,{...r},n))}):t.jsx(Nee,{}),f0={drawerTitle:"Past invoices"},$ee="_drawerContent_1b3du_1",Ree={drawerContent:$ee},Bee=({isDrawerOpen:e,close:s,invoices:n,isInvoicesLoading:r})=>t.jsx(la,{isOpen:e,"aria-label":f0.drawerTitle,onRequestClose:s,size:"l",children:t.jsx(da,{title:f0.drawerTitle,children:t.jsx("div",{className:Ree.drawerContent,children:t.jsx(Lee,{invoices:n,isLoading:r})})})}),pN=()=>{const{trackUiInteraction:e}=k(),{subscriptionType:s}=fe(),[n,r]=m.useState(!1),{invoices:a,isInvoicesLoading:o}=yq();return vq(s)?t.jsxs(t.Fragment,{children:[!o&&!(a!=null&&a.length)?t.jsx(ne,{content:Ef.noPastInvoices,children:t.jsx("div",{"data-qa":"past_invoices_button",children:t.jsx(A,{appearance:"secondary",disabled:!0,className:Iee.disabledBtn,children:Ef.viewPastInvoices})})}):t.jsx(A,{loading:o,onClick:()=>{e("billing_invoices_drawer_open"),r(!0)},appearance:"secondary",disabled:!a,children:Ef.viewPastInvoices}),t.jsx(Bee,{isDrawerOpen:n,close:()=>r(!1),invoices:a,isInvoicesLoading:o})]}):null};function mN(){const{isFreeSubscription:e,isFetching:s}=fe();return e||s}const Mee="_fields_u6tgv_1",Dee={fields:Mee},Uee=({isOpen:e,onRequestClose:s})=>{var d,u,p,h;const{trackUiInteraction:n}=k(),{data:r}=bt(),{submitIntegrationSuggestionForm:a}=ml(),o=Ts({shouldUnregister:!0}),i=()=>{ze(t.jsx(tt,{children:"Thank you for your request!"})),s()},c=()=>{ze(t.jsx(ki,{children:t.jsxs(t.Fragment,{children:["Request failed. Please try again or contact us at"," ",t.jsx(M,{openInNewTab:!0,href:`mailto:${Mj}`,children:Mj}),"."]})}),{...wx,toastId:"integration_suggestion_form_failed"})},l=g=>{if(r!==void 0)return a(r.email,g).then(i).catch(c)};return t.jsx(oa,{title:"Suggest integration",isOpen:e,onRequestClose:()=>{n("integration_suggestion_form_dismissed"),s()},children:t.jsx(es,{...o,children:t.jsxs(Ht,{id:"integration-request-form",onSubmit:o.handleSubmit(l),children:[t.jsxs(ia,{className:Dee.fields,children:[t.jsx(B,{error:(u=(d=o.formState.errors)==null?void 0:d.title)==null?void 0:u.message,id:"title",label:"Integration name",children:t.jsx(ce,{autoFocus:!0,...o.register("title",{required:"This field is required"})})}),t.jsx(B,{error:(h=(p=o.formState.errors)==null?void 0:p.comment)==null?void 0:h.message,id:"comment",label:"Message",children:t.jsx(eo,{...o.register("comment",{required:"This field is required"}),placeholder:"Share your specific use case. It helps us build for precisely what you need.",rows:6,"data-qa":"suggest_integration_comment_field"})})]}),t.jsxs(Ee,{children:[t.jsx(so,{}),t.jsx(Ie,{"data-qa":"suggest_new_integration_submit",onClick:()=>{n("integration_suggestion_form_submitted")},children:"Suggest integration"})]})]})})})},Fee=()=>{const{trackUiInteraction:e}=k(),[s,n]=m.useState(!1),r=()=>n(!0),a=()=>n(!1);return t.jsxs(t.Fragment,{children:[t.jsx(A,{"data-qa":"suggest_new_integration",onClick:()=>{e("integrations_request_integration_popup_open"),r()},children:"Suggest an integration"}),t.jsx(Uee,{isOpen:s,onRequestClose:a})]})},gN="/assets/assets/vercel-cover@2x-DxKeLbKt.webp",zee="/assets/assets/okta-cover-Ct_OfezU.webp",fN="/assets/assets/default-cover-Dx0vE_98.webp",_N="/assets/assets/default-cover@2x-D4GKlMww.webp",qee=Object.freeze(Object.defineProperty({__proto__:null,AirbyteCover:UR,CloudflareHyperdriveCover:FR,CloudflarePagesCover:zR,CloudflareWorkersCover:qR,ConfluentCover:HR,DefaultCover:fN,DefaultCover2x:_N,DenoCard:VR,DenoCover:WR,ExographCover:GR,FerretDBCover:KR,FivetranCover:QR,GithubCard:YR,GithubCover:tb,GrafbaseCover:JR,HasuraCover:ZR,HerokuCard:XR,HerokuCover:eB,KoyebCover:tB,MaterializeCover:sB,NeosyncCover:nB,NetlifyCard:rB,NetlifyCover:aB,OktaCover:zee,OuterbaseCard:oB,OuterbaseCover:sb,PrismaCover:iB,RailwayCard:cB,RailwayCover:lB,RenderCard:dB,RenderCover:uB,SequinCard:hB,SequinCover:pB,StepZenCover:mB,VercelCard:gB,VercelCover:lI,VercelCover2x:gN,WunderGraphCover:fB},Symbol.toStringTag,{value:"Module"})),Hee="_root_1ygwd_1",Vee="_header_1ygwd_9",_0={root:Hee,header:Vee},At=({title:e,action:s,children:n,className:r})=>t.jsxs("div",{className:V(_0.root,r),children:[e&&t.jsxs("div",{className:_0.header,children:[t.jsx(J,{level:4,children:e}),s]}),n]}),Lf={title:"Provide feedback",description:"Please provide feedback on your experience with this integration to help us improve it.",submit:"Submit feedback"},Wee="_description_1wg2j_1",Gee={description:Wee},To={success:"Thanks for your feedback!",fail:t.jsxs(t.Fragment,{children:["Request failed. Please try again or contact us at"," ",t.jsx(M,{openInNewTab:!0,href:"mailto:feedback@neon.tech",appearance:"error",children:"feedback@neon.tech"}),"."]}),title:"Submit feedback",submit:"Send",messageLabel:"Message",messagePlaceholder:"Please share your feedback",formRequiredError:"This field is required"},Kee=({isOpen:e,onRequestClose:s,subject:n})=>{var u;const{trackUiInteraction:r}=k(),{submitIntegrationFeedbackForm:a}=ml(),{data:o}=bt(),i=Ts({defaultValues:{message:""},shouldUnregister:!0}),c=()=>{ze(t.jsx(tt,{children:To.success})),s()},l=()=>{ze(t.jsx(ki,{children:To.fail}),{...wx,toastId:"integration_feedback_form_failed"})},d=p=>{if(o!==void 0)return a(p,o.email,n).then(c).catch(l)};return t.jsx(oa,{title:To.title,isOpen:e,onRequestClose:()=>{r("integration_feedback_dismissed"),s()},children:t.jsx(es,{...i,children:t.jsxs(Ht,{onSubmit:i.handleSubmit(d),children:[t.jsx(ia,{children:t.jsx(B,{error:(u=i.formState.errors.message)==null?void 0:u.message,label:To.messageLabel,children:t.jsx(eo,{rows:6,placeholder:To.messagePlaceholder,...i.register("message",{required:{value:!0,message:To.formRequiredError}})})})}),t.jsxs(Ee,{children:[t.jsx(so,{}),t.jsx(Ie,{onClick:()=>{r("integration_feedback_submitted")},children:To.submit})]})]})})})},Sv=({subject:e,className:s})=>{const{trackUiInteraction:n}=k(),[r,a]=m.useState(!1),o=()=>a(!0),i=()=>a(!1);return t.jsxs(At,{title:Lf.title,className:s,children:[t.jsx(Kee,{subject:e,isOpen:r,onRequestClose:i}),t.jsx("div",{className:Gee.description,children:Lf.description}),t.jsx(A,{appearance:"secondary",onClick:()=>{n("integration_feedback_clicked"),o()},children:Lf.submit})]})},Qee="_root_1cbeo_1",Yee={root:Qee},Cv=()=>t.jsxs("div",{className:Yee.root,children:[t.jsx(D,{height:20,width:250}),t.jsx(D,{height:40}),t.jsx(D,{height:280}),t.jsx(D,{height:80}),t.jsx(D,{height:20,width:150}),t.jsx(D,{height:20,width:300}),t.jsx(D,{height:36,width:190}),t.jsx(D,{height:20,width:150}),t.jsx(D,{height:40}),t.jsx(D,{height:36,width:190})]}),Jee="_body_qv4yl_1",Zee="_bodyWithFooter_qv4yl_5",Xee="_feedback_qv4yl_9",ete="_header_qv4yl_13",Gh={body:Jee,bodyWithFooter:Zee,feedback:Xee,header:ete},ho=({isOpen:e,onRequestClose:s,title:n,subtitle:r,beta:a,iconName:o,coverImage:i={x1:fN,x2:_N},isLoading:c=!1,hideFeedback:l=!1,"aria-label":d,size:u="m",action:p,children:h,footer:g})=>t.jsx(la,{isOpen:e,"aria-label":d,size:u,onRequestClose:s,children:t.jsx(J3,{title:a?t.jsxs("div",{className:Gh.header,children:[n," ",t.jsx(Ne,{appearance:"experimental",size:"m",children:"Beta"})]}):n,subtitle:r,icon:o,coverImage:i,action:p,footer:g,children:t.jsx("div",{className:V(Gh.body,{[Gh.bodyWithFooter]:!!g}),children:c?t.jsx(Cv,{}):t.jsxs(t.Fragment,{children:[h,!l&&t.jsx(Sv,{className:Gh.feedback,subject:n})]})})})}),tte="_title_1g0wf_1",ste={title:tte},bN=({title:e})=>t.jsx("h4",{className:ste.title,children:e}),nte=e=>{const s=m.useMemo(()=>`${gL}${e}.md`,[e]),n=m.useCallback(()=>fetch(s).then(o=>{if(o.ok)return o.text()}),[s]),{isLoading:r,data:a}=II(n);return{isLoading:r,documentationMd:a}},rte=({docId:e})=>{const{documentationMd:s,isLoading:n}=nte(e);return n?t.jsx(Cv,{}):s?t.jsx(dP,{md:s}):t.jsxs(X,{appearance:"warning",children:["Could not fetch the docs. Go to"," ",t.jsx(M,{openInNewTab:!0,href:`${pC}${e}`,children:"Docs page"}),"."]})},ate=({name:e,logoImage:s,coverImage:n,docId:r,isOpen:a,onRequestClose:o,nameSuffix:i,openedAnalyticsEventName:c})=>{const{trackUiInteraction:l}=k();return t.jsx(ho,{"aria-label":`${e} ${i??""}`,title:`${e} ${i??""}`,onRequestClose:o,isOpen:a,iconName:s,coverImage:n?{x1:n,x2:n}:void 0,hideFeedback:!0,size:"l",action:t.jsx(M,{openInNewTab:!0,href:`${pC}${r}`,icon:"external_link",onClick:()=>{l(c)},children:"Open in docs"}),children:t.jsx(rte,{docId:r})})},ote=({integration:{id:e,name:s,logoImage:n,coverImage:r,docId:a}})=>{const{trackUiInteraction:o}=k(),{openDrawer:i,openedDrawerId:c,closeDrawer:l}=io();return a?t.jsxs(t.Fragment,{children:[t.jsx(A,{onClick:()=>{o("integrations_page_read_documentation_button_clicked",{additionalInfo:s}),i(e)},appearance:"secondary",children:"Read"}),t.jsx(ate,{openedAnalyticsEventName:"integration_documentation_full_docs_clicked",nameSuffix:"integration",name:s,logoImage:n,coverImage:r,docId:a,isOpen:c===e,onRequestClose:()=>{o("integrations_page_read_documentation_panel_closed",{additionalInfo:s}),l()}})]}):null},cc={addButton:"Add",manageButton:"Manage",comingSoonOrganizations:"Coming soon to organizations",upgradeButton:"Upgrade plan to add",manageNeonSubscription:"Manage Neon subscription",unavailable:"Unavailable"},xN=({integration:e,disabled:s})=>{const{orgId:n,org:r,isVercelOrg:a}=ae(),{trackUiInteraction:o}=k(),{openDrawer:i}=io(),[c,l]=m.useState(!1);if(r&&a&&e.id===ea.Vercel)return t.jsx(A,{as:"a",appearance:"secondary",icon:"external_link",iconSide:"right",target:"_blank",rel:"noopener noreferrer",href:`/api/v2/marketplace/vercel/installation_url_redirect?org_id=${n}`,children:cc.manageNeonSubscription});if(r&&e.isUnsupportedForOrgs)return t.jsx(Ne,{children:cc.comingSoonOrganizations});if(s)return e.upgradeType?t.jsxs(t.Fragment,{children:[t.jsx(A,{appearance:"secondary",size:"s",onClick:()=>l(!0),children:cc.upgradeButton}),t.jsx(Pt,{type:e.upgradeType,isOpen:c,onRequestClose:()=>l(!1)})]}):t.jsx(A,{appearance:"secondary",disabled:!0,children:cc.unavailable});const{drawerButtons:d}=e;return d?e.isAdded?t.jsx(A,{appearance:"secondary","data-qa":`manage_${e.id}_integration`,onClick:()=>{o(d.manageAnalyticsId),i(e.id)},children:cc.manageButton}):t.jsx(A,{appearance:"secondary","data-qa":`add_${e.id}_integration`,onClick:()=>{o(d.addAnalyticsId),i(e.id)},children:cc.addButton}):t.jsx(ote,{integration:e})},ite="_branchName_b9vqd_1",cte={branchName:ite},vN=({name:e})=>{const s=m.useRef(null),[n,r]=m.useState();return m.useEffect(()=>{if(s.current){const{scrollWidth:a,offsetWidth:o}=s.current;r(a>o)}},[s]),t.jsx(ne,{content:e,disabled:!n,placement:"top",children:t.jsx("span",{ref:s,className:cte.branchName,children:e})})},lte="_placeholder_6wk7j_1",dte={placeholder:lte},ute=()=>t.jsxs("div",{className:dte.placeholder,children:[t.jsx(D,{height:60}),t.jsx(D,{height:20,width:200}),t.jsx(D,{height:48}),t.jsx(D,{height:20,width:250}),t.jsx(D,{height:280})]}),hte="_prodBranch_cncha_1",pte={prodBranch:hte},mte=({name:e})=>t.jsxs("div",{className:pte.prodBranch,children:[t.jsx(vN,{name:e}),t.jsx(Ne,{size:"m",children:"default"})]}),gte="_card_1l6a4_1",fte={card:gte},tn={delete:{dialogTitle:"Delete the branch?",alert:e=>t.jsxs(t.Fragment,{children:["This will permanently delete the branch ",t.jsx("code",{children:e}),". Are you sure you want proceed?"]}),confirmButton:"Delete"},deleteObsolete:{dialogTitle:"Delete all obsolete branches?",alert:"This will permanently delete all obsolete branches. Are you sure you want to proceed?",confirmButton:"Delete"},deleteShown:{dialogTitle:"Delete the branches shown in the list?",alert:"This will permanently delete all the branches shown in the list. Are you sure you want to proceed?",confirmButton:"Delete"},deletePreview:{dialogTitle:"Delete all preview branches?",alert:"This will permanently delete all preview branches. Are you sure you want to proceed?",confirmButton:"Delete"}},_te=()=>{const{confirm:e}=Ye();return m.useCallback(s=>e({header:tn.delete.dialogTitle,appearance:"danger",confirmButtonText:tn.delete.confirmButton,text:t.jsx(X,{appearance:"error",children:tn.delete.alert(s)})}),[e])},bte=()=>{const{confirm:e}=Ye();return m.useCallback(()=>e({header:tn.deletePreview.dialogTitle,text:t.jsx(X,{appearance:"error",children:tn.deletePreview.alert}),confirmButtonText:tn.deletePreview.confirmButton,appearance:"danger"}),[e])},xte=()=>{const{confirm:e}=Ye();return m.useCallback(()=>e({header:tn.deleteObsolete.dialogTitle,text:t.jsx(X,{appearance:"error",children:tn.deleteObsolete.alert}),confirmButtonText:tn.deleteObsolete.confirmButton,appearance:"danger"}),[e])},vte=()=>{const{confirm:e}=Ye();return m.useCallback(()=>e({header:tn.deleteShown.dialogTitle,text:t.jsx(X,{appearance:"error",children:tn.deleteShown.alert}),confirmButtonText:tn.deleteShown.confirmButton,appearance:"danger"}),[e])},Kh="vercel-configuration",Ll=()=>{const{orgId:e,isLoading:s}=ae(),n=_e(),{data:r,isError:a,isPending:o}=_t({queryKey:[Kh,e],queryFn:()=>W.getVercelConfiguration({org_id:e}),select:x=>x.data,retry:!1,enabled:!s}),i=m.useMemo(()=>!!(!a&&(r!=null&&r.configuration)),[r,a]),c=m.useMemo(()=>{var x;return(x=r==null?void 0:r.configuration)==null?void 0:x.configuration_id},[r]),l=m.useMemo(()=>{var x,v;return(v=(x=r==null?void 0:r.configuration)==null?void 0:x.projects)==null?void 0:v.map(j=>({id:j.id,name:j.name,url:j.url,neon_project_id:j.neon_project_id,neon_project_name:j.neon_project_name}))},[r]),{mutateAsync:d,isPending:u}=ve({mutationFn:()=>W.deleteVercelConfiguration({org_id:e}),onSuccess:async()=>{await n.invalidateQueries({queryKey:[Kh,e]}),await n.invalidateQueries({queryKey:gi(e)})}}),[p]=$x(),{mutateAsync:h,isPending:g}=ve({mutationFn:async x=>{const v=await p({projectId:x.projectId,branchId:x.branchId,role:x.role.value},!0).unwrap();return await W.connectVercelProject(x.projectId,{configuration_id:x.configurationId,vercel_project_id:x.vercelProjectId,role_name:x.role.value,database_name:x.database.value,password:v,create_dev_branch:!0,auto_delete_obsolete_branches:!0}),x},onSuccess:async x=>{await n.invalidateQueries({queryKey:[Kh]}),await n.invalidateQueries({queryKey:gi(x.orgId)}),await n.invalidateQueries({queryKey:ms(x.projectId)})}}),{mutateAsync:f,isPending:_}=ve({mutationFn:async x=>W.unlinkProjectFromVercelIntegrations(x),onSuccess:async()=>{await n.invalidateQueries({queryKey:[Kh,e]}),await n.invalidateQueries({queryKey:gi(e)})}}),b=m.useMemo(()=>(l==null?void 0:l.filter(x=>x.neon_project_id).map(x=>x.id))??[],[l]);return{isConfigured:i,isLoading:o||s,configurationId:c,projects:l,connectedVercelProjectIds:b,connectProjectAsync:h,isConnecting:g,removeIntegration:d,isRemoving:u,disconnectProject:f,isDisconnecting:_}},Iv=e=>{const{orgId:s,isLoading:n}=ae(),{isOrgAdmin:r}=qt(),{isCollaborator:a,isLoading:o}=jl(e),i=n||o,c=s===void 0&&!a;return{isAllowedToInstall:m.useMemo(()=>!i&&(c||r),[i,c,r]),isCollaborator:a,isLoading:i}},$l=({projectId:e})=>["getProjectVercelBranches",e],jN=({projectId:e})=>{const s=_t({queryKey:$l({projectId:e}),queryFn:async()=>(await W.getProjectVercelBranches(e)).data});return m.useEffect(()=>{s.error&&Y(s.error)},[s.error]),s},yN=({projectId:e})=>["deleteProjectVercelBranches",e],jte=({projectId:e},{onSuccess:s,onError:n,...r}={})=>{const a=_e();return ve({mutationKey:yN({projectId:e}),mutationFn:async()=>(await W.deleteProjectVercelBranches(e)).data,onSuccess:(...o)=>{a.invalidateQueries({queryKey:$l({projectId:e})}),s==null||s(...o)},onError:(o,...i)=>{Y(o),n==null||n(o,...i)},...r})},wN=({projectId:e})=>["triggerDeleteObsoletePreviewBranches",e],yte=({projectId:e},{onSuccess:s,onError:n,...r}={})=>{const a=_e();return ve({mutationKey:wN({projectId:e}),mutationFn:async()=>(await W.triggerDeleteObsoletePreviewBranches(e)).data,onSuccess:(...o)=>{a.invalidateQueries({queryKey:$l({projectId:e})}),s==null||s(...o)},onError:(o,...i)=>{Y(o),n==null||n(o,...i)},...r})},SN=({projectId:e})=>["deleteProjectBranches",e],wte=({projectId:e},{onSuccess:s,onError:n,...r}={})=>{const a=_e();return ve({mutationKey:SN({projectId:e}),mutationFn:async o=>(await W.deleteProjectBranches(e,o)).data,onSuccess:(...o)=>{a.invalidateQueries({queryKey:$l({projectId:e})}),s==null||s(...o)},onError:(o,...i)=>{Y(o),n==null||n(o,...i)},...r})},Ste=({projectId:e},{onSuccess:s,onError:n,...r}={})=>{const a=_e();return ve({mutationKey:["deleteProjectBranch",e],mutationFn:async({branchId:o})=>(await W.deleteProjectBranch(e,o)).data,onSuccess:(...o)=>{a.invalidateQueries({queryKey:$l({projectId:e})}),s==null||s(...o)},onError:(o,...i)=>{Y(o),n==null||n(o,...i)},...r})},Cte=({projectId:e})=>["getProjectVercelSettings",e],Ite=({projectId:e})=>_t({queryKey:Cte({projectId:e}),queryFn:async()=>(await W.getProjectVercelSettings(e)).data}),kte=({projectId:e},{onError:s,...n}={})=>ve({mutationKey:["setProjectVercelSettings",e],mutationFn:async r=>(await W.setProjectVercelSettings(e,r)).data,onError:(r,...a)=>{Y(r),s==null||s(r,...a)},...n}),Tte=({projectId:e})=>["getProjectVercelVars",e],Pte=({projectId:e})=>_t({queryKey:Tte({projectId:e}),queryFn:async()=>(await W.getProjectVercelVars(e)).data}),Nte=({projectId:e},{onSuccess:s,...n}={})=>{const r=_e();return ve({mutationKey:["setProjectVercelVars",e],mutationFn:async a=>(await W.setProjectVercelVars(e,a)).data,onSuccess:(...a)=>{r.invalidateQueries({queryKey:$l({projectId:e})}),s==null||s(...a)},...n})},Hd={obsolete:"obsolete",createdDateTooltip:"Branch create date",obsoleteTooltip:t.jsxs(t.Fragment,{children:[t.jsx("div",{children:"Obsolete branches no longer have"}),t.jsx("div",{children:"related git branches."})]}),linkMore:e=>`${e} more`,branchDeleted:"The branch has been deleted."},Ate="_branch_1rdyy_1",Ete="_branchContent_1rdyy_9",Ote="_branchRow_1rdyy_16",$f={branch:Ate,branchContent:Ete,branchRow:Ote},Lte=({projectId:e,branch:s,shouldDisplayObsoleteBadge:n=!1})=>{const{trackUiInteraction:r}=k(),a=Fg({filters:{mutationKey:yN({projectId:e}),status:"pending"}}).length!==0,o=Fg({filters:{mutationKey:wN({projectId:e}),status:"pending"}}).length!==0,i=Fg({filters:{mutationKey:SN({projectId:e}),status:"pending"}}).some(p=>{var h;return(h=p.variables)==null?void 0:h.branch_ids.includes(s.id)}),c=_te(),l=Ste({projectId:e},{onSuccess:()=>pe(Hd.branchDeleted,{containerId:hi.Drawer})}),d=m.useCallback(async()=>{if(r("vercel_integration_delete_branch_clicked"),!await c(s.name)){r("vercel_integration_delete_branch_dismissed");return}r("vercel_integration_delete_branch_confirmed"),l.mutate({branchId:s.id})},[r,c,s.name,s.id,l]),u=!s.hasGitBranch;return t.jsxs("div",{className:$f.branch,"data-qa":"vercel-preview-branch",role:"listitem","aria-label":s.name,children:[t.jsxs("div",{className:$f.branchContent,children:[t.jsx(vN,{name:s.name}),t.jsxs("div",{className:$f.branchRow,children:[t.jsx(ne,{content:Hd.createdDateTooltip,children:t.jsx("span",{children:xe(s.created_at,ke.Date)})}),n&&u&&t.jsx(ne,{content:Hd.obsoleteTooltip,children:t.jsx(Ne,{size:"m",children:Hd.obsolete})})]})]}),t.jsx(ta,{iconName:"trash",iconSize:20,appearance:"error",disabled:l.isPending||a||o&&u||i,onClick:d})]})},$te="_linkMore_1qmxx_1",Rte={linkMore:$te},Bte=({linkMoreCount:e})=>{const{projectId:s}=F();return t.jsxs(M,{className:Rte.linkMore,href:G(C.ProjectsItemBranches,{projectId:s}),children:[t.jsx("div",{children:Hd.linkMore(e)}),t.jsx(q,{name:"arrow_right",size:20})]})},Mte=({projectId:e,branches:s,showObsoleteBadge:n=!1,maxShownBranches:r})=>{const a=s.slice(0,r);return t.jsxs("div",{className:fte.card,role:"list","aria-label":"preview branches",children:[a.map(o=>t.jsx(Lte,{projectId:e,branch:o,shouldDisplayObsoleteBadge:n},o.id)),s.length>r&&t.jsx(Bte,{linkMoreCount:s.length-r})]})},Dte="_root_1g7cl_1",Ute="_featured_1g7cl_10",Fte="_background_1g7cl_14",zte="_card_1g7cl_23",qte="_header_1g7cl_42",Hte="_description_1g7cl_48",lc={root:Dte,featured:Ute,background:Fte,card:zte,header:qte,description:Hte},Vte=({integration:e,featured:s,beta:n,disabled:r})=>t.jsxs("div",{role:"listitem","aria-label":e.name,className:V(lc.root,{[lc.featured]:s}),children:[e.cardImage&&t.jsx("div",{className:lc.background,style:{backgroundImage:`url("${e.cardImage}")`}}),t.jsxs("div",{className:lc.card,children:[t.jsxs("div",{className:lc.header,children:[t.jsx(q,{name:e.logoImage,size:32}),t.jsx(bN,{title:e.name}),n&&t.jsx(Ne,{appearance:"experimental",size:"m",children:"Beta"})]}),t.jsx(P,{className:lc.description,children:e.description}),t.jsx(xN,{integration:e,disabled:r})]})]}),Wte="_root_1elsh_1",Gte="_cardContent_1elsh_13",Kte="_logoWrapper_1elsh_20",Qte="_description_1elsh_27",Yte="_status_1elsh_36",Jte="_exportStats_1elsh_44",Zte="_exportBadges_1elsh_52",Xte="_buttons_1elsh_58",ese="_alert_1elsh_65",tse="_warning_1elsh_65",sse="_error_1elsh_71",bn={root:Wte,cardContent:Gte,logoWrapper:Kte,description:Qte,status:Yte,exportStats:Jte,exportBadges:Zte,buttons:Xte,alert:ese,warning:tse,error:sse},nse=({integration:e,actionButton:s,status:n,integrationExportStats:r})=>{const a=pi[e.categoryId],o=u=>{var p;return((p=r==null?void 0:r.find(({type:h})=>h===u))==null?void 0:p.count)??0},i=r?{metrics:o("metric_points"),logs:o("log_records")}:void 0,c=o("metric_failed"),l=o("log_failed"),d=c>0||l>0?{failedMetrics:c,failedLogs:l,failuresOnly:c+l>0&&o("metric_points")+o("log_records")===0}:void 0;return t.jsxs("div",{className:bn.root,role:"listitem","aria-label":e.name,children:[t.jsxs("div",{className:bn.cardContent,children:[t.jsx("div",{className:bn.logoWrapper,children:t.jsx(q,{name:e.logoImage,size:32})}),t.jsxs("div",{className:bn.description,children:[t.jsx(bN,{title:e.name}),t.jsx(P,{children:a})]}),n&&t.jsxs("div",{className:bn.status,children:[t.jsx(P,{children:"Status"}),t.jsx(Jd,{appearance:n.appearance,size:"s",label:n.label})]}),i&&t.jsxs("div",{className:bn.exportStats,children:[t.jsx(P,{children:"Exported (last 5m)"}),t.jsxs("div",{className:bn.exportBadges,children:[t.jsx(Jd,{size:"s",label:`${uh(i.metrics)} METRICS`}),t.jsx(Jd,{size:"s",label:`${uh(i.logs)} LOGS`})]})]}),t.jsx("div",{className:bn.buttons,children:s??t.jsx(xN,{integration:e})})]}),d&&t.jsxs(X,{className:V(bn.alert,d.failuresOnly?bn.error:bn.warning),appearance:d.failuresOnly?"error":"warning",children:["Failed to export ",uh(d.failedLogs)," logs,"," ",uh(d.failedMetrics)," metrics"]})]})},rse="_section_1wv1q_1",ase="_title_1wv1q_5",ose="_cards_1wv1q_9",Nr={section:rse,title:ase,cards:ose},ise=()=>t.jsxs("div",{children:[t.jsxs("div",{className:Nr.section,children:[t.jsx(D,{className:Nr.title,height:25,width:120}),t.jsxs("div",{className:Nr.cards,children:[t.jsx(D,{height:64,width:284}),t.jsx(D,{height:64,width:284}),t.jsx(D,{height:64,width:284}),t.jsx(D,{height:64,width:284})]})]}),t.jsxs("div",{className:Nr.section,children:[t.jsx(D,{className:Nr.title,height:25,width:120}),t.jsxs("div",{className:Nr.cards,children:[t.jsx(D,{height:328,width:284}),t.jsx(D,{height:328,width:284}),t.jsx(D,{height:328,width:284}),t.jsx(D,{height:328,width:284})]})]}),t.jsxs("div",{className:Nr.section,children:[t.jsx(D,{className:Nr.title,height:25,width:130}),t.jsxs("div",{className:Nr.cards,children:[t.jsx(D,{height:328,width:284}),t.jsx(D,{height:328,width:284}),t.jsx(D,{height:328,width:284}),t.jsx(D,{height:328,width:284})]})]})]}),CN=()=>{const e=Zu(),s=dg(),n=dG();return m.useMemo(()=>Object.entries(_B).sort(([,r],[,a])=>r.name.localeCompare(a.name)).reduce((r,[a,o])=>{var l;const i=!!((l=e.data)!=null&&l[a]),c={...o,isAdded:i,upgradeType:n[a]};return c.isAdded&&(r[Ua.Added]=[...r[Ua.Added],c]),c.isFeatured&&(r[Ua.Featured]=[...r[Ua.Featured],c]),r[c.categoryId]=[...r[c.categoryId],{...c,disabled:!!s[a]}],r},Object.fromEntries(Object.keys(pi).map(r=>[r,[]]))),[s,e.data,n])},Vb=e=>[`${e}-github-integration`],ha=()=>{const e=_e(),{orgId:s,isLoading:n}=ae(),{data:r,isError:a,isPending:o}=_t({queryKey:["github-app",s],queryFn:()=>W.getGitHubInstallation({org_id:s}),retry:!1,enabled:!n}),i=m.useMemo(()=>!!(!a&&(r!=null&&r.data.installation_id)),[r,a]),c=m.useMemo(()=>r==null?void 0:r.data.repositories,[r]),l=m.useMemo(()=>r==null?void 0:r.data.installation_id,[r]),{mutateAsync:d,isPending:u}=ve({mutationFn:()=>W.deleteGitHubInstallation({org_id:s}),onSuccess:async()=>{await e.invalidateQueries({queryKey:["github-app",s]}),await e.invalidateQueries({queryKey:gi(s)})}}),{mutateAsync:p,isPending:h}=ve({mutationFn:({projectId:_,repositoryId:b})=>W.createGitHubAppProject(_,{repository_id:b}),onSuccess:async(_,{projectId:b})=>{await e.invalidateQueries({queryKey:["github-app",s]}),await e.invalidateQueries({queryKey:ms(b)}),await e.invalidateQueries({queryKey:gi(s)}),await e.invalidateQueries({queryKey:Vb(b)})}}),{mutateAsync:g,isPending:f}=ve({mutationFn:({projectId:_})=>W.deleteProjectGitHubIntegration(_),onSuccess:async(_,{projectId:b})=>{await e.invalidateQueries({queryKey:["github-app",s]}),await e.invalidateQueries({queryKey:ms(b)}),await e.invalidateQueries({queryKey:gi(s)}),await e.invalidateQueries({queryKey:Vb(b)})}});return{isInstalled:i,repositories:c,isLoading:o||n,removeApp:d,isRemoving:u,installationId:l,connectRepository:p,isConnecting:h,disconnectRepository:g,isDisconnecting:f}},IN=e=>{const{data:s,isError:n,isPending:r}=_t({queryKey:Vb(e),queryFn:()=>W.getGitHubAppProject(e),select:l=>l.data,retry:!1}),a=m.useMemo(()=>s&&!n?s.current_repository:"",[s,n]),o=m.useMemo(()=>s&&!n?s.current_owner:"",[s,n]),i=m.useMemo(()=>s&&!n?`${s.current_owner}/${s.current_repository}`:"",[s,n]),c=m.useMemo(()=>s&&!n&&s.current_repository_id,[s,n]);return{connectedRepositoryName:a,connectedRepositoryOwnerUsername:o,connectedRepositoryFullName:i,connectedRepositoryId:c,isLoading:r}},kN=()=>{const{projectId:e}=F();return IN(e)},pg=e=>{const{org:s,isLoading:n}=ae(),{isOrgAdmin:r,isLoading:a}=qt(),{isCollaborator:o,isLoading:i}=jl(e),c=n||i||a;return c?{canManageIntegration:!1,isLoading:c}:o?{canManageIntegration:!1,isLoading:c}:s?{canManageIntegration:r,isLoading:c}:{canManageIntegration:!0,isLoading:c}},cse="_root_pcr2t_1",lse="_root_darkTheme_pcr2t_8",b0={root:cse,root_darkTheme:lse},mg=({width:e,height:s,children:n})=>{const{colorScheme:r}=ro();return t.jsx("div",{className:V(b0.root,{[b0.root_darkTheme]:r==="dark"}),style:{width:`${e}px`,height:`${s}px`},children:n})},dse="_root_1dic9_1",use="_accent_1dic9_13",hse="_ghost_1dic9_17",Rf={root:dse,accent:use,ghost:hse},et=({width:e="fit-content",height:s="fit-content",appearance:n="default",children:r,className:a,position:o,level:i=1})=>{const[c,l]=o;return t.jsx("div",{className:V(Rf.root,a,{[Rf.accent]:n==="accent",[Rf.ghost]:n==="ghost"}),style:{width:typeof e=="string"?e:`${e}px`,height:typeof s=="string"?s:`${s}px`,top:`${c}px`,left:`${l}px`,zIndex:i},children:r})},pse=e=>m.createElement("svg",{width:17,height:49,viewBox:"0 0 17 49",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M16.4513 44.8315C16.9106 44.5822 17.0808 44.0079 16.8315 43.5487L12.7693 36.0653C12.5201 35.6061 11.9457 35.4359 11.4865 35.6851C11.0273 35.9344 10.8571 36.5088 11.1064 36.968L14.7172 43.6199L8.06528 47.2307C7.60606 47.4799 7.43587 48.0543 7.68514 48.5135C7.93442 48.9727 8.50876 49.1429 8.96798 48.8936L16.4513 44.8315ZM16.8315 5.45135C17.0808 4.99213 16.9106 4.41779 16.4513 4.16851L8.96798 0.106365C8.50876 -0.142906 7.93442 0.0272866 7.68514 0.486504C7.43587 0.945721 7.60606 1.52007 8.06528 1.76934L14.7172 5.38013L11.1064 12.032C10.8571 12.4912 11.0273 13.0656 11.4865 13.3149C11.9457 13.5641 12.5201 13.3939 12.7693 12.9347L16.8315 5.45135ZM16 44C16.2688 43.0929 16.2691 43.093 16.2694 43.0931C16.2695 43.0931 16.2697 43.0932 16.2698 43.0932C16.2698 43.0932 16.2697 43.0932 16.2694 43.0931C16.2686 43.0928 16.267 43.0924 16.2645 43.0916C16.2596 43.0901 16.2511 43.0875 16.2392 43.0838C16.2154 43.0763 16.178 43.0644 16.1278 43.0479C16.0276 43.0149 15.8766 42.9633 15.6822 42.8917C15.2932 42.7486 14.7313 42.5258 14.0542 42.2119C12.6977 41.5831 10.8918 40.5942 9.09019 39.1562C5.49776 36.2889 1.94609 31.6634 1.94609 24.5L0.053911 24.5C0.0539108 32.3917 4.00224 37.5162 7.90981 40.6351C9.85818 42.1902 11.8023 43.2536 13.2583 43.9286C13.9875 44.2666 14.5974 44.5088 15.0287 44.6675C15.2445 44.7469 15.4158 44.8055 15.5352 44.8449C15.595 44.8646 15.6418 44.8795 15.6748 44.8898C15.6912 44.895 15.7043 44.899 15.7137 44.9018C15.7184 44.9033 15.7223 44.9044 15.7252 44.9053C15.7266 44.9057 15.7279 44.9061 15.7289 44.9064C15.7294 44.9066 15.73 44.9067 15.7302 44.9068C15.7307 44.907 15.7312 44.9071 16 44ZM1.94609 24.5C1.94609 17.3366 5.49776 12.7111 9.09019 9.84376C10.8918 8.40576 12.6977 7.41694 14.0542 6.78808C14.7313 6.47418 15.2932 6.25143 15.6822 6.10827C15.8766 6.03672 16.0276 5.98514 16.1278 5.95208C16.178 5.93556 16.2154 5.92367 16.2392 5.91623C16.2511 5.91251 16.2596 5.9099 16.2645 5.90839C16.267 5.90763 16.2686 5.90715 16.2694 5.90694C16.2697 5.90683 16.2698 5.90679 16.2698 5.90681C16.2697 5.90683 16.2695 5.9069 16.2694 5.90691C16.2691 5.90699 16.2688 5.9071 16 5C15.7312 4.0929 15.7307 4.09304 15.7302 4.09319C15.73 4.09327 15.7294 4.09344 15.7289 4.09359C15.7279 4.09389 15.7266 4.09426 15.7252 4.0947C15.7223 4.09557 15.7184 4.09673 15.7137 4.09816C15.7043 4.10104 15.6912 4.10504 15.6748 4.11019C15.6418 4.12049 15.595 4.1354 15.5352 4.1551C15.4158 4.1945 15.2445 4.25313 15.0287 4.33252C14.5974 4.49124 13.9875 4.73337 13.2583 5.07141C11.8023 5.74644 9.85818 6.80978 7.90981 8.36489C4.00224 11.4838 0.0539111 16.6083 0.053911 24.5L1.94609 24.5Z",fill:"currentColor"})),kv=e=>m.createElement("svg",{width:78,height:12,viewBox:"0 0 78 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M72.5926 0.4907L77.5509 5.44907C77.8552 5.75334 77.8552 6.24666 77.5509 6.55093L72.5926 11.5093C72.2883 11.8136 71.795 11.8136 71.4907 11.5093C71.1864 11.205 71.1864 10.7117 71.4907 10.4074L75.119 6.77913H1.00002C0.569716 6.77913 0.220886 6.4303 0.220886 6C0.220886 5.56969 0.569716 5.22086 1.00002 5.22086H75.119L71.4907 1.59256C71.1864 1.28829 71.1864 0.79497 71.4907 0.4907C71.795 0.186429 72.2883 0.186429 72.5926 0.4907Z",fill:"currentColor"})),Qh=e=>m.createElement("svg",{width:19,height:14,viewBox:"0 0 19 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M18.669 7.66899C19.0385 7.29952 19.0385 6.70048 18.669 6.33101L12.6481 0.310139C12.2786 -0.0593324 11.6796 -0.0593324 11.3101 0.310139C10.9407 0.679609 10.9407 1.27864 11.3101 1.64811L16.662 7L11.3101 12.3519C10.9407 12.7214 10.9407 13.3204 11.3101 13.6899C11.6796 14.0593 12.2786 14.0593 12.6481 13.6899L18.669 7.66899ZM1 6.05391C0.477489 6.05391 0.0539112 6.47749 0.0539112 7C0.0539112 7.52251 0.477489 7.94609 1 7.94609V6.05391ZM18 6.05391L1 6.05391V7.94609L18 7.94609V6.05391Z",fill:"currentColor"})),mse=e=>m.createElement("svg",{width:22,height:56,viewBox:"0 0 22 56",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M1.5 1L15 0.999999C18.3137 0.999999 21 3.68629 21 7L21 49C21 52.3137 18.3137 55 15 55L1.5 55",stroke:"currentColor",strokeWidth:1.55826,strokeLinecap:"round"})),gse=e=>m.createElement("svg",{width:32,height:32,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},m.createElement("path",{d:"M16.0714 29.8823C14.6651 29.8823 13.2717 29.4694 12.1751 28.6566L6.6273 24.5152C5.1565 23.4185 4.00824 21.122 4.00824 19.3028V9.70391C4.00824 7.71704 5.46614 5.60114 7.3369 4.90445L13.7749 2.49181C15.0522 2.01445 17.0648 2.01445 18.3421 2.49181L24.7801 4.90445C26.6509 5.60114 28.1088 7.71704 28.1088 9.70391V19.2899C28.1088 21.122 26.9605 23.4056 25.4897 24.5023L19.9419 28.6437C18.8711 29.4694 17.4777 29.8823 16.0714 29.8823ZM14.4587 4.31097L8.0207 6.7236C6.92404 7.13646 5.95641 8.52985 5.95641 9.71681V19.3028C5.95641 20.5285 6.82083 22.2444 7.78846 22.9669L13.3362 27.1084C14.8199 28.218 17.3229 28.218 18.8195 27.1084L24.3673 22.9669C25.3478 22.2315 26.1993 20.5285 26.1993 19.3028V9.70391C26.1993 8.52985 25.2317 7.13646 24.135 6.7107L17.697 4.29806C16.8197 3.98842 15.3231 3.98842 14.4587 4.31097Z",fill:"currentColor"}),m.createElement("path",{d:"M14.3426 18.877C14.0975 18.877 13.8524 18.7867 13.6588 18.5932L11.5816 16.516C11.2075 16.1418 11.2075 15.5226 11.5816 15.1484C11.9558 14.7743 12.5751 14.7743 12.9492 15.1484L14.3426 16.5418L19.2066 11.6778C19.5807 11.3037 20.2 11.3037 20.5742 11.6778C20.9483 12.052 20.9483 12.6713 20.5742 13.0454L15.0264 18.5932C14.8329 18.7867 14.5878 18.877 14.3426 18.877Z",fill:"currentColor"})),fse="_flex_x26u2_1",_se="_green_x26u2_7",bse="_gray_x26u2_11",Yh={flex:fse,green:_se,gray:bse},xse=()=>t.jsxs(mg,{width:652,height:157,children:[t.jsxs(et,{className:Yh.flex,width:222,height:36,position:[61,43],children:[t.jsx(q,{name:"github",size:20}),"New Pull Request"]}),t.jsx(et,{appearance:"ghost",position:[35,284],children:t.jsx(Ne,{size:"s",children:"Github action"})}),t.jsx(et,{appearance:"ghost",position:[79,297],className:Yh.gray,children:t.jsx(kv,{})}),t.jsxs(et,{className:Yh.flex,width:222,height:36,appearance:"accent",position:[61,406],children:[t.jsx(q,{name:"neon_mono",size:20,className:Yh.green}),"New Neon branch"]})]}),vse="_flex_x26u2_1",jse="_green_x26u2_7",yse="_gray_x26u2_11",Jh={flex:vse,green:jse,gray:yse},wse=()=>t.jsxs(mg,{width:672,height:157,children:[t.jsxs(et,{className:Jh.flex,width:219,height:36,position:[61,41],appearance:"accent",children:[t.jsx(q,{name:"neon_mono",size:20,className:Jh.green}),"Project"]}),t.jsx(et,{appearance:"ghost",position:[32,250],children:t.jsx(Ne,{size:"s",children:"Neon Project ID + API KEY"})}),t.jsx(et,{appearance:"ghost",position:[79,297],className:Jh.gray,children:t.jsx(kv,{})}),t.jsxs(et,{className:Jh.flex,width:219,height:36,position:[61,403],children:[t.jsx(q,{name:"github",size:20}),"Repository"]})]}),Sse="_flex_ys19e_1",Cse="_green_ys19e_7",Ise="_hint_ys19e_11",kse="_actionElement_ys19e_15",Tse="_rotate_ys19e_24",cs={flex:Sse,green:Cse,hint:Ise,actionElement:kse,rotate:Tse},TN=()=>t.jsxs(mg,{width:652,height:157,children:[t.jsx(et,{position:[24,67],appearance:"ghost",className:cs.hint,children:"Add Github App"}),t.jsx(et,{position:[85,42],appearance:"ghost",children:t.jsx(q,{name:"neon_mono",size:28})}),t.jsx(et,{position:[90,85],appearance:"ghost",className:V(cs.rotate,cs.green),children:t.jsx(Qh,{})}),t.jsx(et,{position:[81,100],appearance:"ghost",level:2,className:cs.green,children:t.jsx(gse,{})}),t.jsx(et,{position:[90,128],appearance:"ghost",className:cs.green,children:t.jsx(Qh,{})}),t.jsx(et,{position:[82,155],appearance:"ghost",children:t.jsx(q,{name:"github",size:28})}),t.jsx(et,{position:[24,308],appearance:"ghost",className:cs.hint,children:"Connect"}),t.jsx(et,{position:[72,233],appearance:"ghost",className:cs.green,children:t.jsx(pse,{})}),t.jsxs(et,{className:cs.flex,width:162,height:36,position:[58,253],children:[t.jsx(q,{name:"neon_mono",size:20}),"Project"]}),t.jsxs(et,{className:cs.flex,width:162,height:36,position:[97,253],children:[t.jsx(q,{name:"github",size:20}),"Repository"]}),t.jsx(et,{position:[24,495],appearance:"ghost",className:cs.hint,children:"Add Github Actions"}),t.jsxs(et,{className:cs.actionElement,width:55,height:73,position:[59,457],children:[t.jsx(q,{name:"github",size:20}),"PR"]}),t.jsx(et,{position:[88,501],appearance:"ghost",level:2,className:cs.green,children:t.jsx(Qh,{})}),t.jsxs(et,{className:cs.actionElement,width:55,height:73,position:[59,523],children:[t.jsx(q,{name:"github",size:20}),"Action"]}),t.jsx(et,{position:[88,567],appearance:"ghost",level:2,className:cs.green,children:t.jsx(Qh,{})}),t.jsxs(et,{className:cs.actionElement,width:55,height:73,position:[59,589],appearance:"accent",children:[t.jsx(q,{name:"neon_mono",size:20}),"Branch"]})]}),Pse="_flex_23ek7_1",Nse="_gray_23ek7_7",Ase="_deploymentElement_23ek7_11",Ese="_dots_23ek7_16",Ose="_dot_23ek7_16",Ar={flex:Pse,gray:Nse,deploymentElement:Ase,dots:Ese,dot:Ose},PN=()=>t.jsxs(mg,{width:652,height:157,children:[t.jsxs(et,{className:Ar.flex,width:216,height:36,position:[33,44],children:[t.jsx(q,{name:"github",size:20}),"Code branch"]}),t.jsxs(et,{className:Ar.flex,width:216,height:36,position:[87,44],children:[t.jsx(q,{name:"neon_mono",size:20}),"Data branch"]}),t.jsx(et,{appearance:"ghost",position:[51,259],className:Ar.gray,children:t.jsx(mse,{})}),t.jsx(et,{appearance:"ghost",position:[74,279],className:Ar.gray,children:t.jsx(kv,{})}),t.jsxs(et,{width:190,height:106,position:[26,423],appearance:"accent",className:Ar.deploymentElement,children:[t.jsxs("div",{className:Ar.dots,children:[t.jsx("div",{className:Ar.dot}),t.jsx("div",{className:Ar.dot}),t.jsx("div",{className:Ar.dot})]}),"Preview deployment with dedicated database"]})]}),xn={connectedTitle:"Your project is connected",connectedDescription:e=>t.jsxs(t.Fragment,{children:["We created a"," ",t.jsx(M,{href:e?`${G(C.OrgSettings,{orgId:e})}#api-keys`:`${C.UserSettings}#api-keys`,children:"Neon API key"})," ","for your project and added the following secrets and variables to your GitHub repository:"]}),actionTitle:"Setting up your GitHub Actions workflow",addActionTitle:"Add the GitHub Actions workflow to your repo",addActionDescription:t.jsxs(t.Fragment,{children:[t.jsxs("ul",{children:[t.jsxs("li",{children:["In your GitHub repository, create a ",t.jsx(Pe,{children:".yml"})," file in your",t.jsx(Pe,{children:".github/workflows"})," directory; for example:"," ",t.jsx(Pe,{children:"neon_workflow.yml"}),"."]}),t.jsxs("li",{children:["Copy the following YAML contents into your"," ",t.jsx(Pe,{children:"neon_workflow.yml"})," file."]}),t.jsx("li",{children:"Commit your changes."})]}),t.jsx("br",{}),t.jsxs("p",{children:["The GitHub Actions workflow creates a new database branch with each pull request, which you can view on the ",t.jsx("b",{children:"Branches"})," page in the Neon Console. When you close the pull request, the branch is deleted."]})]}),nextStepsTitle:"Next steps",nextStepsDescription:"For more about integrating and building workflows with GitHub Actions, please refer to the",guide:"Neon GitHub integration guide",apiKey:"NEON_API_KEY",projectId:"NEON_PROJECT_ID",code:`name: Create/Delete Branch for Pull Request

on:
  pull_request:
    types:
      - opened
      - reopened
      - synchronize
      - closed

concurrency:
  group: \${{ github.workflow }}-\${{ github.ref }}

jobs:
  setup:
    name: Setup
    outputs:
      branch: \${{ steps.branch_name.outputs.current_branch }}
    runs-on: ubuntu-latest
    steps:
      - name: Get branch name
        id: branch_name
        uses: tj-actions/branch-names@v8

  create_neon_branch:
    name: Create Neon Branch
    outputs:
      db_url: \${{ steps.create_neon_branch_encode.outputs.db_url }}
      db_url_with_pooler: \${{ steps.create_neon_branch_encode.outputs.db_url_with_pooler }}
    needs: setup
    if: |
      github.event_name == 'pull_request' && (
      github.event.action == 'synchronize'
      || github.event.action == 'opened'
      || github.event.action == 'reopened')
    runs-on: ubuntu-latest
    steps:
      - name: Create Neon Branch
        id: create_neon_branch
        uses: neondatabase/create-branch-action@v5
        with:
          project_id: \${{ vars.NEON_PROJECT_ID }}
          branch_name: preview/pr-\${{ github.event.number }}-\${{ needs.setup.outputs.branch }}
          api_key: \${{ secrets.NEON_API_KEY }}

# The step above creates a new Neon branch.
# You may want to do something with the new branch, such as run migrations, run tests
# on it, or send the connection details to a hosting platform environment.
# The branch DATABASE_URL is available to you via:
# "\${{ steps.create_neon_branch.outputs.db_url_with_pooler }}".
# It's important you don't log the DATABASE_URL as output as it contains a username and
# password for your database.
# For example, you can uncomment the lines below to run a database migration command:
#      - name: Run Migrations
#        run: npm run db:migrate
#        env:
#          # to use pooled connection
#          DATABASE_URL: "\${{ steps.create_neon_branch.outputs.db_url_with_pooler }}"
#          # OR to use unpooled connection
#          # DATABASE_URL: "\${{ steps.create_neon_branch.outputs.db_url }}"

# Following the step above, which runs database migrations, you may want to check
# for schema changes in your database. We recommend using the following action to
# post a comment to your pull request with the schema diff. For this action to work,
# you also need to give permissions to the workflow job to be able to post comments
# and read your repository contents. Add the following permissions to the workflow job:
#
# permissions:
#   contents: read
#   pull-requests: write
#
# You can also check out https://github.com/neondatabase/schema-diff-action for more
# information on how to use the schema diff action.
# You can uncomment the lines below to enable the schema diff action.
#      - name: Post Schema Diff Comment to PR
#        uses: neondatabase/schema-diff-action@v1
#        with:
#          project_id: \${{ vars.NEON_PROJECT_ID }}
#          compare_branch: preview/pr-\${{ github.event.number }}-\${{ needs.setup.outputs.branch }}
#          api_key: \${{ secrets.NEON_API_KEY }}

  delete_neon_branch:
    name: Delete Neon Branch
    needs: setup
    if: github.event_name == 'pull_request' && github.event.action == 'closed'
    runs-on: ubuntu-latest
    steps:
      - name: Delete Neon Branch
        uses: neondatabase/delete-branch-action@v3
        with:
          project_id: \${{ vars.NEON_PROJECT_ID }}
          branch: preview/pr-\${{ github.event.number }}-\${{ needs.setup.outputs.branch }}
          api_key: \${{ secrets.NEON_API_KEY }}`},Lse="_section_19ax6_1",$se="_connectedDescription_19ax6_7",Rse="_repoBadge_19ax6_16",Bse="_description_19ax6_25",Mse="_codeBlock_19ax6_41",Po={section:Lse,connectedDescription:$se,repoBadge:Rse,description:Bse,codeBlock:Mse},Dse=()=>{const{trackUiInteraction:e}=k(),{connectedRepositoryFullName:s}=kN(),{orgId:n}=ae();return t.jsxs(t.Fragment,{children:[s&&t.jsx(At,{title:xn.connectedTitle,children:t.jsxs("div",{className:Po.section,children:[t.jsx(M,{className:Po.repoBadge,icon:"external_link",iconSize:"s",href:`https://github.com/${s}`,openInNewTab:!0,onClick:()=>{e("github_integration_repository_link_clicked")},children:s}),t.jsxs("div",{className:Po.connectedDescription,children:[t.jsx(P,{children:xn.connectedDescription(n)}),t.jsxs("ul",{children:[t.jsx("li",{children:t.jsx(M,{openInNewTab:!0,href:`https://github.com/${s}/settings/secrets/actions`,onClick:()=>{e("github_integration_github_secrets_link_clicked")},children:xn.apiKey})}),t.jsx("li",{children:t.jsx(M,{openInNewTab:!0,href:`https://github.com/${s}/settings/variables/actions`,onClick:()=>{e("github_integration_github_variables_link_clicked")},children:xn.projectId})})]})]})]})}),t.jsx(At,{title:xn.actionTitle,children:t.jsxs("div",{className:Po.section,children:[t.jsx(xse,{}),t.jsxs("div",{className:Po.description,children:[t.jsx(J,{level:5,children:xn.addActionTitle}),t.jsx(P,{children:xn.addActionDescription})]}),t.jsx(vi,{collapsedHeight:109,className:Po.codeBlock,copy:{onCopy:()=>{e("github_integration_workflow_action_copied")}},onExpandClick:()=>{e("github_integration_workflow_action_expand_clicked")},mode:"yaml",children:xn.code}),t.jsxs("div",{className:Po.description,children:[t.jsx(J,{level:5,children:xn.nextStepsTitle}),t.jsxs(P,{children:[xn.nextStepsDescription," ",t.jsx(M,{href:"https://neon.com/docs/guides/neon-github-app",openInNewTab:!0,onClick:()=>{e("github_integration_docs_guide_link_clicked")},children:xn.guide}),"."]})]})]})}),t.jsx(Sv,{subject:"GitHub"})]})},Er={alert:"The GitHub App is installed.",title:"Connect your Neon project to a GitHub repository",connect:"Connect",label:"Select a repository to connect to this Neon project:",success:"The GitHub repo was successfully connected",required:"This field is required.",infoTitle:"Don't see your repository?",info:t.jsxs(t.Fragment,{children:[t.jsx("p",{children:"You might need to authorize access to the repository in GitHub."}),t.jsxs("ul",{children:[t.jsxs("li",{children:["In GitHub, go to Profile ","->"," Settings ","->"," Applications ","->"," ","Installed GitHub Apps."]}),t.jsxs("li",{children:["Select Neon Postgres ","->"," Configure."]}),t.jsx("li",{children:"Grant access to the repository you want to connect, then Save."})]})]}),disabledTooltip:"This repository has already been connected to a Neon project"},Use="_alert_1lhe8_1",Fse="_section_1lhe8_5",zse="_fieldWithButton_1lhe8_11",qse="_info_1lhe8_16",Zh={alert:Use,section:Fse,fieldWithButton:zse,info:qse},Hse=()=>{var d,u;const{trackUiInteraction:e}=k(),{projectId:s}=F(),{connectRepository:n,isConnecting:r,repositories:a}=ha(),o=m.useMemo(()=>(a==null?void 0:a.map(({id:p=0,name:h="",installed:g=!1})=>({value:p,label:h,disabled:g,disabledTooltip:Er.disabledTooltip})))??[],[a]),i=Ae({defaultValues:{repositoryId:o.length===1?(d=o[0])==null?void 0:d.value:void 0}}),{formState:{errors:c}}=i,l=async p=>{try{const{repositoryId:h}=p;await n({projectId:s,repositoryId:h}),pe(Er.success)}catch(h){Y(h)}};return t.jsxs(t.Fragment,{children:[t.jsx(X,{appearance:"success",className:Zh.alert,children:Er.alert}),t.jsx(At,{title:Er.title,children:t.jsxs("div",{className:Zh.section,children:[t.jsx(wse,{}),t.jsx(Xt,{providerProps:i,onSubmit:l,children:t.jsx(B,{label:Er.label,error:(u=c.repositoryId)==null?void 0:u.message,children:t.jsxs("div",{className:Zh.fieldWithButton,children:[t.jsx(ye,{name:"repositoryId",rules:{required:{value:!0,message:Er.required}},control:i.control,render:({field:{onChange:p,...h}})=>t.jsx(lt,{options:o,filterable:!0,disabled:r,onChange:g=>{e("github_integration_repository_selector_repository_selected"),p(g)},...h})}),t.jsx(A,{type:"submit",size:"l",loading:r,disabled:r,onClick:()=>{e("github_integration_repository_selector_repository_submitted")},children:Er.connect})]})})}),t.jsxs("div",{className:Zh.info,children:[t.jsx(J,{level:5,children:Er.infoTitle}),t.jsx(P,{children:Er.info})]})]})})]})},No={title:"Disconnect integration",description:e=>t.jsxs(t.Fragment,{children:[t.jsx("p",{children:"Disconnecting the integration performs the following actions for this Neon project:"}),t.jsxs("ul",{children:[t.jsxs("li",{children:["Removes the ",t.jsx(Pe,{children:"NEON_PROJECT_ID"})," variable from the connected GitHub repository"]}),t.jsx("li",{children:"Removes the Neon API key created by the integration from your Neon account"}),t.jsxs("li",{children:["Removes the ",t.jsx(Pe,{children:"NEON_API_KEY"})," variable from the connected GitHub repository"]})]}),t.jsx("br",{}),t.jsxs("p",{children:["If you want to uninstall the integration from your Neon account entirely, you can do so from the ",t.jsx("b",{children:"Integrations"})," page in Neon"," ",t.jsx(M,{href:e?`${G(C.OrgIntegrations,{orgId:e})}#github`:`${C.UserIntegrations}#github`,children:"Account settings"}),"."]})]}),disconnect:"Disconnect",success:"The integration was successfully removed",confirmTitle:"Do you want to disconnect the integration?",confirmText:"This will disconnect the project integration with GitHub. Are you sure you want to proceed?",confirmButton:"Disconnect"},Vse="_description_d31pk_1",Wse={description:Vse},Gse=({onRequestClose:e})=>{const{trackUiInteraction:s}=k(),{confirm:n}=Ye(),{projectId:r}=F(),{isDisconnecting:a,disconnectRepository:o}=ha(),{orgId:i}=ae(),c=()=>{e(),pe(No.success)},l=async()=>{try{if(!await n({header:No.confirmTitle,text:No.confirmText,confirmButtonText:No.confirmButton,appearance:"danger"})){s("github_integration_disconnect_dismissed");return}s("github_integration_disconnect_confirmed"),await o({projectId:r}),c()}catch(d){Y(d)}};return t.jsxs(At,{title:No.title,children:[t.jsx(P,{className:Wse.description,children:No.description(i)}),t.jsx(A,{"data-qa":"github_integration_remove",appearance:"secondary",loading:a,disabled:a,onClick:async()=>{s("github_integration_disconnect_clicked"),await l()},children:No.disconnect})]})},Bf={title:"GitHub integration",success:"GitHub App was successfully installed"},Kse="_buttonWrapper_nih2t_1",Qse={buttonWrapper:Kse},NN=({projectId:e,size:s="s",label:n,openInNewTab:r=!1,disabled:a=!1,tooltip:o,withIcon:i=!1,"data-qa":c,onClick:l,appearance:d="primary"})=>{const{token:u}=Mm(),{colorScheme:p}=ro(),{orgId:h}=ae(),g=m.useMemo(()=>{const f=new URLSearchParams;return e&&f.append("project_id",encodeURIComponent(e)),h&&f.append("org_id",encodeURIComponent(h)),f.size>0?`?${f}`:""},[h,e]);return t.jsx(Ht,{action:`${Dm}/integrations/github/auth${g}`,target:r?"_blank":"_self",method:"POST",children:t.jsx(ne,{content:o,disabled:!a,children:t.jsxs("div",{className:Qse.buttonWrapper,children:[t.jsx("input",{type:"hidden",name:"authenticity_token",value:u}),t.jsx(A,{"data-qa":c,type:"submit",size:s,onClick:l,disabled:a,icon:i?"github":void 0,iconColorScheme:d==="primary"?fL(p):p,appearance:d,children:n})]})})})},ud={previewTitle:"Create a database branch with every pull request",previewDescription:"Create a database branch with every pull request for production-like preview deployments. Add the app and get started connecting Neon projects to your GitHub repositories.",settingTitle:"Setting up your GitHub + Neon workflow",settingDescription:t.jsxs(t.Fragment,{children:[t.jsx("p",{children:"Adding database branching to your GitHub-based workflow involves:"}),t.jsx("br",{}),t.jsxs("ul",{children:[t.jsx("li",{children:"Installing the GitHub app and authorizing it."}),t.jsx("li",{children:"Connecting your Neon project to the corresponding GitHub repository."}),t.jsx("li",{children:"Adding GitHub Actions code to your repo using our provided samples."})]}),t.jsx("br",{}),t.jsx("p",{children:"Install the GitHub app to get started."})]}),installButton:"Install GitHub App"},Yse="_section_1amah_1",Mf={section:Yse},Jse=()=>{const{trackUiInteraction:e}=k(),{isLoading:s}=ae(),{projectId:n}=F(),{canManageIntegration:r,isLoading:a}=pg(n),{isCollaborator:o,isLoading:i}=jl(n);return s||a||i?t.jsxs("div",{className:Mf.section,children:[t.jsx(D,{height:285}),t.jsx(D,{height:445}),t.jsx(D,{height:108})]}):t.jsxs(t.Fragment,{children:[t.jsx(At,{title:ud.previewTitle,children:t.jsxs("div",{className:Mf.section,children:[t.jsx(P,{children:ud.previewDescription}),t.jsx(PN,{})]})}),t.jsx(At,{title:ud.settingTitle,children:t.jsxs("div",{className:Mf.section,children:[t.jsx(P,{children:ud.settingDescription}),t.jsx(TN,{}),t.jsx(NN,{label:ud.installButton,projectId:n,disabled:!r,tooltip:o?Ja.installIntegrationOnSharedProjectNotAllowed:Ja.installIntegrationNotAllowed,onClick:()=>{e("github_integration_configure_clicked")},openInNewTab:!0})]})}),t.jsx(Sv,{subject:"GitHub"})]})},Xh=[{label:"Actions",value:"actions","data-qa":"github_integration_actions_tab"},{label:"Disconnect",value:"disconnect","data-qa":"github_integration_disconnect_tab"}],Zse=({onRequestClose:e})=>{const{trackUiInteraction:s}=k(),{connectedRepositoryId:n,isLoading:r}=kN(),[a,o]=m.useState(Xh[0].value),i=c=>{c==="actions"?s("github_integration_actions_tab_clicked"):c==="disconnect"&&s("github_integration_disconnect_tab_clicked"),o(c)};return r?t.jsx(Cv,{}):n?t.jsxs(t.Fragment,{children:[t.jsx(jr,{options:Xh,value:a,onChange:i}),t.jsxs("div",{children:[a===Xh[0].value&&t.jsx(Dse,{}),a===Xh[1].value&&t.jsx(Gse,{onRequestClose:e})]})]}):t.jsx(Hse,{})},Xse=({configuration:e})=>{const s=!!e,{trackUiInteraction:n}=k(),{openedDrawerId:r,openDrawer:a,closeDrawer:o}=io(),{isInstalled:i,isLoading:c}=ha(),{projectId:l}=F(),{isCollaborator:d,isLoading:u}=jl(l),p=c||u,h=()=>{n(s?"github_integration_configured_settings_closed":"github_integration_available_settings_closed"),o()};return m.useEffect(()=>{window.location.hash==="#github_success"&&(window.history.replaceState(null,""," "),ze(t.jsx(tt,{children:Bf.success})),a(ea.GitHub))},[a]),t.jsx(ho,{"aria-label":Bf.title,title:Bf.title,isOpen:r===ea.GitHub,onRequestClose:h,iconName:"github",hideFeedback:!0,coverImage:{x1:tb,x2:tb},size:"l",isLoading:p,children:s||i&&!d?t.jsx(Zse,{onRequestClose:h}):t.jsx(Jse,{})})},gg={integrationDescription:"Instant database branching with every Preview Deployment",projectConnectedWithSuccess:"Project connected with success"},Df={title:"Next steps",description:"To see the integration in action, ",linkText:"follow these steps"},ene="_section_2fiav_1",tne="_item_2fiav_7",x0={section:ene,item:tne},Tv=()=>t.jsxs("div",{className:x0.section,children:[t.jsx(J,{level:5,children:Df.title}),t.jsxs("div",{className:x0.item,children:[t.jsx(q,{name:"rocket",size:20}),t.jsxs(P,{children:[Df.description,t.jsx(M,{href:_L,openInNewTab:!0,children:Df.linkText})]})]})]}),sne="_alert_rpcoa_1",nne="_autodelete_rpcoa_5",rne="_automationAlert_rpcoa_9",Uf={alert:sne,autodelete:nne,automationAlert:rne},Pn={title:"Delete",obsolete:"obsolete",deleteObsolete:"Delete obsolete branches",deleteShown:"Delete the branches shown in this list",deleteAll:"Delete all preview branches",obsoleteBranchesDeleted:"Obsolete branches have been deleted.",shownBranchesDeleted:"The branches have been deleted.",allPreviewBranchesDeleted:"All preview branches have been deleted."},ane="_deleteDropdownItem_ltch6_1",one="_dropDownIcon_ltch6_5",ine="_deleteDropdownBadge_ltch6_9",Vd={deleteDropdownItem:ane,dropDownIcon:one,deleteDropdownBadge:ine},cne=({ref:e,shown:s,...n})=>t.jsxs(M,{appearance:"error",ref:e,...n,children:[Pn.title,t.jsx(q,{name:"chevron_down",className:Vd.dropDownIcon,size:16})]}),lne=({projectId:e,shownBranches:s})=>{const{trackUiInteraction:n}=k(),r=jte({projectId:e},{onSuccess:()=>ze(t.jsx(tt,{children:Pn.allPreviewBranchesDeleted}),{containerId:hi.Drawer})}),a=bte(),o=m.useCallback(async()=>{if(!await a()){n("vercel_integration_delete_preview_branches_dismissed");return}n("vercel_integration_delete_preview_branches_confirmed"),r.mutate()},[a,r,n]),i=yte({projectId:e},{onSuccess:()=>ze(t.jsx(tt,{children:Pn.obsoleteBranchesDeleted}),{containerId:hi.Drawer})}),c=xte(),l=m.useCallback(async()=>{if(!await c()){n("vercel_integration_delete_obsolete_branches_dismissed");return}n("vercel_integration_delete_obsolete_branches_confirmed"),i.mutate()},[c,i,n]),d=wte({projectId:e},{onSuccess:()=>ze(t.jsx(tt,{children:Pn.shownBranchesDeleted}),{containerId:hi.Drawer})}),u=vte(),p=m.useCallback(async()=>{if(!await u()){n("vercel_integration_delete_shown_branches_dismissed");return}n("vercel_integration_delete_shown_branches_confirmed"),d.mutate({branch_ids:s.map(g=>g.id)})},[u,d,s,n]);return t.jsxs(Sx,{triggerElement:cne,disabledPortal:!0,children:[t.jsxs(Wa,{onClick:()=>{n("vercel_integration_delete_obsolete_branches_clicked"),l()},"aria-label":Pn.deleteObsolete,className:Vd.deleteDropdownItem,children:[Pn.deleteObsolete,t.jsx(Ne,{size:"m",appearance:"default",className:Vd.deleteDropdownBadge,children:Pn.obsolete})]}),t.jsx(Wa,{iconName:"trash_shown",onClick:()=>{n("vercel_integration_delete_shown_branches_clicked"),p()},"aria-label":Pn.deleteShown,className:Vd.deleteDropdownItem,children:Pn.deleteShown}),t.jsx(Wa,{iconName:"trash_all",onClick:()=>{n("vercel_integration_delete_preview_branches_clicked"),o()},"aria-label":Pn.deleteAll,className:Vd.deleteDropdownItem,children:Pn.deleteAll})]})},dne=()=>{const{projectId:e,project:s}=F(),n=s==null?void 0:s.store_passwords,r=jN({projectId:e}),a=m.useMemo(()=>{var g;return((g=r.data)==null?void 0:g.branches)??[]},[r.data]),o=Ite({projectId:e}),[i,c]=m.useState(void 0);m.useEffect(()=>{i===void 0&&o.data&&c(o.data.auto_delete_obsolete_branches)},[i,o.data]);const l=a.find(g=>g.default),d=a.filter(g=>!g.default),u=d.slice(0,Vj),p=kte({projectId:e},{onMutate:g=>{c(g.auto_delete_obsolete_branches)},onSuccess:(g,f)=>{const _=f.auto_delete_obsolete_branches?Wn.autoDeleteEnabled:Wn.autoDeleteDisabled;ze(t.jsx(tt,{children:_}),{containerId:hi.Drawer})},onError:(g,f)=>{c(!f.auto_delete_obsolete_branches)}}),h=m.useCallback(()=>{p.mutate({auto_delete_obsolete_branches:!i})},[i,p]);return r.isLoading?t.jsx(ute,{}):t.jsxs(t.Fragment,{children:[!n&&t.jsx(Km,{integrationName:"Vercel",messageType:Qm.RemovalInstruction}),l&&t.jsx(P,{children:Wn.info(G(C.ProjectsItemBranchesItem,{projectId:e,branchId:l.id}))}),n&&t.jsxs(t.Fragment,{children:[l&&t.jsxs(t.Fragment,{children:[t.jsx(X,{className:Uf.alert,children:Wn.alert}),t.jsx(At,{title:Wn.prodBranch,children:t.jsx(mte,{name:l.name})})]}),!!d.length&&t.jsx(At,{title:Wn.previewBranches,action:t.jsx(lne,{shownBranches:u,projectId:e}),children:t.jsx(Mte,{projectId:e,branches:d,showObsoleteBadge:!0,maxShownBranches:Vj})}),t.jsxs(At,{title:Wn.automationWorkflows,children:[o.isError&&t.jsx(X,{className:Uf.automationAlert,appearance:"error",children:Wn.automationWorkflowsError}),t.jsx(P,{children:Wn.autoDelete}),t.jsx("div",{className:Uf.autodelete,children:t.jsx(_s,{wrap:!0,isSelected:i,onChange:h,isDisabled:p.isPending||o.isError||o.isLoading,children:Wn.autoDeleteSwitch})})]})]})]})},dc={roleLabel:"Role",databaseLabel:"Database",connectedBadge:"Connected",vercelProjectLabel:"Vercel project",selectProjectPlaceholder:"Select project"},une="_form_1dg4g_1",hne="_neonRow_1dg4g_7",pne="_vercelRow_1dg4g_17",mne="_vercelProjectField_1dg4g_23",ep={form:une,neonRow:hne,vercelRow:pne,vercelProjectField:mne},gne=()=>{const{projectId:e}=F(),{projects:s,connectedVercelProjectIds:n,configurationId:r,isLoading:a,connectProjectAsync:o,isConnecting:i}=Ll(),c=m.useMemo(()=>(s==null?void 0:s.map(v=>({value:v.id,label:v.name,disabled:n==null?void 0:n.includes(v.id),suffix:(n==null?void 0:n.includes(v.id))&&t.jsx(Ne,{appearance:"warning",children:dc.connectedBadge})})))??[],[n,s]),l=Ae(),{control:d,formState:u,register:p}=l,{branches:h,isLoading:g}=_x(e),f=m.useMemo(()=>{var v;return(v=h==null?void 0:h.find(j=>j.default))==null?void 0:v.id},[h]),_=a||g,{orgId:b}=ae(),x=m.useCallback(async v=>{if(!f||!r)return;const j={...v,configurationId:r,projectId:e,branchId:f};b&&(j.orgId=b);try{await o(j),l.reset(),pe(gg.projectConnectedWithSuccess)}catch(y){Y(y)}},[r,o,f,l,e,b]);return t.jsxs(Xt,{providerProps:l,onSubmit:x,className:ep.form,children:[t.jsxs("div",{className:ep.neonRow,children:[t.jsx(B,{label:dc.databaseLabel,children:t.jsx(ye,{name:"database",control:d,rules:{required:!0},render:({field:v})=>t.jsx(dI,{projectId:e,branchId:f,value:v.value,canCreateDatabase:!1,size:"s",disabled:!f||_||i,onChange:j=>v.onChange(j)})})}),t.jsx(B,{label:dc.roleLabel,children:t.jsx(ye,{name:"role",control:d,rules:{required:!0},render:({field:v})=>t.jsx(uI,{projectId:e,branchId:f,value:v.value,canCreateRole:!1,size:"s",disabled:!f||_||i,onChange:j=>v.onChange(j)})})})]}),t.jsxs("div",{className:ep.vercelRow,children:[t.jsx(B,{label:dc.vercelProjectLabel,className:ep.vercelProjectField,children:t.jsx(ye,{name:"vercelProjectId",control:d,render:({field:{onChange:v,...j}})=>t.jsx(lt,{options:c,placeholder:dc.selectProjectPlaceholder,size:"s","aria-label":dc.vercelProjectLabel,...p("vercelProjectId",{required:!0}),onChange:y=>{v(y)},...j})})}),t.jsx(Ie,{disabled:_||!u.isValid,loading:i,children:i?"Connecting...":"Connect"})]})]})},AN={installVercelButton:"Install from Vercel Marketplace"},v0={title:"Key Benefits",list:["Effectively preview changes before merging them into production","Enable your team to work independently on isolated database branches","When you push changes to your repository, the integration automatically creates a Neon branch for your preview deployment"]},fne="_section_wddls_1",_ne={section:fne},EN=()=>t.jsxs("div",{className:_ne.section,children:[t.jsx(J,{level:5,children:v0.title}),t.jsx("ul",{children:v0.list.map(e=>t.jsxs("li",{children:[t.jsx("div",{children:t.jsx(q,{name:"check_flat",size:16})}),e]},e))})]}),Pv=({label:e,deniedMessage:s,size:n="l",onClick:r,withIcon:a=!1,loading:o,appearance:i="primary",className:c})=>t.jsx(t.Fragment,{children:t.jsx(ne,{content:s,placement:"bottom",disabled:o||!s,children:t.jsx("span",{children:t.jsx(A,{type:"submit",size:n,icon:a?"vercel_adaptive":void 0,appearance:i,onClick:r,disabled:!!s,className:c,loading:o,children:e})})})}),bne="_form_1pkcv_1",xne={form:bne},vne=()=>{const{trackUiInteraction:e}=k(),{projectId:s}=F(),{orgId:n}=ae(),{token:r}=Mm(),{isAllowedToInstall:a,isCollaborator:o,isLoading:i}=Iv(s);let c;a||(c=o?Ja.installIntegrationOnSharedProjectNotAllowed:Ja.installIntegrationNotAllowed);const l=n?`?org_id=${n}`:"",d=`${Dm}/projects/${s}/integrations/vercel${l}`;return t.jsxs(t.Fragment,{children:[t.jsxs(Ht,{action:d,target:"_blank",method:"POST",className:xne.form,children:[t.jsx("input",{type:"hidden",name:"authenticity_token",value:r}),n&&t.jsx("input",{type:"hidden",name:"org_id",value:n}),t.jsx(Pv,{label:AN.installVercelButton,deniedMessage:c,loading:i,withIcon:!0,onClick:()=>{e("vercel_account_integration_install_clicked")}})]}),t.jsx(Zc,{}),t.jsx(EN,{})]})},jne="_text_dkj31_1",yne="_varsList_dkj31_5",wne="_varsListItem_dkj31_11",Sne="_varsListLabel_dkj31_15",Cne="_noteOverridden_dkj31_20",Ine="_buttons_dkj31_24",kne="_fields_dkj31_29",Tne="_field_dkj31_29",vn={text:jne,varsList:yne,varsListItem:wne,varsListLabel:Sne,noteOverridden:Cne,buttons:Ine,fields:kne,field:Tne},Pne=["DATABASE_URL","PGHOST","PGDATABASE","PGUSER","PGPASSWORD"],Nne=()=>{var b;const{projectId:e,project:s}=F(),n=jN({projectId:e}),r=m.useMemo(()=>{var x,v;return(v=(x=n.data)==null?void 0:x.branches)==null?void 0:v.find(j=>j.default)},[n.data]),{data:{selectOptions:a}}=bL({projectId:e,branchId:r==null?void 0:r.id}),{data:{selectOptions:o}}=qu({projectId:e,branchId:r==null?void 0:r.id}),i=Pte({projectId:e}),[c,l]=m.useState(i.data??{});m.useEffect(()=>{l(i.data??{})},[i.data]);const d=m.useMemo(()=>Dj([c])!==Dj([i.data??{}]),[c,i.data]),u=m.useCallback(x=>{l(v=>v.vars===void 0?v:{...v,vars:uR(v.vars,j=>j.name===x,j=>({...j,value:!j.value}))})},[]),p=Nte({projectId:e},{onSuccess:()=>{ze(t.jsx(tt,{children:"Vercel environment variables saved. Changes will apply to future deployments."}),{containerId:hi.Drawer})},onError:x=>{const v=`We couldn't save changes: ${xL(x)}`;ze(t.jsx(ki,{children:v}))}}),h=m.useCallback(()=>{c.vars!==void 0&&p.mutate(c)},[c,p]),g=m.useCallback(()=>{l(i.data??{})},[i.data]),{trackUiInteraction:f}=k(),_=s==null?void 0:s.store_passwords;return t.jsx(t.Fragment,{children:_?t.jsxs(t.Fragment,{children:[t.jsxs(At,{title:"Vercel environment variables",children:[t.jsx("div",{className:vn.text,children:"Select the environment variables you need in your Vercel deployments."}),i.status==="error"?t.jsx(X,{appearance:"error",children:"Could not get Vercel environment variables settings"}):i.status==="pending"?t.jsx("ul",{className:vn.varsList,children:Pne.map(x=>t.jsx("li",{className:vn.varsListItem,children:t.jsx(D,{height:24,width:`${x.length}em`})},x))}):t.jsx(t.Fragment,{children:t.jsx("ul",{className:vn.varsList,children:(b=c.vars)==null?void 0:b.map(x=>t.jsx("li",{className:vn.varsListItem,children:t.jsx(ra,{checked:x.value,labelClassName:vn.varsListLabel,onChange:()=>u(x.name),disabled:p.isPending,children:x.name})},x.name))})})]}),t.jsxs(At,{title:"Default database and role",children:[t.jsx(P,{children:"Choose the database and role for every new branch created for Vercel Preview Deployments."}),t.jsxs("div",{className:vn.fields,children:[t.jsx(B,{label:"Database",className:vn.field,children:t.jsx(na,{options:o,"data-qa":"vercel-database-select",value:o.find(({value:x})=>x===c.database),onChange:x=>{x&&l(v=>({...v,database:x.value}))}})}),t.jsx(B,{label:"Role",className:vn.field,children:t.jsx(na,{options:a,"data-qa":"vercel-role-select",value:a.find(({value:x})=>x===c.role),onChange:x=>{x&&l(v=>({...v,role:x.value}))}})})]})]}),d&&t.jsxs(t.Fragment,{children:[t.jsx(X,{appearance:"warning",className:vn.noteOverridden,children:"Existing variables with the same names will be overridden in Vercel."}),t.jsxs("div",{className:vn.buttons,children:[t.jsx(A,{"data-qa":"vercel_env_vars_cancel",appearance:"secondary",onClick:()=>{f("vercel_integration_env_vars_cancel_edit"),g()},disabled:p.isPending,children:"Cancel"}),t.jsx(A,{"data-qa":"vercel_env_vars_cancel",appearance:"primary",onClick:()=>{f("vercel_integration_env_vars_send_update"),h()},disabled:p.isPending,children:"Save changes"})]})]})]}):t.jsx(Km,{integrationName:"Vercel",messageType:Qm.RemovalInstruction})})},tp={title:"Remove connection",text:t.jsxs(t.Fragment,{children:["Removing this connection stops the automatic setting of environment variables only. It does not remove the integration itself. To fully remove the integration, you need to do so from Vercel project"," ",t.jsx(M,{href:bB,openInNewTab:!0,children:"Settings"}),"."]}),button:"Disconnect",success:"The integration was successfully disconnected"},Ane="_text_1764z_1",Ene={text:Ane},One=({onRemoveSuccess:e})=>{const{trackUiInteraction:s}=k(),{projectId:n}=F(),{disconnectProject:r}=Ll(),a=Zu(),{confirm:o}=Ye(),i=()=>{ze(t.jsx(tt,{children:tp.success})),e()},c=async()=>{if(s("vercel_integration_revoke_click"),!await o({header:"Do you want to remove the connection?",text:t.jsx(X,{appearance:"error",children:"This will remove the connection with the Neon database. Are you sure you want proceed?"}),confirmButtonText:"Remove connection",appearance:"danger"})){s("vercel_integration_revoke_cancelled");return}s("vercel_integration_revoke_confirmed");try{await r(n),i(),await a.refetch()}catch(d){Y(d)}};return t.jsxs(At,{title:tp.title,children:[t.jsx("div",{className:Ene.text,children:tp.text}),t.jsx(A,{"data-qa":"vercel_disconnect",appearance:"secondary",onClick:c,children:tp.button})]})},j0={title:"Vercel integration"},Lne="_body_ug3sz_1",$ne={body:Lne},Rne=({onRemoveSuccess:e})=>{const[s,n]=m.useState(ql[0].value),r=a=>{n(a)};return t.jsxs(t.Fragment,{children:[t.jsx(jr,{options:ql,value:s,onChange:r}),s===ql[0].value&&t.jsx(dne,{}),s===ql[1].value&&t.jsx(Nne,{}),s===ql[2].value&&t.jsx(One,{onRemoveSuccess:e})]})},ON=({isOpen:e,onRequestClose:s,onRemoveSuccess:n,isInstalled:r=!1,isConfigured:a=!1,projectName:o})=>{const{project:i,isLoading:c}=F(),l=i==null?void 0:i.store_passwords;return t.jsx(ho,{"aria-label":j0.title,title:j0.title,subtitle:o,isOpen:e,onRequestClose:s,iconName:"vercel",coverImage:{x1:lI,x2:gN},children:a?t.jsx(Rne,{onRemoveSuccess:n}):t.jsxs("div",{className:$ne.body,children:[t.jsx(J,{level:3,size:"h4",children:gg.integrationDescription}),!c&&!l&&t.jsx(Km,{integrationName:"Vercel",messageType:Qm.SelectionPromptFull}),!c&&r&&t.jsx(gne,{}),!c&&!r&&t.jsx(vne,{}),t.jsx(Zc,{}),t.jsx(Tv,{}),t.jsx(Zc,{})]})})},Bne=({configuration:e})=>{const s=!!e,{trackUiInteraction:n}=k(),{isConfigured:r}=Ll(),{openedDrawerId:a,closeDrawer:o}=io();return t.jsx(ON,{isOpen:a===ea.Vercel,onRequestClose:()=>{n(s?"vercel_integration_configured_settings_close":"vercel_integration_available_settings_close"),o()},onRemoveSuccess:()=>{o()},isInstalled:r,isConfigured:s})},Mne=({isOpen:e,onRequestClose:s,onRemoveSuccess:n})=>{const{project:r}=F();return t.jsx(ON,{isOpen:e,onRequestClose:s,onRemoveSuccess:n,isConfigured:!!r,projectName:r==null?void 0:r.name})},Nv=({projectId:e})=>["getOuterbaseProject",e],LN=({projectId:e})=>_t({queryKey:Nv({projectId:e}),queryFn:async()=>(await W.getOuterbaseProject(e)).data}),$N=({projectId:e},{onSuccess:s,onError:n,...r}={})=>{const a=_e();return ve({mutationKey:["deleteProjectOuterbaseIntegration",e],mutationFn:async()=>(await W.deleteProjectOuterbaseIntegration(e)).data,onSuccess:(...o)=>{a.invalidateQueries({queryKey:Nv({projectId:e})}),a.invalidateQueries({queryKey:ms(e)}),s==null||s(...o)},onError:(o,...i)=>{Y(o),n==null||n(o,...i)},...r})},Dne=({projectId:e},{onSuccess:s,onError:n,...r}={})=>{const a=_e();return ve({mutationKey:["updateOuterbaseWorkspace",e],mutationFn:async o=>(await W.updateOuterbaseWorkspace(e,o)).data,onSuccess:(...o)=>{a.invalidateQueries({queryKey:Nv({projectId:e})}),s==null||s(...o)},onError:(o,...i)=>{Y(o),n==null||n(o,...i)},...r})},uc={descriptionTitle:"Integration details",description:t.jsxs(t.Fragment,{children:["Use"," ",t.jsxs(M,{openInNewTab:!0,href:"https://app.outerbase.com",children:["Outerbase"," "]}),"to view, query, visualize, and edit your Neon data with the power of AI."]}),howToAddTitle:"How to add",howToAdd:t.jsxs(t.Fragment,{children:["Connect your existing Outerbase account or"," ",t.jsxs(M,{openInNewTab:!0,href:"https://app.outerbase.com/signup/",children:["create a new one"," "]}),"before adding the integration."]}),button:"Add Outerbase",maxBasesExceededAlert:"Unable to add integration. The Outerbase free plan is limited to 1 base. Visit Outerbase for details."},Une="_text_6f26y_1",Fne="_alert_6f26y_5",y0={text:Une,alert:Fne},zne=({isMaxBasesExceeded:e})=>{const{trackUiInteraction:s}=k(),{projectId:n,project:r}=F(),a=r==null?void 0:r.store_passwords,{token:o}=Mm();return t.jsxs(t.Fragment,{children:[t.jsx(At,{title:uc.descriptionTitle,children:uc.description}),a?t.jsxs(At,{title:uc.howToAddTitle,children:[t.jsx("div",{className:y0.text,children:uc.howToAdd}),e&&t.jsx(X,{appearance:"error",className:y0.alert,children:uc.maxBasesExceededAlert}),t.jsxs(Ht,{action:`${Dm}/projects/${n}/applications/outerbase/auth`,children:[t.jsx("input",{type:"hidden",name:"authenticity_token",value:o}),t.jsx(A,{"data-qa":"outerbase_sign_in",type:"submit",onClick:()=>s("outerbase_integration_sign_in_clicked"),children:uc.button})]})]}):t.jsx(Km,{integrationName:"Outerbase",messageType:Qm.SelectionPromptFull})]})},RN=()=>{const{confirm:e}=Ye();return m.useCallback(()=>e({header:"Do you want to remove the integration?",text:t.jsx(X,{appearance:"error",children:"This will remove the connection with Neon. Are you sure you want to proceed?"}),confirmButtonText:"Remove integration",appearance:"danger"}),[e])},Ao={manageTitle:"Manage data",manageHint:e=>t.jsxs(t.Fragment,{children:["Use ",t.jsx(M,{href:e,children:"Outerbase "}),"to view, query, visualize, and edit your Neon data with the power of AI."]}),manageButton:"Open this project in Outerbase",removalTitle:"Remove integration",removalHint:"Removing the integration will terminate all current connections.",removalButton:"Disconnect",success:"The integration was successfully disconnected"},qne="_text_10hm2_1",Hne="_button_10hm2_5",Ff={text:qne,button:Hne},Vne=({projectId:e})=>{const{trackUiInteraction:s}=k(),n=LN({projectId:e}),{current_workspace_id:r,base_id:a}=n.data??{},o="https://app.outerbase.com",i=r&&a?`${o}/${r}/${a}`:o,{closeDrawer:c}=io(),l=$N({projectId:e},{onSuccess:()=>{c(),pe(Ao.success)}}),d=RN(),u=m.useCallback(async()=>{if(!await d()){s("outerbase_integration_remove_dismissed");return}s("outerbase_integration_remove_confirmed"),l.mutate()},[l,d,s]);return t.jsxs(t.Fragment,{children:[t.jsxs(At,{title:Ao.manageTitle,children:[t.jsx("div",{className:Ff.text,children:Ao.manageHint(i)}),t.jsx(A,{as:"a",href:i,appearance:"primary",className:Ff.button,children:Ao.manageButton})]}),t.jsxs(At,{title:Ao.removalTitle,children:[t.jsx("div",{className:Ff.text,children:Ao.removalHint}),t.jsx(A,{"data-qa":"outerbase_integraion_remove",appearance:"secondary",onClick:()=>{s("outerbase_integration_remove_clicked"),u()},children:Ao.removalButton})]})]})},zf={title:"Outerbase integration",success:"Outerbase integration was successfully added."},hc={title:"Select Outerbase workspace",fieldLabel:"Outerbase workspace",saveButton:"Save",cancelButton:"Cancel and disconnect",onSave:"The selected Outerbase workspace has been set.",onCancel:"The integration has been removed."},Wne="_buttons_o7uz2_1",Gne={buttons:Wne},Kne=({workspaces:e,projectId:s})=>{const{trackUiInteraction:n}=k(),[r,a]=m.useState(null),o=m.useMemo(()=>e.map(({id:h,name:g})=>h&&g?{value:h,label:g}:null).filter(YC),[e]),i=h=>{a(h)},c=Dne({projectId:s},{onSuccess:()=>pe(hc.onSave,{containerId:hi.Drawer})}),l=m.useCallback(()=>{r!=null&&r.value&&c.mutate({workspace_id:r.value})},[r==null?void 0:r.value,c]),d=$N({projectId:s},{onSuccess:()=>pe(hc.onCancel)}),u=RN(),p=async()=>{if(a(null),!await u()){n("outerbase_integration_remove_dismissed");return}n("outerbase_integration_remove_confirmed"),d.mutate()};return t.jsxs(At,{title:hc.title,children:[t.jsx(B,{label:hc.fieldLabel,id:"workspace-select",children:t.jsx(na,{options:o,value:r,onChange:i,disabled:c.isPending})}),t.jsxs("div",{className:Gne.buttons,children:[t.jsx(A,{appearance:"secondary",onClick:p,children:hc.cancelButton}),t.jsx(A,{onClick:l,disabled:r===null||c.isPending,children:hc.saveButton})]})]})},Qne="_placeholder_1bbyz_1",Yne="_buttons_1bbyz_8",w0={placeholder:Qne,buttons:Yne},Jne=()=>t.jsxs("div",{className:w0.placeholder,children:[t.jsx(D,{height:24,width:186}),t.jsx(D,{height:20}),t.jsx(D,{height:34}),t.jsx(D,{height:40}),t.jsx(D,{height:48,width:260,className:w0.buttons})]}),Zne=({projectId:e})=>{const s=LN({projectId:e}),{current_workspace_id:n,workspaces:r}=s.data??{};return s.isLoading?t.jsx(Jne,{}):n?t.jsx(Vne,{projectId:e}):t.jsx(Kne,{workspaces:r||[],projectId:e})},Xne=({configuration:e})=>{const s=!!e,{trackUiInteraction:n}=k(),{projectId:r}=F(),{openedDrawerId:a,openDrawer:o,closeDrawer:i}=io(),[c,l]=m.useState(!1),d=()=>{n(s?"outerbase_integration_configured_settings_closed":"outerbase_integration_available_settings_closed"),i()};return m.useEffect(()=>{const u=decodeURIComponent(window.location.hash);u==="#outerbase_success"&&(window.history.replaceState(null,""," "),pe(zf.success),o(ea.Outerbase)),u.startsWith("#outerbase_error")&&u.split("?")[1]==="max_bases_exceeded"&&(window.history.replaceState(null,""," "),l(!0),o(ea.Outerbase))},[o,l]),t.jsx(ho,{"aria-label":zf.title,title:zf.title,isOpen:a===ea.Outerbase,onRequestClose:d,iconName:"outerbase",coverImage:{x1:sb,x2:sb},children:s?t.jsx(Zne,{projectId:r}):t.jsx(zne,{isMaxBasesExceeded:c})})},ere=()=>{Object.values(qee).forEach(e=>{const s=new Image;s.src=e})},tre="_root_1aujf_1",sre="_title_1aujf_11",S0={root:tre,title:sre},hd={previewTitle:"Create a database branch with every pull request",previewDescription:"Create a database branch with every pull request for production-like preview deployments. Add the app and get started connecting Neon projects to your GitHub repositories.",settingTitle:"Setting up your GitHub + Neon workflow",settingDescription:t.jsxs(t.Fragment,{children:[t.jsx("p",{children:"Adding database branching to your GitHub-based workflow involves:"}),t.jsx("br",{}),t.jsxs("ul",{children:[t.jsx("li",{children:"Installing the GitHub app and authorizing it."}),t.jsx("li",{children:"Connecting your Neon project to the corresponding GitHub repository."}),t.jsx("li",{children:"Adding GitHub Actions code to your repo using our provided samples."})]}),t.jsx("br",{}),t.jsx("p",{children:"Install the GitHub app to get started."})]}),installButton:"Install GitHub App"},nre="_section_gme4m_1",rre="_description_gme4m_7",qf={section:nre,description:rre},are=()=>{const{trackUiInteraction:e}=k(),{canManageIntegration:s}=pg();return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:qf.section,children:[t.jsx(J,{level:3,children:hd.previewTitle}),t.jsx(P,{children:hd.previewDescription}),t.jsx(PN,{})]}),t.jsxs("div",{className:qf.section,children:[t.jsx(J,{level:3,children:hd.settingTitle}),t.jsx(P,{className:qf.description,children:hd.settingDescription}),t.jsx(TN,{})]}),t.jsx(NN,{label:hd.installButton,onClick:()=>{e("github_account_integration_install_clicked")},disabled:!s,tooltip:Ja.installIntegrationNotAllowed})]})},ore=(e,s)=>{const[n,r]=m.useState(!1),{trackUiInteraction:a}=k(),o=m.useCallback((c={})=>{r(!0),a(e,c)},[e,a]),i=m.useCallback((c={})=>{r(!1),a(s,c)},[s,a]);return[n,o,i]},ire=e=>e.split("/").at(0),cre="_root_n29va_1",lre="_name_n29va_7",C0={root:cre,name:lre},BN=({repositoryFullName:e,analyticAction:s,showAvatar:n=!1})=>{const{trackUiInteraction:r}=k();return t.jsx(M,{href:`https://github.com/${e}`,openInNewTab:!0,onClick:()=>{r(s)},children:t.jsxs("div",{className:C0.root,children:[n&&t.jsx(Uu,{size:"s",image:`https://avatars.githubusercontent.com/${ire(e)}`}),t.jsx("span",{className:C0.name,children:e})]})})},Wd={title:"Accessible repositories",openSettingsButton:"Open GitHub Settings",moreButton:e=>`+ ${e} more`,modalTitle:"All accessible GitHub repositories",dismiss:"Dismiss"},dre="_root_1chur_1",ure="_repoList_1chur_8",MN={root:dre,repoList:ure},Hf=4,DN=({repositories:e})=>t.jsx("div",{className:MN.repoList,children:e.map(({id:s,full_name:n})=>n&&t.jsx(BN,{repositoryFullName:n,showAvatar:!0,analyticAction:"github_account_integration_accessible_repositories_repository_link_clicked"},s))}),hre=({isOpen:e,onRequestClose:s,title:n,repositories:r})=>t.jsxs(It,{isOpen:e,onRequestClose:s,title:n,width:500,children:[t.jsx(qe,{children:t.jsx(DN,{repositories:r})}),t.jsx(Ee,{children:t.jsx(A,{size:"s",onClick:s,children:Wd.dismiss})})]}),pre=()=>{const{trackUiInteraction:e}=k(),{repositories:s,installationId:n}=ha(),[r,a,o]=ore("github_account_integration_accessible_repositories_modal_opened","github_account_integration_accessible_repositories_modal_closed"),{canManageIntegration:i}=pg();return s!=null&&s.length?t.jsxs(t.Fragment,{children:[t.jsx(hre,{isOpen:r,onRequestClose:o,title:Wd.modalTitle,repositories:s}),t.jsxs("div",{className:MN.root,children:[t.jsx(J,{level:4,children:Wd.title}),t.jsx(DN,{repositories:s.slice(0,Hf)}),s.length>Hf&&t.jsx(M,{onClick:a,children:Wd.moreButton(s.length-Hf)}),t.jsx(ne,{content:Ja.manageIntegrationNotAllowed,disabled:i,children:t.jsx("div",{children:t.jsx(A,{as:Ke,appearance:"secondary",size:"s",href:`https://github.com/settings/installations/${n}`,openInNewTab:!0,disabled:!i,onClick:()=>{e("github_account_integration_accessible_repositories_settings_link_clicked")},children:Wd.openSettingsButton})})})]})]}):null},mre="_root_1l38s_1",gre="_title_1l38s_11",fre="_repository_1l38s_17",_re="_repositoryLabel_1l38s_24",sp={root:mre,title:gre,repository:fre,repositoryLabel:_re},Lc={repository:"Repository",project:"Project",disconnectButton:"Disconnect",success:"The GitHub repository was successfully disconnected",confirmTitle:"Do you want to disconnect the integration?",confirmText:"This will disconnect the project integration with GitHub. Are you sure you want to proceed?",confirmButtonText:"Disconnect"},bre=({onDisconnect:e,disabled:s=!1,tooltip:n})=>{const{trackUiInteraction:r}=k(),{confirm:a}=Ye(),[o,i]=m.useState(!1),c=async()=>{try{if(!await a({header:Lc.confirmTitle,text:Lc.confirmText,appearance:"danger",confirmButtonText:Lc.confirmButtonText})){r("github_account_integration_connected_project_disconnect_dismissed");return}r("github_account_integration_connected_project_disconnect_confirmed"),i(!0),await e(),pe(Lc.success)}catch(l){Y(l)}finally{i(!1)}};return t.jsx(ne,{content:n,disabled:!s,children:t.jsx("span",{children:t.jsx(A,{appearance:"secondary",size:"s",disabled:o||s,onClick:async()=>{r("github_account_integration_connected_project_disconnect_clicked"),await c()},children:Lc.disconnectButton})})})},xre=({projectId:e,projectName:s,onDisconnect:n})=>{const{connectedRepositoryFullName:r,isLoading:a}=IN(e);return a?null:t.jsxs("div",{className:sp.root,children:[t.jsx(J,{level:5,className:sp.title,children:s}),t.jsxs("div",{className:sp.repository,children:[t.jsx("div",{className:sp.repositoryLabel,children:Lc.repository}),r&&t.jsx(BN,{analyticAction:"github_account_integration_connected_project_repository_link_clicked",repositoryFullName:r})]}),t.jsx(bre,{onDisconnect:n(e)})]})},vre="_root_srlr5_1",jre={root:vre},yre=({connectedProjectsId:e})=>{const{disconnectRepository:s}=ha(),{data:n}=qs(),r=m.useMemo(()=>(n==null?void 0:n.filter(({id:o})=>e.includes(o)).map(({id:o,name:i})=>({projectId:o,projectName:i})))||[],[n,e]),a=o=>async()=>{await s({projectId:o})};return r.length?t.jsx("div",{className:jre.root,children:r.map(({projectId:o,projectName:i})=>t.jsx(xre,{projectName:i,projectId:o,onDisconnect:a},o))}):null},jn={title:e=>`Connect ${e?"another ":""}project`,success:"The GitHub repository was successfully connected",projectLabel:"Neon project",repositoryLabel:"GitHub repository",required:"This field is required.",connectButton:"Connect",disabledProjectTooltip:"This project is already connected",disabledRepoTooltip:"This repository is already connected",connectedBadge:"Connected"},wre="_root_1rm1v_1",Sre="_connectForm_1rm1v_7",Cre="_connectFormButton_1rm1v_13",Vf={root:wre,connectForm:Sre,connectFormButton:Cre},Ire=({connectedProjectsId:e})=>{var g,f;const{trackUiInteraction:s}=k(),{data:n}=qs(),{repositories:r,connectRepository:a,isConnecting:o}=ha(),i=m.useMemo(()=>(r==null?void 0:r.map(({id:_=0,name:b="",installed:x=!1})=>({value:_,label:b,disabled:x,disabledTooltip:jn.disabledRepoTooltip,suffix:x&&t.jsx(Ne,{appearance:"warning",children:jn.connectedBadge})})))??[],[r]),c=m.useMemo(()=>(n==null?void 0:n.map(({id:_,name:b})=>({value:_,label:b,disabled:e.includes(_),disabledTooltip:jn.disabledProjectTooltip,suffix:e.includes(_)&&t.jsx(Ne,{appearance:"warning",children:jn.connectedBadge})})))??[],[n,e]),l=Ae(),{formState:{errors:d},setValue:u}=l,p=()=>{u("projectId",void 0),u("repositoryId",void 0),pe(jn.success)},h=async _=>{try{const{projectId:b,repositoryId:x}=_;if(!(b&&x))return;await a({projectId:b,repositoryId:x}),p()}catch(b){Y(b)}};return t.jsxs("div",{className:Vf.root,children:[t.jsx(J,{level:4,children:jn.title(!!e.length)}),t.jsxs(Xt,{providerProps:l,onSubmit:h,formBodyClassName:Vf.connectForm,children:[t.jsx(B,{label:jn.projectLabel,error:(g=d.projectId)==null?void 0:g.message,children:t.jsx(ye,{name:"projectId",rules:{required:{value:!0,message:jn.required}},control:l.control,render:({field:{onChange:_,...b}})=>t.jsx(lt,{options:c,filterable:!0,disabled:o,onChange:x=>{s("github_account_integration_connect_project_project_selected"),_(x)},...b})})}),t.jsx(B,{label:jn.repositoryLabel,error:(f=d.repositoryId)==null?void 0:f.message,children:t.jsx(ye,{name:"repositoryId",rules:{required:{value:!0,message:jn.required}},control:l.control,render:({field:{onChange:_,...b}})=>t.jsx(lt,{options:i,filterable:!0,disabled:o,onChange:x=>{s("github_account_integration_connect_project_repository_selected"),_(x)},...b})})}),t.jsx("div",{className:Vf.connectFormButton,children:t.jsx(Ie,{size:"l",loading:o,onClick:()=>{s("github_account_integration_connect_project_clicked")},children:jn.connectButton})})]})]})},Eo={title:"Remove integration",description:"Removing the integration from this account will also disconnect it from all projects.",removeButton:"Remove",confirmationTitle:"Remove GitHub app?",confirmationDescription:t.jsxs(t.Fragment,{children:[t.jsx("p",{children:"GitHub app is globally configured for each Neon account."}),t.jsx("p",{children:"When GitHub app is removed all integrated workflows across all projects will be disconnected, API keys and secrets will be removed and configured workflows will stop working."})]}),confirmButton:"Remove GitHub app",success:"The GitHub app was uninstalled"},kre="_root_1ghmn_1",Tre={root:kre},Pre=()=>{const{trackUiInteraction:e}=k(),{confirm:s}=Ye(),{removeApp:n,isRemoving:r}=ha(),a=async()=>{try{if(!await s({appearance:"danger",header:Eo.confirmationTitle,text:Eo.confirmationDescription,confirmButtonText:Eo.confirmButton})){e("github_account_integration_remove_dismissed");return}e("github_account_integration_remove_confirmed"),await n(void 0),pe(Eo.success)}catch(o){Y(o)}};return t.jsxs("div",{className:Tre.root,children:[t.jsx(J,{level:4,children:Eo.title}),t.jsx(P,{children:Eo.description}),t.jsx(A,{appearance:"danger",size:"s",loading:r,onClick:async()=>{e("github_account_integration_remove_clicked"),await a()},children:Eo.removeButton})]})},Nre=()=>{const{data:e,isLoading:s}=hv({enabled:!0}),n=Object.entries(e||{}).filter(([,a])=>a.includes("github")).map(([a])=>a),{canManageIntegration:r}=pg();return s?t.jsx(Se,{}):t.jsxs(t.Fragment,{children:[t.jsx(yre,{connectedProjectsId:n}),t.jsx(Ire,{connectedProjectsId:n}),t.jsx(pre,{}),r&&t.jsx(Pre,{})]})},UN=({headingId:e})=>{const{isInstalled:s,isLoading:n}=ha();return n?t.jsx(Se,{}):t.jsxs("div",{className:S0.root,children:[t.jsx(J,{id:e,level:2,className:S0.title,children:"GitHub"}),s?t.jsx(Nre,{}):t.jsx(are,{})]})},FN=(e,s,n,r)=>{m.useEffect(()=>{if(!n)return;const a=setInterval(e,s);return()=>clearInterval(a)},[n,s,...r])},Are=({onSuccess:e})=>{const{projectId:s}=F(),{trackUiInteraction:n}=k(),r=_e(),[a,o]=m.useState(!1);return FN(async()=>{const i=ms(s),c=r.getQueryCache().find({queryKey:i});!c||!c.state.data||!c.state.data.datadog||c.state.data.datadog.status!=="pending"||await r.invalidateQueries({queryKey:i})},3e4,a,[s]),ve({mutationFn:({apiKey:i,site:c,metrics:l,logs:d})=>W.addProjectDatadogIntegration(s,{api_key:i,site:c,metrics:l,logs:d}),onMutate:()=>n("datadog_integration_connect"),onError:i=>Y(i),onSuccess:(i,c)=>{r.setQueryData(ms(s),l=>({...l,datadog:{site:c.site,status:"pending",metrics:c.metrics,logs:c.logs,exportStats:void 0}})),o(!0),e()}})},Ere=({onSuccess:e})=>{const{trackUiInteraction:s}=k(),{projectId:n}=F(),r=_e();return ve({mutationFn:()=>W.deleteProjectDatadogIntegration(n),onMutate:()=>s("datadog_integration_disconnect"),onError:a=>Y(a),onSuccess:()=>{r.setQueryData(ms(n),a=>a&&{...a,datadog:void 0}),e()}})},Ore=({onSuccess:e})=>{const{projectId:s}=F(),{trackUiInteraction:n}=k(),r=_e(),[a,o]=m.useState(!1);return FN(async()=>{const i=ms(s),c=r.getQueryCache().find({queryKey:i});!c||!c.state.data||!c.state.data.datadog||c.state.data.datadog.status!=="pending"||await r.invalidateQueries({queryKey:i})},3e4,a,[s]),ve({mutationFn:({metrics:i,logs:c})=>W.updateProjectDatadogIntegration(s,{metrics:i,logs:c}),onMutate:()=>n("datadog_integration_update"),onError:i=>Y(i),onSuccess:(i,c)=>{r.setQueryData(ms(s),l=>({...l,datadog:{site:c.site,status:"pending",metrics:c.metrics,logs:c.logs,exportStats:void 0}})),o(!0),e()}})},Lre=e=>{switch(e){case"disabled":return"warning";case"error":return"error";case"pending":return"loading";case"running":return"success"}},zN=e=>({appearance:Lre(e),label:Kt.badge.label(e)}),$re="_statusWrapper_76nrj_1",Rre="_section_76nrj_9",Bre="_footer_76nrj_15",Mre="_footerGroup_76nrj_23",np={statusWrapper:$re,section:Rre,footer:Bre,footerGroup:Mre},Dre=({projectId:e,configuration:s,onRequestClose:n,...r})=>{var _,b;const a=cn({projectId:e}),o=(_=a==null?void 0:a.data)==null?void 0:_.endpoints.some(x=>x.current_state!=="active"),i=Ae({defaultValues:{site:s.site,apiKey:"",metrics:s.metrics,logs:s.logs}}),c=Ere({onSuccess:n}),l=Ore({onSuccess:n}),{confirm:d}=Ye(),u=m.useCallback(()=>{d({header:Kt.disconnectConfirmationTitle,text:Kt.disconnectConfirmationDescription,confirmButtonText:Kt.disconnectButton}).then(x=>x?c.mutate():null)},[d,c]),p=m.useCallback(x=>l.mutate(x),[l]),h=c.isPending||l.isPending,g=hI(i),f=zN(s.status);return t.jsx(ho,{footer:t.jsxs("div",{className:np.footer,children:[t.jsx(A,{appearance:"secondary",onClick:u,disabled:h,loading:h,children:Kt.disconnectButton}),t.jsxs("div",{className:np.footerGroup,children:[t.jsx(A,{appearance:"secondary",onClick:n,children:Kt.cancelButton}),t.jsx(A,{appearance:"primary",disabled:g||h,onClick:()=>i.handleSubmit(p)(),children:Kt.confirmButton})]})]}),onRequestClose:n,...r,children:t.jsxs(At,{className:np.section,children:[t.jsx(P,{children:Kt.form.intro}),o&&t.jsx(X,{appearance:"warning",children:Kt.inactiveComputesWarning}),t.jsxs("div",{className:np.statusWrapper,children:[t.jsx(B,{label:Kt.form.site.label,children:((b=pI.find(x=>x.site===s.site))==null?void 0:b.name)??"unknown"}),t.jsx(B,{label:Kt.form.apiKey.label,children:Kt.form.apiKey.configured}),t.jsx(B,{label:Kt.badge.statusLabel,children:t.jsx(Jd,{appearance:f.appearance,size:"s",label:f.label})})]}),t.jsx(mI,{form:i,onSubmit:p,projectId:e,disabled:h,apiKeyConfigured:!0})]})})},Ure="_section_179oe_1",Fre={section:Ure},zre=({onRequestClose:e,projectId:s,...n})=>{const r=Ae({defaultValues:{site:pI[0].site,apiKey:"",metrics:!0,logs:!0}}),a=Are({onSuccess:e}),o=m.useCallback(c=>a.mutate(c),[a]),i=hI(r);return t.jsx(ho,{footer:t.jsxs(t.Fragment,{children:[t.jsx(A,{appearance:"secondary",onClick:e,children:Kt.cancelButton}),t.jsx(A,{onClick:()=>r.handleSubmit(o)(),disabled:i,loading:a.status==="pending",children:Kt.confirmButton})]}),onRequestClose:e,...n,children:t.jsxs(At,{className:Fre.section,children:[t.jsx(P,{children:Kt.form.intro}),t.jsx(mI,{form:r,onSubmit:o,projectId:s})]})})},qre=({configuration:e,projectId:s})=>{const n=pv().datadog,{openedDrawerId:r,closeDrawer:a}=io(),{trackUiInteraction:o}=k(),i=m.useCallback(()=>{o(e?"datadog_integration_configured_settings_close":"datadog_integration_available_settings_close"),a()},[a,e,o]),c=r===ea.Datadog,l={onRequestClose:i,isOpen:c,beta:n,"aria-label":Kt.label,title:Kt.title,iconName:"datadog"};return e?t.jsx(Dre,{...l,projectId:s,configuration:e}):t.jsx(zre,{...l,projectId:s})},Le={cancelButton:"Cancel",disconnectButton:"Disconnect",saveButton:"Save",continueAnywayButton:"Continue anyway",label:"OpenTelemetry Integration",title:"OpenTelemetry",disconnectConfirmationTitle:"Confirm",disconnectConfirmationDescription:"Are you sure you want to disconnect OpenTelemetry integration?",badge:{statusLabel:"Status",status:e=>t.jsxs(t.Fragment,{children:["Status: ",e]}),label:e=>{switch(e){case"disabled":return"Disabled";case"error":return"Error";case"pending":return"Pending";case"running":return"Active"}}},inactiveComputesWarning:"There are inactive computes on the project, no data for them will be visible on your OpenTelemetry backend until they are activated.",form:{intro:"Send metrics and events from your Neon project to your OpenTelemetry backend.",export:{header:"Telemetry to export",metrics:"Metrics",logs:"Postgres logs",atLeastOneRequired:"At least one export option must be selected."},connection:{header:"Connection",grpc:{label:"GRPC"},http:{label:"HTTP"},endpoint:{label:"Endpoint",placeholder:"Enter your endpoint"},configured:"Configured",authHeader:"Authentication"},telemetry:{endpointOverride:{description:"Override endpoints",metrics:"Metrics endpoint",metricsPlaceholder:"Enter your metrics endpoint",logs:"Logs endpoint",logsPlaceholder:"Enter your logs endpoint"}},resource:{header:"Resource attributes",key:"service.name",value:"Enter value (Optional)"}}},Hre=e=>{switch(e){case"disabled":return"warning";case"error":return"error";case"pending":return"loading";case"running":return"success"}},Vre=e=>({appearance:Hre(e),label:Le.badge.label(e)}),Wre="_statusWrapper_1ko1o_1",Gre="_section_1ko1o_9",Kre="_footer_1ko1o_15",Qre="_footerGroup_1ko1o_21",rp={statusWrapper:Wre,section:Gre,footer:Kre,footerGroup:Qre};function Sm(e){return{connection:{protocol:e.connection.protocol,endpoint:e.connection.endpoint,authentication:{bearer_token:e.connection.authentication.bearerToken?{token:e.connection.authentication.bearerToken}:void 0,basic:e.connection.authentication.basic?{username:e.connection.authentication.basic.username,password:e.connection.authentication.basic.password}:void 0,api_key:e.connection.authentication.apiKey?{key:e.connection.authentication.apiKey}:void 0}},telemetry:{types:[...e.telemetry.types.metrics_enabled?["metrics"]:[],...e.telemetry.types.logs_enabled?["logs"]:[]],metrics_endpoint_override:(e.telemetry.metrics_endpoint_override??"").length>0?e.telemetry.metrics_endpoint_override:void 0,logs_endpoint_override:(e.telemetry.logs_endpoint_override??"").length>0?e.telemetry.logs_endpoint_override:void 0},resource:e.resourceAttributes?{attributes:e.resourceAttributes}:{}}}const qN=(e,s,n,r)=>{m.useEffect(()=>{if(!n)return;const a=setInterval(e,s);return()=>clearInterval(a)},[n,s,...r])};function Yre(e){var s,n;return"response"in e&&e.response?((s=e.response.data)==null?void 0:s.code)??((n=e.response.status)==null?void 0:n.toString()):"code"in e&&e.code?e.code:String(e)}const ul=e=>yl(e)&&Yre(e)==="OPENTELEMETRY_INTEGRATION_VALIDATION_FAILED",Jre=({onSuccess:e})=>{const{projectId:s}=F(),{trackUiInteraction:n}=k(),r=_e(),[a,o]=m.useState(!1);return qN(async()=>{const i=ms(s),c=r.getQueryCache().find({queryKey:i});!c||!c.state.data||!c.state.data.opentelemetry||c.state.data.opentelemetry.status!=="pending"||await r.invalidateQueries({queryKey:i})},3e4,a,[s]),ve({mutationFn:({skipValidation:i,...c})=>{const{connection:l,telemetry:d,resource:u}=Sm(c);return W.addProjectOpentelemetryIntegration(s,{connection:l,telemetry:d,resource:u,skip_validation:i})},onMutate:()=>n("opentelemetry_integration_connect"),onError:i=>{ul(i)||Y(i)},onSuccess:(i,c)=>{const{connection:l,telemetry:d,resource:u}=Sm(c);r.setQueryData(ms(s),p=>({...p,opentelemetry:{connection:l,telemetry:d,resource:u,status:"pending",exportStats:void 0}})),o(!0),e()}})},Zre=({onSuccess:e})=>{const{trackUiInteraction:s}=k(),{projectId:n}=F(),r=_e();return ve({mutationFn:()=>W.deleteProjectOpentelemetryIntegration(n),onMutate:()=>s("opentelemetry_integration_disconnect"),onError:a=>Y(a),onSuccess:()=>{r.setQueryData(ms(n),a=>a&&{...a,opentelemetry:void 0}),e()}})},Xre=({onSuccess:e})=>{const{projectId:s}=F(),{trackUiInteraction:n}=k(),r=_e(),[a,o]=m.useState(!1);return qN(async()=>{const i=ms(s),c=r.getQueryCache().find({queryKey:i});!c||!c.state.data||!c.state.data.opentelemetry||c.state.data.opentelemetry.status!=="pending"||await r.invalidateQueries({queryKey:i})},3e4,a,[s]),ve({mutationFn:({skipValidation:i,...c})=>{const{telemetry:l,resource:d}=Sm(c);return W.updateProjectOpentelemetryIntegration(s,{telemetry:l,resource:d,skip_validation:i})},onMutate:()=>n("opentelemetry_integration_update"),onError:i=>{ul(i)||Y(i)},onSuccess:(i,c)=>{const{connection:l,telemetry:d,resource:u}=Sm(c);r.setQueryData(ms(s),p=>({...p,opentelemetry:{connection:l,telemetry:d,resource:u,status:"pending",exportStats:void 0}})),o(!0),e()}})},ls={header:"Authentication",bearer:{header:"Bearer",label:"Bearer Token",tokenPlaceholder:"Enter your bearer token",description:"Use a short-lived token typically issued by an identity provider. Best for secure, time-bounded access."},basic:{header:"Basic",usernameLabel:"Username",usernamePlaceholder:"Enter your username",passwordLabel:"Password",passwordPlaceholder:"Enter your password",description:"Authenticate with a username and password. Mostly used for legacy systems and internal tools."},apiKey:{header:"API Key",label:"API Key",keyPlaceholder:"Enter your API key",description:"Use a static key tied to your account or project. Simple to manage, but less secure if exposed."}},eae="_message_5tcdx_1",Wf={message:eae},tae=()=>{const{control:e,watch:s,register:n}=kt(),r=s("connection.authentication"),a=(r==null?void 0:r.bearerToken)!==void 0,o=(r==null?void 0:r.apiKey)!==void 0,i=(r==null?void 0:r.basic)!==void 0;return t.jsxs(t.Fragment,{children:[t.jsx(J,{level:5,children:ls.header}),t.jsx(ye,{name:"connection.authentication",control:e,render:({field:c})=>t.jsxs(Fu,{children:[t.jsx(gr,{active:a,onClick:()=>c.onChange({bearerToken:c.value.bearerToken||""}),children:ls.bearer.header}),t.jsx(gr,{active:i,onClick:()=>{var l,d;return c.onChange({basic:{username:((l=c.value.basic)==null?void 0:l.username)||"",password:((d=c.value.basic)==null?void 0:d.password)||""}})},children:ls.basic.header}),t.jsx(gr,{active:o,onClick:()=>c.onChange({apiKey:c.value.apiKey||""}),children:ls.apiKey.header})]})}),a&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:Wf.message,children:ls.bearer.description}),t.jsx(B,{label:ls.bearer.label,children:t.jsx(ce,{...n("connection.authentication.bearerToken",{required:!0}),type:"password",placeholder:ls.bearer.tokenPlaceholder})})]}),i&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:Wf.message,children:ls.basic.description}),t.jsx(B,{label:ls.basic.usernameLabel,children:t.jsx(ce,{...n("connection.authentication.basic.username",{required:!0}),placeholder:ls.basic.usernamePlaceholder})}),t.jsx(B,{label:ls.basic.passwordLabel,children:t.jsx(ce,{...n("connection.authentication.basic.password",{required:!0}),type:"password",placeholder:ls.basic.passwordPlaceholder})})]}),o&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:Wf.message,children:ls.apiKey.description}),t.jsx(B,{label:ls.apiKey.label,children:t.jsx(ce,{...n("connection.authentication.apiKey",{required:!0}),type:"password",placeholder:ls.apiKey.keyPlaceholder})})]})]})},sae=()=>{const{control:e,register:s}=kt();return t.jsxs(t.Fragment,{children:[t.jsx(J,{level:5,children:Le.form.connection.header}),t.jsx(ye,{name:"connection.protocol",control:e,render:({field:n})=>t.jsxs(Fu,{children:[t.jsx(gr,{active:n.value==="grpc",onClick:()=>n.onChange("grpc"),children:Le.form.connection.grpc.label}),t.jsx(gr,{active:n.value==="http",onClick:()=>n.onChange("http"),children:Le.form.connection.http.label})]})}),t.jsx(B,{label:Le.form.connection.endpoint.label,children:t.jsx(ce,{...s("connection.endpoint",{required:!0}),placeholder:Le.form.connection.endpoint.placeholder})})]})},nae=()=>{const{setValue:e,watch:s,register:n,getValues:r}=kt(),a=s("telemetry.metrics_endpoint_override"),o=s("telemetry.logs_endpoint_override"),[i,c]=m.useState(!!(a||o)),l=()=>{c(d=>(d&&(e("telemetry.metrics_endpoint_override",void 0),e("telemetry.logs_endpoint_override",void 0)),!d))};return t.jsxs(t.Fragment,{children:[t.jsx(_s,{isSelected:i,onChange:l,children:Le.form.telemetry.endpointOverride.description}),i&&t.jsxs(t.Fragment,{children:[t.jsx(B,{label:Le.form.telemetry.endpointOverride.metrics,children:t.jsx(ce,{...n("telemetry.metrics_endpoint_override"),placeholder:Le.form.telemetry.endpointOverride.metricsPlaceholder,defaultValue:r("telemetry.metrics_endpoint_override")??""})}),t.jsx(B,{label:Le.form.telemetry.endpointOverride.logs,children:t.jsx(ce,{...n("telemetry.logs_endpoint_override"),placeholder:Le.form.telemetry.endpointOverride.logsPlaceholder,defaultValue:r("telemetry.logs_endpoint_override")??""})})]})]})},rae="_section_d3g1d_1",aae="_divider_d3g1d_7",pc={section:rae,divider:aae},oae=()=>{const{control:e}=kt();return t.jsxs(t.Fragment,{children:[t.jsx(J,{level:5,children:Le.form.resource.header}),t.jsx(ye,{name:"resourceAttributes",control:e,render:({field:{value:s={},onChange:n,...r}})=>t.jsxs(wu,{fullWidth:!1,children:[t.jsx(B,{children:t.jsx(ce,{...r,placeholder:Le.form.resource.key,disabled:!0})}),t.jsx(B,{children:t.jsx(ce,{...r,placeholder:Le.form.resource.value,onChange:a=>{const o=a.target.value;n(o?{[Le.form.resource.key]:o}:void 0)},defaultValue:(s==null?void 0:s[Le.form.resource.key])??""})})]})})]})},iae="_checkboxLabel_ugzm3_1",cae="_checkboxGroup_ugzm3_5",Gf={checkboxLabel:iae,checkboxGroup:cae},lae=()=>{const{control:e,trigger:s}=kt();return t.jsxs(t.Fragment,{children:[t.jsx(J,{level:5,children:Le.form.export.header}),t.jsx(ye,{name:"telemetry.types",control:e,rules:{validate:n=>!n.metrics_enabled&&!n.logs_enabled?Le.form.export.atLeastOneRequired:!0},render:({fieldState:n})=>t.jsxs("div",{className:Gf.checkboxGroup,children:[t.jsx(ye,{name:"telemetry.types.metrics_enabled",control:e,render:({field:r})=>{var a;return t.jsx(B,{error:!!((a=n.error)!=null&&a.message),children:t.jsx(ra,{...r,value:"metrics",checked:r.value,labelClassName:Gf.checkboxLabel,onChange:o=>{r.onChange(o.target.checked),s("telemetry.types")},children:Le.form.export.metrics})})}}),t.jsx(ye,{name:"telemetry.types.logs_enabled",control:e,render:({field:r})=>{var a;return t.jsx(B,{error:(a=n.error)==null?void 0:a.message,children:t.jsxs(ra,{...r,value:"logs",checked:r.value,labelClassName:Gf.checkboxLabel,onChange:o=>{r.onChange(o.target.checked),s("telemetry.types")},children:[Le.form.export.logs," ",t.jsx(Ne,{appearance:"experimental",size:"m",margin:"left",children:"Beta"})]})})}})]})})]})},HN=({form:e,projectId:s,onSubmit:n,otelConfigured:r=!1,shouldShowValidationError:a})=>{var d,u;const i=((d=cn({projectId:s}).data)==null?void 0:d.endpoints.filter(p=>p.compute_release_version&&Number(p.compute_release_version)<8320))??[],{branchesById:c}=Hu({projectId:s}),l=e.watch("telemetry");return t.jsxs(Ht,{onSubmit:e.handleSubmit(n),id:"opentelemetry-form",gaps:!0,children:[t.jsx("div",{className:pc.section,children:t.jsx(lae,{})}),t.jsx("div",{className:pc.divider}),!r&&t.jsx("div",{className:pc.section,children:t.jsx(sae,{})}),t.jsx("div",{className:pc.section,children:t.jsx(nae,{})}),!r&&t.jsx("div",{className:pc.section,children:t.jsx(tae,{})}),t.jsx("div",{className:pc.section,children:t.jsx(oae,{})}),i.length>0&&((u=l==null?void 0:l.types)==null?void 0:u.logs_enabled)&&t.jsx(xB,{outdatedComputes:i,branchesById:c}),a&&t.jsx(X,{appearance:"warning",title:"Authentication validation failed",children:'Please check your configuration or press "Continue anyway".'})]})},dae=({projectId:e,configuration:s,onRequestClose:n,...r})=>{var b,x;const a=cn({projectId:e}),o=(b=a==null?void 0:a.data)==null?void 0:b.endpoints.some(v=>v.current_state!=="active"),i=Ae({defaultValues:{connection:{protocol:s.connection.protocol,endpoint:s.connection.endpoint,authentication:{}},telemetry:{types:{metrics_enabled:s.telemetry.types.includes("metrics"),logs_enabled:s.telemetry.types.includes("logs")},metrics_endpoint_override:s.telemetry.metrics_endpoint_override,logs_endpoint_override:s.telemetry.logs_endpoint_override},resourceAttributes:(x=s.resource)==null?void 0:x.attributes}}),{reset:c}=i,l=Zre({onSuccess:n}),d=Xre({onSuccess:n}),u=ul(d.error)&&!i.formState.isDirty,{confirm:p}=Ye(),h=m.useCallback(()=>{p({header:Le.disconnectConfirmationTitle,text:Le.disconnectConfirmationDescription,confirmButtonText:Le.disconnectButton}).then(v=>v?l.mutate():null)},[p,l]),g=m.useCallback(v=>{try{d.mutate({...v,skipValidation:u})}catch(j){ul(j)&&c(v,{keepValues:!0})}},[d,c,u]),f=l.isPending||d.isPending,_=Vre(s.status);return t.jsx(es,{...i,children:t.jsx(ho,{footer:t.jsxs("div",{className:rp.footer,children:[t.jsx(A,{appearance:"secondary",onClick:h,disabled:f,loading:f,children:Le.disconnectButton}),t.jsxs("div",{className:rp.footerGroup,children:[t.jsx(A,{appearance:"secondary",onClick:n,children:Le.cancelButton}),t.jsx(Ie,{appearance:"primary",disabled:f||!i.formState.isValid,formId:"opentelemetry-form",children:u?Le.continueAnywayButton:Le.saveButton})]})]}),onRequestClose:n,...r,children:t.jsxs(At,{className:rp.section,children:[t.jsx(P,{children:Le.form.intro}),o&&t.jsx(X,{appearance:"warning",children:Le.inactiveComputesWarning}),t.jsxs("div",{className:rp.statusWrapper,children:[t.jsx(sl,{appearance:"secondary",content:s.connection.endpoint,maxWidth:200}),t.jsx(B,{label:Le.form.connection.authHeader,children:Le.form.connection.configured}),t.jsx(B,{label:Le.badge.statusLabel,children:t.jsx(Jd,{appearance:_.appearance,size:"s",label:_.label})})]}),t.jsx(HN,{form:i,onSubmit:g,projectId:e,otelConfigured:!0,shouldShowValidationError:u})]})})})},uae="_section_179oe_1",hae={section:uae},pae=({onRequestClose:e,projectId:s,...n})=>{const r=Ae({defaultValues:{connection:{protocol:"http",endpoint:"",authentication:{bearerToken:""}},telemetry:{types:{metrics_enabled:!0,logs_enabled:!0}}}}),{reset:a}=r,o=Jre({onSuccess:e}),i=ul(o.error)&&!r.formState.isDirty,c=m.useCallback(async l=>{try{await o.mutateAsync({...l,skipValidation:i})}catch(d){ul(d)&&a(l,{keepValues:!0})}},[o,a,i]);return t.jsx(es,{...r,children:t.jsx(ho,{footer:t.jsxs(t.Fragment,{children:[t.jsx(A,{appearance:"secondary",onClick:e,children:Le.cancelButton}),t.jsx(Ie,{appearance:"primary",disabled:!r.formState.isValid,formId:"opentelemetry-form",children:i?Le.continueAnywayButton:Le.saveButton})]}),onRequestClose:e,...n,children:t.jsxs(At,{className:hae.section,children:[t.jsx(P,{children:Le.form.intro}),t.jsx(HN,{form:r,onSubmit:c,projectId:s,shouldShowValidationError:i})]})})})},mae=({projectId:e,configuration:s})=>{const n=pv().opentelemetry,{openedDrawerId:r,closeDrawer:a}=io(),{trackUiInteraction:o}=k(),i=m.useCallback(()=>{o(s?"opentelemetry_integration_configured_settings_close":"opentelemetry_integration_available_settings_close"),a()},[a,s,o]),c=r===ea.Opentelemetry,l={onRequestClose:i,isOpen:c,beta:n,"aria-label":Le.label,title:Le.title,iconName:"opentelemetry"};return s?t.jsx(dae,{...l,projectId:e,configuration:s}):t.jsx(pae,{...l,projectId:e})},gae=()=>{const{trackUiInteraction:e}=k(),{orgId:s}=ae(),{token:n}=Mm(),{isAllowedToInstall:r,isLoading:a}=Iv(),o=s?`?org_id=${s}`:"",i=`${Dm}/integrations/vercel${o}`;return t.jsxs(t.Fragment,{children:[t.jsxs(Ht,{action:i,target:"_blank",method:"post",children:[t.jsx("input",{type:"hidden",name:"authenticity_token",value:n}),t.jsx(Pv,{label:AN.installVercelButton,deniedMessage:r?void 0:Ja.installIntegrationNotAllowed,loading:a,withIcon:!0,onClick:()=>{e("vercel_account_integration_install_clicked")}})]}),t.jsx(Zc,{}),t.jsx(EN,{}),t.jsx(Zc,{}),t.jsx(Tv,{})]})},fae={title:"Vercel"},_ae="_root_pru2u_1",bae="_header_pru2u_11",xae="_title_pru2u_17",Kf={root:_ae,header:bae,title:xae},mc={title:"Vercel integrations",neonProjectHeader:"Neon project",vercelProjectHeader:"Vercel project",openSettingsButton:"Open settings"},vae="_card_fn2g0_1",jae="_column_fn2g0_10",Qf={card:vae,column:jae},yae=({projects:e,onSettingsOpen:s})=>{if(e.length<=3)return e.map(r=>t.jsxs("div",{className:Qf.card,"data-qa":"project-card",children:[t.jsxs("div",{className:Qf.column,children:[t.jsx(P,{appearance:"secondary",children:mc.neonProjectHeader}),t.jsx(M,{href:G(gD.ProjectsItem,{projectId:r.neon_project_id}),appearance:"primary",children:r.neon_project_name})]}),t.jsxs("div",{className:Qf.column,children:[t.jsx(P,{appearance:"secondary",children:mc.vercelProjectHeader}),r.url?t.jsx(M,{href:r.url,appearance:"primary",openInNewTab:!0,children:r.name}):t.jsxs(P,{children:[" ",r.name]})]}),t.jsx(A,{size:"s",appearance:"secondary",onClick:()=>s(r),children:mc.openSettingsButton})]},r.id));const n=[{id:"neon_project_name",header:mc.neonProjectHeader,enableSorting:!0,rowHeader:!0,accessorKey:"neon_project_name"},{id:"vercel_project_name",header:mc.vercelProjectHeader,enableSorting:!0,accessorKey:"name"},{id:"settings",size:62,render:r=>t.jsx(fs,{iconName:"edit","data-qa":"open-settings",onClick:()=>s(r)})}];return t.jsx(Ps,{columns:n,getRowId:r=>r.id,isLoading:!1,rows:e,"aria-label":mc.title,defaultSorting:{column:"neon_project_name",direction:"ascending"}})},Ys={neonProjectLabel:"Neon project",vercelProjectLabel:"Vercel project",roleLabel:"Role",databaseLabel:"Database",selectProjectPlaceholder:"Select project",connectedBadge:"Connected",connectButton:"Connect",connectingButton:"Connecting..."},wae="_form_1j4vy_1",Sae="_neonSection_1j4vy_6",Cae="_roleAndDatabaseRow_1j4vy_16",Iae="_vercelSection_1j4vy_26",kae="_compareIcon_1j4vy_33",Tae="_vercelProjectField_1j4vy_39",Pae="_connectButton_1j4vy_43",Oo={form:wae,neonSection:Sae,roleAndDatabaseRow:Cae,vercelSection:Iae,compareIcon:kae,vercelProjectField:Tae,connectButton:Pae},Nae=({configurationId:e,projects:s,vercelProjects:n})=>{const r=m.useMemo(()=>n.map(w=>w.neon_project_id).filter(YC),[n]),a=m.useMemo(()=>s.map(w=>({value:w.id,label:w.name,disabled:r.includes(w.id),suffix:r.includes(w.id)&&t.jsx(Ne,{appearance:"warning",children:Ys.connectedBadge})})),[r,s]),{connectedVercelProjectIds:o,connectProjectAsync:i,isLoading:c,isConnecting:l}=Ll(),d=m.useMemo(()=>n.map(w=>({value:w.id,label:w.name,disabled:o.includes(w.id),suffix:o.includes(w.id)&&t.jsx(Ne,{appearance:"warning",children:Ys.connectedBadge})})),[o,n]),u=Ae({defaultValues:{neonProjectId:""}}),{control:p,watch:h,formState:g,register:f}=u,_=h("neonProjectId"),{branches:b,isLoading:x}=_x(_),v=m.useMemo(()=>{var w;return(w=b==null?void 0:b.find(S=>S.default))==null?void 0:w.id},[b]),j=m.useMemo(()=>c||x,[c,x]),y=m.useCallback(async w=>{if(v)try{await i({...w,configurationId:e,projectId:w.neonProjectId,branchId:v}),u.reset(),pe(gg.projectConnectedWithSuccess)}catch(S){Y(S)}},[e,i,v,u]);return t.jsxs(Xt,{providerProps:u,onSubmit:y,className:Oo.form,children:[t.jsxs("div",{className:Oo.neonSection,children:[t.jsx(B,{label:Ys.neonProjectLabel,children:t.jsx(ye,{name:"neonProjectId",control:p,render:({field:{onChange:w,...S}})=>t.jsx(lt,{options:a,placeholder:Ys.selectProjectPlaceholder,size:"s","aria-label":Ys.neonProjectLabel,disabled:l,...f("neonProjectId",{required:!0}),onChange:T=>{w(T)},...S})})}),_&&t.jsxs("div",{className:Oo.roleAndDatabaseRow,children:[t.jsx(B,{label:Ys.databaseLabel,children:t.jsx(ye,{name:"database",control:p,rules:{required:!0},render:({field:w})=>t.jsx(dI,{projectId:_,branchId:v,value:w.value,canCreateDatabase:!1,size:"s","data-qa":"database-select",disabled:!v||j||l,onChange:S=>w.onChange(S)})})}),t.jsx(B,{label:Ys.roleLabel,children:t.jsx(ye,{name:"role",control:p,rules:{required:!0},render:({field:w})=>t.jsx(uI,{projectId:_,branchId:v,value:w.value,canCreateRole:!1,size:"s","data-qa":"role-select",disabled:!v||j||l,onChange:S=>w.onChange(S)})})})]})]}),t.jsxs("div",{className:Oo.vercelSection,children:[t.jsx("div",{className:Oo.compareIcon,children:t.jsx(q,{name:"compare",size:20})}),t.jsx(B,{label:Ys.vercelProjectLabel,className:Oo.vercelProjectField,children:t.jsx(ye,{name:"vercelProjectId",control:p,render:({field:{onChange:w,...S}})=>t.jsx(lt,{options:d,placeholder:Ys.selectProjectPlaceholder,size:"s","aria-label":Ys.vercelProjectLabel,disabled:l,...f("vercelProjectId",{required:!0}),onChange:T=>{w(T)},...S})})}),t.jsx("div",{className:Oo.connectButton,children:t.jsx(Ie,{disabled:j||!g.isValid,loading:l,children:l?Ys.connectingButton:Ys.connectButton})})]})]})},yn={connectedProjectsTitle:"Connected projects",connectAnotherProjectTitle:"Connect another project",removeIntegrationTitle:"Remove integration",removeIntegrationDescription:"Removing the integration from this account will also disconnect it from all projects.",removeIntegrationButton:"Remove",confirmRemoveIntegrationTitle:"Remove Vercel integration?",confirmRemoveIntegrationDescription:{common:"Vercel is globally configured for Neon account.",personal:"When the Vercel integration is removed, all Neon projects on this account connected to Vercel counterparts will be disconnected.",org:"When the Vercel integration is removed, all Neon projects on this organization connected to Vercel counterparts will be disconnected."},confirmRemoveIntegrationButton:"Remove Vercel integration",removeIntegrationSuccess:"The Vercel integration was removed"},Aae="_projectsSection_1hd1s_1",Eae="_removeIntegrationSection_1hd1s_7",Oae="_removeIntegrationHeader_1hd1s_13",ap={projectsSection:Aae,removeIntegrationSection:Eae,removeIntegrationHeader:Oae},Lae=({configurationId:e,projects:s})=>{const{projects:n,removeIntegration:r,isRemoving:a}=Ll(),{confirm:o}=Ye(),{orgId:i}=ae(),{isAllowedToInstall:c,isLoading:l}=Iv(),d=s&&s.length>0,u=n&&n.length>0,p=n==null?void 0:n.filter(b=>b.neon_project_id),h=p&&p.length>0,g=m.useCallback(async()=>{try{if(!await o({appearance:"danger",header:yn.confirmRemoveIntegrationTitle,text:t.jsxs(t.Fragment,{children:[t.jsx("p",{children:yn.confirmRemoveIntegrationDescription.common}),t.jsx("p",{children:i?yn.confirmRemoveIntegrationDescription.org:yn.confirmRemoveIntegrationDescription.personal})]}),confirmButtonText:yn.confirmRemoveIntegrationButton}))return;await r(),pe(yn.removeIntegrationSuccess)}catch(b){Y(b)}},[o,i,r]),[f,_]=m.useState();return t.jsxs(t.Fragment,{children:[f&&t.jsx(fx,{projectId:f.neon_project_id,children:t.jsx(Mne,{isOpen:!0,onRequestClose:()=>_(void 0),onRemoveSuccess:()=>{_(void 0)}})}),h&&t.jsxs("section",{className:ap.projectsSection,children:[t.jsx(J,{level:5,children:yn.connectedProjectsTitle}),t.jsx(yae,{projects:p,onSettingsOpen:_})]}),d&&u&&t.jsxs("div",{className:ap.projectsSection,children:[t.jsx(J,{level:3,children:yn.connectAnotherProjectTitle}),t.jsx(Nae,{configurationId:e,projects:s,vercelProjects:n})]}),t.jsx(Tv,{}),t.jsxs("section",{className:ap.removeIntegrationSection,children:[t.jsxs("div",{className:ap.removeIntegrationHeader,children:[t.jsx(J,{level:5,children:yn.removeIntegrationTitle}),t.jsx(P,{children:yn.removeIntegrationDescription})]}),t.jsx("div",{children:t.jsx(Pv,{size:"s",appearance:"danger",label:yn.removeIntegrationButton,deniedMessage:c?void 0:Ja.removeIntegrationNotAllowed,onClick:g,loading:l||a})})]})]})},VN=({headingId:e})=>{const{isConfigured:s,configurationId:n,isLoading:r}=Ll(),{data:a,isLoading:o}=qs();return r||o?t.jsx(Se,{}):t.jsxs("div",{className:Kf.root,children:[t.jsxs("div",{className:Kf.header,children:[t.jsx(J,{id:e,level:2,className:Kf.title,children:fae.title}),t.jsx(J,{level:3,size:"h4",children:gg.integrationDescription})]}),s&&n?t.jsx(Lae,{configurationId:n,projects:a}):t.jsx(gae,{})]})},Av=({onChange:e,projectId:s,...n})=>{const{trackUiInteraction:r}=k(),{project:a}=F(),{branch:o}=Tt(),i=Hs({projectId:s,branchId:(o==null?void 0:o.id)??""}),c=m.useMemo(()=>{var d;return[...((d=i.data)==null?void 0:d.endpoints)??[]].sort(Cx)},[i.data]),l=m.useCallback((d,u)=>{u||r("endpoint_select_value_changed"),e(d,u)},[e,r]);return!o||!a?null:t.jsx(Ix,{...n,onChange:l,endpoints:c,loading:i.isLoading})},$ae="endpointId",fg=()=>Ni($ae),Yf={refresh:"Refresh",database:"Database",compute:"Compute"},Rae="_container_65vuw_1",Bae="_group_65vuw_7",Mae="_select_65vuw_13",pd={container:Rae,group:Bae,select:Mae},Dae=()=>{const{selectOptions:e}=un(),[s,n]=El(),{branch:r}=Tt();return{databaseOption:m.useMemo(()=>e.find(o=>o.value===s&&o.database.branch_id===(r==null?void 0:r.id)),[s,e,r==null?void 0:r.id]),setDatabaseName:n}},WN=({onRefresh:e,refreshDisabled:s,children:n})=>{const{projectId:r}=F(),{databaseOption:a,setDatabaseName:o}=Dae(),[i,c]=fg();return t.jsxs("div",{className:pd.container,children:[t.jsxs("div",{className:pd.group,children:[t.jsx(B,{label:Yf.compute,children:t.jsx(Av,{size:"s",projectId:r,className:pd.select,endpointId:i??void 0,onChange:l=>c(l==null?void 0:l.id),disabled:!i})}),t.jsx(B,{label:Yf.database,children:t.jsx(Ym,{size:"s",className:pd.select,value:a,canCreateDatabase:!1,onChange:l=>o(l==null?void 0:l.value),disabled:!a})})]}),t.jsxs("div",{className:pd.group,children:[n,t.jsx(A,{appearance:"secondary",icon:"reset",onClick:e,disabled:s,children:Yf.refresh})]})]})},GN=()=>{const{projectId:e}=F(),s=cn({projectId:e}),[n]=fg(),r=m.useMemo(()=>{var a;return(a=s.data)==null?void 0:a.endpoints.find(o=>o.id===n)},[s.data,n]);return(r==null?void 0:r.current_state)==="active"&&(r==null?void 0:r.pending_state)===void 0},lu={empty:"No active queries",ariaLabel:"Active queries",columnPID:"PID",columnQuery:"Query",columnDuration:"Duration"},Uae="_container_1m7d0_1",Fae="_placeholder_1m7d0_7",I0={container:Uae,placeholder:Fae};function _g(){const[e]=El(),{selectOptions:s}=un();return m.useMemo(()=>{if(s.length)return s.find(n=>n.database.name===e)??s[0]},[s,e])}const zae=(e,s)=>e.appendConnectionString?[...e.key,s]:e.key;function Ev({connectionParams:e,querySystemPostgres:s}={}){var _;const{projectId:n,project:r}=F(),{data:a}=qu({branchId:e==null?void 0:e.branchId,projectId:n}),o=cn({projectId:n}),i=m.useMemo(()=>{var b;return((b=o.data)==null?void 0:b.endpoints)??[]},[o.data]),[c]=fg(),l=i.find(b=>e!=null&&e.branchId?b.branch_id===e.branchId:c?b.id===c:b.type==="read_write");let d=(_=_g())==null?void 0:_.database;e!=null&&e.dbName&&(d=a.list.find(b=>b.name===e.dbName));const u=r!=null&&r.store_passwords?d==null?void 0:d.owner_name:Vu,p=s?"postgres":d==null?void 0:d.name,h=X_(l,e==null?void 0:e.poolerEnabled),{data:g}=hR({projectId:n,branchId:(l==null?void 0:l.branch_id)??"",role:u??""});return m.useMemo(()=>!h||!u||!p||!g?null:JC({host:h,role:u,database:p,password:g,maskPassword:e==null?void 0:e.maskPassword}),[p,h,g,u,e==null?void 0:e.maskPassword])}function po({queryKey:e,query:s,zodSchema:n,options:r,querySystemPostgres:a,connectionParams:o}){const i=Ev({connectionParams:o,querySystemPostgres:a}),c=m.useMemo(()=>zae(e,i||""),[i,e]),l=((r==null?void 0:r.enabled)!=null?r.enabled:!0)&&i!==null;return _t({retry:!1,queryKey:c,queryFn:async()=>{const u=await Rx(i)(s);return n?mi(n).parse(u):u},...r,enabled:l})}const qae=zt({pid:en(),duration:zx.number().transform(e=>parseFloat(e.toFixed(1))),query:at()}),KN="useActiveQueries",Wb="duration",QN="descending",YN={column:Wb,direction:QN},Hae=e=>{const s=new Set(["pid","duration"]),n=e.column??Wb,r=(s.has(n)?n:Wb).toString(),a=(e.direction??QN)==="descending"?"desc":"asc";return{sortKey:r,sortDirection:a}},Vae=(e,s=YN)=>{const n=_g(),{sortKey:r,sortDirection:a}=Hae(s),{data:o,isPending:i,refetch:c,error:l}=po({queryKey:{key:[KN,r,a],appendConnectionString:!0},query:`
SELECT
       pid,
       EXTRACT(EPOCH FROM (now() - pg_stat_activity.query_start)) * 1000 AS duration,
       query
  FROM pg_stat_activity
 WHERE state = 'active'
   AND pid <> pg_backend_pid()
   AND datid IN (SELECT oid FROM pg_database WHERE datname = '${(n==null?void 0:n.database.name)??""}')
   ORDER BY ${r} ${a}
   LIMIT 100;`,zodSchema:qae,options:{enabled:e&&!!(n!=null&&n.database.name)}});return{queries:o,isPending:i,refetch:c,error:l}},Wae=()=>{const e=_e(),s=Ev();return ve({mutationFn:async n=>{if(!s)throw new Error("Missing connection data");return Rx(s)(`SELECT pg_terminate_backend(${n})`)},onSuccess:()=>e.invalidateQueries({queryKey:[KN]})})},Gae={title:"Cancel query"},Kae=()=>{const{isPending:e,mutate:s,error:n}=Wae(),{trackUiInteraction:r}=k();return m.useEffect(()=>{n&&Y(n)},[n]),m.useCallback(a=>[{label:Gae.title,onClick:()=>{r("monitoring_page_active_queries_cancel_query_clicked",{cancelled_after_ms:a.duration}),s(a.pid)},disabled:e,icon:"cross_small"}],[e,r,s])},Qae=[{accessorKey:"pid",header:lu.columnPID,rowHeader:!0,enableSorting:!0,size:80,render:e=>e.pid},{accessorKey:"duration",header:lu.columnDuration,enableSorting:!0,size:120,render:e=>nm({total_duration_ms:e.duration})},{accessorKey:"query",header:lu.columnQuery,render:e=>t.jsx("code",{children:e.query})}],Yae=()=>{const e=GN(),s=Kae(),[n,r]=m.useState(YN),{queries:a,isPending:o,refetch:i,error:c}=Vae(e,n);m.useEffect(()=>{c&&Y(c)},[c]);const{trackUiInteraction:l}=k(),d=m.useCallback(h=>{!h.column||!h.direction||(l("monitoring_page_active_queries_order_changed",{column:h.column,direction:h.direction}),r(h))},[l]),u=m.useCallback(()=>{l("monitoring_page_active_queries_refresh_clicked"),i()},[l,i]),p=!e||!(a!=null&&a.length);return t.jsxs("div",{className:I0.container,children:[t.jsx(WN,{onRefresh:u,refreshDisabled:o}),p?t.jsx("div",{className:I0.placeholder,children:t.jsx(Gu,{title:lu.empty})}):t.jsx(Ps,{columns:Qae,rows:a,sorting:n,onSortingChange:d,"aria-label":lu.ariaLabel,isLoading:o,rowActions:s})]})},Jae=()=>{const{project:e}=F();return e?t.jsx(Yae,{}):t.jsx(Se,{})},JN="range",Zae=e=>{switch(e.type){case"period":return`p:${e.period}`;case"custom":return`c:${e.fromDate.valueOf()}-${e.toDate.valueOf()}`}},k0=e=>{const s=new Date(Number(e));if(!Number.isNaN(s.valueOf()))return s},ZN=e=>{if(!e)return;if(e.startsWith("p:")){const[o]=e.slice(2).split("+");return o in vL?{type:"period",period:o,fromDate:new Date}:void 0}if(!e.startsWith("c:"))return;const[s,n]=e.slice(2).split("-"),r=k0(s),a=k0(n);if(!(!r||!a))return{type:"custom",fromDate:r,toDate:a}},Xae=()=>{const[e,s]=Ni(JN),n=m.useCallback(r=>s(Zae(r)),[s]);return[ZN(e),n]},du={restartCompute:"Restart compute",cacheHitRestartAlert:"Displaying this metric requires a one-time compute restart.",monitoringRestartAlert:"Restart your compute to enable additional metrics. A compute restart drops current database connections.",customTimeRangeAlert:(e,s)=>t.jsxs(t.Fragment,{children:["Showing metrics for custom period"," ",t.jsx(Pe,{children:xe(e,ke.Full)})," to"," ",t.jsx(Pe,{children:xe(s,ke.Full)})]}),customTimeRangeAlertResetButton:"Reset"},XN=({endpoint:e,children:s,className:n})=>{const{trackUiInteraction:r}=k(),a=m.useCallback(async()=>{try{await W.restartProjectEndpoint(e.project_id,e.id)}catch(c){Y(c)}},[e]),o=e.pending_state==="active",i=yr(m.useMemo(()=>({exclusive:{endpoints:[e.id]},shared:{projects:[e.project_id],branches:[e.branch_id]}}),[e.branch_id,e.id,e.project_id]));return t.jsx(X,{className:n,action:t.jsx(co,{lockedMessage:i,children:t.jsx(M,{disabled:o||!!i,onClick:()=>{r("monitoring_page_restart_compute_clicked"),a()},children:du.restartCompute})}),children:s})},eoe=5213,toe=5227,eA=(e,s)=>Number(e)<s,soe="_alert_1w83a_1",noe={alert:soe},Jf=[0,.2,.4,.6,.8,1],T0=["lfc_hit_rate"],roe=({projectId:e,endpoint:s})=>{const{periodRange:[n,r],grouping:a,dateFormat:o}=wr(),{data:i,isFetching:c,isError:l}=qn.useGetStatsQuery({projectId:e,endpointId:s.id,from:n.toISOString(),to:r.toISOString(),grouping:a,metrics:T0}),d=Jf[Jf.length-1],u=m.useMemo(()=>i?Sr(i,T0,{metric:"lfc_hit_rate",scale:d},!0):[],[i,d]),p=eA(s.compute_release_version,toe);return t.jsx(hn,{title:"Local file cache hit rate",loading:c,isError:l,children:p?t.jsx(XN,{endpoint:s,className:noe.alert,children:du.cacheHitRestartAlert}):t.jsx(xr,{fallback:t.jsx(Se,{}),children:t.jsxs(Cr,{dateFormat:o,chartData:u,margin:{left:-40,top:20},children:[t.jsx(Ir,{dataKey:"lfc_hit_rate",allowDecimals:!0,tickFormatter:jL,axisLine:!1,ticks:Jf,domain:["dataMin","dataMax"]}),t.jsx(Is,{type:"monotone",connectNulls:!1,dataKey:Me.EndpointInactive,name:Ze[Me.EndpointInactive],stroke:"none",fill:"url(#dash-pattern)"}),t.jsx(pt,{type:"monotone",dot:!1,dataKey:"lfc_hit_rate",name:Ze.lfc_hit_rate,stroke:"var(--glow-color-dataviz-blue-2)"}),t.jsx(pt,{type:"monotone",dot:!1,dataKey:`${Me.EndpointInactiveMetricLine}lfc_hit_rate`,name:Ze.lfc_hit_rate,stroke:"var(--glow-color-dataviz-blue-2)",strokeDasharray:"3 3",legendType:"none"}),t.jsx(vr,{align:"left",verticalAlign:"top",wrapperStyle:{top:0,left:0},content:t.jsx(Jm,{children:"Percentage"})})]})})})},Ov=e=>e.map(s=>s??0),aoe=e=>{const s=e.reduce((o,i)=>Math.max(o,...Ov(i.values)),0),n=vu(Math.ceil(s/om)||1),r=Math.ceil(Number(n.amount)),a=wL(`${r}${n.units}`);return Array.from({length:om+1},(o,i)=>i*a)},Lv=(e,s=1)=>{const n=e.reduce((a,o)=>Math.max(a,...Ov(o.values)),0),r=[];for(const a of yL)if(r.push(a),a*s>=n)break;return[0,...r.map(a=>a*s)]},th=e=>{const s=e.reduce((r,a)=>Math.max(r,...Ov(a.values)),0),n=Math.ceil(s/om)||1;return Array.from({length:om+1},(r,a)=>a*n)},op=["connection_counts_active","connection_counts_idle","connection_counts_total","connection_counts_max"],ooe=({projectId:e,endpoint:s})=>{const{periodRange:[n,r],grouping:a,dateFormat:o}=wr(),[i,c]=m.useState(()=>new Set([...op,Me.EndpointInactive])),{data:l,isFetching:d,isError:u}=qn.useGetStatsQuery({projectId:e,endpointId:s.id,from:n.toISOString(),to:r.toISOString(),grouping:a,metrics:op}),p=m.useMemo(()=>l?th(l.data):[0],[l]),h=p[p.length-1],g=m.useMemo(()=>l?Sr(l,op,{metric:"connection_counts_total",scale:h},!0):[],[l,h]);return t.jsx(hn,{title:"Connections count",loading:d,isError:u,children:t.jsx(xr,{fallback:t.jsx(Se,{}),children:t.jsxs(Cr,{dateFormat:o,chartData:g,margin:{left:-40,top:20},children:[t.jsx(Ir,{dataKey:"connection_counts_total",allowDecimals:!0,tickFormatter:f=>`${f}`,axisLine:!1,ticks:p,domain:[0,"dataMax"]}),t.jsx(Is,{type:"monotone",connectNulls:!1,dataKey:Me.EndpointInactive,name:Ze[Me.EndpointInactive],hide:!i.has(Me.EndpointInactive),stroke:"none",fill:"url(#dash-pattern)"}),t.jsx(pt,{type:"monotone",dot:!1,dataKey:"connection_counts_idle",name:Ze.connection_counts_idle,hide:!i.has("connection_counts_idle"),stroke:"var(--component-monitoring_charts-connections-idle-stroke)"}),t.jsx(pt,{type:"monotone",dot:!1,dataKey:"connection_counts_active",name:Ze.connection_counts_active,hide:!i.has("connection_counts_active"),stroke:"var(--glow-color-dataviz-blue-2)"}),t.jsx(pt,{type:"monotone",dot:!1,dataKey:"connection_counts_total",name:Ze.connection_counts_total,hide:!i.has("connection_counts_total"),stroke:"var(--glow-color-dataviz-blue-2)"}),t.jsx(pt,{type:"step",dot:!1,dataKey:"connection_counts_max",name:Ze.connection_counts_max,hide:!i.has("connection_counts_max"),stroke:"var(--glow-color-dataviz-orange-2)"}),t.jsx(pt,{type:"monotone",dot:!1,dataKey:`${Me.EndpointInactiveMetricLine}connection_counts_idle`,name:Ze.connection_counts_idle,legendType:"none",hide:!i.has("connection_counts_idle"),stroke:"var(--component-monitoring_charts-connections-idle-stroke)",strokeDasharray:"3 3"}),t.jsx(pt,{type:"monotone",dot:!1,dataKey:`${Me.EndpointInactiveMetricLine}connection_counts_active`,name:Ze.connection_counts_active,legendType:"none",hide:!i.has("connection_counts_active"),stroke:"var(--glow-color-dataviz-blue-2)",strokeDasharray:"3 3"}),t.jsx(pt,{type:"monotone",dot:!1,dataKey:`${Me.EndpointInactiveMetricLine}connection_counts_total`,name:Ze.connection_counts_total,legendType:"none",hide:!i.has("connection_counts_total"),stroke:"var(--glow-color-dataviz-blue-2)",strokeDasharray:"3 3"}),t.jsx(pt,{type:"monotone",dot:!1,dataKey:`${Me.EndpointInactiveMetricLine}connection_counts_max`,name:Ze.connection_counts_max,legendType:"none",hide:!i.has("connection_counts_max"),stroke:"var(--glow-color-dataviz-orange-2)",strokeDasharray:"3 3"}),t.jsx(vr,{align:"left",verticalAlign:"top",wrapperStyle:{top:0,left:0},content:f=>t.jsx(Cl,{payload:f.payload,legendOrder:op,onLegendToggle:_=>{c(b=>{const x=new Set(b);return b.has(_)?x.delete(_):x.add(_),x})}})})]})})})},P0=["cpu_consumed_cores","cpu_provisioned_cores"],Zf={cpu_consumed_cores:"Used",cpu_provisioned_cores:"Allocated"},ioe=({projectId:e,endpoint:s})=>{const{periodRange:[n,r],grouping:a,dateFormat:o}=wr(),{data:i,isFetching:c,isError:l}=qn.useGetStatsQuery({projectId:e,endpointId:s.id,from:n.toISOString(),to:r.toISOString(),grouping:a,metrics:P0}),d=m.useMemo(()=>i?Lv(i.data):[0],[i]),u=d[d.length-1],p=m.useMemo(()=>i?Sr(i,P0,{metric:"cpu_provisioned_cores",scale:u},!0):[],[i,u]);return t.jsx(hn,{title:"CPU",loading:c,isError:l,children:t.jsx(xr,{fallback:t.jsx(Se,{}),children:t.jsxs(Cr,{dateFormat:o,chartData:p,margin:{left:-50,top:20},children:[t.jsx(Ir,{dataKey:"cpu_provisioned_cores",allowDecimals:!0,tickFormatter:Dp,axisLine:!1,ticks:d,domain:[0,"dataMax"]}),t.jsx(Is,{type:"monotone",connectNulls:!1,dataKey:Me.EndpointInactive,name:Ze[Me.EndpointInactive],stroke:"none",fill:"url(#dash-pattern)"}),t.jsx(Is,{type:"step",dot:!1,dataKey:"cpu_provisioned_cores",name:Zf.cpu_provisioned_cores,fillOpacity:1,fill:"url(#compute-provisioned)",stroke:"none"}),t.jsx(pt,{type:"monotone",dot:!1,dataKey:"cpu_consumed_cores",name:Zf.cpu_consumed_cores,stroke:"var(--glow-color-dataviz-blue-2)"}),t.jsx(pt,{type:"monotone",dot:!1,dataKey:`${Me.EndpointInactiveMetricLine}cpu_consumed_cores`,name:Zf.cpu_consumed_cores,stroke:"var(--glow-color-dataviz-blue-2)",strokeDasharray:"3 3",legendType:"none"}),t.jsx(vr,{align:"left",verticalAlign:"top",wrapperStyle:{top:0,left:0},content:h=>t.jsx(Cl,{prefix:"Compute Units",payload:h.payload})})]})})})},ip=["database_size","databases_total_size"],coe=["var(--glow-color-dataviz-blue-2)","var(--glow-color-dataviz-green)","var(--glow-color-dataviz-orange)","var(--glow-color-dataviz-orange-2)","var(--glow-color-dataviz-red)","var(--glow-color-dataviz-red-2)","var(--glow-color-dataviz-green-2)","var(--glow-color-dataviz-purple-2)","var(--glow-color-dataviz-purple)","var(--glow-color-dataviz-olive)"],loe="var(--glow-color-dataviz-blue)";function doe(e){return coe[e]??"var(--glow-color-icon-default)"}const uoe=({projectId:e,endpoint:s})=>{const{periodRange:[n,r],grouping:a,dateFormat:o}=wr(),[i,c]=m.useState(()=>new Set(ip)),{data:l,isFetching:d,isError:u}=qn.useGetStatsQuery({projectId:e,endpointId:s.id,from:n.toISOString(),to:r.toISOString(),grouping:a,metrics:ip}),p=m.useMemo(()=>l?aoe(l.data):[0],[l]),h=p[p.length-1],g=vu(h).units,{chartData:f,metrics:_}=m.useMemo(()=>{if(!l)return{chartData:[],metrics:[]};const b=vI(l,"database_size","datname");return c(new Set([...b,...ip,Me.EndpointInactive])),{metrics:b,chartData:Sr(l,ip,{metric:"databases_total_size",scale:h},!1,"datname")}},[l,h]);return t.jsx(hn,{title:"Database size",loading:d,isError:u,children:t.jsx(xr,{fallback:t.jsx(Se,{}),children:t.jsxs(Cr,{dateFormat:o,chartData:f,margin:{left:-40,top:20},children:[t.jsx(Ir,{dataKey:"databases_total_size",allowDecimals:!0,tickFormatter:b=>vu(b,g).amount,axisLine:!1,ticks:p,domain:[0,"dataMax"]}),t.jsxs(t.Fragment,{children:[t.jsx(Is,{type:"monotone",connectNulls:!1,dataKey:Me.EndpointInactive,name:Ze[Me.EndpointInactive],hide:!i.has(Me.EndpointInactive),stroke:"none",fill:"url(#dash-pattern)"}),_.map((b,x)=>t.jsx(pt,{type:"monotone",dot:!1,dataKey:b,unit:"bytes",name:b,hide:!i.has(b),stroke:doe(x)},b))]}),t.jsx(pt,{type:"monotone",dot:!1,dataKey:"databases_total_size",name:Ze.databases_total_size,hide:!i.has("databases_total_size"),stroke:loe}),t.jsx(vr,{align:"left",verticalAlign:"top",wrapperStyle:{top:0,left:0},content:b=>t.jsx(Cl,{payload:b.payload,prefix:mC(g),onLegendToggle:x=>{c(v=>{const j=new Set(v);return v.has(x)?j.delete(x):j.add(x),j})}})})]})})})},N0=["deadlocks"],hoe=({projectId:e,endpoint:s})=>{const{periodRange:[n,r],grouping:a,dateFormat:o}=wr(),{data:i,isFetching:c,isError:l}=qn.useGetStatsQuery({projectId:e,endpointId:s.id,from:n.toISOString(),to:r.toISOString(),grouping:a,metrics:N0}),d=m.useMemo(()=>i?th(i.data):[0],[i]),u=d[d.length-1],p=m.useMemo(()=>i?Sr(i,N0,{metric:"deadlocks",scale:u}):[],[i,u]);return t.jsx(hn,{title:"Deadlocks",loading:c,isError:l,children:t.jsx(xr,{fallback:t.jsx(Se,{}),children:t.jsxs(Cr,{dateFormat:o,chartData:p,margin:{left:-50,top:20},children:[t.jsx(Ir,{dataKey:"deadlocks",allowDecimals:!0,tickFormatter:h=>`${h}`,axisLine:!1,ticks:d,domain:[0,"dataMax"]}),t.jsx(Is,{type:"monotone",connectNulls:!1,dataKey:Me.EndpointInactive,name:Ze[Me.EndpointInactive],stroke:"none",fill:"url(#dash-pattern)"}),t.jsx(SL,{type:"monotone",dataKey:"deadlocks",name:Ze.deadlocks,fill:"var(--glow-color-dataviz-blue-2)",minPointSize:.5}),t.jsx(vr,{align:"left",verticalAlign:"top",wrapperStyle:{top:0,left:0},content:t.jsx(Jm,{children:"Count"})})]})})})},A0=["ram_provisioned_bytes","ram_consumed_bytes","ram_cached_bytes"],cp={ram_consumed_bytes:"Used",ram_provisioned_bytes:"Allocated",ram_cached_bytes:"Cached"},poe=({projectId:e,endpoint:s})=>{const{periodRange:[n,r],grouping:a,dateFormat:o}=wr(),{data:i,isFetching:c,isError:l}=qn.useGetStatsQuery({projectId:e,endpointId:s.id,from:n.toISOString(),to:r.toISOString(),grouping:a,metrics:A0}),d=m.useMemo(()=>i?Lv(i.data,gC):[0],[i]),u=d[d.length-1],p=m.useMemo(()=>i?Sr(i,A0,{metric:"ram_provisioned_bytes",scale:u},!0):[],[i,u]);return t.jsx(hn,{title:"RAM",loading:c,isError:l,children:t.jsx(xr,{fallback:t.jsx(Se,{}),children:t.jsxs(Cr,{dateFormat:o,chartData:p,margin:{left:-50,top:20},children:[t.jsx(Ir,{tickFormatter:h=>qr(h,0),axisLine:!1,ticks:d}),t.jsx(Is,{type:"monotone",connectNulls:!1,dataKey:Me.EndpointInactive,name:Ze[Me.EndpointInactive],stroke:"none",fill:"url(#dash-pattern)"}),t.jsx(Is,{type:"step",dot:!1,dataKey:"ram_provisioned_bytes",name:cp.ram_provisioned_bytes,fillOpacity:1,fill:"url(#compute-provisioned)",stroke:"none"}),t.jsx(Is,{type:"monotone",dot:!1,dataKey:"ram_consumed_bytes",name:cp.ram_consumed_bytes,stroke:"var(--glow-color-dataviz-blue-2)",fill:"var(--glow-color-dataviz-blue-2)",stackId:"ram-usage",fillOpacity:.25}),t.jsx(Is,{type:"monotone",dot:!1,dataKey:"ram_cached_bytes",name:cp.ram_cached_bytes,stroke:"var(--glow-color-dataviz-green-2)",fill:"var(--glow-color-dataviz-green-2)",stackId:"ram-usage",fillOpacity:.25}),t.jsx(pt,{type:"monotone",dot:!1,dataKey:`${Me.EndpointInactiveMetricLine}ram_consumed_bytes`,name:cp.ram_consumed_bytes,stroke:"var(--glow-color-dataviz-blue-2)",strokeDasharray:"3 3",legendType:"none"}),t.jsx(vr,{align:"left",verticalAlign:"top",wrapperStyle:{top:0,left:0},content:h=>t.jsx(Cl,{prefix:"Gigabytes",payload:h.payload})})]})})})},E0=["replication_delay_bytes"],moe=({projectId:e,endpoint:s})=>{const{periodRange:[n,r],grouping:a,dateFormat:o}=wr(),{data:i,isFetching:c,isError:l}=qn.useGetStatsQuery({projectId:e,endpointId:s.id,from:n.toISOString(),to:r.toISOString(),grouping:a,metrics:E0},{skip:_r(s)}),d=m.useMemo(()=>i?th(i.data):[0],[i]),u=d[d.length-1],p=vu(u).units,h=m.useMemo(()=>i?Sr(i,E0,{metric:"replication_delay_bytes",scale:u}):[],[i,u]);return t.jsx(hn,{title:"Replication delay bytes",loading:c,isError:l,children:t.jsx(xr,{fallback:t.jsx(Se,{}),children:t.jsxs(Cr,{dateFormat:o,chartData:h,margin:{left:-40,top:20},children:[t.jsx(Ir,{dataKey:"replication_delay_bytes",allowDecimals:!0,tickFormatter:g=>vu(g,p).amount,axisLine:!1,ticks:d,domain:[0,"dataMax"]}),t.jsx(Is,{type:"monotone",connectNulls:!1,dataKey:Me.EndpointInactive,name:Ze[Me.EndpointInactive],stroke:"none",fill:"url(#dash-pattern)"}),t.jsx(pt,{type:"monotone",dot:!1,dataKey:"replication_delay_bytes",name:Ze.replication_delay_bytes,stroke:"var(--glow-color-dataviz-orange-2)"}),t.jsx(vr,{align:"left",verticalAlign:"top",wrapperStyle:{top:0,left:0},content:t.jsx(Jm,{children:mC(p)})})]})})})},O0=["replication_delay_seconds"],goe=({projectId:e,endpoint:s})=>{const{periodRange:[n,r],grouping:a,dateFormat:o}=wr(),{data:i,isFetching:c,isError:l}=qn.useGetStatsQuery({projectId:e,endpointId:s.id,from:n.toISOString(),to:r.toISOString(),grouping:a,metrics:O0},{skip:_r(s)}),d=m.useMemo(()=>i?th(i.data):[0],[i]),u=d[d.length-1],p=m.useMemo(()=>i?Sr(i,O0,{metric:"replication_delay_seconds",scale:u}):[],[i,u]);return t.jsx(hn,{title:"Replication delay seconds",loading:c,isError:l,children:t.jsx(xr,{fallback:t.jsx(Se,{}),children:t.jsxs(Cr,{dateFormat:o,chartData:p,margin:{left:-40,top:20},children:[t.jsx(Ir,{dataKey:"replication_delay_seconds",allowDecimals:!0,tickFormatter:h=>Rm(h).highestValue.toString(),axisLine:!1,ticks:d,domain:[0,"dataMax"]}),t.jsx(Is,{type:"monotone",connectNulls:!1,dataKey:Me.EndpointInactive,name:Ze[Me.EndpointInactive],stroke:"none",fill:"url(#dash-pattern)"}),t.jsx(pt,{type:"monotone",dot:!1,dataKey:"replication_delay_seconds",name:Ze.replication_delay_seconds,stroke:"var(--glow-color-dataviz-orange-2)"}),t.jsx(vr,{align:"left",verticalAlign:"top",wrapperStyle:{top:0,left:0},content:t.jsx(Jm,{children:"Seconds"})})]})})})},lp=["rows_inserted","rows_updated","rows_deleted"],foe=({projectId:e,endpoint:s})=>{const{periodRange:[n,r],grouping:a,dateFormat:o}=wr(),[i,c]=m.useState(()=>new Set([...lp,Me.EndpointInactive])),{data:l,isFetching:d,isError:u}=qn.useGetStatsQuery({projectId:e,endpointId:s.id,from:n.toISOString(),to:r.toISOString(),grouping:a,metrics:lp}),p=m.useMemo(()=>l?th(l.data):[0],[l]),h=p[p.length-1],g=m.useMemo(()=>l?Sr(l,lp,{metric:"rows_inserted",scale:h},!0):[],[l,h]);return t.jsx(hn,{title:"Rows",loading:d,isError:u,children:t.jsx(xr,{fallback:t.jsx(Se,{}),children:t.jsxs(Cr,{dateFormat:o,chartData:g,margin:{left:-40,top:20},children:[t.jsx(Ir,{dataKey:"rows_inserted",allowDecimals:!0,tickFormatter:CL,axisLine:!1,ticks:p,domain:[0,"dataMax"]}),t.jsx(Is,{type:"monotone",connectNulls:!1,dataKey:Me.EndpointInactive,name:Ze[Me.EndpointInactive],hide:!i.has(Me.EndpointInactive),stroke:"none",fill:"url(#dash-pattern)"}),t.jsx(pt,{type:"monotone",dot:!1,dataKey:"rows_deleted",name:Ze.rows_deleted,hide:!i.has("rows_deleted"),stroke:"var(--component-monitoring_charts-connections-idle-stroke)"}),t.jsx(pt,{type:"monotone",dot:!1,dataKey:"rows_updated",name:Ze.rows_updated,hide:!i.has("rows_updated"),stroke:"var(--glow-color-dataviz-blue-2)"}),t.jsx(pt,{type:"monotone",dot:!1,dataKey:"rows_inserted",name:Ze.rows_inserted,hide:!i.has("rows_inserted"),stroke:"var(--glow-color-dataviz-green)"}),t.jsx(pt,{type:"monotone",dot:!1,dataKey:`${Me.EndpointInactiveMetricLine}rows_deleted`,name:Ze.rows_deleted,hide:!i.has("rows_deleted"),stroke:"var(--component-monitoring_charts-connections-idle-stroke)",strokeDasharray:"3 3",legendType:"none"}),t.jsx(pt,{type:"monotone",dot:!1,dataKey:`${Me.EndpointInactiveMetricLine}rows_updated`,name:Ze.rows_updated,hide:!i.has("rows_updated"),stroke:"var(--glow-color-dataviz-blue-2)",strokeDasharray:"3 3",legendType:"none"}),t.jsx(pt,{type:"monotone",dot:!1,dataKey:`${Me.EndpointInactiveMetricLine}rows_inserted`,name:Ze.rows_inserted,hide:!i.has("rows_inserted"),stroke:"var(--glow-color-dataviz-blue-2)",strokeDasharray:"3 3",legendType:"none"}),t.jsx(vr,{align:"left",verticalAlign:"top",wrapperStyle:{top:0,left:0},content:f=>t.jsx(Cl,{prefix:"Count",payload:f.payload,legendOrder:lp,onLegendToggle:_=>{c(b=>{const x=new Set(b);return b.has(_)?x.delete(_):x.add(_),x})}})})]})})})},_oe=["var(--glow-color-dataviz-green)","var(--glow-color-dataviz-blue-2)","var(--glow-color-dataviz-purple-2)"];function boe(e){return e.sort((s,n)=>{let r=parseInt(s.slice(0,-1),10),a=parseInt(n.slice(0,-1),10);return s.endsWith("h")&&(r*=60),n.endsWith("h")&&(a*=60),r-a}),e}const L0=["working_set_size","lfc_max_size"],xoe=({projectId:e,endpoint:s})=>{const{periodRange:[n,r],grouping:a,dateFormat:o}=wr(),{data:i,isFetching:c,isError:l}=qn.useGetStatsQuery({projectId:e,endpointId:s.id,from:n.toISOString(),to:r.toISOString(),grouping:a,metrics:L0}),[d,u]=m.useState(()=>new Set),p=m.useMemo(()=>i?Lv(i.data,gC):[0],[i]),h=p[p.length-1],{chartData:g,metrics:f}=m.useMemo(()=>i?{metrics:boe(vI(i,"working_set_size","duration")),chartData:Sr(i,L0,{metric:"lfc_max_size",scale:h},!1,"duration")}:{chartData:[],metrics:[]},[i,h]);return t.jsx(hn,{title:"Working set size",loading:c,isError:l,children:t.jsx(xr,{fallback:t.jsx(Se,{}),children:t.jsxs(Cr,{dateFormat:o,chartData:g,margin:{left:-40,top:30},children:[t.jsx(Ir,{tickFormatter:_=>qr(_,0),axisLine:!1,ticks:p}),t.jsx(Is,{type:"monotone",connectNulls:!1,dataKey:Me.EndpointInactive,name:Ze[Me.EndpointInactive],stroke:"none",hide:d.has(Me.EndpointInactive),fill:"url(#dash-pattern)"}),f.map((_,b)=>t.jsx(pt,{type:"monotone",dot:!1,dataKey:_,name:_,unit:"bytes",stroke:_oe[b],hide:d.has(_)},_)),t.jsx(pt,{type:"monotone",dot:!1,dataKey:"lfc_max_size",name:"Local file cache size",stroke:"var(--glow-color-dataviz-orange-2)",hide:d.has("lfc_max_size")}),t.jsx(vr,{align:"left",verticalAlign:"top",wrapperStyle:{top:0,left:0},content:_=>t.jsx(Cl,{prefix:"Duration",payload:_.payload,onLegendToggle:b=>{u(x=>{const v=new Set(x);return v.has(b)?v.delete(b):v.add(b),v})}})})]})})})},voe="_container_10300_1",joe="_settings_10300_10",yoe="_label_10300_16",gc={container:voe,settings:joe,label:yoe},woe=({endpoint:e,project:s})=>{const[n,r]=m.useState(!1),{trackUiInteraction:a}=k();return t.jsx(hn,{title:"Compute settings",children:t.jsxs("div",{className:gc.container,children:[t.jsx(uo,{isOpen:n,mode:"edit",project:s,endpoint:e,onRequestClose:()=>r(!1)}),t.jsxs("div",{className:gc.settings,children:[rm(e)&&t.jsxs(t.Fragment,{children:[t.jsx(B,{label:"Min",labelClassName:gc.label,children:t.jsx(P,{children:$n(e.autoscaling_limit_min_cu)})}),t.jsx(B,{label:"Max",labelClassName:gc.label,children:t.jsx(P,{children:$n(e.autoscaling_limit_max_cu)})})]}),!rm(e)&&t.jsx(B,{label:"Size",labelClassName:gc.label,children:t.jsx(P,{children:$n(e.autoscaling_limit_max_cu)})}),t.jsx(B,{label:"Autosuspend delay",labelClassName:gc.label,children:t.jsx(P,{children:fv(e.suspend_timeout_seconds)})})]}),t.jsx(A,{appearance:"secondary",onClick:()=>{r(!0),a("monitoring_page_edit_endpoint_clicked")},children:"Edit endpoint"})]})})},Soe="_charts_wgcns_1",Coe="_chartsRow_wgcns_7",Ioe="_withAutoscaling_wgcns_13",Lo={charts:Soe,chartsRow:Coe,withAutoscaling:Ioe},koe="_widget_sspse_1",Toe="_container_sspse_6",Poe="_features_sspse_14",Noe="_icon_sspse_30",dp={widget:koe,container:Toe,features:Poe,icon:Noe},Aoe=[{title:"14 days of metrics retention",iconName:"graph_gradient"},{title:"Up to 10 vCPU and 40 GB of memory",iconName:"written_data_gradient"},{title:"Autoscale to match demand",iconName:"compute_size_autoscale_gradient"},{title:"Scale to zero during periods of inactivity",iconName:"autosuspend_gradient"}],Eoe=()=>{const{trackUiInteraction:e}=k(),{billingUrl:s,isLoading:n}=to();return t.jsx(hn,{className:dp.widget,height:"100%",children:t.jsxs("div",{className:dp.container,children:[t.jsx(J,{level:6,children:"Paid plan features:"}),t.jsx("ul",{className:dp.features,children:Aoe.map(({title:r,iconName:a})=>t.jsxs("li",{children:[t.jsx("div",{className:dp.icon,children:a&&t.jsx(q,{name:a,size:16})}),t.jsx(P,{appearance:"primary",children:r})]},r))}),t.jsx(A,{as:Ke,href:s,disabled:n,appearance:"secondary",onClick:()=>{e("monitoring_page_paid_features_widget_upgrade_clicked")},children:"Upgrade to a paid plan"})]})})},Ooe=({project:e,...s})=>{const{isFreeSubscription:n}=fe(),{isOwnProject:r}=F(),{endpoint:a}=s,{range:o,resetRange:i}=fC(),c=eA(a.compute_release_version,eoe),l=r&&n;return t.jsxs("div",{className:Lo.charts,children:[o.type==="custom"&&t.jsx(X,{action:t.jsx(M,{noWrap:!0,onClick:()=>i(),children:du.customTimeRangeAlertResetButton}),children:du.customTimeRangeAlert(o.fromDate,o.toDate)}),c&&t.jsx(XN,{endpoint:a,children:du.monitoringRestartAlert}),t.jsxs("div",{className:V(Lo.chartsRow,Lo.withAutoscaling),children:[l?t.jsx(Eoe,{}):t.jsx(woe,{endpoint:a,project:e}),t.jsx(poe,{projectId:e.id,...s}),t.jsx(ioe,{projectId:e.id,...s})]}),!c&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:Lo.chartsRow,children:[t.jsx(ooe,{projectId:e.id,...s}),t.jsx(uoe,{projectId:e.id,...s})]}),_r(a)&&t.jsxs("div",{className:Lo.chartsRow,children:[t.jsx(hoe,{projectId:e.id,...s}),t.jsx(foe,{projectId:e.id,...s})]}),t.jsxs("div",{className:Lo.chartsRow,children:[t.jsx(roe,{projectId:e.id,...s}),t.jsx(xoe,{projectId:e.id,...s})]}),!_r(a)&&t.jsxs("div",{className:Lo.chartsRow,children:[t.jsx(moe,{projectId:e.id,...s}),t.jsx(goe,{projectId:e.id,...s})]})]})]})},$0={datadogStatusAlert:e=>{switch(e){case"disabled":return"Datadog export is disabled.";case"error":return"Datadog export is in error state.";case"pending":return"Datadog export is pending.";case"running":return"Datadog export status OK."}},manageIntegrationButton:"Manage integration"},Loe="_root_5kbca_1",$oe="_controls_5kbca_7",Roe="_selectors_5kbca_14",Boe="_dropdown_5kbca_19",Moe="_timeSelectorContainer_5kbca_23",md={root:Loe,controls:$oe,selectors:Roe,dropdown:Boe,timeSelectorContainer:Moe},Doe=(e,s)=>{switch(e.type){case"period":return s.type!==e.type?!1:e.fromDate.valueOf()===s.fromDate.valueOf()&&e.period===s.period;case"custom":return s.type!==e.type?!1:e.fromDate.valueOf()===s.fromDate.valueOf()&&e.toDate.valueOf()===s.toDate.valueOf()}},Uoe=e=>{switch(e){case"disabled":return"warning";case"error":return"error";case"pending":return"info";case"running":return"success"}},Foe=()=>{var v;const{trackUiInteraction:e}=k(),{project:s,projectId:n}=F(),{selectOptions:r,isLoading:a}=xt(),{branch:o}=Tt(),i=o==null?void 0:o.id,{range:c}=fC(),[l,d]=Xae();m.useEffect(()=>{(!l||!Doe(l,c))&&d(c)},[c,l,d]);const u=Hs({projectId:n,branchId:i??""}),p=m.useMemo(()=>{var j;return((j=u.data)==null?void 0:j.endpoints)??[]},[u.data]),[h,g]=fg(),f=m.useMemo(()=>p.find(j=>j.id===h),[p,h]),_=m.useMemo(()=>r.find(j=>j.value===i),[r,i]),b=dg(),x=Zu();return!s||a||!_?t.jsx(Se,{}):t.jsxs("div",{className:md.root,children:[(v=x.data)!=null&&v.datadog&&!b.datadog?t.jsx(X,{appearance:Uoe(x.data.datadog.status),action:t.jsx(M,{href:`${G(C.ProjectsItemIntegrations,{projectId:s.id})}#datadog`,children:$0.manageIntegrationButton}),children:$0.datadogStatusAlert(x.data.datadog.status)}):null,t.jsxs("div",{className:md.controls,children:[t.jsx("div",{className:md.selectors,children:t.jsx(B,{label:"Compute",className:md.dropdown,children:t.jsx(Ix,{size:"s",endpoints:p,endpointId:h??void 0,onChange:j=>{j&&(g(j.id),e("monitoring_page_endpoint_changed"))}})})}),t.jsx("div",{className:md.timeSelectorContainer,children:t.jsx(IL,{analyticsAction:"monitoring_page_time_period_changed"})}),t.jsx(MB,{})]}),f&&t.jsx(Ooe,{project:s,endpoint:f})]})},tA=(e,s)=>(e==null?void 0:e.pages.reduce((n,r)=>[...n,...s(r)],[]))??[],sA=e=>ju(e.action.split("_").join(" ")),zoe="_root_1oayq_1",qoe={root:zoe},Hoe=e=>{switch(e){case"read_write":return"Primary";case"read_only":return"Replica";default:return""}},Voe=({endpoint:e,onEdit:s})=>t.jsx(t.Fragment,{children:e?t.jsx(M,{onClick:()=>s(e),children:t.jsxs("div",{className:qoe.root,children:[e.id,t.jsx(Ne,{children:Hoe(e.type)})]})}):""}),Woe=()=>{var d;const{projectId:e,project:s}=F(),n=Wm({projectId:e}),{branch:r}=Tt(),a=m.useMemo(()=>tA(n.data,p=>p.operations).filter(p=>r&&p.branch_id===r.id),[n.data,r]),o=cn({projectId:e}),[i,c]=m.useState(null),l=m.useMemo(()=>ot([{key:"operation",label:"Operation",renderValue:sA},{key:"endpoint",label:"Compute",renderValue:u=>{var p;return u.endpoint_id?t.jsx(Voe,{endpoint:(p=o.data)==null?void 0:p.endpoints.find(h=>h.id===u.endpoint_id),onEdit:h=>c(h)}):""}},{key:"status",label:"Operation status",renderValue:u=>t.jsx(ZC,{status:u.status})},{key:"id",label:"Duration",renderValue:u=>["finished","failed"].includes(u.status)&&t.jsx(P,{children:nm(u)})},{key:"created_at",label:"Date",renderValue:u=>t.jsx(P,{appearance:"secondary",children:xe(u.created_at)})}]),[o.data]);return s?t.jsxs(t.Fragment,{children:[i!==null&&t.jsx(uo,{isOpen:!0,onRequestClose:()=>c(null),mode:"edit",project:s,endpoint:i}),t.jsx(Mn,{isLoading:n.isLoading,error:(d=n.error)==null?void 0:d.message,cols:l,data:a})]}):t.jsx(Mn,{isLoading:!0,cols:l})},Goe="_root_1n2t9_1",Koe="_desc_1n2t9_7",R0={root:Goe,desc:Koe},Qoe=()=>{const{trackUiInteraction:e}=k();return t.jsxs("div",{className:R0.root,children:[t.jsxs("p",{className:R0.desc,children:["An operation is an action performed by the Neon Control Plane on an object or resource, such as starting a compute or creating a branch. Monitor here for the health and progress of your Neon project operations."," ",t.jsx(M,{openInNewTab:!0,"aria-label":"System Operations",href:"https://neon.com/docs/manage/operations",icon:"external_link",onClick:()=>{e("project_settings_ip_allow_learn_more_clicked")},children:"Learn more"})]}),t.jsx(Woe,{})]})},ti={ariaLabel:"Past Queries",emptyText:"No past queries",columnQuery:"Query",columnAverageTime:"Average time",columnTotalTime:"Total time",columnRole:"Role",columnCalls:"Calls"},Yoe="_container_1m7d0_1",Joe="_placeholder_1m7d0_7",B0={container:Yoe,placeholder:Joe},Zoe=zt({userid:en(),role_name:at(),query:at(),calls:zx.number(),total_min:en(),avg_ms:en()}),Gb="total_min",nA="descending",rA={column:Gb,direction:nA},Xoe=e=>{const s=new Set(["total_min","calls","avg_ms"]),n=e.column??Gb,r=(s.has(n)?n:Gb).toString(),a=(e.direction??nA)==="descending"?"desc":"asc";return{sortKey:r,sortDirection:a}},eie=(e,s=rA)=>{const n=_g(),{sortKey:r,sortDirection:a}=Xoe(s),{data:o,isPending:i,error:c,refetch:l}=po({queryKey:{key:["usePastQueries",r,a,(n==null?void 0:n.database.name)??""],appendConnectionString:!0},query:`
      SELECT
        s.userid,
        r.rolname AS role_name,
        s.query,
        s.calls,
        (s.total_exec_time / 1000 / 60) AS total_min,
        s.mean_exec_time AS avg_ms
      FROM pg_stat_statements s
      JOIN pg_roles r ON s.userid = r.oid
      WHERE s.dbid IN (SELECT oid FROM pg_database WHERE datname = '${(n==null?void 0:n.database.name)??""}')
        AND r.rolname != 'cloud_admin'
      ORDER BY ${r} ${a}
      LIMIT 100
    ;`,zodSchema:Zoe,options:{enabled:!!(n!=null&&n.database.name)},querySystemPostgres:!0});return{queries:m.useMemo(()=>(o||[]).map(u=>({...u,key:`${u.userid}_${u.query}`})),[o]),isPending:i,error:c,refetch:l}};function M0(e,s){return parseFloat(e.toFixed(s))}const tie=[{accessorKey:"role_name",header:ti.columnRole,rowHeader:!0,size:85,render:e=>e.role_name},{accessorKey:"calls",header:ti.columnCalls,size:50,enableSorting:!0,render:e=>e.calls},{accessorKey:"avg_ms",header:ti.columnAverageTime,size:140,enableSorting:!0,render:e=>nm({total_duration_ms:M0(e.avg_ms,1)})},{accessorKey:"total_min",header:ti.columnTotalTime,size:140,enableSorting:!0,render:e=>nm({total_duration_ms:M0(e.total_min*60*1e3,1)})},{accessorKey:"query",header:ti.columnQuery,render:e=>t.jsx("code",{children:e.query})}],sie=()=>{const[e,s]=m.useState(rA),n=GN(),{queries:r,isPending:a,error:o,refetch:i}=eie(!0,e);m.useEffect(()=>{o&&Y(o)},[o]);const{trackUiInteraction:c}=k(),l=m.useCallback(u=>{!u.column||!u.direction||(c("monitoring_page_query_history_order_changed",{column:u.column,direction:u.direction}),s(u))},[c]),d=m.useCallback(()=>{c("monitoring_page_query_history_refresh_clicked"),i()},[c,i]);return t.jsxs("div",{className:B0.container,children:[t.jsx(WN,{onRefresh:d,refreshDisabled:a}),!n&&t.jsx(Se,{}),n&&!a&&r.length===0&&t.jsx("div",{className:B0.placeholder,children:t.jsx(Gu,{title:ti.emptyText})}),n&&(a||r.length>0)&&t.jsx(Ps,{columns:tie,rows:r,isLoading:a,"aria-label":ti.ariaLabel,sorting:e,onSortingChange:l})]})},nie=()=>{const{project:e}=F();return e?t.jsx(sie,{}):t.jsx(Se,{})},rie="_sections_t5h2o_1",aie={sections:rie},aA=()=>{const{isSelfServedAccount:e}=fe(),s=m.useRef(null),n=rT(),{orgId:r}=ae(),a=r!==void 0,[o,i]=nn(gt.BillingGetStarted,a?`show_org_${r}`:"show",!1),c=()=>{i(!1)};return m.useEffect(()=>{switch(window.location.hash){case hh.SuccessUpgrade:pe("Plan was changed successfully"),i(!0);break;case hh.SuccessDowngrade:i(!1),pe("Plan was changed successfully");break;case hh.SuccessEdit:pe("Payment method was upgraded successfully");break;case hh.Error:break;default:return}window.history.replaceState(null,""," ")},[i]),m.useEffect(()=>{s.current&&o&&s.current.scrollIntoView()},[o]),t.jsxs(t.Fragment,{children:[t.jsx(GF,{}),t.jsxs("div",{className:aie.sections,children:[e&&o&&t.jsx($q,{ref:s,hide:c}),n.map(({id:l,name:d,titleOverride:u,Component:p})=>t.jsx(p,{id:l,title:u??d},l))]})]})},oie="https://api64.ipify.org/",oA=nb.createApi({reducerPath:"ips",baseQuery:nb.fetchBaseQuery({baseUrl:oie}),endpoints:e=>({fetchIp:e.query({query:()=>({url:"/",params:{format:"json"}})})})});var Or={},wn={},va={},D0;function Kb(){if(D0)return va;D0=1,Object.defineProperty(va,"__esModule",{value:!0}),va.isInSubnet=e,va.isCorrect=s,va.numberToPaddedHex=n,va.stringToPaddedHex=r,va.testBit=a;function e(o){return this.subnetMask<o.subnetMask?!1:this.mask(o.subnetMask)===o.mask()}function s(o){return function(){return this.addressMinusSuffix!==this.correctForm()?!1:this.subnetMask===o&&!this.parsedSubnet?!0:this.parsedSubnet===String(this.subnetMask)}}function n(o){return o.toString(16).padStart(2,"0")}function r(o){return n(parseInt(o,10))}function a(o,i){const{length:c}=o;if(i>c)return!1;const l=c-i;return o.substring(l,l+1)==="1"}return va}var Sn={},U0;function iA(){return U0||(U0=1,Object.defineProperty(Sn,"__esModule",{value:!0}),Sn.RE_SUBNET_STRING=Sn.RE_ADDRESS=Sn.GROUPS=Sn.BITS=void 0,Sn.BITS=32,Sn.GROUPS=4,Sn.RE_ADDRESS=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g,Sn.RE_SUBNET_STRING=/\/\d{1,2}$/),Sn}var gd={},F0;function $v(){if(F0)return gd;F0=1,Object.defineProperty(gd,"__esModule",{value:!0}),gd.AddressError=void 0;class e extends Error{constructor(n,r){super(n),this.name="AddressError",this.parseMessage=r}}return gd.AddressError=e,gd}var z0;function cA(){if(z0)return wn;z0=1;var e=wn&&wn.__createBinding||(Object.create?function(c,l,d,u){u===void 0&&(u=d);var p=Object.getOwnPropertyDescriptor(l,d);(!p||("get"in p?!l.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return l[d]}}),Object.defineProperty(c,u,p)}:function(c,l,d,u){u===void 0&&(u=d),c[u]=l[d]}),s=wn&&wn.__setModuleDefault||(Object.create?function(c,l){Object.defineProperty(c,"default",{enumerable:!0,value:l})}:function(c,l){c.default=l}),n=wn&&wn.__importStar||function(c){if(c&&c.__esModule)return c;var l={};if(c!=null)for(var d in c)d!=="default"&&Object.prototype.hasOwnProperty.call(c,d)&&e(l,c,d);return s(l,c),l};Object.defineProperty(wn,"__esModule",{value:!0}),wn.Address4=void 0;const r=n(Kb()),a=n(iA()),o=$v();class i{constructor(l){this.groups=a.GROUPS,this.parsedAddress=[],this.parsedSubnet="",this.subnet="/32",this.subnetMask=32,this.v4=!0,this.isCorrect=r.isCorrect(a.BITS),this.isInSubnet=r.isInSubnet,this.address=l;const d=a.RE_SUBNET_STRING.exec(l);if(d){if(this.parsedSubnet=d[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,this.subnetMask<0||this.subnetMask>a.BITS)throw new o.AddressError("Invalid subnet mask.");l=l.replace(a.RE_SUBNET_STRING,"")}this.addressMinusSuffix=l,this.parsedAddress=this.parse(l)}static isValid(l){try{return new i(l),!0}catch{return!1}}parse(l){const d=l.split(".");if(!l.match(a.RE_ADDRESS))throw new o.AddressError("Invalid IPv4 address.");return d}correctForm(){return this.parsedAddress.map(l=>parseInt(l,10)).join(".")}static fromHex(l){const d=l.replace(/:/g,"").padStart(8,"0"),u=[];let p;for(p=0;p<8;p+=2){const h=d.slice(p,p+2);u.push(parseInt(h,16))}return new i(u.join("."))}static fromInteger(l){return i.fromHex(l.toString(16))}static fromArpa(l){const u=l.replace(/(\.in-addr\.arpa)?\.$/,"").split(".").reverse().join(".");return new i(u)}toHex(){return this.parsedAddress.map(l=>r.stringToPaddedHex(l)).join(":")}toArray(){return this.parsedAddress.map(l=>parseInt(l,10))}toGroup6(){const l=[];let d;for(d=0;d<a.GROUPS;d+=2)l.push(`${r.stringToPaddedHex(this.parsedAddress[d])}${r.stringToPaddedHex(this.parsedAddress[d+1])}`);return l.join(":")}bigInt(){return BigInt(`0x${this.parsedAddress.map(l=>r.stringToPaddedHex(l)).join("")}`)}_startAddress(){return BigInt(`0b${this.mask()+"0".repeat(a.BITS-this.subnetMask)}`)}startAddress(){return i.fromBigInt(this._startAddress())}startAddressExclusive(){const l=BigInt("1");return i.fromBigInt(this._startAddress()+l)}_endAddress(){return BigInt(`0b${this.mask()+"1".repeat(a.BITS-this.subnetMask)}`)}endAddress(){return i.fromBigInt(this._endAddress())}endAddressExclusive(){const l=BigInt("1");return i.fromBigInt(this._endAddress()-l)}static fromBigInt(l){return i.fromHex(l.toString(16))}mask(l){return l===void 0&&(l=this.subnetMask),this.getBitsBase2(0,l)}getBitsBase2(l,d){return this.binaryZeroPad().slice(l,d)}reverseForm(l){l||(l={});const d=this.correctForm().split(".").reverse().join(".");return l.omitSuffix?d:`${d}.in-addr.arpa.`}isMulticast(){return this.isInSubnet(new i("224.0.0.0/4"))}binaryZeroPad(){return this.bigInt().toString(2).padStart(a.BITS,"0")}groupForV6(){const l=this.parsedAddress;return this.address.replace(a.RE_ADDRESS,`<span class="hover-group group-v4 group-6">${l.slice(0,2).join(".")}</span>.<span class="hover-group group-v4 group-7">${l.slice(2,4).join(".")}</span>`)}}return wn.Address4=i,wn}var Cn={},jt={},q0;function lA(){return q0||(q0=1,Object.defineProperty(jt,"__esModule",{value:!0}),jt.RE_URL_WITH_PORT=jt.RE_URL=jt.RE_ZONE_STRING=jt.RE_SUBNET_STRING=jt.RE_BAD_ADDRESS=jt.RE_BAD_CHARACTERS=jt.TYPES=jt.SCOPES=jt.GROUPS=jt.BITS=void 0,jt.BITS=128,jt.GROUPS=8,jt.SCOPES={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"},jt.TYPES={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"},jt.RE_BAD_CHARACTERS=/([^0-9a-f:/%])/gi,jt.RE_BAD_ADDRESS=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi,jt.RE_SUBNET_STRING=/\/\d{1,3}(?=%|$)/,jt.RE_ZONE_STRING=/%.*$/,jt.RE_URL=/^\[{0,1}([0-9a-f:]+)\]{0,1}/,jt.RE_URL_WITH_PORT=/\[([0-9a-f:]+)\]:([0-9]{1,5})/),jt}var $o={},H0;function dA(){if(H0)return $o;H0=1,Object.defineProperty($o,"__esModule",{value:!0}),$o.spanAllZeroes=e,$o.spanAll=s,$o.spanLeadingZeroes=r,$o.simpleGroup=a;function e(o){return o.replace(/(0+)/g,'<span class="zero">$1</span>')}function s(o,i=0){return o.split("").map((l,d)=>`<span class="digit value-${l} position-${d+i}">${e(l)}</span>`).join("")}function n(o){return o.replace(/^(0+)/,'<span class="zero">$1</span>')}function r(o){return o.split(":").map(c=>n(c)).join(":")}function a(o,i=0){return o.split(":").map((l,d)=>/group-v4/.test(l)?l:`<span class="hover-group group-${d+i}">${n(l)}</span>`)}return $o}var ds={},V0;function iie(){if(V0)return ds;V0=1;var e=ds&&ds.__createBinding||(Object.create?function(l,d,u,p){p===void 0&&(p=u);var h=Object.getOwnPropertyDescriptor(d,u);(!h||("get"in h?!d.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return d[u]}}),Object.defineProperty(l,p,h)}:function(l,d,u,p){p===void 0&&(p=u),l[p]=d[u]}),s=ds&&ds.__setModuleDefault||(Object.create?function(l,d){Object.defineProperty(l,"default",{enumerable:!0,value:d})}:function(l,d){l.default=d}),n=ds&&ds.__importStar||function(l){if(l&&l.__esModule)return l;var d={};if(l!=null)for(var u in l)u!=="default"&&Object.prototype.hasOwnProperty.call(l,u)&&e(d,l,u);return s(d,l),d};Object.defineProperty(ds,"__esModule",{value:!0}),ds.ADDRESS_BOUNDARY=void 0,ds.groupPossibilities=a,ds.padGroup=o,ds.simpleRegularExpression=i,ds.possibleElisions=c;const r=n(lA());function a(l){return`(${l.join("|")})`}function o(l){return l.length<4?`0{0,${4-l.length}}${l}`:l}ds.ADDRESS_BOUNDARY="[^A-Fa-f0-9:]";function i(l){const d=[];l.forEach((p,h)=>{parseInt(p,16)===0&&d.push(h)});const u=d.map(p=>l.map((h,g)=>{if(g===p){const f=g===0||g===r.GROUPS-1?":":"";return a([o(h),f])}return o(h)}).join(":"));return u.push(l.map(o).join(":")),a(u)}function c(l,d,u){const p=d?"":":",h=u?"":":",g=[];!d&&!u&&g.push("::"),d&&u&&g.push(""),(u&&!d||!u&&d)&&g.push(":"),g.push(`${p}(:0{1,4}){1,${l-1}}`),g.push(`(0{1,4}:){1,${l-1}}${h}`),g.push(`(0{1,4}:){${l-1}}0{1,4}`);for(let f=1;f<l-1;f++)for(let _=1;_<l-f;_++)g.push(`(0{1,4}:){${_}}:(0{1,4}:){${l-_-f-1}}0{1,4}`);return a(g)}return ds}var W0;function cie(){if(W0)return Cn;W0=1;var e=Cn&&Cn.__createBinding||(Object.create?function(v,j,y,w){w===void 0&&(w=y);var S=Object.getOwnPropertyDescriptor(j,y);(!S||("get"in S?!j.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return j[y]}}),Object.defineProperty(v,w,S)}:function(v,j,y,w){w===void 0&&(w=y),v[w]=j[y]}),s=Cn&&Cn.__setModuleDefault||(Object.create?function(v,j){Object.defineProperty(v,"default",{enumerable:!0,value:j})}:function(v,j){v.default=j}),n=Cn&&Cn.__importStar||function(v){if(v&&v.__esModule)return v;var j={};if(v!=null)for(var y in v)y!=="default"&&Object.prototype.hasOwnProperty.call(v,y)&&e(j,v,y);return s(j,v),j};Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.Address6=void 0;const r=n(Kb()),a=n(iA()),o=n(lA()),i=n(dA()),c=cA(),l=iie(),d=$v(),u=Kb();function p(v){if(!v)throw new Error("Assertion failed.")}function h(v){const j=/(\d+)(\d{3})/;for(;j.test(v);)v=v.replace(j,"$1,$2");return v}function g(v){return v=v.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2'),v=v.replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2'),v}function f(v,j){const y=[],w=[];let S;for(S=0;S<v.length;S++)S<j[0]?y.push(v[S]):S>j[1]&&w.push(v[S]);return y.concat(["compact"]).concat(w)}function _(v){return parseInt(v,16).toString(16).padStart(4,"0")}function b(v){return v&255}class x{constructor(j,y){this.addressMinusSuffix="",this.parsedSubnet="",this.subnet="/128",this.subnetMask=128,this.v4=!1,this.zone="",this.isInSubnet=r.isInSubnet,this.isCorrect=r.isCorrect(o.BITS),y===void 0?this.groups=o.GROUPS:this.groups=y,this.address=j;const w=o.RE_SUBNET_STRING.exec(j);if(w){if(this.parsedSubnet=w[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,Number.isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>o.BITS)throw new d.AddressError("Invalid subnet mask.");j=j.replace(o.RE_SUBNET_STRING,"")}else if(/\//.test(j))throw new d.AddressError("Invalid subnet mask.");const S=o.RE_ZONE_STRING.exec(j);S&&(this.zone=S[0],j=j.replace(o.RE_ZONE_STRING,"")),this.addressMinusSuffix=j,this.parsedAddress=this.parse(this.addressMinusSuffix)}static isValid(j){try{return new x(j),!0}catch{return!1}}static fromBigInt(j){const y=j.toString(16).padStart(32,"0"),w=[];let S;for(S=0;S<o.GROUPS;S++)w.push(y.slice(S*4,(S+1)*4));return new x(w.join(":"))}static fromURL(j){let y,w=null,S;if(j.indexOf("[")!==-1&&j.indexOf("]:")!==-1){if(S=o.RE_URL_WITH_PORT.exec(j),S===null)return{error:"failed to parse address with port",address:null,port:null};y=S[1],w=S[2]}else if(j.indexOf("/")!==-1){if(j=j.replace(/^[a-z0-9]+:\/\//,""),S=o.RE_URL.exec(j),S===null)return{error:"failed to parse address from URL",address:null,port:null};y=S[1]}else y=j;return w?(w=parseInt(w,10),(w<0||w>65536)&&(w=null)):w=null,{address:new x(y),port:w}}static fromAddress4(j){const y=new c.Address4(j),w=o.BITS-(a.BITS-y.subnetMask);return new x(`::ffff:${y.correctForm()}/${w}`)}static fromArpa(j){let y=j.replace(/(\.ip6\.arpa)?\.$/,"");const w=7;if(y.length!==63)throw new d.AddressError("Invalid 'ip6.arpa' form.");const S=y.split(".").reverse();for(let T=w;T>0;T--){const E=T*4;S.splice(E,0,":")}return y=S.join(""),new x(y)}microsoftTranscription(){return`${this.correctForm().replace(/:/g,"-")}.ipv6-literal.net`}mask(j=this.subnetMask){return this.getBitsBase2(0,j)}possibleSubnets(j=128){const y=o.BITS-this.subnetMask,w=Math.abs(j-o.BITS),S=y-w;return S<0?"0":h((BigInt("2")**BigInt(S)).toString(10))}_startAddress(){return BigInt(`0b${this.mask()+"0".repeat(o.BITS-this.subnetMask)}`)}startAddress(){return x.fromBigInt(this._startAddress())}startAddressExclusive(){const j=BigInt("1");return x.fromBigInt(this._startAddress()+j)}_endAddress(){return BigInt(`0b${this.mask()+"1".repeat(o.BITS-this.subnetMask)}`)}endAddress(){return x.fromBigInt(this._endAddress())}endAddressExclusive(){const j=BigInt("1");return x.fromBigInt(this._endAddress()-j)}getScope(){let j=o.SCOPES[parseInt(this.getBits(12,16).toString(10),10)];return this.getType()==="Global unicast"&&j!=="Link local"&&(j="Global"),j||"Unknown"}getType(){for(const j of Object.keys(o.TYPES))if(this.isInSubnet(new x(j)))return o.TYPES[j];return"Global unicast"}getBits(j,y){return BigInt(`0b${this.getBitsBase2(j,y)}`)}getBitsBase2(j,y){return this.binaryZeroPad().slice(j,y)}getBitsBase16(j,y){const w=y-j;if(w%4!==0)throw new Error("Length of bits to retrieve must be divisible by four");return this.getBits(j,y).toString(16).padStart(w/4,"0")}getBitsPastSubnet(){return this.getBitsBase2(this.subnetMask,o.BITS)}reverseForm(j){j||(j={});const y=Math.floor(this.subnetMask/4),w=this.canonicalForm().replace(/:/g,"").split("").slice(0,y).reverse().join(".");return y>0?j.omitSuffix?w:`${w}.ip6.arpa.`:j.omitSuffix?"":"ip6.arpa."}correctForm(){let j,y=[],w=0;const S=[];for(j=0;j<this.parsedAddress.length;j++){const H=parseInt(this.parsedAddress[j],16);H===0&&w++,H!==0&&w>0&&(w>1&&S.push([j-w,j-1]),w=0)}w>1&&S.push([this.parsedAddress.length-w,this.parsedAddress.length-1]);const T=S.map(H=>H[1]-H[0]+1);if(S.length>0){const H=T.indexOf(Math.max(...T));y=f(this.parsedAddress,S[H])}else y=this.parsedAddress;for(j=0;j<y.length;j++)y[j]!=="compact"&&(y[j]=parseInt(y[j],16).toString(16));let E=y.join(":");return E=E.replace(/^compact$/,"::"),E=E.replace(/(^compact)|(compact$)/,":"),E=E.replace(/compact/,""),E}binaryZeroPad(){return this.bigInt().toString(2).padStart(o.BITS,"0")}parse4in6(j){const y=j.split(":"),S=y.slice(-1)[0].match(a.RE_ADDRESS);if(S){this.parsedAddress4=S[0],this.address4=new c.Address4(this.parsedAddress4);for(let T=0;T<this.address4.groups;T++)if(/^0[0-9]+/.test(this.address4.parsedAddress[T]))throw new d.AddressError("IPv4 addresses can't have leading zeroes.",j.replace(a.RE_ADDRESS,this.address4.parsedAddress.map(g).join(".")));this.v4=!0,y[y.length-1]=this.address4.toGroup6(),j=y.join(":")}return j}parse(j){j=this.parse4in6(j);const y=j.match(o.RE_BAD_CHARACTERS);if(y)throw new d.AddressError(`Bad character${y.length>1?"s":""} detected in address: ${y.join("")}`,j.replace(o.RE_BAD_CHARACTERS,'<span class="parse-error">$1</span>'));const w=j.match(o.RE_BAD_ADDRESS);if(w)throw new d.AddressError(`Address failed regex: ${w.join("")}`,j.replace(o.RE_BAD_ADDRESS,'<span class="parse-error">$1</span>'));let S=[];const T=j.split("::");if(T.length===2){let E=T[0].split(":"),H=T[1].split(":");E.length===1&&E[0]===""&&(E=[]),H.length===1&&H[0]===""&&(H=[]);const R=this.groups-(E.length+H.length);if(!R)throw new d.AddressError("Error parsing groups");this.elidedGroups=R,this.elisionBegin=E.length,this.elisionEnd=E.length+this.elidedGroups,S=S.concat(E);for(let $=0;$<R;$++)S.push("0");S=S.concat(H)}else if(T.length===1)S=j.split(":"),this.elidedGroups=0;else throw new d.AddressError("Too many :: groups found");if(S=S.map(E=>parseInt(E,16).toString(16)),S.length!==this.groups)throw new d.AddressError("Incorrect number of groups found");return S}canonicalForm(){return this.parsedAddress.map(_).join(":")}decimal(){return this.parsedAddress.map(j=>parseInt(j,16).toString(10).padStart(5,"0")).join(":")}bigInt(){return BigInt(`0x${this.parsedAddress.map(_).join("")}`)}to4(){const j=this.binaryZeroPad().split("");return c.Address4.fromHex(BigInt(`0b${j.slice(96,128).join("")}`).toString(16))}to4in6(){const j=this.to4(),w=new x(this.parsedAddress.slice(0,6).join(":"),6).correctForm();let S="";return/:$/.test(w)||(S=":"),w+S+j.address}inspectTeredo(){const j=this.getBitsBase16(0,32),w=(this.getBits(80,96)^BigInt("0xffff")).toString(),S=c.Address4.fromHex(this.getBitsBase16(32,64)),T=this.getBits(96,128),E=c.Address4.fromHex((T^BigInt("0xffffffff")).toString(16)),H=this.getBitsBase2(64,80),R=(0,u.testBit)(H,15),$=(0,u.testBit)(H,14),K=(0,u.testBit)(H,8),Z=(0,u.testBit)(H,9),U=BigInt(`0b${H.slice(2,6)+H.slice(8,16)}`).toString(10);return{prefix:`${j.slice(0,4)}:${j.slice(4,8)}`,server4:S.address,client4:E.address,flags:H,coneNat:R,microsoft:{reserved:$,universalLocal:Z,groupIndividual:K,nonce:U},udpPort:w}}inspect6to4(){const j=this.getBitsBase16(0,16),y=c.Address4.fromHex(this.getBitsBase16(16,48));return{prefix:j.slice(0,4),gateway:y.address}}to6to4(){if(!this.is4())return null;const j=["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":");return new x(j)}toByteArray(){const j=this.bigInt().toString(16),w=`${"0".repeat(j.length%2)}${j}`,S=[];for(let T=0,E=w.length;T<E;T+=2)S.push(parseInt(w.substring(T,T+2),16));return S}toUnsignedByteArray(){return this.toByteArray().map(b)}static fromByteArray(j){return this.fromUnsignedByteArray(j.map(b))}static fromUnsignedByteArray(j){const y=BigInt("256");let w=BigInt("0"),S=BigInt("1");for(let T=j.length-1;T>=0;T--)w+=S*BigInt(j[T].toString(10)),S*=y;return x.fromBigInt(w)}isCanonical(){return this.addressMinusSuffix===this.canonicalForm()}isLinkLocal(){return this.getBitsBase2(0,64)==="1111111010000000000000000000000000000000000000000000000000000000"}isMulticast(){return this.getType()==="Multicast"}is4(){return this.v4}isTeredo(){return this.isInSubnet(new x("2001::/32"))}is6to4(){return this.isInSubnet(new x("2002::/16"))}isLoopback(){return this.getType()==="Loopback"}href(j){return j===void 0?j="":j=`:${j}`,`http://[${this.correctForm()}]${j}/`}link(j){j||(j={}),j.className===void 0&&(j.className=""),j.prefix===void 0&&(j.prefix="/#address="),j.v4===void 0&&(j.v4=!1);let y=this.correctForm;j.v4&&(y=this.to4in6);const w=y.call(this);return j.className?`<a href="${j.prefix}${w}" class="${j.className}">${w}</a>`:`<a href="${j.prefix}${w}">${w}</a>`}group(){if(this.elidedGroups===0)return i.simpleGroup(this.address).join(":");p(typeof this.elidedGroups=="number"),p(typeof this.elisionBegin=="number");const j=[],[y,w]=this.address.split("::");y.length?j.push(...i.simpleGroup(y)):j.push("");const S=["hover-group"];for(let T=this.elisionBegin;T<this.elisionBegin+this.elidedGroups;T++)S.push(`group-${T}`);return j.push(`<span class="${S.join(" ")}"></span>`),w.length?j.push(...i.simpleGroup(w,this.elisionEnd)):j.push(""),this.is4()&&(p(this.address4 instanceof c.Address4),j.pop(),j.push(this.address4.groupForV6())),j.join(":")}regularExpressionString(j=!1){let y=[];const w=new x(this.correctForm());if(w.elidedGroups===0)y.push((0,l.simpleRegularExpression)(w.parsedAddress));else if(w.elidedGroups===o.GROUPS)y.push((0,l.possibleElisions)(o.GROUPS));else{const S=w.address.split("::");S[0].length&&y.push((0,l.simpleRegularExpression)(S[0].split(":"))),p(typeof w.elidedGroups=="number"),y.push((0,l.possibleElisions)(w.elidedGroups,S[0].length!==0,S[1].length!==0)),S[1].length&&y.push((0,l.simpleRegularExpression)(S[1].split(":"))),y=[y.join(":")]}return j||(y=["(?=^|",l.ADDRESS_BOUNDARY,"|[^\\w\\:])(",...y,")(?=[^\\w\\:]|",l.ADDRESS_BOUNDARY,"|$)"]),y.join("")}regularExpression(j=!1){return new RegExp(this.regularExpressionString(j),"i")}}return Cn.Address6=x,Cn}var G0;function lie(){return G0||(G0=1,function(e){var s=Or&&Or.__createBinding||(Object.create?function(l,d,u,p){p===void 0&&(p=u);var h=Object.getOwnPropertyDescriptor(d,u);(!h||("get"in h?!d.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return d[u]}}),Object.defineProperty(l,p,h)}:function(l,d,u,p){p===void 0&&(p=u),l[p]=d[u]}),n=Or&&Or.__setModuleDefault||(Object.create?function(l,d){Object.defineProperty(l,"default",{enumerable:!0,value:d})}:function(l,d){l.default=d}),r=Or&&Or.__importStar||function(l){if(l&&l.__esModule)return l;var d={};if(l!=null)for(var u in l)u!=="default"&&Object.prototype.hasOwnProperty.call(l,u)&&s(d,l,u);return n(d,l),d};Object.defineProperty(e,"__esModule",{value:!0}),e.v6=e.AddressError=e.Address6=e.Address4=void 0;var a=cA();Object.defineProperty(e,"Address4",{enumerable:!0,get:function(){return a.Address4}});var o=cie();Object.defineProperty(e,"Address6",{enumerable:!0,get:function(){return o.Address6}});var i=$v();Object.defineProperty(e,"AddressError",{enumerable:!0,get:function(){return i.AddressError}});const c=r(dA());e.v6={helpers:c}}(Or)),Or}var Cm=lie();const die=e=>{try{return{address:new Cm.Address4(e),version:4}}catch{return}},uie=e=>{try{return{address:new Cm.Address6(e),version:6}}catch{return}},hl=e=>{const s=die(e)??uie(e);if(!s)throw new Error(`failed to parse IP address: ${e}`);const{address:n,version:r}=s;return{version:r,toNumber(){return n.bigInt()},compare(a){if(r!==a.version)throw new Error("Can not compare IP addresses with different version");return n.bigInt()<a.toNumber()?-1:n.bigInt()>a.toNumber()?1:0},isInSubnet(a){return n.isInSubnet(a)}}},hie=(e,s)=>{if(!s.includes("/"))return!1;if(e.version===4){const r=new Cm.Address4(s);return e.isInSubnet(r)}const n=new Cm.Address6(s);return e.isInSubnet(n)},pie=(e,s)=>{if(!s.includes("-"))return!1;const[n,r]=s.split("-"),a=hl(n.trim()),o=hl(r.trim());return(a.compare(e)===0||a.compare(e)===-1)&&(o.compare(e)===0||o.compare(e)===1)},mie=(e,s)=>{const n=hl(s);return e.compare(n)===0},gie=(e,s)=>{try{const n=hl(e);return hie(n,s)||pie(n,s)||mie(n,s)}catch{return!1}},fie="_container_1j9cd_1",_ie={container:fie},bie=(e,s)=>s!=null&&s.protected_branches_only?e==null?void 0:e.protected:!0,Rv=({onClose:e})=>{var j;const{projectId:s,project:n,isLoading:r}=F(),{trackUiInteraction:a}=k(),{branch:o}=Tt(),[i,c]=m.useState(!1),[l,d]=m.useState(),[u,p]=m.useState(!1),h=Fn(),g=(j=n==null?void 0:n.settings)==null?void 0:j.allowed_ips,[f]=oA.useLazyFetchIpQuery(),[_,b]=nn(gt.HideIPAllowModal,s,!1),x=m.useCallback(()=>{c(!1),e==null||e()},[e]);m.useEffect(()=>{const y=(g==null?void 0:g.ips)??[];_?e==null||e():y.length>0&&bie(o,g)?f(void 0,!0).unwrap().then(({ip:w})=>{const S=y.some(T=>gie(w,T));return d(w),c(!S),S?e==null?void 0:e():a("ip_allow_modal_shown")}):o&&g&&(e==null||e())},[o,f,g,e,a,_]);const v=m.useCallback(()=>{if(l){const y=(g==null?void 0:g.ips)??[];return h({projectId:s,data:{settings:{allowed_ips:{...g,ips:[...y,l]}}}}).catch(w=>$m(w)).finally(()=>x())}},[l,g,h,s,x]);return r||_?null:t.jsx(t.Fragment,{children:t.jsxs(It,{isOpen:i,width:600,title:`Access Denied for ${l}`,onRequestClose:()=>{a("ip_allow_modal_dismissed"),x()},children:[t.jsx(qe,{children:t.jsxs("div",{className:_ie.container,children:[t.jsxs("p",{children:["You are trying to access Neon from IP address"," ",t.jsx(Pe,{children:l}),", which is not on the project allow list."]}),t.jsx(ra,{checked:u,onChange:y=>{p(y.target.checked)},children:"Don't show this message again for any IP address"})]})}),t.jsxs(Ee,{children:[t.jsx(A,{appearance:"secondary",onClick:()=>{a(u?"ip_allow_modal_no_show":"ip_allow_modal_dismissed"),b(u),x()},children:u?"Close":"Cancel"}),t.jsx(A,{appearance:"primary",disabled:u,onClick:()=>{a("ip_allow_modal_confirmed"),v()},children:"Add"})]})]})})},fd={title:"Archived branch",body:"This branch is archived. Accessing it on the Tables page will unarchive it, which may take a moment, and queries may be slower at first.",learnMore:"Learn more about branch archiving",declineButton:"Cancel",confirmButton:"Proceed"},xie=({onDecline:e,onConfirm:s})=>t.jsxs(It,{isOpen:!0,title:fd.title,onRequestClose:e,children:[t.jsx(qe,{gaps:!0,children:t.jsxs("p",{children:[fd.body," ",t.jsx(M,{href:kx,icon:"external_link",openInNewTab:!0,children:fd.learnMore})]})}),t.jsxs(Ee,{children:[t.jsx(dn,{appearance:"secondary",children:fd.declineButton}),t.jsx(A,{onClick:s,children:fd.confirmButton})]})]}),vie=m.lazy(async()=>({default:(await fr(()=>import("./DrizzleStudio-DdmL_Lf-.js"),__vite__mapDeps([3,1,2,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]))).DrizzleStudio})),$Ie=zt({database:at().optional().catch(void 0),schema:at().optional().catch(void 0),table:at().optional().catch(void 0)}),Xf=()=>t.jsx(Se,{}),jie=()=>{const[e,s]=m.useState(!1),[n,r]=m.useState(!1),{branch:a}=Tt(),o=nt();return e?a?a.current_state==="archived"&&!n&&Wu(a)?t.jsxs(t.Fragment,{children:[t.jsx(xie,{onDecline:()=>o.replace(G(C.ProjectsItemBranchesItem,{projectId:a.project_id,branchId:a.id})),onConfirm:()=>r(!0)}),t.jsx(Xf,{})]}):t.jsx(m.Suspense,{fallback:t.jsx(Xf,{}),children:t.jsx(vie,{})}):t.jsx(Xf,{}):t.jsx(Rv,{onClose:()=>s(!0)})},yie="_root_1u3cy_1",wie={root:yie},Sie=()=>{const{orgId:e,isVercelOrg:s,isLoading:n}=ae();return n?t.jsx(Se,{}):e?t.jsxs("div",{className:wie.root,children:[t.jsx(UN,{headingId:"github"}),!s&&t.jsx(VN,{headingId:"vercel"})]}):null},Im=e=>{const s=e.split(/[ ,;\n]/).map(n=>n.trim()).filter(Boolean);return s.some(n=>!kL.test(n))?null:vB(s)},uA=e=>{const{data:s,isLoading:n}=qs(),r=m.useMemo(()=>(s==null?void 0:s.map(a=>({value:a.id,label:a.name})))??[],[s]);return TL({...e,options:r}),n?null:t.jsx(na,{...e,loading:n,options:r})},fc={title:e=>`Invite collaborators to ${e} project`,projectLabel:"Select project to invite collaborators to:",emailLabel:"Add emails",emailPlaceholder:"One or many comma separated emails",submitButton:"Invite collaborators",invitationSuccess:(e,s)=>`Collaborator ${e} received access to project ${s}`},Cie=({orgName:e,onRequestClose:s})=>{var c;const n=PL(),r=Ae({mode:"onSubmit",defaultValues:{invitation_emails:""}}),[a,o]=m.useState(),i=async l=>{const d=Im(l.invitation_emails),u=a==null?void 0:a.value;if(u){const p=await Promise.allSettled(d.map(h=>n({projectId:u,email:h})));for(const h of p)h.status==="rejected"?Y(h.reason):ze(t.jsx(tt,{children:fc.invitationSuccess(h.value.granted_to_email,a.label)}))}s==null||s()};return t.jsx(t.Fragment,{children:t.jsxs(gs,{modalProps:{title:fc.title(e),isOpen:!0,onRequestClose:s,width:550},providerProps:r,onSubmit:i,children:[t.jsxs(qe,{gaps:!0,children:[t.jsx(B,{label:fc.projectLabel,children:t.jsx(uA,{value:a,onChange:l=>{l&&o(l)}})}),t.jsx(B,{label:fc.emailLabel,error:(c=r.formState.errors.invitation_emails)==null?void 0:c.message,children:t.jsx(ce,{autoFocus:!0,placeholder:fc.emailPlaceholder,...r.register("invitation_emails",{required:{value:!0,message:"This field is required"},validate:l=>Im(l)!==null||"Please enter a valid email address"})})})]}),t.jsxs(Ee,{children:[t.jsx(ln,{}),t.jsx(Ie,{children:fc.submitButton})]})]})})},Iie=({...e})=>{const{org:s}=ae(),{isOrgAdmin:n}=qt(),r=it(st.InviteOrgCollaborators),{data:a,isLoading:o}=qs();if(s===void 0||o)return null;const i=!(a&&a.length>0&&n);return t.jsxs(t.Fragment,{children:[r.isModalOpen&&t.jsx(Cie,{orgName:s.name,onRequestClose:r.closeModal}),t.jsx(A,{size:"s",onClick:r.openModal,...e,disabled:i,children:"Invite collaborators"})]})},Yn={convertLabel:"Convert to member",convertModalHeader:"Convert collaborator to member",convertModalBody:(e,s)=>t.jsxs("span",{children:["Are you sure you want to convert"," ",t.jsx("strong",{children:e.user_email})," to member in ",s,"? They will get access to all projects."]}),convertModalConfirm:"Convert to member",convertSuccess:(e,s)=>t.jsxs(t.Fragment,{children:["Successfully converted ",t.jsx("strong",{children:e.user_email})," to member in ",s]}),removeLabel:"Remove from project",removeCollaboratorModalHeader:"Remove from project",removeCollaboratorModalBody:e=>t.jsxs("span",{children:["Are you sure you want to remove ",t.jsx("strong",{children:e.user_email})," ","from ",e.project_name,"?"," ",t.jsx("strong",{children:e.user_email})," will lose their access to this project."]}),removeCollaboratorModalConfirm:"Remove",removeCollaboratorSuccess:e=>t.jsxs(t.Fragment,{children:["Successfully removed ",t.jsx("strong",{children:e.user_email})," from"," ",e.project_name]})},kie=({collaborator:e})=>{const{trackUiInteraction:s}=k(),{confirm:n}=Ye(),{org:r,isVercelOrg:a}=ae(),o=(r==null?void 0:r.name)??"",{isOrgAdmin:i}=qt(),c=NL(),l=AL(),d=m.useCallback(()=>{n({header:Yn.convertModalHeader,text:Yn.convertModalBody(e,o),confirmButtonText:Yn.convertModalConfirm}).then(h=>{if(!h){s("org_guest_convert_to_member_dismissed");return}s("org_guest_convert_to_member_confirmed"),l({invitations:[{email:e.user_email,role:"member"}]}).then(()=>{ze(t.jsx(tt,{children:Yn.convertSuccess(e,o)}))}).catch(Y)})},[e,o,l,n,s]),u=m.useCallback(()=>{n({appearance:"danger",header:Yn.removeCollaboratorModalHeader,text:Yn.removeCollaboratorModalBody(e),confirmButtonText:Yn.removeCollaboratorModalConfirm}).then(h=>{if(!h){s("org_guest_remove_from_project_dismissed");return}s("org_guest_remove_from_project_confirmed"),c({projectId:e.project_id,permissionId:e.permission_id}).then(()=>{ze(t.jsx(tt,{children:Yn.removeCollaboratorSuccess(e)}))}).catch(Y)})},[e,c,n,s]),p=m.useMemo(()=>[{items:ot([!a&&{label:Yn.convertLabel,onClick(){s("org_guest_convert_to_member_clicked"),d()}},{label:Yn.removeLabel,onClick(){s("org_guest_remove_from_project_clicked"),u()}}])}],[d,u,s,a]);return t.jsx(Jt,{sections:p,children:t.jsx(fs,{isDisabled:!i,"aria-label":`Actions for collaborator ${e.user_email}`})})},uu={title:"Collaborators",headerText:"Share projects with external collaborators. Collaborator access is limited to the projects you invite them to.",emailColumnLabel:"Email address",projectColumnLabel:"Project shared"},Tie=[{id:"email",header:uu.emailColumnLabel,enableSorting:!0,accessorKey:"user_email",rowHeader:!0,render:e=>t.jsx(sl,{content:e.user_email,maxWidth:300})},{id:"project_name",header:uu.projectColumnLabel,enableSorting:!0,accessorFn:e=>e.project_name??e.project_id},{id:"action",size:30,render:e=>t.jsx(kie,{collaborator:e})}],Pie=()=>{const{data:e,isLoading:s}=yx();return t.jsx(De,{id:"collaborators",children:t.jsxs($e,{children:[t.jsx(Te,{actions:t.jsx(Iie,{}),children:uu.title}),t.jsx("p",{children:uu.headerText}),t.jsx(Ps,{"aria-label":uu.title,columns:Tie,rows:e,isLoading:s,defaultSorting:{column:"project_name",direction:"ascending"},getRowId:n=>n.permission_id})]})})},rs={changeRoleModalHeader:"Change role",changeRoleModalBody:(e,s,n)=>t.jsxs("span",{children:["Are you sure you want to change ",t.jsx("strong",{children:n.email}),"'s role in ",e," from ",Ma[n.role]," to"," ",Ma[s],"?"]}),changeRoleModalConfirm:"Change",changeRoleSuccess:(e,s,n)=>`Successfully changed ${n.email}'s role in ${e} from ${Ma[n.role]} to ${Ma[s]}`,removeMemberButton:"Remove from organization",removeMemberModalHeader:"Remove member",removeMemberModalBody:(e,s)=>t.jsxs("span",{children:["Are you sure you want to remove ",t.jsx("strong",{children:s.email})," from"," ",t.jsx("strong",{children:e}),"? This will revoke their access to projects."]}),removeMemberModalConfirm:"Remove",removeMemberSuccess:(e,s)=>`Successfully removed ${s.email} from ${e}`,leaveOrg:"Leave organization",leaveOrgModalHeader:"Leave organization",leaveOrgModalBody:e=>t.jsxs("span",{children:["Are you sure? If you leave now, you'll lose access to all projects in"," ",t.jsx("b",{children:e}),"."]}),leaveOrgModalConfirm:"Leave",leaveOrgSuccess:e=>`Successfully left ${e}`,leaveOrgOnlyAdminErrorBE:"can't remove the only admin member of the organization",leaveOrgOnlyAdminError:"Before leaving the organization you need to assign a different admin to it"},Nie={admin:!0,member:!0},Aie=({member:e})=>{const{trackUiInteraction:s}=k(),{confirm:n}=Ye(),{org:r}=ae(),a=(r==null?void 0:r.name)??"",{isOrgAdmin:o}=qt(),i=EL(),c=_C(),l=m.useCallback(p=>{e.role!==p&&n({header:rs.changeRoleModalHeader,text:rs.changeRoleModalBody(a,p,e),confirmButtonText:rs.changeRoleModalConfirm}).then(h=>{if(!h){s("org_member_change_role_dismissed");return}s("org_member_change_role_confirmed"),i({memberId:e.id,data:{role:p}}).then(()=>{pe(rs.changeRoleSuccess(a,p,e))}).catch(Y)})},[e,a,i,n,s]),d=m.useCallback(()=>{n({appearance:"danger",header:rs.removeMemberModalHeader,text:rs.removeMemberModalBody(a,e),confirmButtonText:rs.removeMemberModalConfirm}).then(p=>{if(!p){s("org_member_remove_from_org_dismissed");return}s("org_member_remove_from_org_confirmed"),c({memberId:e.id}).then(()=>{pe(rs.removeMemberSuccess(a,e))}).catch(Y)})},[e,a,c,n,s]),u=m.useMemo(()=>[{items:Object.keys(Nie).map(p=>({icon:p===e.role?"check":void 0,label:Ma[p],onClick(){s("org_member_change_role_clicked",{from_role:e.role,to_role:p}),l(p)}}))},{items:[{label:rs.removeMemberButton,onClick(){s("org_member_remove_from_org_clicked"),d()}}]}],[e,l,d,s]);return t.jsx(Jt,{sections:u,children:t.jsx(fs,{isDisabled:!o,"aria-label":`Actions for member ${e.email}`})})},Eie=({member:e,memberCount:s})=>{const{trackUiInteraction:n}=k(),r=nt(),{confirm:a}=Ye(),{org:o}=ae(),i=(o==null?void 0:o.name)??"",c=_C(),l=e.id,d=m.useCallback(()=>{a({appearance:"danger",header:rs.leaveOrgModalHeader,text:rs.leaveOrgModalBody(i),confirmButtonText:rs.leaveOrgModalConfirm}).then(p=>{if(!p){n("org_member_leave_org_dismissed");return}n("org_member_leave_org_confirmed"),c({memberId:l,isCurrentUser:!0}).then(()=>{r.push(G(C.ProjectsList)),pe(rs.leaveOrgSuccess(i))}).catch(h=>{var g;(g=h==null?void 0:h.message)!=null&&g.includes(rs.leaveOrgOnlyAdminErrorBE)?Ct(rs.leaveOrgOnlyAdminError):Y(h)})})},[i,l,c,a,n,r]),u=m.useMemo(()=>[{items:[{label:rs.leaveOrg,onClick(){n("org_member_leave_org_clicked"),d()}}]}],[d,n]);return t.jsx(Jt,{sections:u,children:t.jsx(fs,{isDisabled:s===1,"aria-label":`Actions for member ${e.email}`})})},Oie=({member:e,memberCount:s})=>{const{data:n}=bt();return e.user_id===(n==null?void 0:n.id)?t.jsx(Eie,{member:e,memberCount:s}):t.jsx(Aie,{member:e})},si={title:"Members",headerText:"Invite new members, assign roles, or remove from the organization.",upgradeHeaderText:"You're the first person in this organization. Upgrade to start inviting your team.",emailColumnLabel:"Email",roleColumnLabel:"Role",vercelOrgInfo:"To manage organization members, use the Neon Postgres integration in Vercel."},Lie=[{id:"email",header:si.emailColumnLabel,enableSorting:!0,accessorKey:"email",rowHeader:!0,render:e=>t.jsx(sl,{appearance:"tertiary",content:e.email,maxWidth:300})},{id:"role",header:si.roleColumnLabel,enableSorting:!0,accessorFn:e=>Ma[e.role]},{id:"action",size:30,render:(e,s)=>t.jsx(Oie,{member:e,memberCount:s.table.getRowCount()})}];function $ie(e,s){return s?e.slice(0,2):e}const Rie=()=>{const{isVercelOrg:e}=ae(),{data:s,isLoading:n}=OL(),{allowInvites:r,isLoading:a}=Vx();return a?null:t.jsx(De,{id:"members",children:t.jsxs($e,{children:[t.jsx(Te,{actions:!e&&t.jsx(im,{size:"l"}),children:si.title}),t.jsx(P,{children:r?si.headerText:si.upgradeHeaderText}),e&&t.jsx(X,{children:si.vercelOrgInfo}),t.jsx(Ps,{columns:$ie(Lie,e),rows:s??[],isLoading:n,getRowId:o=>o.id,defaultSorting:{column:"role",direction:"ascending"},"aria-label":si.title})]})})},Jn={resendButton:"Resend invite",resendModalHeader:"Resend invitation",resendModalBody:e=>`Are you sure you want to resend invitation to ${e}?`,resendModalSuccess:e=>`Successfully resent the invitation to ${e}`,cancelButton:"Cancel invite",cancelModalHeader:"Cancel invite",cancelModalBody:(e,s)=>t.jsxs("span",{children:["Are you sure you want to cancel invite for ",t.jsx("strong",{children:e})," to"," ",t.jsx("strong",{children:s}),"?"]}),cancelModalConfirm:"Cancel invite",cancelModalCancel:"Keep invite",cancelModalSuccess:e=>`Successfully cancelled invitation to ${e}`},Bie=({invitation:e})=>{const{trackUiInteraction:s}=k(),{confirm:n}=Ye(),{org:r}=ae(),a=(r==null?void 0:r.name)??"",{isOrgAdmin:o}=qt(),i=LL(),c=$L(),l=m.useCallback(()=>{n({header:Jn.resendModalHeader,text:Jn.resendModalBody(e.email)}).then(p=>{if(!p){s("org_invitation_resend_dismissed");return}s("org_invitation_resend_confirmed"),c({invitationId:e.id}).then(()=>{ze(t.jsx(tt,{children:Jn.resendModalSuccess(e.email)}))}).catch(Y)})},[c,s,n,e.email,e.id]),d=m.useCallback(()=>{n({appearance:"danger",header:Jn.cancelModalHeader,text:Jn.cancelModalBody(e.email,a),confirmButtonText:Jn.cancelModalConfirm,declineButtonText:Jn.cancelModalCancel}).then(p=>{if(!p){s("org_invitation_cancel_dismissed");return}s("org_invitation_cancel_confirmed"),i({invitationId:e.id}).then(()=>{ze(t.jsx(tt,{children:Jn.cancelModalSuccess(e.email)}))}).catch(Y)})},[i,s,n,e.id,e.email,a]),u=m.useMemo(()=>[{items:[{label:Jn.resendButton,onClick(){s("org_invitation_resend_clicked"),l()}},{label:Jn.cancelButton,onClick(){s("org_invitation_cancel_clicked"),d()}}]}],[l,d,s]);return t.jsx(Jt,{sections:u,children:t.jsx(fs,{isDisabled:!o,"aria-label":`Actions with invitation to ${e.email}`})})},Ba={title:"Pending invites",noInvitesHeader:"There are no pending invites at the moment.",upgradeNoInvitesHeader:"You're the only member of this organization. Upgrade your plan to invite external collaborators to join this organization.",existingInvitesHeader:"Here you can find your pending invites.",emailColumnLabel:"Email",invitedOnLabel:"Invited on",invitedAsLabel:"Invited as"},Mie=[{id:"email",header:Ba.emailColumnLabel,enableSorting:!0,accessorKey:"email",rowHeader:!0,render:e=>t.jsx(sl,{content:e.email,maxWidth:300})},{id:"invited_as",header:Ba.invitedAsLabel,enableSorting:!0,accessorKey:"role",render:({role:e})=>t.jsx(P,{appearance:"secondary",children:Ma[e]})},{id:"invited_at",header:Ba.invitedOnLabel,enableSorting:!0,accessorKey:"invited_at",render:({invited_at:e})=>t.jsx(P,{appearance:"secondary",children:xe(e,ke.Date)})},{id:"action",size:30,render:e=>t.jsx(Bie,{invitation:e})}],Die=()=>{const{data:e,isLoading:s}=RL(),n=e&&e.length>0,{allowInvites:r,isLoading:a}=Vx();return a||e===void 0?null:t.jsx(De,{id:"pending",children:t.jsxs($e,{children:[t.jsx(Te,{actions:n&&t.jsx(im,{size:"l"}),children:Ba.title}),s||n?t.jsxs(t.Fragment,{children:[Ba.existingInvitesHeader,t.jsx(Ps,{"aria-label":Ba.title,columns:Mie,rows:e,isLoading:s,defaultSorting:{column:"email",direction:"ascending"},getRowId:o=>o.id})]}):t.jsxs(t.Fragment,{children:[r?Ba.noInvitesHeader:Ba.upgradeNoInvitesHeader,t.jsx(im,{size:"l"})]})]})})},Uie=()=>{const{isVercelOrg:e}=ae(),{isFreeSubscription:s}=fe(),{data:n}=yx(),r=n&&n.length>0,a=!s&&r;return t.jsxs(t.Fragment,{children:[t.jsx(Rie,{}),!e&&t.jsx(Die,{}),a&&t.jsx(Pie,{})]})},Ci=BL({baseQuery:Z1,reducerPath:"api_keys",tagTypes:["ApiKeys","OrgApiKeys"],endpoints:e=>({getApiKeys:e.query({providesTags:["ApiKeys"],query:()=>W.listApiKeys()}),getOrgApiKeys:e.query({providesTags:["OrgApiKeys"],query:s=>W.listOrgApiKeys(s)}),createApiKey:e.mutation({invalidatesTags:["ApiKeys"],query:s=>W.createApiKey(s)}),createOrgApiKey:e.mutation({invalidatesTags:["OrgApiKeys"],query:({orgId:s,data:n})=>W.createOrgApiKey(s,n)}),revokeApiKey:e.mutation({invalidatesTags:["ApiKeys"],query:s=>W.revokeApiKey(s)}),revokeOrgApiKey:e.mutation({invalidatesTags:["OrgApiKeys"],query:({orgId:s,id:n})=>W.revokeOrgApiKey(s,n)})})});function Fie(){const{orgId:e}=ae(),s=Ci.useGetApiKeysQuery(e!==void 0?Y_:void 0),n=Ci.useGetOrgApiKeysQuery(e!==void 0?e:Y_);return e!==void 0?n:s}function zie(){const[e]=Ci.useCreateApiKeyMutation(),[s]=Ci.useCreateOrgApiKeyMutation(),{orgId:n}=ae();return n!==void 0?r=>s({orgId:n,data:r}).unwrap():r=>e(r).unwrap()}function qie(){const[e]=Ci.useRevokeApiKeyMutation(),[s]=Ci.useRevokeOrgApiKeyMutation(),{orgId:n}=ae();return n!==void 0?r=>s({orgId:n,id:r}).unwrap():r=>e(r).unwrap()}const e_={title:"Automatic, instant branches of your database with every PR",description:"The GitHub integration automatically creates an API key and sets it as a repository secret.",button:"Connect to GitHub"},Hie="_root_1e86f_1",Vie="_icon_1e86f_11",Wie="_content_1e86f_15",Gie="_description_1e86f_22",up={root:Hie,icon:Vie,content:Wie,description:Gie},Kie=({orgId:e})=>{const{trackUiInteraction:s}=k(),n=nt(),{isInstalled:r,isLoading:a}=ha(),[o,i]=nn(gt.ApiKeysGithubCard,"isDismissed",!1);return a?null:!o&&!r&&t.jsxs("div",{className:up.root,children:[t.jsxs("div",{className:up.content,children:[t.jsx("div",{className:up.icon,children:t.jsx(q,{name:"github",size:28})}),t.jsxs("div",{className:up.description,children:[t.jsx(J,{level:5,children:e_.title}),t.jsx(P,{appearance:"secondary",size:"s",children:e_.description})]}),t.jsx(ta,{iconName:"close",iconSize:12,onClick:()=>{s(e?"org_api_keys_github_card_dismissed":"user_api_keys_github_card_dismissed"),i(!0)},appearance:"default"})]}),t.jsx(A,{appearance:"secondary",size:"s",onClick:()=>{s(e?"org_api_keys_github_card_connect_clicked":"user_api_keys_github_card_connect_clicked"),n.push(e?`${G(C.OrgIntegrations,{orgId:e})}#github`:`${C.UserIntegrations}#github`)},children:e_.button})]})},In={nameHeader:"Key name",projectHeader:"Project",createdHeader:"Created",lastUsedHeader:"Last used",revokeMenuItem:"Revoke key",revokeConfirmationTitle:"Revoke API key",revokeConfirmationButton:"Revoke",revokeConfirmationText1:"Are you sure you want revoke this API key?",revokeConfirmationText2:"Once revoked, any requests using this key will be denied. This action cannot be undone.",revokeSuccess:e=>`API key ${e} was successfully deleted`,revokeDisabled:"Additional permissions are required to revoke an API key."},Qie="_list_1bmz1_1",Yie="_table_1bmz1_7",Jie="_column_1bmz1_15",Zie="_createdByCell_1bmz1_22",Xie="_revokeAlert_1bmz1_28",zr={list:Qie,table:Yie,column:Jie,createdByCell:Zie,revokeAlert:Xie},ece=({apiKey:e,isOrgContext:s,isOrgAdmin:n,projectNamesById:r})=>{const{trackUiInteraction:a}=k(),{confirm:o}=Ye(),i=qie(),c=m.useCallback(async()=>{if(!await o({appearance:"danger",header:In.revokeConfirmationTitle,text:t.jsx(X,{appearance:"warning",children:t.jsxs("div",{className:zr.revokeAlert,children:[t.jsx(P,{appearance:"secondary",bold:!0,children:In.revokeConfirmationText1}),t.jsx(P,{appearance:"secondary",children:In.revokeConfirmationText2})]})}),confirmButtonText:In.revokeConfirmationButton})){a(s?"org_api_keys_revoke_dismissed":"user_api_keys_revoke_dismissed");return}a(s?"org_api_keys_revoke_confirmed":"user_api_keys_revoke_confirmed");try{await i(e.id),pe(In.revokeSuccess(e.name))}catch(p){Y(p)}},[o,e,i,a,s]),l=m.useMemo(()=>[{items:[{label:In.revokeMenuItem,onClick(){a(s?"org_api_keys_revoke_clicked":"user_api_keys_revoke_clicked"),c()}}]}],[c,a,s]),d=e.project_id!==void 0;return t.jsxs("div",{className:zr.table,children:[t.jsxs("div",{className:zr.column,style:{width:d?"27%":"45%"},children:[t.jsx(P,{appearance:"secondary",children:In.nameHeader}),t.jsx(sl,{content:e.name,maxWidth:"85%"})]}),d&&t.jsxs("div",{className:zr.column,style:{width:"20%"},children:[t.jsx(P,{appearance:"secondary",children:In.projectHeader}),t.jsx(sl,{content:r==null?void 0:r[e.project_id],maxWidth:"85%"})]}),t.jsxs("div",{className:zr.column,style:{width:d?"23%":"25%"},children:[t.jsx(P,{appearance:"secondary",children:In.createdHeader}),t.jsx(ne,{content:`By ${e.created_by.name} on ${xe(e.created_at)}`,children:t.jsxs("div",{className:zr.createdByCell,children:[t.jsx(Uu,{size:"s",name:e.created_by.name,image:e.created_by.image}),t.jsx("div",{children:xe(e.created_at,ke.Date)})]})})]}),t.jsxs("div",{className:zr.column,style:{width:d?"23%":"25%"},children:[t.jsx(P,{appearance:"secondary",children:In.lastUsedHeader}),t.jsx("div",{children:e.last_used_at?t.jsx(ne,{content:xe(e.last_used_at),children:t.jsx("div",{children:xe(e.last_used_at,ke.Date)})}):"never"})]}),t.jsx("div",{className:zr.column,children:t.jsx(Jt,{sections:l,children:t.jsx(ne,{content:In.revokeDisabled,disabled:!s||n,children:t.jsx("div",{children:t.jsx(fs,{"aria-label":`Actions for api key ${e.name}`,isDisabled:s&&!n})})})})})]})},t_=({apiKeys:e,isLoading:s,isOrgContext:n,isOrgAdmin:r,projectNamesById:a,...o})=>s||e===void 0?t.jsx(t.Fragment,{children:Fa(3).map(i=>t.jsx(D,{width:"100%",height:44},i))}):t.jsx("div",{className:zr.list,...o,children:e.map(i=>t.jsx(ece,{apiKey:i,isOrgContext:n,isOrgAdmin:r,projectNamesById:a},i.id))}),ja={modalTitle:"Create new API key",keyScopeLabel:"Key scope",orgScopeLabel:"Org-wide",projectScopeLabel:"Project-scoped",projectLabel:"Project",keyNameLabel:"Key name",submitButton:"Create",projectScopeDisabledMessage:"Your organization has no projects"},tce="_radios_13x2k_1",sce={radios:tce},K0=64,nce=({onSuccess:e,onRequestClose:s,isOrgContext:n,orgHasProjects:r})=>{var u;const a=zie(),o=Ae({defaultValues:{key_scope:n?"org":"user",name:""}}),{field:i}=mx({name:"key_scope",control:o.control}),[c,l]=m.useState(),d=async p=>{try{const h=await a({key_name:p.name,project_id:i.value==="project"?c==null?void 0:c.value:void 0});e(h.key)}catch(h){Y(h)}};return t.jsxs(gs,{modalProps:{isOpen:!0,title:ja.modalTitle,onRequestClose:s},providerProps:o,onSubmit:d,children:[t.jsxs(qe,{gaps:!0,children:[n&&t.jsx(B,{label:ja.keyScopeLabel,children:t.jsxs("div",{className:sce.radios,children:[t.jsx(sa,{...i,value:"org",checked:i.value==="org",children:ja.orgScopeLabel}),t.jsx(ne,{content:ja.projectScopeDisabledMessage,disabled:r,children:t.jsx("div",{children:t.jsx(sa,{...i,value:"project",checked:i.value==="project",disabled:!r,children:ja.projectScopeLabel})})})]})}),i.value==="project"&&t.jsx(B,{label:ja.projectLabel,children:t.jsx(uA,{value:c,onChange:p=>{p&&l(p)}})}),t.jsx(B,{label:ja.keyNameLabel,error:(u=o.formState.errors.name)==null?void 0:u.message,children:t.jsx(ce,{autoFocus:!0,...o.register("name",{required:{value:!0,message:"This field is required"},maxLength:{value:K0,message:`Name should be less than ${K0} characters`},trimWhitespace:!0}),"data-qa":"api_key_form_field_name"})})]}),t.jsxs(Ee,{children:[t.jsx(ln,{}),t.jsx(Ie,{"data-qa":"api_key_form_submit",children:ja.submitButton})]})]})},hp={modalTitle:"API key successfully created",alert:"Copy your new API token and store it securely. You will not be able to view or copy it again.",keyLabel:"API token",closeButton:"Copy and close"},rce=({apiKeyToken:e,onRequestClose:s})=>t.jsxs(It,{isOpen:!0,title:hp.modalTitle,onRequestClose:s,children:[t.jsxs(qe,{gaps:!0,children:[t.jsx(X,{appearance:"warning",children:hp.alert}),t.jsx(B,{label:hp.keyLabel,children:t.jsx(Bn,{preserveSpaceUnderButtons:!0,hideOverflow:!0,"data-qa":"api_key_created_value",children:e})})]}),t.jsx(Ee,{children:t.jsx(dn,{onClick:()=>ML(e),children:hp.closeButton})})]}),ya={title:e=>e?"API keys":"Personal API keys",personalDescription:t.jsxs(t.Fragment,{children:["These are your personal API keys. As a reminder, never share your keys with unauthorized users or expose it in client-side code. Learn about"," ",t.jsx(M,{href:"https://neon.com/docs/manage/api-keys",openInNewTab:!0,children:"API key scopes"}),"."]}),orgDescription:(e,s)=>`${s?`As an admin of ${e}, you control your organization's API keys. `:""}These global keys provide admin-level access to all organization resources, including projects, members, and billing information.`,createButton:"Create new API key",createDisabledTooltip:"Additional permissions are required to create an API key.",orgListHeader:"Org-wide",projectScopedListHeader:"Project-scoped",personalKeysLinkLabel:"Click here to view your account specific API keys ->"},ace="_apiKeyListHeader_1lv05_1",Q0={apiKeyListHeader:ace},hA=()=>{const{trackUiInteraction:e}=k(),{org:s,isLoading:n}=ae(),{data:r,isFetching:a,isError:o}=Fie(),i=s!==void 0,{isOrgAdmin:c}=qt(),{data:l}=bt(),d=ca(l),u=it(st.CreateApiKey),p=it(st.CreateApiKeySuccess,!1),[h,g]=m.useState(),{data:f}=qs(),_=m.useMemo(()=>Object.fromEntries((f==null?void 0:f.map(j=>[j.id,j.name]))??[]),[f]);if(n)return t.jsx(Se,{});if(o)return null;const[b,x]=BU(r,j=>"project_id"in j&&j.project_id!==void 0),v={isLoading:a,isOrgContext:i,isOrgAdmin:c};return t.jsxs(t.Fragment,{children:[u.isModalOpen&&t.jsx(nce,{isOrgContext:i,orgHasProjects:(f==null?void 0:f.length)!==0,onSuccess:j=>{e(i?"org_api_keys_create_submitted":"user_api_keys_create_submitted"),g(j),u.closeModal(),p.openModal()},onRequestClose:()=>{e(i?"org_api_keys_create_dismissed":"user_api_keys_create_dismissed"),u.closeModal()}}),p.isModalOpen&&h!==void 0&&t.jsx(rce,{apiKeyToken:h,onRequestClose:()=>{p.closeModal()}}),t.jsx(De,{id:"api-keys",children:t.jsxs($e,{children:[t.jsx(Te,{actions:t.jsx(ne,{content:ya.createDisabledTooltip,disabled:!i||c,children:t.jsx("div",{children:t.jsx(A,{appearance:"primary",onClick:()=>{u.openModal(),e(i?"org_api_keys_create_clicked":"user_api_keys_create_clicked")},size:"s",disabled:i&&!c,"data-qa":"api_key_create_button",children:ya.createButton})})}),children:ya.title(i)}),t.jsx(P,{appearance:"secondary",children:s===void 0?ya.personalDescription:ya.orgDescription(s.name,c)}),i?t.jsxs(t.Fragment,{children:[x.length>0&&t.jsxs("div",{children:[t.jsx(Te,{level:6,className:Q0.apiKeyListHeader,children:ya.orgListHeader}),t.jsx(t_,{apiKeys:x,...v,"data-qa":"api_key_list_org_scope"})]}),b.length>0&&t.jsxs("div",{children:[t.jsx(Te,{level:6,className:Q0.apiKeyListHeader,children:ya.projectScopedListHeader}),t.jsx(t_,{apiKeys:b,...v,projectNamesById:_,"data-qa":"api_key_list_project_scope"})]})]}):t.jsx(t_,{apiKeys:r,...v,"data-qa":"api_key_list"}),(i||!d)&&t.jsx(Kie,{orgId:s==null?void 0:s.id}),i&&t.jsx(M,{href:`${C.UserSettings}#api-keys`,children:ya.personalKeysLinkLabel})]})})]})},oce=async e=>(await W.getOrgDeletionChecklist(e)).data,ice=e=>{const{data:s,isLoading:n}=_t({queryKey:["org_deletion_checklist",e],queryFn:()=>oce(e),select:r=>r.conditions.map(a=>({name:a.name,satisfied:a.expected===a.actual,expected:a.expected,actual:a.actual}))});return{isLoading:n,conditions:s}},_d={title:"Delete organization",confirmationButtonText:"Delete organization",disclaimer:(e,s)=>t.jsxs(P,{children:["This action ",t.jsx("strong",{children:"cannot"})," be undone. It will permanently delete"," ",t.jsx("strong",{children:s}),". You might want to"," ",t.jsx(M,{href:G(C.OrgBilling,{orgId:e}),children:"download"})," ","your invoices before performing this action."]}),orgNameLabel:e=>t.jsxs(P,{children:["Type ",t.jsx("strong",{children:e})," to confirm deletion"]}),validationText:"This field doesn't contain the required value"},cce=({orgId:e,orgName:s,onSuccess:n,onRequestClose:r})=>{var c;const a=Ae(),o=DL(),i=async l=>{try{await o(e),pe(`Organization ${s} successfully deleted`),n==null||n(l)}catch(d){Y(d)}};return t.jsxs(gs,{providerProps:a,onSubmit:i,modalProps:{title:_d.title,isOpen:!0,onRequestClose:r,width:600},children:[t.jsxs(qe,{gaps:!0,children:[t.jsx(X,{appearance:"warning",children:_d.disclaimer(e,s)}),t.jsx(B,{label:_d.orgNameLabel(s),error:(c=a.formState.errors.orgName)==null?void 0:c.message,children:t.jsx(ce,{...a.register("orgName",{validate:l=>l===s||_d.validationText})})})]}),t.jsxs(Ee,{children:[t.jsx(ln,{}),t.jsx(Ie,{appearance:"danger","data-qa":"org_delete_confirmation_submit_button",children:_d.confirmationButtonText})]})]})},lce={project_count:(e,s,n)=>t.jsxs(t.Fragment,{children:["Delete its"," ",s.satisfied?"projects":t.jsx(M,{href:G(C.OrgProjectsList,{orgId:e}),onClick:n,children:"projects"})]})},Zo={title:"Delete organization",description:"Before deleting this organization you need to:",disabledMessage:"You need additional permissions to delete an organization.",deleteButtonText:"Delete organization",conditionText:(e,s,n)=>lce[s.name](e,s,n),managedBy:{azure:"This organization is managed by Azure and can be deleted only from Azure portal.",vercel:"To manage your Neon subscription, go to the Neon Postgres integration in Vercel.",default:"This organization is managed externally and cannot be deleted from Console."}},dce="_conditions_15m67_1",uce="_condition_15m67_1",hce="_submitWrapper_15m67_15",s_={conditions:dce,condition:uce,submitWrapper:hce},pce={project_count:"org_settings_delete_project_count_link_clicked"},mce=({message:e})=>t.jsx(De,{children:t.jsxs($e,{children:[t.jsx(Te,{children:Zo.title}),t.jsx(X,{children:e})]})}),gce=({orgId:e,orgName:s,managedBy:n})=>{const r=it(st.DeleteOrg),{isOrgAdmin:a}=qt(),o=Ae(),i=()=>{r.openModal()},{trackUiInteraction:c}=k(),l=nt(),{isLoading:d,conditions:u}=ice(e);if(n!=="console"){const h=Zo.managedBy[n];return t.jsx(mce,{message:h})}if(d||!u)return null;const p=u.every(h=>h.satisfied);return t.jsxs(De,{id:"delete",children:[r.isModalOpen&&t.jsx(cce,{orgId:e,orgName:s,onSuccess:()=>{c("org_settings_delete_modal_confirmed"),r.closeModal(),l.push(C.ProjectsList)},onRequestClose:()=>{c("org_settings_delete_modal_dismissed"),r.closeModal()}}),t.jsxs($e,{children:[t.jsx(Te,{children:Zo.title}),t.jsxs(Xt,{gaps:!0,providerProps:o,onSubmit:i,children:[t.jsx(P,{appearance:"secondary",children:Zo.description}),t.jsx("div",{className:s_.conditions,children:u.map(h=>t.jsxs("div",{className:s_.condition,children:[t.jsx(q,{name:h.satisfied?"success":"done",size:20}),t.jsx(P,{children:Zo.conditionText(e,h,()=>c(pce[h.name]))})]},h.name))}),t.jsx(Ns,{children:t.jsx(ne,{content:Zo.disabledMessage,disabled:a,children:t.jsx("div",{className:s_.submitWrapper,children:t.jsx(Ie,{appearance:"danger",disabled:!p||!a,onClick:()=>{c("org_settings_delete_submitted")},"data-qa":"org_delete_form_submit_button",children:Zo.deleteButtonText})})})})]})]})]})},fce="_channel_40sxr_1",_ce="_joined_40sxr_5",Y0={channel:fce,joined:_ce},wa={title:"Early access",subtitle:e=>t.jsxs(t.Fragment,{children:["Join the early access program to preview upcoming features for"," ",t.jsx("b",{children:e}),"'s projects. You can opt out anytime."]}),benefits:["Test new features before anyone else","Shape the product with direct feedback"],alreadyIn:e=>t.jsxs("div",{className:Y0.joined,children:[t.jsxs(P,{children:["Thank you for being an early access member! ",t.jsx("b",{children:e}),"'s projects have exclusive access to upcoming features."]}),t.jsxs(P,{children:["Get support and share feedback in our"," ",t.jsx(M,{href:xu,openInNewTab:!0,children:"Discord community"}),"."]}),t.jsx(P,{children:"Please contact support if you wish to opt out of early access."})]}),joinDiscord:t.jsxs(t.Fragment,{children:["Share feedback directly with our team. Join our"," ",t.jsx(M,{href:xu,openInNewTab:!0,children:"Discord community"})," ","for discussions in the"," ",t.jsx("b",{className:Y0.channel,children:"#neon-early-access"})," channel."]}),successJoin:"Successfully joined the Early Access Program!",submitJoin:"Join early access",disabled:"Additional permissions are required to change the early access setting."},bce="_submitWrapper_1a7lt_1",xce={submitWrapper:bce},vce=({orgId:e,orgName:s})=>{const n=_e(),r=Dn(),a=bC("beta_program"),{isOrgAdmin:o}=qt(),{trackUiInteraction:i}=k(),c=Ae(),l=m.useCallback(async()=>{try{i("org_settings_early_access_joined"),await W.joinOrgEarlyAccess(e),pe(wa.successJoin),r(tm.util.invalidateTags(["OrgLimits"])),await n.invalidateQueries({queryKey:UL(e)})}catch(d){Y(d)}},[i,e,r,n]);return t.jsx(De,{id:"early-access",children:t.jsxs($e,{children:[t.jsx(Te,{children:wa.title}),t.jsx(Xt,{providerProps:c,onSubmit:l,gaps:!0,children:a?t.jsx("div",{children:wa.alreadyIn(s)}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx(J,{level:5,children:wa.subtitle(s)}),t.jsx("ul",{children:wa.benefits.map(d=>t.jsx("li",{children:d},d))})]}),t.jsx("div",{children:t.jsx(P,{children:wa.joinDiscord})}),t.jsx(Ns,{children:t.jsx(ne,{content:wa.disabled,disabled:o,children:t.jsx("div",{className:xce.submitWrapper,children:t.jsx(Ie,{disabled:!o,children:wa.submitJoin})})})})]})})]})})},Ro={title:"General information",infoId:"For billing purposes you can use the organization ID below.",nameLabel:"Organization name",idLabel:"Organization ID",submitText:"Save",updateSuccess:"Successfully updated organization settings",nameDisabledMessage:"You need additional permissions to rename an organization."},J0=64,jce=({orgId:e,orgName:s})=>{var i;const n=FL(),{isOrgAdmin:r}=qt(),a=Ae({defaultValues:{name:s}}),o=m.useCallback(async c=>{try{await n({orgId:e,data:c}),pe(Ro.updateSuccess)}catch(l){Y(l)}},[e,n]);return t.jsx(De,{id:"general",children:t.jsxs($e,{children:[t.jsx(Te,{children:Ro.title}),t.jsxs(Xt,{gaps:!0,providerProps:a,onSubmit:o,children:[t.jsx(P,{appearance:"secondary",children:Ro.infoId}),t.jsxs(wu,{children:[t.jsx(B,{label:Ro.nameLabel,error:(i=a.formState.errors.name)==null?void 0:i.message,children:t.jsx(ne,{content:Ro.nameDisabledMessage,disabled:r,children:t.jsx("div",{children:t.jsx(ce,{...a.register("name",{required:{message:"This field is required",value:!0},disabled:!r,maxLength:{value:J0,message:`Name should be less than ${J0} characters`},trimWhitespace:!0})})})})}),t.jsx(B,{label:Ro.idLabel,children:t.jsx(Bn,{children:e})})]}),t.jsx(Ns,{children:t.jsx(Ie,{disabled:!r,"data-qa":"org_name_form_submit_button",children:Ro.submitText})})]})]})})},yce="_vpcListSection_lhenx_1",wce="_codeSpan_lhenx_8",n_={vpcListSection:yce,codeSpan:wce},Sce="_vpcActiveOnField_1ltry_1",Cce={vpcActiveOnField:Sce},Ice=({vpc:e})=>{const{data:s,isLoading:n}=xC({vpcEndpointId:e.vpc_endpoint_id,regionId:e.region_id});if(n)return t.jsx(D,{animate:!0,width:70,height:10});if(!s)return null;const r=s.num_restricted_projects>0,a=t.jsxs("span",{className:r?Cce.vpcActiveOnField:"",children:[s.num_restricted_projects," ",Ms("Project",s.num_restricted_projects)]});return r?t.jsx(ne,{appearance:"rich",content:t.jsxs("div",{children:[s.example_restricted_projects.map((o,i)=>t.jsxs("span",{children:[t.jsx(M,{href:G(C.ProjectsItem,{projectId:o}),children:o}),i<s.example_restricted_projects.length-1&&", "]},o)),s.num_restricted_projects>s.example_restricted_projects.length&&t.jsxs("span",{children:[" and ",s.num_restricted_projects-s.example_restricted_projects.length," ","more"]})]}),children:a}):a},kce=[{header:"Region",render:({region_id:e})=>e,enableSorting:!1,accessorKey:"region_id",rowHeader:!0},{header:"VPC Endpoint ID",render:({vpc_endpoint_id:e})=>e,enableSorting:!1,accessorKey:"vpc_endpoint_id"},{header:"Active On",render:e=>t.jsx(Ice,{vpc:e}),enableSorting:!1},{header:"Tag/Label",render:({label:e})=>e?t.jsx(Ne,{children:e}):"-",enableSorting:!1,accessorKey:"label"}];function Tce(e,s){const n=[];for(const r of e)s.has(r)||n.push(r);return n}const Pce=()=>{const{data:e,isLoading:s}=zL(),{data:n}=qs();if(!e&&!s)return null;const r=Array.from(e??[]).sort((c,l)=>c.region_id.localeCompare(l.region_id)||c.vpc_endpoint_id.localeCompare(l.vpc_endpoint_id)),a=new Set(n==null?void 0:n.map(c=>c.region_id)),o=new Set(r==null?void 0:r.map(c=>c.region_id)),i=Tce(a,o).sort();return t.jsxs(t.Fragment,{children:[r.length>0&&t.jsx("div",{className:n_.vpcListSection,children:t.jsx(Ps,{isLoading:s,columns:kce,rows:r,"aria-label":"Organization VPC endpoints",pageSize:5,appearance:"borderless"})}),i.length>0&&t.jsx("div",{className:n_.vpcListSection,children:t.jsxs("span",{children:["No available VPC endpoints on"," ",i.map((c,l)=>t.jsxs(m.Fragment,{children:[t.jsx(Pe,{className:n_.codeSpan,children:c}),l<i.length-1&&", "]},c))]})})]})},Z0=()=>t.jsxs(Ke,{href:Xc,children:["using our CLI ",t.jsx(q,{size:14,name:"external_link"})]}),Nce=({isAdmin:e})=>e?t.jsxs(P,{size:"s",children:["Manage VPC endpoints ",t.jsx(Z0,{})]}):t.jsxs(P,{size:"s",children:["The organization admin can manage VPC endpoints ",t.jsx(Z0,{})]}),ss={title:"Private Networking",includedInPlansBadge:"Higher-tier plans only",description:"Route traffic from your app to Neon through a protected AWS internal network.",prerequisites:{title:"Prerequisites",sameRegion:"The client application must be deployed in the same AWS region as the Neon database.",dedicatedVPCEndpoint:"A dedicated VPC endpoint to connect the Virtual Private Cloud (VPC) where the client application is deployed.",dedicatedVPCEndpointDocsLink:"View setup instructions",adminPrivileges:"Setting up Private Networking on Neon requires admin privileges"},form:{requiredField:"This field is required",eligiblePlan:{setupViaCliButton:"Setup using CLI",getSupportButton:"Get support"},ineligiblePlan:{messageField:{label:"About your use case",placeholder:"Private Networking is included with higher-tier plans. To trial it on your current plan, please share details about your current use case with our Sales team."},submitButton:"Request trial"},submitSuccess:e=>t.jsxs(t.Fragment,{children:["We will reach out on ",t.jsx(Pe,{children:e})," with next steps."]})}},Ace="_header_mhpba_1",Ece="_prerequisites_mhpba_7",Oce="_icon_mhpba_19",Lce="_eligibleButtons_mhpba_26",km={header:Ace,prerequisites:Ece,icon:Oce,eligibleButtons:Lce},r_=({children:e})=>t.jsxs("li",{children:[t.jsx(q,{size:16,name:"check_flat",className:km.icon}),e]}),$ce=()=>{const{isOrgAdmin:e}=qt();return t.jsxs(t.Fragment,{children:[t.jsx(J,{level:3,size:"h4",children:ss.prerequisites.title}),t.jsxs("ul",{className:km.prerequisites,children:[t.jsx(r_,{children:ss.prerequisites.sameRegion}),t.jsxs(r_,{children:[ss.prerequisites.dedicatedVPCEndpoint,t.jsx("div",{children:t.jsx(M,{href:Xc,children:ss.prerequisites.dedicatedVPCEndpointDocsLink})})]}),e?null:t.jsx(r_,{children:ss.prerequisites.adminPrivileges})]})]})},Rce=()=>{const{isOrgAdmin:e}=qt(),{data:s}=bt(),{orgId:n,org:r}=ae(),{max_vpc_endpoints_per_region:a}=hx(),{trackUiInteraction:o}=k(),{isModalOpen:i,openModal:c,closeModal:l}=it(st.Support),d=Ae(),{submitPrivateNetworkingBetaForm:u}=ml(),p=a>0,h=le("private_networking_new_ui");return s?t.jsx(De,{id:"private-networking",children:t.jsxs($e,{children:[t.jsxs(Te,{className:km.header,children:[ss.title,!p&&t.jsx(Ne,{appearance:"neon",children:ss.includedInPlansBadge})]}),t.jsxs(Xt,{gaps:!0,providerProps:d,onSubmit:async({message:g})=>{try{await u({orgId:n,orgName:r==null?void 0:r.name,email:s.email,message:g}),ze(t.jsx(tt,{children:ss.form.submitSuccess(s.email)})),d.reset({message:""})}catch(f){Y(f)}},children:[t.jsx(P,{as:"p",appearance:"secondary",children:ss.description}),p&&h?t.jsx(Pce,{}):t.jsx($ce,{}),t.jsx(ao,{onRequestClose:()=>{o("support_form_dismissed"),l()},isOpen:i}),!p&&t.jsx(ye,{control:d.control,name:"message",rules:{required:{message:ss.form.requiredField,value:!0},minLength:{message:ss.form.requiredField,value:1}},render:({field:g,fieldState:f})=>{var _;return t.jsx(B,{label:ss.form.ineligiblePlan.messageField.label,error:(_=f.error)==null?void 0:_.message,children:t.jsx(eo,{...g,placeholder:ss.form.ineligiblePlan.messageField.placeholder})})}}),t.jsx(Ns,{children:p?h?t.jsx(Nce,{isAdmin:e}):t.jsxs("div",{className:km.eligibleButtons,children:[e?t.jsx(A,{appearance:"secondary",as:Ke,target:"_blank",icon:"external_link",iconSide:"right",href:Xc,children:ss.form.eligiblePlan.setupViaCliButton}):null,t.jsx(A,{onClick:c,children:ss.form.eligiblePlan.getSupportButton})]}):t.jsx(Ie,{children:ss.form.ineligiblePlan.submitButton})})]})]})}):t.jsx(Se,{})},pp={title:"Transfer projects",description:"Select projects to transfer",confirmationButtonText:"Next",limitReached:e=>`You have at least ${e} projects, please use the Neon API or contact our support team for help.`},X0=200,Bce=({projects:e,onRequestClose:s,onSuccess:n})=>{const r=Ae({defaultValues:{projectIds:[]}}),a=r.watch("projectIds"),o=a.length===(e==null?void 0:e.length),i=m.useCallback(({projectIds:u})=>{n(u)},[n]),c=m.useMemo(()=>[{key:"id",label:t.jsx(ra,{checked:o,onChange:u=>{u.target.checked?r.setValue("projectIds",e.map(p=>p.id)):r.setValue("projectIds",[])},children:"Select all"}),renderValue:({id:u,name:p})=>t.jsx("div",{children:t.jsx(ra,{value:u,...r.register("projectIds"),children:p})})}],[r,o,e]),l=e.length>=X0,d=a.length===0||l;return t.jsxs(gs,{providerProps:r,onSubmit:i,modalProps:{isOpen:!0,title:pp.title,onRequestClose:s},children:[t.jsx(qe,{gaps:!0,children:l?t.jsx(X,{appearance:"error",children:pp.limitReached(X0)}):t.jsxs(t.Fragment,{children:[t.jsx(P,{appearance:"secondary",children:pp.description}),t.jsx(Mn,{cols:c,data:e,maxHeight:350})]})}),t.jsxs(Ee,{children:[t.jsx(ln,{}),t.jsx(Ie,{"data-qa":"projects_transfer_confirmation_submit_button",disabled:d,children:pp.confirmationButtonText})]})]})},ci={title:"Transfer projects",description:"You can only transfer projects to another organization you are a member of. Transfers are instant, with no downtime.",disabledMessageProjectCount:"The organization has no projects",disabledMessagePermissions:"You need additional permissions to transfer projects from this organization",disabledMessageNoDestinationOrgs:"Projects cannot be transferred because you are not a member of any other organizations",disabledMessageVercelOrg:"Project transfers are not currently supported for Vercel-managed organizations",transferButtonText:"Transfer projects"},Mce="_buttonWrapper_nih2t_1",Dce={buttonWrapper:Mce},Uce=(e,s,n,r)=>{if(r)return ci.disabledMessageVercelOrg;if(e===0)return ci.disabledMessageProjectCount;if(!s)return ci.disabledMessagePermissions;if(n===0)return ci.disabledMessageNoDestinationOrgs},Fce=()=>{const{trackUiInteraction:e}=k(),s=nt(),n=it(st.TransferProjectsSelectProjects),r=it(st.TransferProjectsSelectOrg,!1),{isVercelOrg:a}=ae(),{isOrgAdmin:o}=qt(),{data:i,isLoading:c}=qs(),l=(i==null?void 0:i.length)??0,{data:d}=Un(),u=((d==null?void 0:d.length)??1)-1,p=Uce(l,o,u,a),h=p===void 0,[g,f]=m.useState([]);return t.jsxs(De,{id:"transfer",children:[!c&&i&&n.isModalOpen&&t.jsx(Bce,{projects:i,onRequestClose:()=>{n.closeModal(),e("transfer_projects_modal_dismissed")},onSuccess:_=>{const b=i.filter(({id:x})=>_.includes(x));f(b),n.closeModal(),r.openModal()}}),r.isModalOpen&&t.jsx(gP,{projects:g,onRequestClose:()=>{r.closeModal(),e("transfer_projects_modal_dismissed")},onSuccess:_=>{r.closeModal(),e("transfer_projects_modal_confirmed"),s.push(G(C.OrgProjectsList,{orgId:_}))}}),t.jsxs($e,{children:[t.jsx(Te,{children:ci.title}),t.jsx(P,{appearance:"secondary",children:ci.description}),t.jsx(Ns,{children:t.jsx(ne,{content:p,disabled:h,children:t.jsx("div",{className:Dce.buttonWrapper,children:t.jsx(A,{disabled:!h,onClick:()=>{e("org_settings_transfer_submitted"),n.openModal()},"data-qa":"org_settings_transfer_form_submit_button",children:ci.transferButtonText})})})})]})]})},zce=()=>{const{orgId:e,org:s,isVercelOrg:n,isLoading:r}=ae();return r||!e||!s?t.jsx(Se,{}):t.jsxs(t.Fragment,{children:[t.jsx(jce,{orgId:s.id,orgName:s.name}),t.jsx(hA,{}),t.jsx(vce,{orgId:s.id,orgName:s.name}),t.jsx(Rce,{}),!n&&t.jsx(Fce,{}),t.jsx(gce,{orgId:e,orgName:s.name,managedBy:s.managed_by})]})},qce="_drawer_1r7s6_1",Hce={drawer:qce},pA=e=>m.useCallback(s=>{const n=new Date;return!!(e&&pR(s.startOf("day").toDate(),n)===void 0&&mR(s.endOf("day").toDate(),e,n)===void 0)},[e]),mp={lsnPlaceholder:"e.g., 0/1E89C00",timestampPlaceholder:"MM/DD/YYYY hh:mm:ss.ms",timestampSelectLabel:"Timestamp",lsnSelectLabel:"LSN"},Vce="_root_1li1q_1",Wce="_timestampField_1li1q_8",Gce="_lsnField_1li1q_13",Kce="_switchButton_1li1q_18",bd={root:Vce,timestampField:Wce,lsnField:Gce,switchButton:Kce},Bv=({value:e,className:s,onChange:n,allowToSwitch:r=!0})=>{const{project:a}=F(),{trackUiInteraction:o}=k(),i=e.mode===Qe.Timestamp&&e.timestamp&&a&&gR(e.timestamp,a,new Date),c=e.mode===Qe.LSN&&e.lsn&&fR(e.lsn),l=pA(a),d=m.useCallback(u=>{const p=typeof u=="string"?vC(Da(u),Da(ke.Full),!0):u;n({sourceBranch:e.sourceBranch,mode:Qe.Timestamp,timestamp:p.toDate()})},[n,e.sourceBranch]);return t.jsxs("div",{className:V(bd.root,s),children:[e.mode===Qe.Timestamp&&t.jsxs(t.Fragment,{children:[t.jsx(B,{label:mp.timestampSelectLabel,className:bd.timestampField,error:i instanceof _R?i.message:void 0,description:t.jsx(Uj,{}),children:t.jsx(jC,{dateFormat:Da(ke.Date),timeFormat:Da(ke.TimeFull),initialValue:e.timestamp??void 0,placeholder:mp.timestampPlaceholder,isValidDate:l,onChange:d})}),r&&t.jsx(M,{"data-qa":"toggle_PITR",className:bd.switchButton,onClick:()=>{o("branch_restore_pit_lsn_clicked"),n({sourceBranch:e.sourceBranch,mode:Qe.LSN,lsn:null})},children:"LSN"})]}),e.mode===Qe.LSN&&t.jsxs(t.Fragment,{children:[t.jsx(B,{label:mp.lsnSelectLabel,className:bd.lsnField,error:c?c.message:void 0,description:t.jsx(Uj,{}),descriptionNotVisible:!0,children:t.jsx(ce,{value:e.lsn??void 0,onChange:u=>n({sourceBranch:e.sourceBranch,mode:Qe.LSN,lsn:u.target.value}),placeholder:mp.lsnPlaceholder})}),r&&t.jsx(M,{"data-qa":"toggle_PITR",className:bd.switchButton,onClick:()=>{o("branch_restore_pit_timestamp_clicked"),n({sourceBranch:e.sourceBranch,mode:Qe.Timestamp,timestamp:null})},children:"Timestamp"})]})]})},Qce="_container_12fg1_1",Yce="_restoreFromContainer_12fg1_9",Jce="_restoreToContainer_12fg1_10",Zce="_dropdown_12fg1_19",Xce="_actions_12fg1_23",Bo={container:Qce,restoreFromContainer:Yce,restoreToContainer:Jce,dropdown:Zce,actions:Xce},cr={unarchiveWarning:({name:e})=>t.jsxs(t.Fragment,{children:["This action will unarchive ",t.jsx(Pe,{children:e})," and the restoration source branch, if applicable."]}),restoreFromMessage:(e,s,n)=>t.jsxs(t.Fragment,{children:[t.jsx(yu,{branch:e})," will be restored"," ",s?t.jsx(t.Fragment,{children:"to its past state"}):t.jsxs(t.Fragment,{children:["from ",t.jsx(yu,{branch:n.sourceBranch})]})]}),restoreToTimestamp:(e,s,n)=>t.jsxs(t.Fragment,{children:[e," ",s?"at":"to the state of"," ",t.jsx("code",{children:xe(n,ke.BranchDateTimeFormat)})]}),restoreToLsn:(e,s,n)=>t.jsxs(t.Fragment,{children:[e," ",s?"at":"to the state of"," ",t.jsx("code",{children:n})]}),restoreToHead:e=>t.jsxs(t.Fragment,{children:[e," at its current state"]}),restoreDatabasesMessage:e=>t.jsxs(t.Fragment,{children:["Databases to be restored: ",e]}),restoreRenamedMessage:e=>t.jsxs(t.Fragment,{children:["This branch will be kept and renamed to ",t.jsx("code",{children:e})]}),resetPasswordsForSameBranch:e=>{switch(e.mode){case Qe.Timestamp:return t.jsxs(t.Fragment,{children:["Any Postgres role deleted between now and"," ",t.jsx("code",{children:xe(e.timestamp,ke.BranchDateTimeFormat)})," ","will get their passwords reset"]});case Qe.LSN:return t.jsxs(t.Fragment,{children:["Any Postgres role deleted between now and"," ",t.jsx("code",{children:e.lsn})," will get their passwords reset"]});case Qe.Head:return null}},restoreUndoMessage:e=>t.jsxs(t.Fragment,{children:["You can undo the restore as long as ",t.jsx("code",{children:e})," is retained"]}),storageBillMessage:e=>t.jsxs(t.Fragment,{children:["Keeping ",t.jsx("code",{children:e})," will affect your storage bill"]})},ele="_header_cioj6_1",tle="_list_cioj6_11",sle="_message_cioj6_18",nle="_icon_cioj6_35",Qp={header:ele,list:tle,message:sle,icon:nle},rle=({branch:e,restoreTo:s})=>{const n=e.id===s.sourceBranch.id,r=cr.restoreFromMessage(e,n,s);switch(s.mode){case Qe.Timestamp:return t.jsx(t.Fragment,{children:cr.restoreToTimestamp(r,n,s.timestamp)});case Qe.LSN:return t.jsx(t.Fragment,{children:cr.restoreToLsn(r,n,s.lsn)});case Qe.Head:return t.jsx(t.Fragment,{children:cr.restoreToHead(r)})}},_c=({children:e,iconName:s})=>t.jsxs("li",{children:[t.jsx(q,{name:s,size:16,className:Qp.icon}),t.jsx("div",{children:e})]}),mA=({restoreTo:e})=>{var o,i;const{list:s}=un(),{branch:n}=Ei();if(!n)return;const r=n.id===e.sourceBranch.id,a=`${n.name}_old_{${bR}}`;return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:Qp.header,children:[t.jsx(q,{name:"restore",size:40}),n.current_state==="archived"&&t.jsx(X,{appearance:"warning",children:cr.unarchiveWarning(n)}),t.jsx("div",{className:Qp.message,children:t.jsx(rle,{branch:n,restoreTo:e})})]}),t.jsxs("ul",{className:Qp.list,children:[s.length>1?t.jsx(_c,{iconName:"check_flat",children:cr.restoreDatabasesMessage(s.map((c,l)=>t.jsxs(t.Fragment,{children:[l===0?null:", ",t.jsx("code",{children:c.name},c.id)]})))}):null,(o=e.sourceBranch)!=null&&o.protected&&r?t.jsx(_c,{iconName:"check_flat",children:cr.resetPasswordsForSameBranch(e)}):null,t.jsx(_c,{iconName:"check_flat",children:cr.restoreRenamedMessage(a)}),t.jsx(_c,{iconName:"check_flat",children:cr.restoreUndoMessage(a)}),t.jsx(_c,{iconName:"billing",children:cr.storageBillMessage(a)}),(i=e.sourceBranch)!=null&&i.protected&&!r?t.jsxs(_c,{iconName:"check_flat",children:["No Postgres role passwords from"," ",t.jsx(yu,{branch:e.sourceBranch})," will be used on"," ",t.jsx(yu,{branch:n})]}):null]})]})},ale="_container_1aj9l_1",ole={container:ale},ile=({restoreTo:e,onRequestClose:s,...n})=>{const{restore:r,isRestoring:a}=Ei(),{trackUiInteraction:o}=k();return t.jsx(la,{...n,"aria-label":"Branch Restore",size:"m",onRequestClose:s,children:t.jsx(da,{title:"Branch Restore",footer:t.jsxs(t.Fragment,{children:[t.jsx(A,{appearance:"secondary",size:"l",onClick:()=>{o("branch_restore_restore_cancelled"),s==null||s()},children:"Cancel"}),t.jsx(A,{disabled:a,appearance:"primary",size:"l",onClick:()=>{o("branch_restore_restore_confirmed"),r()},children:"Restore"})]}),children:t.jsx("div",{className:ole.container,children:t.jsx(mA,{restoreTo:e})})})})},cle=({currentBranch:e,compareSource:s,onChange:n,changeableCurrentBranch:r,allowRestore:a=!1,...o})=>{var S;const{data:{selectOptions:i}}=qu({projectId:o.project.id,branchId:(e==null?void 0:e.id)??""}),{trackUiInteraction:c}=k(),[l,d]=m.useState(!1),[u,p]=m.useState(o.compareTo),[h,g]=m.useState(null),[f,_]=m.useState(e),[b,x]=m.useState((s==null?void 0:s.branch)??e),{selectOptions:v}=xt(),j=m.useMemo(()=>(s==null?void 0:s.mode)===Zd.Head?v.filter(({value:T})=>b.id!==T):v,[b,v,s==null?void 0:s.mode]),y=m.useMemo(()=>v.filter(({value:T})=>f.id!==T),[f,v]),w=m.useMemo(()=>{if(h&&!Ku(u,o.project,new Date))return{projectId:o.project.id,currentBranch:f,database:h.database,compareSource:{...XC(u),branch:b}}},[o.project,b,u,h,f]);return t.jsxs(t.Fragment,{children:[t.jsx(yC,{projectId:o.project.id,branchId:(S=u.sourceBranch)==null?void 0:S.id,children:t.jsx(ile,{isOpen:l,restoreTo:u,onRequestClose:()=>d(!1)})}),t.jsxs("div",{className:Bo.container,children:[t.jsxs("div",{className:Bo.restoreToContainer,children:[t.jsx(B,{label:zl.baseBranchLabel,className:Bo.dropdown,description:zl.baseBranchDesc,children:t.jsx(am,{disabled:!r,options:j,value:j.find(T=>{var E;return((E=T.branch)==null?void 0:E.id)===f.id}),onChange:T=>{T&&T.branch&&(c("schema_diff_form_branch_changed"),_(T.branch))}})}),t.jsx(B,{label:zl.databaseSelectLabel,className:Bo.dropdown,children:t.jsx(gI,{projectId:o.project.id,value:h,options:i,disabled:i.length<=1,onChange:(T,E)=>{E||c("schema_diff_form_database_changed"),g(T)},canCreateDatabase:!1})})]}),t.jsxs("div",{className:Bo.restoreFromContainer,children:[f.id!==b.id&&t.jsx(B,{label:zl.compareBranchLabel,className:Bo.dropdown,description:(s==null?void 0:s.mode)===Zd.Head?zl.compareBranchDesc:"",children:t.jsx(am,{options:y,value:y.find(T=>{var E;return((E=T.branch)==null?void 0:E.id)===b.id}),onChange:T=>{T&&T.branch&&(c("schema_diff_form_branch_changed"),x(T.branch))}})}),(s==null?void 0:s.mode)!==Zd.Head&&t.jsx(Bv,{value:u,allowToSwitch:!1,onChange:T=>{c("schema_diff_form_pit_changed"),p(T)}})]}),t.jsxs("div",{className:Bo.actions,children:[t.jsx(A,{disabled:!w,appearance:"primary",onClick:()=>{c("schema_diff_form_compare_button_clicked"),n(w)},children:"Compare"}),a&&t.jsx(A,{disabled:!w,appearance:"secondary",icon:"arrow_right",iconSide:"right",onClick:()=>{d(!0)},children:"Restore"})]})]})]})},Mv=({currentBranch:e,changeableCurrentBranch:s,...n})=>{const{trackUiInteraction:r}=k(),{list:a}=un(),{project:o}=F(),[i,c]=m.useState(e),[l,d]=m.useState(a[0]),[u,p]=m.useState();return m.useEffect(()=>{n.isOpen&&r("schema_diff_drawer_opened")},[n.isOpen,r]),m.useEffect(()=>{n.compareTo.sourceBranch&&!Ku(n.compareTo,o,new Date)&&p({...XC(n.compareTo),branch:n.compareTo.sourceBranch})},[n.compareTo,o]),!l&&a.length>0&&d(a[0]),!o||!i||!n.isOpen?null:t.jsx(la,{...n,"aria-label":"Schema Diff",className:Hce.drawer,children:t.jsxs(da,{title:"Schema Diff",children:[t.jsx(cle,{...n,changeableCurrentBranch:s,project:o,currentBranch:i,compareSource:u,onChange:h=>{h&&(c(h.currentBranch),d(h.database),p(h.compareSource))}}),u&&l&&t.jsx(t.Fragment,{children:t.jsx(eI,{projectId:o.id,currentBranch:i,database:l,compareSource:u})})]})})},lle=e=>{const[s,n]=m.useState(!1),{project:r}=F(),{trackUiInteraction:a}=k(),o=!e.currentBranch||!r||Ku(e.compareTo,r,new Date);return t.jsxs(t.Fragment,{children:[!o&&t.jsx(Mv,{isOpen:s,onRequestClose:()=>{a("schema_diff_drawer_dismissed"),n(!1)},allowRestore:!0,...e}),t.jsx(A,{appearance:"secondary",disabled:!!o,icon:"schema",onClick:()=>{a("schema_diff_button_clicked"),n(!0)},children:"Schema Diff"})]})},Qb={title:"Branch Expiration",button:"Confirm",cancel:"Cancel"},dle="_root_144m9_1",ule="_footer_144m9_8",eS={root:dle,footer:ule},hle=({branch:e,onSuccess:s,onFail:n,closeModal:r})=>{const a=_e(),o=Ts({defaultValues:{ttlEnabled:!!e.expires_at,expiresAt:e.expires_at?new Date(e.expires_at):mt().add(1,"day").toDate()},mode:"onChange",shouldUnregister:!0}),i=l=>{var d;return W.updateProjectBranch(e.project_id,e.id,{branch:{expires_at:l.ttlEnabled?(d=l.expiresAt)==null?void 0:d.toISOString():null}}).then(({data:u})=>{a.invalidateQueries({queryKey:wC(e.project_id,e.id)}),a.invalidateQueries({queryKey:wl({projectId:e.project_id})}),s&&s(u.branch)}).catch(u=>{n&&n(u)})},c="branch_update_ttl_form";return t.jsx(es,{...o,children:t.jsx(Ht,{id:c,onSubmit:async l=>{l.preventDefault(),await o.handleSubmit(i)(),r()},children:t.jsxs("div",{className:eS.root,children:[t.jsx(qL,{trackUiInteractionEvent:"branch_list_ttl_updated"}),t.jsxs("footer",{className:eS.footer,children:[t.jsx(A,{form:c,disabled:Object.keys(o.formState.errors).length>0,type:"submit",children:Qb.button}),t.jsx(A,{appearance:"secondary",onClick:()=>{r()},children:Qb.cancel})]})]})})})},gA=({isOpen:e,onClose:s,branch:n})=>t.jsx(It,{title:Qb.title,isOpen:e,onRequestClose:s,children:t.jsx(hle,{branch:n,closeModal:s})}),Wt={error:"useBranchActions must be used within a BranchActionsProvider",createChild:"Create child branch",ttlAction:e=>e?"Update expiration":"Set expiration",ttlActionTooltip:e=>e?"Update the expiration date of this branch":"Set the expiration date of this branch",ttlBranchesChildrenTooltip:"Branches with an expiration date cannot have child branches",ttlBranchesWithChildrenTooltip:"Branches with children cannot have an expiration date",ttlDisabledTooltip:"Default and Protected branches cannot have an expiration date.",renameAction:"Rename",setAsDefault:{menuItemLabel:"Set as default",confirm:{header:"Set as default",text:e=>t.jsxs(t.Fragment,{children:[t.jsx("code",{children:e})," will be set as your default branch."]}),helpText:"The compute endpoint associated with the default branch remains accessible if you exceed project limits, ensuring uninterrupted access to data on the default branch.",confirmButtonText:"Set as default"}},disabledTooltip:{defaultBranchTooltip:"You can't make this branch default. It's already a default branch.",ttlBranchTooltip:"Branches with an expiration date cannot be set as default"},protected:{menuItemLabel:e=>`Set as ${e?"unprotected":"protected"}`,confirm:{header:e=>`Set as ${e?"unprotected":"protected"}`,confirmButtonText:e=>`Set as ${e?"unprotected":"protected"}`},successToast:e=>t.jsxs(t.Fragment,{children:[t.jsx("code",{children:e.name})," is now set as"," ",e.protected?"a protected":"an unprotected"," branch."]})},schemaDiff:{menuItemLabel:"Compare to parent"}},ple=({branch:e,onSuccess:s,onFail:n,children:r})=>{const a=_e(),o=Ts({defaultValues:{name:e.name},shouldUnregister:!0}),i=l=>W.updateProjectBranch(e.project_id,e.id,{branch:{name:l.name}}).then(({data:d})=>{a.invalidateQueries({queryKey:wC(e.project_id,e.id)}),a.invalidateQueries({queryKey:wl({projectId:e.project_id})}),s&&s(d.branch)}).catch(d=>{n&&n(d)});return t.jsx(es,{...o,children:t.jsx(Ht,{id:"branch_rename_form",onSubmit:o.handleSubmit(i),children:r})})},mle=({branch:e,isOpen:s,onSuccess:n,onClose:r})=>t.jsx(It,{title:"Rename the branch",isOpen:s,onRequestClose:r,children:t.jsxs(ple,{branch:e,onSuccess:a=>{n==null||n(a)},onFail:Y,children:[t.jsx(qe,{children:t.jsx(jB,{})}),t.jsxs(Ee,{children:[t.jsx(dn,{appearance:"secondary"}),t.jsx(Ie,{disablePristine:!0,children:"Save"})]})]})}),bc={menuItemLabel:"Delete",defaultBranchTooltip:"You can't delete the default branch. To delete this branch, set another branch as the default.",protectedBranchTooltip:"You can't delete protected branches. To delete this branch, change its status to unprotected.",confirm:{header:"Delete the branch?",confirmButtonText:"Delete",warning:e=>t.jsxs(t.Fragment,{children:["This will permanently delete the branch ",t.jsx("code",{children:e}),". Are you sure you want proceed?"]})}},gle=()=>{const{confirm:e}=Ye(),s=m.useCallback(async(n,r)=>{if(await e({header:bc.confirm.header,appearance:"danger",confirmButtonText:bc.confirm.confirmButtonText,text:t.jsx(X,{appearance:"error",children:bc.confirm.warning(n.name)})}))try{await W.deleteProjectBranch(n.project_id,n.id),r==null||r()}catch(o){Y(o)}},[e]);return m.useCallback((n,r)=>{const a=n.default||n.protected;let o="";return n.default?o=bc.defaultBranchTooltip:n.protected&&(o=bc.protectedBranchTooltip),{label:bc.menuItemLabel,disabled:a,tooltip:o,icon:"trash",onClick:()=>s(n,r)}},[s])},Yb={menuItemLabel:"Reset from parent",tooltipContent:e=>e.default?"You can't reset the default branch. Set another branch as default, then try again.":e.protected?"You can't reset protected branches. Unprotect this branch first, then try again.":e.parent_id?null:"You can't reset a root branch. It has no parent."},fle=()=>{const e=SC(),{trackUiInteraction:s}=k();return m.useCallback((n,r)=>{const a=Yb.tooltipContent(n),o=a!==null;return{label:Yb.menuItemLabel,disabled:o,icon:"branch_reset",tooltip:a??void 0,onClick:()=>{s("branch_reset_to_parent_reset_clicked"),e(n,r)}}},[e,s])},_le=e=>m.useCallback(s=>{if(s.parent_id)return{label:Wt.schemaDiff.menuItemLabel,icon:"schema",onClick:()=>{e(s)}}},[e]),ble="_mainSection_1q27m_1",xle="_secondarySection_1q27m_9",tS={mainSection:ble,secondarySection:xle},vle=()=>{const{confirm:e}=Ye(),s=m.useCallback(async(n,r)=>{if(await e({header:Wt.setAsDefault.confirm.header,text:t.jsxs(t.Fragment,{children:[t.jsx("div",{className:tS.mainSection,children:Wt.setAsDefault.confirm.text(n.name)}),t.jsx("div",{className:tS.secondarySection,children:Wt.setAsDefault.confirm.helpText})]}),confirmButtonText:Wt.setAsDefault.confirm.confirmButtonText,hint:t.jsxs("span",{children:["See"," ",t.jsx(M,{href:"https://neon.com/docs/manage/branches",openInNewTab:!0,children:"Default branch"})," ","for more information."]})}))try{const{data:o}=await W.setDefaultProjectBranch(n.project_id,n.id);r==null||r(o.branch)}catch(o){Y(o)}},[e]);return m.useCallback((n,r)=>{const a=n.default||!!n.expires_at;let o="";return n.default?o=Wt.disabledTooltip.defaultBranchTooltip:n.expires_at&&(o=Wt.disabledTooltip.ttlBranchTooltip),{label:Wt.setAsDefault.menuItemLabel,disabled:a,tooltip:o,icon:"check_hex",onClick:()=>s(n,r)}},[s])},jle={unarchiveAlert:"This branch is archived. Setting it to protected will unarchive it."},yle="_mainSection_1tehd_1",wle="_listHeading_1tehd_17",Sle="_list_1tehd_17",Cle="_listItem_1tehd_29",Ile="_icon_1tehd_35",ni={mainSection:yle,listHeading:wle,list:Sle,listItem:Cle,icon:Ile},xd=({children:e})=>t.jsxs("li",{className:ni.listItem,children:[t.jsx(q,{name:"check_flat",size:16,className:ni.icon}),t.jsx("span",{children:e})]}),fA=({branch:e})=>t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:ni.mainSection,children:[t.jsx(q,{"aria-label":"Protected branch",role:"img",name:"protect",size:40}),t.jsxs("span",{children:[t.jsx("code",{children:e.name})," will be set as"," ",e.protected?"an unprotected":"a protected"," branch."]})]}),!e.protected&&t.jsxs(t.Fragment,{children:[e.current_state==="archived"&&t.jsx(X,{appearance:"info",children:jle.unarchiveAlert}),t.jsxs("section",{children:[t.jsx(J,{level:6,className:ni.listHeading,children:"Protected branches:"}),t.jsxs("ul",{className:ni.list,children:[t.jsx(xd,{children:"Can't be deleted"}),t.jsx(xd,{children:"Can't be archived"}),t.jsx(xd,{children:"Can't be reset"})]})]}),t.jsxs("section",{children:[t.jsx(J,{level:6,className:ni.listHeading,children:"Also:"}),t.jsxs("ul",{className:ni.list,children:[t.jsx(xd,{children:"Projects with a protected branch can't be deleted"}),t.jsx(xd,{children:"Computes for protected branches can't be deleted"})]})]}),t.jsxs("section",{children:["You can also restrict your IP Allow list to protected branches only. See"," ",t.jsx(M,{openInNewTab:!0,"aria-label":"IP Allow configuration",href:"https://neon.com/docs/manage/projects#configure-ip-allow",icon:"external_link",children:"IP Allow"})]})]})]}),kle=()=>{const e=fI(),{confirm:s}=Ye(),{trackUiInteraction:n}=k(),r=m.useCallback(async(a,o)=>{if(n(a.protected?"branch_unprotect_clicked":"branch_protect_clicked"),!await s({header:Wt.protected.confirm.header(a.protected),text:t.jsx(fA,{branch:a}),confirmButtonText:Wt.protected.confirm.confirmButtonText(a.protected),hint:t.jsxs("span",{children:["See"," ",t.jsx(M,{href:Um,openInNewTab:!0,children:"Protected branches"})," ","for more information."]})})){n(a.protected?"branch_unprotect_cancelled":"branch_protect_cancelled");return}n(a.protected?"branch_unprotect_confirmed":"branch_protect_confirmed");try{const{data:{branch:c}}=await W.updateProjectBranch(a.project_id,a.id,{branch:{protected:!a.protected}});pe(Wt.protected.successToast(c)),o(c)}catch(c){Y(c)}},[n,s]);return m.useCallback((a,o)=>{const{enabled:i,reason:c}=e(a);return{label:Wt.protected.menuItemLabel(a.protected),disabled:!i,tooltip:c,icon:"protect",onClick:()=>r(a,o)}},[e,r])},_A=m.createContext(null),Dv=({children:e,refreshBranches:s,onDeleteBranch:n})=>{const{trackUiInteraction:r}=k(),[a,o]=m.useState(null),{branchesById:i}=xt(),c=m.useCallback(h=>{o({type:"rename-modal",branch:h})},[]),l=m.useCallback(h=>{o({type:"ttl-modal",branch:h})},[]),d=m.useCallback(h=>{o({type:"create-child-branch",branch:h})},[]),u=m.useCallback(h=>{r("schema_diff_link_clicked"),o({type:"schema-diff-drawer",branch:h})},[r]),p=m.useMemo(()=>({renameBranch:c,adjustBranchTTL:l,refreshBranches:s,onDeleteBranch:n,schemaDiff:u,createChildBranch:d}),[c,l,s,n,u,d]);return t.jsxs(_A.Provider,{value:p,children:[(a==null?void 0:a.type)==="ttl-modal"&&t.jsx(gA,{branch:a.branch,isOpen:!0,onClose:()=>o(null)}),(a==null?void 0:a.type)==="rename-modal"&&t.jsx(mle,{branch:a.branch,isOpen:!0,onClose:()=>o(null),onSuccess:()=>{s(),o(null)}}),(a==null?void 0:a.type)==="schema-diff-drawer"&&t.jsx(Mv,{currentBranch:a.branch.parent_id?i[a.branch.parent_id]??null:null,compareTo:{sourceBranch:a.branch,mode:Qe.Head},onRequestClose:()=>(r("schema_diff_drawer_dismissed"),o(null)),isOpen:!0,changeableCurrentBranch:!0}),(a==null?void 0:a.type)==="create-child-branch"&&t.jsx(_I,{initialParentId:a.branch.id,isOpen:!0,onCancel:()=>o(null),onSuccess:()=>{s(),o(null)}}),e]})},bA=({omitCreateChildBranch:e,omitToggleProtectedBranch:s}={})=>{const n=m.useContext(_A),r=le("ttl_branches"),{branches:a}=xt();if(n==null)throw new Error(Wt.error);const{renameBranch:o,refreshBranches:i,onDeleteBranch:c,createChildBranch:l,adjustBranchTTL:d}=n,u=fle(),p=gle(),h=_le(n.schemaDiff),g=vle(),f=kle();return m.useCallback(_=>{const b=!!_.expires_at,x=_.protected,v=_.default,j=HL(_,a).length>0;return ot([!e&&{label:Wt.createChild,onClick:()=>l(_),icon:"branch",disabled:b,tooltip:b?Wt.ttlBranchesChildrenTooltip:void 0},r&&{label:Wt.ttlAction(b),disabled:x||v||j,tooltip:j?Wt.ttlBranchesWithChildrenTooltip:x||v?Wt.ttlDisabledTooltip:void 0,onClick:()=>{d(_)},icon:"autosuspend"},u(_,i),h(_),!s&&f(_,i),g(_,i),{label:Wt.renameAction,onClick:()=>o(_),icon:"edit"},p(_,()=>{i(),c==null||c()})])},[o,i,u,p,f,g,c,h,e,s,l,d,r,a])},Tle="_tooltip_1lmrz_1",Ple="_label_1lmrz_5",sS={tooltip:Tle,label:Ple},bg=({endpoint:e})=>t.jsx(ne,{placement:"bottom-start",content:t.jsx("div",{className:sS.tooltip,children:rm(e)?t.jsxs(t.Fragment,{children:["Autoscaling is on.",t.jsx("br",{}),"Min: ",$n(e.autoscaling_limit_min_cu),t.jsx("br",{}),"Max: ",$n(e.autoscaling_limit_max_cu)]}):$n(e.autoscaling_limit_max_cu)}),children:t.jsx("span",{className:sS.label,children:rm(e)?t.jsxs(t.Fragment,{children:[Dp(e.autoscaling_limit_min_cu)," ↔"," ",Dp(e.autoscaling_limit_max_cu)," CU"]}):t.jsxs(t.Fragment,{children:[Dp(e.autoscaling_limit_max_cu)," CU"]})})}),Nle="_root_14x9h_1",Ale={root:Nle},xA=({branchId:e,endpoints:s})=>{const{project:n}=F(),[r,a]=m.useState(!1),o=m.useMemo(()=>s.find(i=>i.branch_id===e&&_r(i)),[s,e]);return o?t.jsxs(t.Fragment,{children:[r&&n&&t.jsx(uo,{isOpen:!0,mode:"edit",project:n,endpoint:o,onRequestClose:()=>a(!1)}),t.jsx(M,{onClick:()=>{a(!0)},children:t.jsxs("div",{className:Ale.root,children:[t.jsx(bg,{endpoint:o}),t.jsx(Tx,{endpoint:o})]})})]}):t.jsx(t.Fragment,{children:"-"})},vA=({branch:e,className:s})=>!e||e.init_source!=="schema-only"&&e.init_source!=="parent-schema"?null:t.jsx(Ne,{className:s,children:"schema-only"}),Ele="_icon_1yii0_1",Ole="_tooltipContent_1yii0_6",Lle="_tooltipLink_1yii0_13",a_={icon:Ele,tooltipContent:Ole,tooltipLink:Lle},$le=({branch:e,className:s})=>{if(!e||!e.expires_at)return null;const n=t.jsxs("div",{className:a_.tooltipContent,children:[t.jsxs(P,{size:"m",children:["Will automatically delete on ",xe(e.expires_at)]}),t.jsx(P,{size:"s",children:"This branch cannot be protected, set as default, or have child branches. Expiration resets when resetting from parent."}),t.jsx(M,{openInNewTab:!0,href:CC,className:a_.tooltipLink,children:"Learn more"})]});return t.jsx(ne,{appearance:"rich",placement:"bottom",content:n,maxWidth:310,children:t.jsx(q,{"aria-label":"Branch with expiration date",role:"img",className:V(s,a_.icon),name:"autosuspend",size:16})})},o_={title:e=>t.jsxs(t.Fragment,{children:["Archived on"," ",xe(e,ke.BranchDateTimeFormat)," due to inactivity"]}),description:"This branch was archived to minimize storage costs. You can unarchive it by connecting to the branch or querying it.",learnMore:"Learn more"},Rle="_icon_zexke_1",Ble="_tooltip_zexke_5",nS={icon:Rle,tooltip:Ble},Mle=({branch:e,className:s})=>e.current_state!=="archived"?null:t.jsx(ne,{appearance:"rich",content:t.jsxs("div",{className:nS.tooltip,children:[t.jsx(J,{level:6,children:o_.title(e.state_changed_at)}),t.jsx("p",{children:o_.description}),t.jsx(M,{href:kx,openInNewTab:!0,children:o_.learnMore})]}),children:t.jsx(q,{"data-qa":"archived-branch-icon","aria-label":"Archived branch",role:"img",className:V(s,nS.icon),name:"backup",size:16})}),Dle="_name_c8pf7_1",Ule="_wrapper_c8pf7_8",ka={name:Dle,wrapper:Ule,default:"_default_c8pf7_14"},jA=({branch:e,searchWords:s})=>t.jsxs("div",{className:ka.wrapper,children:[t.jsx(QC,{title:e.name,className:ka.name,searchWords:s,textToHighlight:e.name}),t.jsx(IC,{className:ka.default,branch:e}),t.jsx(vA,{className:ka.primaryButton,branch:e}),t.jsx(kC,{className:ka.default,branch:e}),t.jsx(Mle,{className:ka.default,branch:e}),t.jsx($le,{className:ka.default,branch:e})]}),Fle=({branch:e,branchesById:s})=>{const n=e.restored_from?void 0:e.parent_id,r=n?s[n]:void 0,{branch:a,isLoading:o}=VL(e.project_id,r?void 0:n);if(o)return null;const i=r||a;return t.jsx("div",{title:n?i==null?void 0:i.name:void 0,className:ka.name,children:n?i==null?void 0:i.name:"-"})},zle="_createdBy_arhci_1",qle="_hasAnnotations_arhci_6",Hle="_border_arhci_11",Vle="_source_arhci_15",Wle="_sourceEmail_arhci_22",Mo={createdBy:zle,hasAnnotations:qle,border:Hle,source:Vle,sourceEmail:Wle},Gle=e=>e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.trim()):!1,hu=({createdBy:e,iconOnly:s=!1,ref:n})=>{if(e==="vercel"||e==="github"){const r=e==="vercel"?"Vercel":"GitHub";return t.jsxs("span",{className:V(Mo.createdBy,Mo.hasAnnotations),ref:n,"data-qa":"created-by-trigger",children:[t.jsx(q,{name:e,size:16}),s?null:t.jsx("span",{className:V(Mo.source,Mo.border),title:r,children:r})]})}return t.jsx("span",{ref:n,className:Mo.createdBy,"data-qa":"created-by-trigger",children:e?t.jsxs(t.Fragment,{children:[t.jsx(Uu,{image:e.image,name:e.name,size:"s"}),s?null:t.jsx("span",{className:Gle(e.name)?Mo.sourceEmail:Mo.source,title:e.name,children:e.name})]}):"-"})},Kle="_popupContent_exuf0_1",Qle={popupContent:Kle},yA=({content:e,children:s})=>t.jsx(ne,{appearance:"rich",maxWidth:350,placement:"bottom",content:t.jsx("div",{className:Qle.popupContent,children:e}),children:s}),Yle="_flex_nq8rf_1",Jle="_nowrap_nq8rf_9",Gd={flex:Yle,nowrap:Jle},xg=({username:e,displayName:s,href:n,nowrap:r})=>{const a=t.jsxs(t.Fragment,{children:[t.jsx(Uu,{name:s??e,size:"s"}),s??e]});return n?t.jsx(M,{openInNewTab:!0,href:n,className:V(Gd.flex,{[Gd.nowrap]:r}),children:a}):t.jsx(P,{className:V(Gd.flex,{[Gd.nowrap]:r}),children:a})},Rl=({href:e,iconName:s,linkText:n})=>t.jsx(t.Fragment,{children:t.jsxs(P,{className:Gd.flex,children:[t.jsx(q,{name:s,size:16}),t.jsx(M,{openInNewTab:!0,href:e,children:n})]})}),Zle=({annotation:e})=>{const{value:s}=e,n=s["github-pr-number"],r=s["github-pr-title"],a=s["github-commit-repo"];if(!a||!n||!r)return null;const o=`https://github.com/${a}/pull/${n}`;return t.jsx(Rl,{href:o,linkText:r,iconName:"github_pr"})},Xle=({annotation:e})=>{const{value:s}=e,n=s["github-commit-repo"];if(!n)return null;const r=`https://github.com/${n}`;return t.jsx(Rl,{href:r,linkText:n,iconName:"github_mono"})},ede=({annotation:e,iconOnly:s})=>t.jsx(yA,{content:t.jsxs(t.Fragment,{children:[t.jsx(xg,{username:e.value["github-commit-author-login"]}),t.jsx(Zle,{annotation:e}),t.jsx(Xle,{annotation:e})]}),children:t.jsx(hu,{iconOnly:s,createdBy:"github"})}),tde={github:"github_mono",bitbucket:"bitbucket",gitlab:"gitlab"},sde=({annotation:e})=>{const{value:s}=e,n=s["vercel-commit-git-provider"],r=s["vercel-commit-ref"],a=s["vercel-commit-repo"],o=m.useMemo(()=>{switch(n){case"github":return`https://github.com/${a}/tree/${r}`;case"bitbucket":return`https://bitbucket.org/${a}/branch/${r}`;case"gitlab":return`https://gitlab.com/${a}/-/tree/${r}`;default:return null}},[n,a,r]);return!o||!r||!a?null:t.jsx(Rl,{href:o,iconName:"branch",linkText:s["vercel-commit-ref"]})},nde=({annotation:e})=>{const{value:s}=e,n=s["vercel-commit-git-provider"],r=s["vercel-commit-repo"],a=s["vercel-change-request-id"],o=m.useMemo(()=>{switch(n){case"github":return`https://github.com/${r}/pull/${a}`;case"bitbucket":return`https://bitbucket.org/${r}/pull-requests/${a}`;case"gitlab":return`https://gitlab.com/${r}/-/merge_requests/${a}`;default:return null}},[n,r,a]);return!o||!r?null:t.jsx(Rl,{href:o,iconName:"github_pr",linkText:"Pull Request"})},rde=({annotation:e})=>{const{value:s}=e,n=s["vercel-commit-git-provider"],r=s["vercel-commit-repo"],a=m.useMemo(()=>{switch(n){case"github":return`https://github.com/${r}`;case"bitbucket":return`https://bitbucket.org/${r}`;case"gitlab":return`https://gitlab.com/${r}`;default:return null}},[n,r]);return!a||!r?null:t.jsx(Rl,{href:a,iconName:tde[n]??"github",linkText:r})},ade=({annotation:e})=>{const s=e.value["vercel-branch-alias"];if(!s)return null;const n=s.startsWith("https://")?s:`https://${s}`;return t.jsx(Rl,{href:n,linkText:"Vercel Preview",iconName:"vercel"})},ode=({annotation:e,iconOnly:s})=>{const n=e.value["vercel-change-request-id"];return t.jsx(yA,{content:t.jsxs(t.Fragment,{children:[t.jsx(xg,{username:e.value["vercel-commit-author-login"],displayName:e.value["vercel-commit-author-name"]}),t.jsx(ade,{annotation:e}),n?t.jsx(nde,{annotation:e}):t.jsx(sde,{annotation:e}),t.jsx(rde,{annotation:e})]}),children:t.jsx(hu,{iconOnly:s,createdBy:"vercel"})})},Tm=({branch:e,annotation:s,iconOnly:n})=>{if(e.creation_source==="vercel")return t.jsx(t.Fragment,{children:s?t.jsx(ode,{annotation:s,iconOnly:n}):t.jsx(hu,{iconOnly:n,createdBy:"vercel"})});if(s&&WL(e,s))return t.jsx(ede,{annotation:s,iconOnly:n});const a=e.created_by;return n?t.jsx(ne,{content:a==null?void 0:a.name,children:t.jsx(hu,{iconOnly:!0,createdBy:a})}):t.jsx(hu,{createdBy:a})},ide=({endpoints:e,annotations:s={},branchesById:n,searchValue:r})=>{const a=le("growth_hide_active_hours"),o=le("branches_list_server_side_sorting"),i=m.useMemo(()=>o?{}:{enableSorting:!0,sortingFn:"protectedBranchesFirst"},[o]);return m.useMemo(()=>[{id:"branch_name",header:"Branch",accessorKey:"name",size:250,maxSize:300,enableSorting:!0,rowHeader:!0,sortingFn:"protectedBranchesFirst",render:c=>t.jsx(jA,{branch:c,searchWords:r?[r]:[]})},{header:"Parent",id:"parent_branch_name",size:125,maxSize:150,...i,accessorFn:c=>{var l;return c.parent_id&&!c.restored_from?(l=n[c.parent_id])==null?void 0:l.name:void 0},render:c=>t.jsx(Fle,{branch:c,branchesById:n})},a?{id:"compute_hours",header:"Compute hours",...i,accessorFn:c=>c.compute_time_seconds,render:c=>Ya(c.compute_time_seconds)}:{id:"active_time",header:"Active time",...i,accessorFn:c=>c.active_time_seconds,render:c=>Ya(c.active_time_seconds)},{id:"primary_compute",header:"Primary compute",render:c=>t.jsx(xA,{branchId:c.id,endpoints:e??[]})},{id:"data_size",header:"Data size",minSize:120,...i,accessorFn:c=>c.logical_size,render:c=>{const l=c.logical_size;return l?_l(l):null}},{id:"created_by",header:"Created by",size:125,maxSize:225,...i,accessorFn:c=>{var l;return((l=c.created_by)==null?void 0:l.name)??c.creation_source},render:c=>t.jsx(Tm,{branch:c,annotation:s[c.id]})},Array.isArray(e)&&e.length===0?{id:"last_active",header:"Last active",render:()=>t.jsx(on,{})}:{header:"Last active",id:"last_active",minSize:190,...i,sortUndefined:i.enableSorting?"last":void 0,accessorFn:c=>KL(e==null?void 0:e.filter(l=>l.branch_id===c.id)),render:c=>GL(e==null?void 0:e.filter(l=>l.branch_id===c.id))}],[a,r,n,s,e,i])},cde=({branchesLoading:e,branches:s,searchValue:n})=>m.useMemo(()=>e||!n?s:s.filter(r=>r.name.toLowerCase().indexOf(n)!==-1),[n,s,e]),lde=({pagination:e,branchesCount:s,onPaginationChange:n})=>{const{trackUiInteraction:r}=k(),[a,o]=m.useState([]),i=le("branches_list_server_side_pagination"),c=m.useCallback(d=>{if(r("branch_list_page_changed",{...d}),!!i)if(d.direction==="next"&&(e!=null&&e.next))o(u=>[...u,e.next]),n==null||n({limit:d.pageSize,cursor:e.next});else if(d.direction==="previous"&&a.length>1){const u=a[a.length-2];o(p=>p.slice(0,-1)),n==null||n({limit:d.pageSize,cursor:u})}else d.direction==="first"&&(o([]),n==null||n({limit:d.pageSize,cursor:void 0}))},[i,r,n,e,a]),l=m.useCallback(d=>{r("branch_list_page_size_changed",{...d}),i&&(o([]),n==null||n({limit:d.pageSize,cursor:void 0}))},[i,r,n]);return m.useMemo(()=>({rowCount:s,manualPagination:i,onPageChange:c,onPageSizeChange:l}),[i,s,c,l])},dde=(e,s)=>e==null&&s==null?0:e==null?1:s==null||e<s?-1:e>s?1:0,ude=e=>(s,n,r)=>{const a=s.original,o=n.original;return a.protected&&!o.protected?e==="ascending"?-1:1:!a.protected&&o.protected?e==="ascending"?1:-1:a.default&&!o.default?e==="ascending"?-1:1:!a.default&&o.default?e==="ascending"?1:-1:dde(s.getValue(r),n.getValue(r))},hde=e=>{const s=ude(e);return{protectedBranchesFirst:(n,r,a)=>s(n,r,a)}},rS={branch_name:"name"},pde=({onSortingChange:e})=>{const{trackUiInteraction:s}=k(),[n,r]=m.useState({column:"branch_name",direction:"ascending"}),a=le("branches_list_server_side_sorting"),o=m.useCallback(i=>{a&&i.column&&rS[i.column]&&e({sort_by:rS[i.column],sort_order:i.direction==="ascending"?"asc":"desc"}),r(i),s("branch_list_sorting_changed",{...i})},[e,a,s]);return m.useMemo(()=>a?{sorting:n,manualSorting:!0,onSortingChange:o}:{defaultSorting:{column:"branch_name",direction:"ascending"},sortingFns:hde,onSortingChange:o},[a,o,n])},wA=({projectId:e,endpoints:s,branches:n,branchesById:r,annotations:a={},branchesLoading:o,onSortingChange:i,searchValue:c,...l})=>{const{trackUiInteraction:d}=k(),u=pde({onSortingChange:i}),p=lde(l),h=bA(),g=cde({branches:n,branchesLoading:o,searchValue:c}),f=ide({endpoints:s,branchesById:r,annotations:a,searchValue:c});return t.jsx(Ps,{columns:f,rows:g,"aria-label":"Branches",isLoading:o,rowHref:_=>G(C.ProjectsItemBranchesItem,{branchId:_.id,projectId:e}),onRowClick:()=>d("branch_list_row_clicked"),rowActions:h,...u,...p})},Uv=({children:e,parentBranch:s,...n})=>{const{projectId:r,isOwnProject:a}=F(),o=yB(),{trackUiInteraction:i}=k(),{isModalOpen:c,openModal:l,closeModal:d}=it(st.CreateBranch),u=fe(),p=a&&(u.isFreeSubscription||u.subscriptionType==="launch"),[h,g]=m.useState(!1),f=e||(p?"Create branch":"New Branch"),_=yr(m.useMemo(()=>s?{shared:{projects:[r],branches:[s.id],actions:[`create_branch@${s.id}`]}}:{shared:{projects:[r]}},[s,r]));if(o.isLoading)return null;const b=QL(o);if(p&&o.isLimitExceeded)return t.jsxs(t.Fragment,{children:[t.jsx(Pt,{type:dt.BranchesLimitReached,isOpen:h,onRequestClose:()=>{g(!1)}}),t.jsx(A,{...n,"data-qa":"create_branch_button",onClick:()=>{i("create_branch_button_clicked"),i("create_branch_button_limited_clicked"),g(!0)},children:f})]});const x=!!(s!=null&&s.expires_at),v=!x&&!o.message,j=x?"Branches with an expiration date cannot have child branches":o.message;return t.jsxs(t.Fragment,{children:[t.jsx(_I,{initialParentId:x||s==null?void 0:s.id,isOpen:c,onSuccess:()=>d(),onCancel:()=>d()}),t.jsx(ne,{content:j,disabled:v,children:t.jsx("div",{style:{display:"inline-block"},children:o.isLimitExceeded?t.jsxs(A,{disabled:!0,"data-qa":"create_branch_button",...n,children:[f,b?` ${b}`:""]}):t.jsx(t.Fragment,{children:t.jsx(co,{lockedMessage:_,children:t.jsxs(A,{"data-qa":"create_branch_button",onClick:()=>{i("create_branch_button_clicked"),l()},...n,disabled:!!_||n.disabled||x,size:"s",children:[f,b?` ${b}`:""]})})})})},`tooltip-${s==null?void 0:s.id}`)]})},aS={title:"Branches",subtitle:e=>t.jsxs("div",{className:e,children:["Instantly"," ",t.jsx(M,{href:"https://neon.com/docs/introduction/branching",openInNewTab:!0,icon:"external_link",iconSize:"s",children:"branch your data"}),"for development, testing, and various other purposes to improve developer productivity and optimize continuous integration and delivery (CI/CD) pipelines."]})},mde="_filters_pgz1d_1",gde="_search_pgz1d_8",fde="_createBranchButton_pgz1d_13",_de="_subtitle_pgz1d_19",gp={filters:mde,search:gde,createBranchButton:fde,subtitle:_de},SA=m.memo(()=>{var b;const{projectId:e}=F(),s=le("branches_list_server_side_pagination"),n=cn({projectId:e}),r=m.useMemo(()=>{var x;return((x=n.data)==null?void 0:x.endpoints)??[]},[(b=n.data)==null?void 0:b.endpoints]),[a,o]=m.useState({sort_by:"name",sort_order:"asc",limit:s?eb:void 0}),{branches:i,annotations:c,branchesCount:l,pagination:d,branchesById:u,isLoading:p,error:h,refetch:g}=Hu({projectId:e,...a}),[f,_]=m.useState("");return m.useEffect(()=>{o(x=>({...x,limit:s?eb:void 0}))},[s]),h?t.jsx(is,{title:h.message}):t.jsxs(t.Fragment,{children:[t.jsx(Il,{title:aS.title,subtitle:aS.subtitle(gp.subtitle),breadcrumbs:t.jsx(hg,{})}),t.jsxs("div",{className:gp.filters,children:[t.jsx(uv,{className:gp.search,onChange:_,size:"s"}),t.jsx("div",{className:gp.createBranchButton,children:t.jsx(Uv,{})})]}),t.jsx(Dv,{refreshBranches:g,children:t.jsx(wA,{endpoints:r,projectId:e,branches:i,branchesById:u,branchesLoading:p,searchValue:f,onSortingChange:x=>{o(v=>({...v,...x,cursor:void 0}))},annotations:c,branchesCount:l,pagination:d,onPaginationChange:x=>{o(v=>({...v,...x}))}})})]})});SA.displayName="ProjectBranches";const bde="_branchImportToast_3pfyu_1",oS={branchImportToast:bde},xde={protectedBranchWarning:"You can't delete computes on protected branches. Unprotect this branch and try again."},vde=({endpoint:e,branch:s,onConnectClicked:n,onEditClicked:r})=>{const{trackUiInteraction:a}=k(),o=cC(),i=lC({projectId:e.project_id}),c=m.useCallback(async()=>{const d=await o(e);if(a("endpoint_actions_menu_endpoint_delete_popup_shown"),!d){a("endpoint_delete_popup_cancel_button_clicked");return}a("endpoint_delete_popup_confirm_button_clicked"),i.mutate({endpointId:e.id})},[o,e,a,i]),l=s==null?void 0:s.protected;return t.jsx(t.Fragment,{children:t.jsxs(Sx,{onOpen:()=>{a("branch_view_endpoints_endpoint_actions_menu_clicked")},children:[t.jsx(Wa,{as:"button",iconName:"connect","data-qa":"endpoint_actions_connect_button",onClick:n,children:"Connect"}),t.jsx(Wa,{as:"button",onClick:r,iconName:"edit",children:"Edit"}),t.jsx(ne,{content:l?xde.protectedBranchWarning:"",children:t.jsx("div",{children:t.jsx(Wa,{as:"button",onClick:c,disabled:l,iconName:"trash",children:"Delete"})})})]})})},jde="_hostCol_1db48_1",yde="_cuColumn_1db48_8",iS={hostCol:jde,cuColumn:yde},wde=({project:e,endpoints:s,branch:n,onConnectEndpoint:r,isLoading:a})=>{const[o,i]=m.useState(null),{trackUiInteraction:c}=k(),l=m.useCallback(h=>{c("branch_view_endpoints_edit_endpoint_drawer_opened"),i(h)},[c]),d=m.useCallback(()=>{c("branch_view_endpoints_edit_endpoint_drawer_closed"),i(null)},[c]),u=m.useMemo(()=>[{label:"Id",key:"id",renderValue:h=>t.jsxs("div",{className:iS.hostCol,children:[t.jsx("b",{children:h.id}),t.jsx(A,{appearance:"secondary",onClick:()=>{r==null||r(h)},children:"Connect"})]})},{label:"Type",key:"type",renderValue:h=>YL(h.type)},{label:"Status",key:"state",renderValue:h=>t.jsx(Tx,{endpoint:h})},{label:"Compute size",key:"size",renderValue:h=>t.jsx("div",{className:iS.cuColumn,children:t.jsx(bg,{endpoint:h})})},{label:"Autosuspend delay",key:"suspend_timeout_seconds",renderValue:h=>h.suspend_timeout_seconds===-1?t.jsx("span",{title:"Never suspend",children:"-"}):fv(h.suspend_timeout_seconds)},{label:"Last active",key:"last_active",renderValue:h=>h.last_active&&h.last_active!==TC?xe(h.last_active):"never"},tI(h=>t.jsx(vde,{branch:n,endpoint:h,onEditClicked:()=>l(h),onConnectClicked:()=>r==null?void 0:r(h)}))],[n,r,l]),p=m.useMemo(()=>s.concat().sort(Cx),[s]);return a?t.jsx(Mn,{data:[],isLoading:!0,cols:u}):!e||!n?null:t.jsxs(t.Fragment,{children:[o!==null&&t.jsx(uo,{isOpen:!0,onRequestClose:d,mode:"edit",project:e,endpoint:o}),t.jsx(Mn,{data:p,cols:u,"data-qa":"branch_view_endpoints",onRowClick:l,dataPlaceholderProps:{title:"This branch has no compute endpoints",size:"m",subtitle:"Create new compute endpoint to connect to the branch from your application.",actions:t.jsx(yv,{branchId:n.id,onClick:()=>{c("branch_view_endpoints_create_endpoint_drawer_opened")},children:"Add new compute endpoint"})}})]})},CA=({branch:e,onSuccess:s,children:n})=>{const r=fI(),{confirm:a}=Ye(),{trackUiInteraction:o}=k(),{enabled:i,reason:c}=m.useMemo(()=>r(e),[r,e]),l=m.useCallback(async()=>{if(o(e.protected?"branch_unprotect_clicked":"branch_protect_clicked"),!await a({header:`Set as ${e.protected?"unprotected":"protected"}`,text:t.jsx(fA,{branch:e}),confirmButtonText:`Set as ${e.protected?"unprotected":"protected"}`,hint:t.jsxs("span",{children:["See"," ",t.jsx(M,{href:Um,openInNewTab:!0,children:"Protected branches"})," ","for more information."]})})){o(e.protected?"branch_unprotect_cancelled":"branch_protect_cancelled");return}o(e.protected?"branch_unprotect_confirmed":"branch_protect_confirmed");try{const{data:{branch:u}}=await W.updateProjectBranch(e.project_id,e.id,{branch:{protected:!e.protected}});ze(t.jsxs(tt,{children:[t.jsx("code",{children:e.name})," is now set as"," ",e.protected?"an unprotected":"a protected"," branch."]})),s&&s(u)}catch(u){Y(u)}},[o,e,a,s]);return t.jsx(t.Fragment,{children:t.jsx(ne,{content:c,children:t.jsx("div",{children:n({onClick:l,disabled:!i})})})})},Sde="_header_ql9m7_1",Cde="_headerBlock_ql9m7_7",Ide="_titleContainer_ql9m7_17",kde="_title_ql9m7_17",Tde="_branchInfo_ql9m7_37",Pde="_branchNameWrapper_ql9m7_43",Nde="_branchNameWrapper_link_ql9m7_50",Ade="_branchName_ql9m7_43",Ede="_actions_ql9m7_66",kn={header:Sde,headerBlock:Cde,titleContainer:Ide,title:kde,branchInfo:Tde,branchNameWrapper:Pde,branchNameWrapper_link:Nde,branchName:Ade,actions:Ede},Bl=({title:e,subtitle:s,showBranchBadges:n,actions:r,noBreadcrumbs:a,className:o})=>{const{branch:i,isLoading:c}=Tt(),l=t.jsxs(t.Fragment,{children:[t.jsx(IC,{branch:i}),t.jsx(vA,{branch:i}),t.jsx(kC,{branch:i})]});return t.jsxs("header",{className:kn.header,children:[!a&&t.jsx(hg,{}),t.jsxs("div",{className:V(kn.headerBlock,o),children:[t.jsxs("div",{className:kn.titleContainer,children:[t.jsx("div",{className:kn.title,children:t.jsxs(t.Fragment,{children:[t.jsx(J,{level:1,size:"h2",children:e}),i?t.jsxs("div",{className:kn.branchInfo,children:[t.jsxs(Ke,{href:G(C.ProjectsItemBranchesItem,{projectId:i.project_id,branchId:i.id}),className:V(kn.branchNameWrapper,kn.branchNameWrapper_link),children:[t.jsx(q,{name:"branch",size:12}),t.jsx("h2",{className:kn.branchName,title:i.name,children:i.name||"&nbsp;"})]}),n&&l]}):c?t.jsx(D,{width:64,height:20}):t.jsxs("div",{className:kn.branchNameWrapper,children:[t.jsx(q,{name:"branch",size:12}),t.jsx("h2",{className:kn.branchName,children:"-"})]})]})}),t.jsx("div",{className:kn.actions,children:r})]}),s&&t.jsx(P,{appearance:"secondary",children:s})]})]})},Ode=({branch:e})=>{const s=bA({omitCreateChildBranch:!0,omitToggleProtectedBranch:!0});return t.jsx(Jt,{placement:"bottom right",sections:[{items:s(e)}],children:t.jsx(A,{appearance:"secondary",icon:"chevron_down",iconSide:"right",children:"More"})})},Lde="_header_16dbf_1",$de={header:Lde},Rde=({branch:e,annotation:s,refreshBranches:n,onDeleteBranch:r})=>t.jsx(Bl,{title:"Branch Overview",showBranchBadges:!0,className:$de.header,actions:t.jsxs(t.Fragment,{children:[t.jsx(Uv,{parentBranch:e,children:"Create child branch"}),JL(e,s)&&e.current_state!=="archived"&&t.jsx(CA,{branch:e,onSuccess:n,children:a=>t.jsx(A,{icon:"protect",appearance:"secondary",...a,children:e.protected?"Unprotect":"Protect"})}),t.jsx(Dv,{refreshBranches:n,onDeleteBranch:r,children:t.jsx(Ode,{branch:e})})]})}),Bde="_header_1tjj5_1",Mde="_title_1tjj5_9",cS={header:Bde,title:Mde},Dde=()=>t.jsxs("div",{className:cS.header,children:[t.jsxs("div",{className:cS.title,children:[t.jsx(D,{width:100,height:32}),t.jsx(D,{width:60,height:20})]}),t.jsx(D,{width:64,height:24})]}),fp=({converter:e=H1,showLimits:s,limit:n=-1,value:r})=>t.jsx(t.Fragment,{children:typeof r=="number"?t.jsxs(t.Fragment,{children:[e(r),s&&os(n)&&t.jsxs(t.Fragment,{children:[" / ",e(n)]})]}):"-"}),Ude="_group_gtufw_1",Fde="_item_gtufw_14",zde="_header_gtufw_33",qde="_info_gtufw_38",Hde="_body_gtufw_43",Kd={group:Ude,item:Fde,header:zde,info:qde,body:Hde},pu=({className:e,...s})=>t.jsx("div",{className:V(Kd.group,e),...s}),Qt=({className:e,label:s,info:n,children:r,...a})=>{const{labelProps:o,fieldProps:i}=PC({label:s,labelElementType:"span"});return t.jsxs("div",{className:V(Kd.item,e),...a,children:[t.jsxs("span",{className:Kd.header,...o,children:[s,n&&t.jsx(ne,{content:n,maxWidth:300,children:t.jsx(q,{name:"info_italic",size:12,className:Kd.info})})]}),t.jsx("div",{className:Kd.body,...i,children:r})]})},Vde="_btn_1ie78_1",Wde={btn:Vde},Jb=({branchId:e,isDeleted:s=!1,label:n=""})=>t.jsxs(Qt,{label:n,children:[t.jsx(ne,{content:e,placement:"top",children:t.jsx(P,{children:e})}),t.jsx(vl,{className:Wde.btn,text:e}),s?t.jsx(Ne,{children:"deleted"}):null]}),Gde=({annotation:e})=>{const s=(e==null?void 0:e.value)??{},n=s["github-commit-author-login"],r=s["github-pr-number"],a=s["github-pr-title"],o=s["github-commit-repo"];return m.useMemo(()=>({repoName:o,authorLogin:n,repoLink:o?`https://github.com/${o}`:void 0,authorLink:n?`https://github.com/${n}`:void 0,pullRequestLink:o&&r?`https://github.com/${o}/pull/${r}`:void 0,pullRequestTitle:a}),[o,r,n,a])},i_={authorLabel:"User",repoLabel:"Repository",pullRequestLabel:"Pull request"},Kde="_nowrap_2zava_1",mu={nowrap:Kde},Qde=({annotation:e})=>{const{trackUiInteraction:s}=k(),{authorLogin:n,authorLink:r,repoLink:a,repoName:o,pullRequestTitle:i,pullRequestLink:c}=Gde({annotation:e});return t.jsxs(pu,{children:[t.jsx(q,{name:"github",size:32}),t.jsx(Qt,{label:i_.authorLabel,children:t.jsx(xg,{nowrap:!0,username:n,href:r})}),a&&t.jsx(Qt,{label:i_.repoLabel,children:t.jsx(M,{openInNewTab:!0,href:a,icon:"external_link",className:mu.nowrap,onClick:()=>{s("branch_view_github_repo_link_clicked")},children:o})}),c&&t.jsx(Qt,{label:i_.pullRequestLabel,children:t.jsx(M,{openInNewTab:!0,href:c,icon:"external_link",className:mu.nowrap,onClick:()=>{s("branch_view_github_pull_request_link_clicked")},children:i})})]})},Yde=({annotation:e})=>{const s=(e==null?void 0:e.value)??{},n=s["vercel-commit-git-provider"],r=s["vercel-commit-ref"],a=s["vercel-commit-repo"],o=s["vercel-commit-sha"],i=s["vercel-change-request-id"],c=s["vercel-branch-alias"],l=s["vercel-commit-author-login"],d=s["vercel-commit-author-name"],u=m.useMemo(()=>{if(!(!a||!r))switch(n){case"github":return`https://github.com/${a}/tree/${r}`;case"bitbucket":return`https://bitbucket.org/${a}/branch/${r}`;case"gitlab":return`https://gitlab.com/${a}/-/tree/${r}`;default:return}},[n,a,r]),[p,h]=m.useMemo(()=>{if(!i||!a)return[void 0,void 0];switch(n){case"github":return[`${a}#${i}`,`https://github.com/${a}/pull/${i}`];case"bitbucket":return[`${a}#${i}`,`https://bitbucket.org/${a}/pull-requests/${i}`];case"gitlab":return[`${a}#${i}`,`https://gitlab.com/${a}/-/merge_requests/${i}`];default:return[void 0,void 0]}},[n,a,i]);return m.useMemo(()=>({gitBranchLink:u,gitBranchName:r,gitProvider:n,gitCommitSha:o?o.substring(0,7):void 0,authorLogin:l,authorName:d,changeRequestId:p,changeRequestLink:h,vercelPreviewLink:c!=null&&c.startsWith("https://")?c:`https://${c}`}),[o,u,r,l,d,n,c,p,h])},Do={authorLabel:"Commit author",previewLabel:"Preview deployment",previewLink:"Open preview deployment",previewUnavailable:"Unavailable",pullRequestLabel:"Pull request",gitBranchLabel:"Git branch",gitCommitShaLabel:"Git commit"},Jde=({annotation:e})=>{const{trackUiInteraction:s}=k(),{vercelPreviewLink:n,changeRequestId:r,changeRequestLink:a,gitBranchLink:o,gitBranchName:i,gitCommitSha:c,authorLogin:l,authorName:d}=Yde({annotation:e});return t.jsxs(pu,{children:[t.jsx(q,{name:"vercel",size:32}),t.jsx(Qt,{label:Do.authorLabel,children:t.jsx(xg,{nowrap:!0,username:l,displayName:d})}),t.jsx(Qt,{label:Do.previewLabel,children:n?t.jsx(M,{openInNewTab:!0,href:n,icon:"external_link",className:mu.nowrap,onClick:()=>{s("branch_view_vercel_preview_link_clicked")},children:Do.previewLink}):t.jsx(t.Fragment,{children:Do.previewUnavailable})}),a?t.jsx(Qt,{label:Do.pullRequestLabel,children:t.jsx(M,{openInNewTab:!0,href:a,icon:"external_link",className:mu.nowrap,onClick:()=>{s("branch_view_vercel_pull_request_link_clicked")},children:r})}):o&&t.jsx(Qt,{label:Do.gitBranchLabel,children:t.jsx(M,{openInNewTab:!0,href:o,icon:"external_link",className:mu.nowrap,onClick:()=>{s("branch_view_vercel_branch_link_clicked")},children:i})}),c&&t.jsxs(Qt,{label:Do.gitCommitShaLabel,children:[t.jsx(P,{children:c}),t.jsx(vl,{text:c,onCopy:()=>{s("branch_view_vercel_commit_sha_copied")}})]})]})},Zde=({branch:e,annotation:s})=>{const n=e.creation_source;return n==="vercel"?t.jsx(Jde,{annotation:s}):n==="github"?t.jsx(Qde,{annotation:s}):null},Xde=({appearance:e,hint:s,text:n})=>{const r=t.jsx(Ne,{appearance:{warning:"warning",alert:"error"}[e],children:n});return s?t.jsx(ne,{content:s,children:r}):r},eue=.8;function lS(e){const s=e.match(/^(.+)\s+(.+)$/);return s?{value:s[1],units:s[2]}:{value:e,units:void 0}}function tue(e,s){const n=lS(e),r=lS(s);return n.units===r.units?`${n.value} / ${s}`:`${e} / ${s}`}function _p(e,s,n,r=!1){const a=n==="warning"?eue:1;if(e&&os(s)&&e>=a*s)return{type:n,value:e,limit:s,isOverallLimit:r}}const IA=({converter:e=String,showLimits:s,limit:n=-1,overallLimit:r=-1,value:a,overallValue:o,hideInlineLimit:i,getMessage:c,getNearOverallLimitMessage:l,getOverallLimitReachedMessage:d})=>{if(typeof a!="number")return t.jsx(t.Fragment,{children:"-"});let u=t.jsx(t.Fragment,{children:e(a)});if(typeof r=="number"&&os(r)&&(i||(u=t.jsx(t.Fragment,{children:tue(e(a),e(r))})),c)){const h=c({value:a,overallValue:o,overallLimit:r,converter:e});u=t.jsx(ne,{content:h,children:t.jsx("span",{children:u})})}let p;if(s){const h=_p(o,r,"alert",!0)??_p(a,n,"alert")??_p(o,r,"warning",!0)??_p(a,n,"warning");if(h){const g=h.isOverallLimit?h.type==="alert"?d:l:void 0;p=t.jsx(Xde,{appearance:h.type,hint:g==null?void 0:g({converter:e,overallValue:h.value,overallLimit:h.limit}),text:h.type==="alert"?"LIMIT REACHED":"NEAR LIMIT"})}}return t.jsxs(t.Fragment,{children:[u,p&&t.jsxs(t.Fragment,{children:[" ",p]})]})},sue=({branch:e,hideInlineLimit:s,...n})=>t.jsx(IA,{...n,converter:Ya,hideInlineLimit:s,getMessage:({value:r,overallLimit:a,converter:o})=>`This branch used ${o(r)}${a?` (${NC(r/a,!0)}) of ${o(a)} total allowance for ${e.default?"default":"non-default"} compute branch limit.`:""}`,getNearOverallLimitMessage:({overallValue:r,overallLimit:a,converter:o})=>`You've used ${o(r)} of your ${o(a)} ${e.default?"":"non-default account"} compute branch limit. Upgrade for more compute.`,getOverallLimitReachedMessage:({overallLimit:r,converter:a})=>`You've reached your ${a(r)} ${e.default?"":"non-default account"} compute limit. Upgrade to get more compute.`}),dS=e=>t.jsx(IA,{...e,converter:_l,getMessage:({converter:s,value:n,overallLimit:r})=>`This branch used ${s(n)} (${NC(n/r,!0)}) of ${s(r)} total allowance for storage.`,getNearOverallLimitMessage:({converter:s,overallValue:n,overallLimit:r})=>`You've used ${s(n)} of your ${s(r)} account storage limit. Upgrade for more storage.`,getOverallLimitReachedMessage:({converter:s,overallLimit:n})=>`You've reached your ${s(n)} limit. Upgrade for more storage.`}),Fv=({onSuccess:e,branch:s,children:n})=>{const r=Yb.tooltipContent(s),a=r!==null,{trackUiInteraction:o}=k(),i=SC(),c=m.useCallback(()=>{a||(o("branch_reset_to_parent_reset_clicked"),i(s,e))},[a,o,i,s,e]);return t.jsx(ne,{content:r,children:t.jsx("div",{children:n({onClick:c,disabled:a})})})},nue="_root_7fma8_1",rue="_helpText_7fma8_25",Pm={root:nue,helpText:rue},aue=({branch:e,onResetToParentBranch:s})=>t.jsxs("div",{className:Pm.root,children:[t.jsx(q,{name:"branch_reset",size:20}),t.jsxs(P,{className:Pm.helpText,children:["Update to latest data and schema",t.jsxs(P,{size:"s",children:["Last update:"," ",e.last_reset_at?xe(e.last_reset_at,ke.BranchDateTimeFormat):"Never"," "]})]}),t.jsx(Fv,{branch:e,onSuccess:s,children:n=>t.jsx(A,{appearance:"secondary",...n,children:"Reset from parent"})})]}),oue=({branch:e,children:s})=>{const{trackUiInteraction:n}=k(),[r,a]=m.useState(!1),{branchesById:o}=xt(),i=e.parent_id?o[e.parent_id]:void 0,c={sourceBranch:e,mode:Qe.Head};return t.jsxs(t.Fragment,{children:[i&&c&&t.jsx(Mv,{changeableCurrentBranch:!0,currentBranch:i,isOpen:r,compareTo:c,onRequestClose:()=>{n("schema_diff_drawer_dismissed"),a(!1)}}),s({disabled:!i,onClick:()=>{n("schema_diff_link_clicked"),a(!0)}})]})},iue=({branch:e})=>t.jsxs("div",{className:Pm.root,children:[t.jsx(q,{name:"schema",size:20}),t.jsx(P,{className:Pm.helpText,children:"See the schema differences between this branch and its parent"}),t.jsx(oue,{branch:e,children:s=>t.jsx(A,{...s,appearance:"secondary",children:"Schema diff"})})]}),c_={title:e=>t.jsxs(t.Fragment,{children:["This branch will be"," ",t.jsxs(M,{noWrap:!0,openInNewTab:!0,href:CC,children:["automatically deleted ",t.jsx(q,{name:"external_link",size:16})]})," ","on ",xe(e,ke.DateTimeWithTimezone)]}),hint:"Auto-deletion helps you stay within plan limits and manage costs",button:"Edit Expiration"},cue="_alert_1g234_1",lue="_icon_1g234_12",due="_content_1g234_17",uue="_message_1g234_22",hue="_title_1g234_29",pue="_hint_1g234_39",xc={alert:cue,icon:lue,content:due,message:uue,title:hue,hint:pue},uS=({branch:e})=>{const[s,n]=m.useState(!1);return e.expires_at?t.jsxs("div",{className:xc.alert,children:[t.jsxs("div",{className:xc.content,children:[t.jsx("div",{className:xc.icon,children:t.jsx(q,{name:"autosuspend",size:24})}),t.jsxs("div",{className:xc.message,children:[t.jsx("p",{className:xc.title,children:c_.title(e.expires_at)}),t.jsx("p",{className:xc.hint,children:c_.hint})]})]}),t.jsx(gA,{branch:e,isOpen:s,onClose:()=>n(!1)}),t.jsx(A,{appearance:"secondary",size:"s",onClick:()=>n(!0),children:c_.button})]}):null},ut={idLabel:"ID",createdOnLabel:"Created on",createdByLabel:"Created by",computeHoursLabel:"Compute hours",computeHoursInfo:"Compute hours = CU size * active hours",currentPeriodActiveTime:e=>`Active hours since ${xe(e,ke.ShortDate)}`,dataSizeLabel:"Data size",parentBranchLabel:"Parent branch",branchingPointLabel:"Branching point",lastDataResetLabel:"Last data reset",compareToParentLabel:"Compare to parent",archived:{title:"Archive status",description:e=>t.jsxs(t.Fragment,{children:["Automatically archived in cost-efficient storage on"," ",xe(e,ke.BranchDateTimeFormat)," due to inactivity."]}),learnMore:"Learn more"},unarchiveCard:{title:"Automatic unarchive",description:"Querying will unarchive the branch automatically.",descriptionSlow:"Querying will unarchive the branch automatically. Expect slower queries during the process."},billingCard:{title:"Reduce costs",description:"Cost-efficient archive storage lowers your monthly bill."},disableArchivingCard:{title:"Disable archiving",description:"Enable branch protection to prevent this branch from being archived.",button:"Protect"},warmupAlert:{title:"Warming up",description:"This branch is queryable but is still being unarchived. Expect slow query times."}},mue="_info_j53g1_1",gue="_datetime_j53g1_15",fue="_dataSize_j53g1_19",_ue="_archivedInfo_j53g1_24",bue="_infoLayout_j53g1_31",xue="_icon_j53g1_39",vue="_header_j53g1_43",jue="_card_j53g1_51",Lt={info:mue,datetime:gue,dataSize:fue,archivedInfo:_ue,infoLayout:bue,icon:xue,header:vue,card:jue},yue="_root_39mm7_1",wue="_parentName_39mm7_9",l_={root:yue,parentName:wue},d_=({branch:e})=>{const{branchesById:s}=xt();if(!e.parent_id)return null;const n=s[e.parent_id];return t.jsxs(Qt,{label:ut.parentBranchLabel,className:l_.root,children:[n?t.jsx(M,{noWrap:!0,className:l_.parentName,href:G(C.ProjectsItemBranchesItem,{projectId:n.project_id,branchId:n.id}),children:t.jsx("span",{title:n.name,children:n.name})}):t.jsx("span",{className:l_.parentName,children:e.parent_id}),e.parent_lsn&&t.jsxs(t.Fragment,{children:["LSN ",t.jsx(vl,{text:e.parent_lsn})]})]})},Sue="_row_15kkf_1",Cue="_buttonContainer_15kkf_5",u_={row:Sue,buttonContainer:Cue},kA=({role:e,branch:s,children:n,onPasswordChanged:r})=>{const{projectId:a,project:o}=F(),{trackUiInteraction:i}=k(),{mutateAsync:c,isPending:l}=xR(),[d,u]=m.useState(),[p,h]=m.useState(!1),[g,f]=m.useState(""),[_,b]=m.useState(!1),x=s.id,v=m.useCallback(async()=>{try{const{data:y}=await c({projectId:a,branchId:x,role:e.name});u(y),b(!0),h(!1),r&&r(y.role),f(y.role.password||"")}catch(y){const w=Zt(y);Y(w)}},[e,r,a,x,c]);m.useEffect(()=>{_||u(void 0)},[_]);const j=m.useMemo(()=>{const y=`PGUSER=${e.name}
PGPASSWORD=${g}`,w=new Blob([y],{type:""});return window.URL.createObjectURL(w)},[e,g]);return m.useEffect(()=>()=>window.URL.revokeObjectURL(j),[j]),o?t.jsxs(t.Fragment,{children:[p&&t.jsxs(It,{isOpen:!0,onRequestClose:()=>h(!1),width:468,"data-qa":"reset_role_password_confirmation",title:"Reset password",children:[t.jsxs(qe,{children:[t.jsxs("div",{className:u_.row,children:["You are about to reset the password for the role"," ",t.jsx(Pe,{children:e.name})," on the branch"," ",t.jsx(Pe,{children:s.name}),"."]}),t.jsx("div",{className:u_.row,children:"After reset, the current password will no longer be valid or accessible."})]}),t.jsxs(Ee,{children:[t.jsx(A,{appearance:"secondary",onClick:()=>h(!1),children:"Cancel"}),t.jsx(wB,{succeed:!!d,loading:l,label:["Reset","Loading","Done"],onClick:v})]})]}),_&&g&&t.jsx(It,{isOpen:!0,onRequestClose:()=>{b(!1)},title:"Reset password","data-qa":"reset_role_password_success",children:t.jsxs(qe,{children:[t.jsxs(P,{children:["Password for the role ",t.jsx(Pe,{children:e.name})," in the branch ",t.jsx(Pe,{children:s.name})," was reset successfully. Copy the password or download the .env file.",!o.store_passwords&&t.jsxs(t.Fragment,{children:[" ","The password cannot be displayed again after closing this dialog."]}),t.jsx("br",{}),t.jsx("br",{}),"Password:"]}),t.jsx("br",{}),t.jsx(Bn,{reveal:{getUnmaskedValue:()=>Promise.resolve(g)},copy:{getUnmaskedValue:()=>Promise.resolve(g),onCopy:()=>i("role_created_popup_copy_password_clicked")},children:"*******"}),t.jsx("br",{}),j&&t.jsxs(t.Fragment,{children:[t.jsx(P,{children:"Download the .env file to save the user's password."}),t.jsx("br",{}),t.jsx("div",{className:u_.buttonContainer,children:t.jsx(A,{as:"a",size:"l",target:"_blank",href:j,download:".env",onClick:()=>i("reset_password_download_credentials_clicked"),children:"Download .env"})})]})]})}),n(()=>{i("connection_details_password_reset_clicked"),h(!0)})]}):null},hS="__ADD_ENDPOINT__",Iue=({selectedEndpointId:e,disabled:s,setSelectedEndpoint:n})=>{var j;const r=nt(),{trackUiInteraction:a}=k(),[o,i]=m.useState(!1),{branch:c}=Tt(),{project:l,projectId:d}=F(),{billingUrl:u}=to(),p=ux(l),h=Gm({projectId:d}),g=!h.isLoading&&h.isLimitExceeded,f=cI({projectId:d}),_=!f.isLoading&&f.isLimitExceeded,x=(j=Hs({projectId:d,branchId:(c==null?void 0:c.id)??""}).data)==null?void 0:j.endpoints.some(_r),v=m.useMemo(()=>{if((_||g&&x)&&p){const y=AC("read_only");return{key:hS,label:`Upgrade to add ${y}s...`,onClick:()=>{r.push(u),a("endpoint_select_upgrade_to_pro_clicked")}}}return{key:hS,label:"Add compute...",onClick:()=>{a("endpoint_select_new_endpoint_clicked"),i(!0)}}},[x,r,_,p,g,a,u]);return t.jsxs(t.Fragment,{children:[t.jsx(Av,{projectId:d,"data-qa":"connection_fields_compute_select",disabled:s,extraOption:v,endpointId:e,onChange:y=>n(y??void 0)}),c&&l?t.jsx(uo,{isOpen:o,onRequestClose:()=>i(!1),mode:"create",project:l,branchId:c.id,endpointType:x?"read_only":"read_write"}):null]})},pS={unarchiveAlert:"This branch is archived. Connecting to the branch will unarchive it.",unarchiveAlertSlow:"This branch is archived. Connecting to the branch will unarchive it. Query times may be slow during this process."},kue="_root_m52h7_1",Tue="_section_m52h7_7",Pue="_col_m52h7_11",Nue="_roleLabel_m52h7_22",Sa={root:kue,section:Tue,col:Pue,roleLabel:Nue},Aue=({fixedBranch:e,fixedEndpoint:s})=>{const{projectId:n,isLoading:r,project:a}=F(),{branch:o,setBranch:i}=Tt(),{selectOptionsById:c,branchesById:l}=xt(),[d,u]=m.useState(null),[p,h]=m.useState(),g=Hs({projectId:n,branchId:(o==null?void 0:o.id)??""}),f=m.useMemo(()=>{var $;return s??(($=g.data)==null?void 0:$.endpoints.find(K=>K.id===p))},[s,g.data,p]),[_,b]=ZJ();m.useEffect(()=>{const $=_?l[_]:void 0;$&&$!==o&&i($)},[_,l,o,i]);const{list:x,selectOptions:v,isLoading:j}=un(),[y,w]=El();m.useEffect(()=>{e&&b(e.id)},[e,b]);const{setPassword:S,clearPasswords:T}=Sl(),E=m.useCallback($=>{S(n,$),u({value:$.name,label:$.name,role:$})},[n,S]),H=m.useCallback($=>{S(n,$)},[S,n]);m.useEffect(()=>()=>{T(n)},[T,n]);const R=yr(m.useMemo(()=>f?{exclusive:{endpoints:[f.id]},shared:{projects:[f.project_id],branches:[f.branch_id]}}:null,[f]));return r||!a?null:t.jsxs("div",{className:Sa.root,children:[(o==null?void 0:o.current_state)==="archived"&&t.jsx(X,{appearance:"info",children:Wu(o)?pS.unarchiveAlertSlow:pS.unarchiveAlert}),t.jsxs("div",{className:Sa.section,children:[t.jsx(B,{id:"branch",className:Sa.col,label:"Branch",children:t.jsx(bI,{includeNoneOption:!0,"data-qa":"connection_fields_branch_select",disabled:!!e,value:o?c[o.id]:void 0,onChange:$=>($==null?void 0:$.branch)&&b($.value),canCreateBranch:!0,onCreateBranch:$=>b($.id)})}),t.jsx(B,{id:"compute",className:Sa.col,label:"Compute",children:t.jsx(Iue,{selectedEndpointId:f==null?void 0:f.id,disabled:!!s,setSelectedEndpoint:$=>h($==null?void 0:$.id)})})]}),t.jsxs("div",{className:Sa.section,children:[t.jsx(B,{id:"database",className:Sa.col,label:"Database",children:!j&&t.jsx(Ym,{"data-qa":"connection_fields_database_select",value:y?v.find($=>$.value===y):void 0,onChange:$=>$&&w($.value)})}),t.jsx(B,{id:"role",className:Sa.col,label:t.jsxs("div",{className:Sa.roleLabel,children:[t.jsx("span",{children:"Role"}),t.jsx("span",{children:o&&d?t.jsx(kA,{role:d.role,branch:o,onPasswordChanged:H,children:$=>t.jsx(co,{lockedMessage:R,children:t.jsx(M,{onClick:$,disabled:!!R,children:"Reset password"})})}):t.jsx("button",{disabled:!0,type:"button",children:"Reset password"})})]}),children:t.jsx(SB,{"data-qa":"connection_fields_role_select",onAddUser:E,onChange:u,value:d})})]}),t.jsx("div",{children:t.jsx(dN,{branch:o,endpoint:f,role:d==null?void 0:d.role,database:y?x.find($=>$.name===y):void 0})})]})},mS={passwordSaved:t.jsxs(t.Fragment,{children:["Your password is saved in a secure storage vault."," ",t.jsx(M,{icon:"external_link",href:"https://neon.com/docs/connect/connect-from-any-app",openInNewTab:!0,children:"Learn more about connecting"})]}),passwordNotAccessible:e=>t.jsxs(t.Fragment,{children:["The password is not accessible after closing this modal. You can reset the password on the"," ",t.jsx(M,{href:e,openInNewTab:!0,children:"Roles"})," ","page."," ",t.jsx(M,{icon:"external_link",href:"https://neon.com/docs/connect/connect-from-any-app",openInNewTab:!0,children:"Learn more about connecting"})]})},Eue="_footer_1pc98_1",Oue={footer:Eue},Lue=({project:{id:e,store_passwords:s}})=>{const n=G(ue.ProjectsItemRoles,{projectId:e});return t.jsx(qx,{className:Oue.footer,children:t.jsx("div",{children:s?mS.passwordSaved:mS.passwordNotAccessible(n)})})},vg=({branch:e,endpoint:s,project:n,isOpen:r,...a})=>{const o=(e==null?void 0:e.name)??(s==null?void 0:s.branch_id),{trackUiInteraction:i}=k();return m.useEffect(()=>{r&&i("connection_details_modal_shown")},[r,i]),t.jsxs(It,{isOpen:r,width:750,"data-qa":"connection_details_modal",title:o?`Connection details for ${o}`:"Connect to your database",...a,children:[t.jsx(qe,{children:t.jsx(Aue,{fixedBranch:e,fixedEndpoint:s})}),t.jsx(Ee,{children:t.jsx(Lue,{project:n})})]})},$ue=(e,s)=>`${e}_from_snapshot_${mr(s)}`,Rue=e=>{const s=_e();return ve({mutationFn:({snapshotId:n,snapshotRestoredBranchName:r})=>W.restoreSnapshot({projectId:e.project_id,snapshotId:n,name:r},{target_branch_id:e.id}),onSuccess:()=>s.invalidateQueries({queryKey:wl({projectId:e.project_id})})})},Bue=e=>{const s=_e();return ve({mutationFn:({snapshotId:n,oldBranchName:r})=>W.restoreSnapshot({projectId:e.project_id,snapshotId:n},{name:r,target_branch_id:e.id,finalize_restore:!0}),onSuccess:()=>s.invalidateQueries({queryKey:wl({projectId:e.project_id})})})},Mue=e=>{const s=_e();return ve({mutationFn:({branchId:n})=>W.finalizeRestoreBranch(e,n),onSuccess:()=>s.invalidateQueries({queryKey:wl({projectId:e})})})},Lr={restoredBranchHint:"The data on this branch was restored.",notUpToDateHint:"The data on this branch may not be up to date.",connectToNewBranchTitle:"Connect to the new branch to preview restored data",connectToNewBranchDescription:"Connect to the branch from your application or client to verify the restored data",getConnectionDetails:"Get connection details",migrateConnectionsAndSettings:"Migrate connections and settings",migrateConnectionsAndSettingsToNewBranchTitle:"Migrate connections and settings to the new branch",migrateConnectionsAndSettingsToNewBranchDescription:"Move your database URLs and settings from the old branch to the new branch instead of resetting connections in your app",restoredSnapshotToNewBranch:"Restored the snapshot to this new branch"},Due="_group_c94jj_1",Uue="_row_c94jj_13",Fue="_rowIcon_c94jj_35",zue="_greenIcon_c94jj_39",que="_rowContent_c94jj_43",Hue="_rowActions_c94jj_47",Dc={group:Due,row:Uue,rowIcon:Fue,greenIcon:zue,rowContent:que,rowActions:Hue},Vue=({children:e,className:s})=>m.Children.toArray(e).some(a=>!(!a&&a!==0||Array.isArray(a)&&a.length===0))?t.jsx("div",{className:s,children:e}):null,vd=({className:e,icon:s,iconSize:n=16,iconClassName:r,content:a,actions:o,...i})=>t.jsxs("div",{className:V(Dc.row,e),...i,children:[s&&t.jsx(q,{name:s,size:n,className:V(Dc.rowIcon,r)}),t.jsx("div",{className:Dc.rowContent,children:a}),o&&t.jsx("div",{className:Dc.rowActions,children:o})]}),Wue=({project:e,branch:s})=>{const{mutateAsync:n}=Mue(s.project_id),r=async()=>{try{await n({branchId:s.id}),pe("Connections and settings migrated successfully")}catch(u){Y(u)}},[a,o]=m.useState(!1),[i,c]=m.useState(),l=m.useCallback(()=>{o(!1)},[]),d=m.useCallback(u=>{c(u??void 0),o(!0)},[]);return t.jsxs(Vue,{className:Dc.group,children:[s.restore_status==="finalized"&&t.jsxs(t.Fragment,{children:[t.jsx(vd,{content:Lr.restoredBranchHint}),t.jsx(vd,{icon:"arrow_in_circle_right",content:Lr.notUpToDateHint})]}),s.restore_status==="restored"&&t.jsxs(t.Fragment,{children:[t.jsx(vg,{isOpen:a,onRequestClose:l,branch:s,endpoint:i,project:e}),t.jsx(vd,{icon:"done",iconClassName:Dc.greenIcon,content:Lr.restoredSnapshotToNewBranch}),t.jsx(vd,{icon:"arrow_in_circle_right",content:t.jsxs("div",{children:[t.jsx(J,{level:6,children:Lr.connectToNewBranchTitle}),t.jsx(P,{size:"s",appearance:"tertiary",children:Lr.connectToNewBranchDescription})]}),actions:t.jsx("div",{children:t.jsx(A,{appearance:"secondary",size:"s",onClick:()=>d(null),children:Lr.getConnectionDetails})})}),t.jsx(vd,{icon:"arrow_in_circle_right",content:t.jsxs("div",{children:[t.jsx(J,{level:6,children:Lr.migrateConnectionsAndSettingsToNewBranchTitle}),t.jsx(P,{size:"s",appearance:"tertiary",children:Lr.migrateConnectionsAndSettingsToNewBranchDescription})]}),actions:t.jsx("div",{children:t.jsx(A,{appearance:"secondary",size:"s",onClick:r,children:Lr.migrateConnectionsAndSettings})})})]})]})},Gue=["vercel","github"],Kue=({project:e,branch:s,annotation:n,onResetToParentBranch:r,onSetBranchProtection:a})=>{const o=le("growth_hide_active_hours"),{isFreeSubscription:i,isPaidSubscription:c}=fe(),{limits:l}=Et(),{isLoading:d,usage:u}=sI(),p=m.useMemo(()=>d||!e||!s||!l?null:vR(e,s,l,u),[s,d,e,l,u]),h=Gue.includes(s.creation_source)&&n,g=!h;return t.jsx("div",{className:Lt.info,children:s.current_state==="archived"?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:Lt.archivedInfo,children:[t.jsxs("div",{className:Lt.infoLayout,children:[t.jsx(J,{level:5,size:"h6",children:ut.archived.title}),t.jsx("p",{children:ut.archived.description(s.state_changed_at)}),t.jsx(M,{href:kx,openInNewTab:!0,children:ut.archived.learnMore})]}),t.jsxs("div",{className:V(Lt.card,Lt.infoLayout),children:[t.jsxs("div",{className:Lt.header,children:[t.jsx(q,{className:Lt.icon,name:"branch_fast",size:16}),t.jsx(J,{level:6,children:ut.unarchiveCard.title})]}),t.jsx("p",{children:Wu(s)?ut.unarchiveCard.descriptionSlow:ut.unarchiveCard.description})]}),c&&t.jsxs("div",{className:V(Lt.card,Lt.infoLayout),children:[t.jsxs("div",{className:Lt.header,children:[t.jsx(q,{className:Lt.icon,name:"piggy",size:16}),t.jsx(J,{level:6,children:ut.billingCard.title})]}),t.jsx("p",{children:ut.billingCard.description})]}),!s.protected&&t.jsxs("div",{className:V(Lt.card,Lt.infoLayout),children:[t.jsxs("div",{className:Lt.header,children:[t.jsx(q,{className:Lt.icon,name:"no_access",size:16}),t.jsx(J,{level:6,children:ut.disableArchivingCard.title})]}),t.jsx("p",{children:ut.disableArchivingCard.description}),t.jsx(CA,{branch:s,onSuccess:a,children:f=>t.jsx(A,{icon:"protect",appearance:"secondary",...f,children:ut.disableArchivingCard.button})})]})]}),t.jsxs(pu,{children:[t.jsx(Jb,{label:ut.idLabel,branchId:s.id}),t.jsx(d_,{branch:s}),t.jsx(Qt,{label:ut.createdOnLabel,className:Lt.datetime,children:xe(s.created_at,ke.BranchDateTimeFormat)}),t.jsx(Qt,{label:ut.dataSizeLabel,className:Lt.dataSize,children:p?t.jsx(t.Fragment,{children:i?t.jsx(dS,{...p.current_data_size}):t.jsx(fp,{...p.current_data_size,converter:_l})}):"-"}),t.jsx(Qt,{label:ut.createdByLabel,children:t.jsx(Tm,{branch:s,annotation:n})})]}),s.expires_at&&t.jsx(uS,{branch:s})]}):t.jsxs(t.Fragment,{children:[EC(s)&&t.jsx(X,{appearance:"info",title:ut.warmupAlert.title,children:ut.warmupAlert.description}),t.jsx(Wue,{project:e,branch:s}),t.jsxs(pu,{children:[t.jsx(Jb,{label:ut.idLabel,branchId:s.id}),h&&t.jsx(d_,{branch:s}),t.jsx(Qt,{label:ut.createdOnLabel,className:Lt.datetime,children:xe(s.created_at,ke.BranchDateTimeFormat)}),t.jsx(Qt,{label:ut.computeHoursLabel,className:Lt.computeHours,info:ut.computeHoursInfo,children:p?t.jsx(t.Fragment,{children:i?t.jsx(sue,{branch:s,hideInlineLimit:!0,...p.compute_time}):t.jsx(fp,{...p.compute_time,converter:Ya})}):"-"}),!o&&t.jsx(Qt,{label:ut.currentPeriodActiveTime(e.consumption_period_start),children:p?t.jsx(fp,{...p.active_time}):"-"}),t.jsx(Qt,{label:ut.dataSizeLabel,className:Lt.dataSize,children:p?t.jsx(t.Fragment,{children:i?t.jsx(dS,{...p.current_data_size}):t.jsx(fp,{...p.current_data_size,converter:Ds})}):"-"}),g&&t.jsx(Qt,{label:ut.createdByLabel,children:t.jsx(Tm,{branch:s,annotation:n})})]}),h?t.jsx(Zde,{branch:s,annotation:n}):s.parent_id&&!s.restored_from&&t.jsxs(pu,{children:[t.jsx(d_,{branch:s}),t.jsx(iue,{branch:s}),t.jsx(aue,{branch:s,onResetToParentBranch:r})]}),s.expires_at&&t.jsx(uS,{branch:s})]})})},Que=()=>t.jsx("div",{className:Lt.info}),Yue="_card_1mjma_1",Jue="_cardText_1mjma_14",gS={card:Yue,cardText:Jue},jg=({icon:e,text:s,action:n})=>t.jsxs("div",{className:gS.card,children:[t.jsxs("div",{className:gS.cardText,children:[e&&t.jsx(q,{name:e,size:24}),t.jsx("div",{children:s})]}),n]}),Zue="_searchField_1cdno_1",Xue={searchField:Zue},ehe=({branch:e})=>{var x;const{projectId:s}=F(),n=cn({projectId:s}),r=m.useMemo(()=>{var v;return((v=n.data)==null?void 0:v.endpoints)??[]},[(x=n.data)==null?void 0:x.endpoints]),[a,o]=m.useState(""),i=le("branches_list_server_side_pagination"),c=le("branches_list_server_side_sorting"),[l,d]=m.useState({sort_by:"name",sort_order:"asc",limit:i?eb:void 0}),{branches:u,annotations:p,branchesById:h,isLoading:g,error:f,refetch:_}=Hu({projectId:s,...l}),b=m.useMemo(()=>u.filter(v=>v.parent_id===e.id),[u,e]);return f?t.jsx(is,{title:f.message||String(f)}):b.length>0?t.jsxs(t.Fragment,{children:[t.jsx(uv,{onChange:o,placeholder:"Filter branches by name",className:Xue.searchField,size:"s"}),t.jsx(Dv,{refreshBranches:_,children:t.jsx(wA,{endpoints:r,projectId:s,branches:b,branchesById:h,branchesLoading:g,searchValue:a,onSortingChange:v=>{c&&d(j=>({...j,...v,cursor:void 0}))},annotations:p,branchesCount:b.length,onPaginationChange:v=>{i&&d(j=>({...j,...v}))}})})]}):t.jsx(jg,{icon:"branch_gradient",text:t.jsxs("span",{children:[t.jsx(yu,{branch:e,noIcon:!0})," does not have any child branches."]}),action:t.jsx(Uv,{parentBranch:e,children:"Create child branch"})})},the="_group_80ygf_1",she="_item_80ygf_18",nhe="_header_80ygf_26",rhe="_body_80ygf_33",Yp={group:the,item:she,header:nhe,body:rhe},pl=({className:e,...s})=>t.jsx("div",{className:V(Yp.group,e),...s,role:"row"}),Ft=({className:e,label:s,"aria-label":n,bodyClassName:r,children:a,...o})=>{const{fieldProps:i,labelProps:c}=PC({"aria-label":n,label:s,labelElementType:"span"});return t.jsxs("div",{className:V(Yp.item,e),...o,role:"cell",children:[s&&t.jsx("span",{className:Yp.header,...c,children:s}),t.jsx("div",{className:V(Yp.body,r),...i,children:a})]})},ahe="_wrapper_115ga_1",ohe={wrapper:ahe},ihe=({projectId:e,branchId:s,setShowUpgradeModal:n})=>{var u;const{trackUiInteraction:r}=k(),a=Gm({projectId:e}),o=Hs({projectId:e,branchId:s});if(a.isLoading)return null;const i=!((u=o.data)!=null&&u.endpoints.some(_r)),c=i?"Add a compute to connect to the branch from an application or client.":"Read Replicas: Scale your application by offloading your read workload to a read-only instance of your database.",l=i?"Add a compute":"Add Read Replica",d=!i&&a.limit===0;return t.jsx(jg,{icon:"compute_time_gradient",text:c,action:d?t.jsx(A,{onClick:()=>{r("branch_page_compute_upgrade_plan_clicked"),n(!0)},appearance:"secondary","data-qa":"upgrade_plan_button",children:"Upgrade to paid plan"}):t.jsx(yv,{appearance:i?"primary":"secondary",branchId:s,children:l})})},che="_endpointGroup_1tdme_1",lhe="_leftSection_1tdme_8",dhe="_rightSection_1tdme_13",uhe="_timestampColumn_1tdme_19",hhe="_actions_1tdme_23",phe="_actionsButton_1tdme_27",mhe="_endpointStatus_1tdme_33",ghe="_typeRow_1tdme_39",fhe="_idRow_1tdme_45",_he="_editableName_1tdme_54",Zn={endpointGroup:che,leftSection:lhe,rightSection:dhe,timestampColumn:uhe,actions:hhe,actionsButton:phe,endpointStatus:mhe,typeRow:ghe,idRow:fhe,editableName:_he},bhe=e=>{const s=e.name||AC(e.type),[n,r]=m.useState(s),a=cx({projectId:e.project_id},{onSettled(i,c){if(c){r(s);return}i!=null&&i.endpoint.name&&r(i==null?void 0:i.endpoint.name)}}),o=m.useCallback(i=>{r(i),a.mutateAsync({endpointId:e.id,request:{endpoint:{name:i}}})},[e.id,a]);return m.useEffect(()=>{e.name!=null&&r(e.name)},[e.name]),{edit:o,displayName:n,isLoading:a.isPending}};function fS(e){if(e!==void 0&&e!==TC)return xe(e)}function xhe(e){let s="unknown",n="",r="";const{name:a}=e;switch(e.current_state){case"active":s="ACTIVE",r="Started",n=fS(e.started_at)??"";break;case"idle":s="SUSPENDED",r="Suspended",n=fS(e.suspended_at)??"";break;case"init":s="STARTING";break}return{status:s,timestamp:n,timestampLabel:r,name:a}}const vhe=({endpoint:e,...s})=>{const{trackUiInteraction:n}=k(),{status:r,timestamp:a,timestampLabel:o}=xhe(e),i=tN(e),{displayName:c,edit:l,isLoading:d}=bhe(e),u=`${G(C.ProjectsItemBranchesItemMonitoringMetrics,{projectId:e.project_id,branchId:e.branch_id})}?endpointId=${encodeURIComponent(e.id)}`;return t.jsxs(pl,{className:V(Zn.endpointGroup),children:[t.jsxs(Ft,{"aria-label":"Type",bodyClassName:Zn.endpointStatus,className:Zn.leftSection,children:[t.jsxs("div",{className:Zn.typeRow,children:[t.jsx(J,{level:3,size:"h5","data-qa":"endpoint_item_compute_type",children:t.jsx(Qk,{value:c,isLoading:d,onSave:l,className:Zn.editableName})}),t.jsx(Tx,{endpoint:e,label:r}),e.type==="read_only"&&t.jsx(ne,{content:"This compute only accepts read requests",children:t.jsx(Ne,{children:"RO"})})]}),t.jsxs("div",{className:Zn.idRow,children:[t.jsx("code",{title:e.id,children:e.id})," ",t.jsx(vl,{text:e.id})]})]}),t.jsxs("div",{className:Zn.rightSection,children:[a&&t.jsx(Ft,{label:o,className:Zn.timestampColumn,children:a}),t.jsx(Ft,{label:"Size",children:t.jsx(bg,{endpoint:e})}),t.jsxs(Ft,{"aria-label":"Actions",bodyClassName:Zn.actions,children:[t.jsx(A,{appearance:"secondary","data-qa":"endpoint_item_edit_button",onClick:()=>{n("branch_page_compute_edit_clicked"),s.onEditEndpoint(e)},children:"Edit"}),t.jsx(A,{appearance:"primary","data-qa":"endpoint_item_connect_button",size:"s",onClick:()=>{n("branch_page_compute_connect_clicked"),s.onConnectEndpoint(e)},children:"Connect"}),t.jsx(Jt,{sections:[{items:[{label:"Monitor activity",icon:"graph",href:u,onClick:()=>{n("branch_page_compute_monitor_clicked")},"data-qa":"endpoint_item_monitor_menu_item"},{label:"Delete",icon:"trash",onClick:()=>{n("branch_page_compute_edit_clicked"),i()},"data-qa":"endpoint_item_delete_menu_item"}]}],children:t.jsx(fs,{iconName:"actions",className:Zn.actionsButton,"data-qa":"endpoint_item_actions_button"})})]})]})]})},jhe=({project:e,branch:s})=>{const{trackUiInteraction:n}=k(),r=Gm({projectId:e.id}),[a,o]=m.useState(!1),[i,c]=m.useState(!1),[l,d]=m.useState(),u=Hs({projectId:e.id,branchId:s.id}),p=m.useCallback(()=>{c(!1)},[]),h=m.useCallback(v=>{d(v??void 0),c(!0)},[]),[g,f]=m.useState(null),_=m.useCallback(v=>{n("branch_view_endpoints_edit_endpoint_drawer_opened"),f(v)},[n]),b=m.useCallback(()=>{f(null)},[]),x=m.useMemo(()=>{var v;return((v=u.data)==null?void 0:v.endpoints.concat().sort(Cx))??[]},[u.data]);return u.status==="pending"||r.isLoading?Fa(3,v=>t.jsx(pl,{children:t.jsx(Ft,{"aria-label":"Loading"})},v)):!e||!s?null:t.jsxs(t.Fragment,{children:[t.jsx(vg,{isOpen:i,onRequestClose:p,branch:s,endpoint:l,project:e}),t.jsx(Pt,{type:dt.EndpointLimitReached,isOpen:a,onRequestClose:()=>{o(!1)}}),g!==null&&t.jsx(uo,{isOpen:!0,onRequestClose:b,mode:"edit",project:e,endpoint:g}),t.jsxs("div",{className:ohe.wrapper,children:[t.jsx("div",{role:"table","aria-label":"Computes",children:x.map(v=>t.jsx(vhe,{endpoint:v,onEditEndpoint:_,onConnectEndpoint:h},v.id))}),t.jsx(ihe,{projectId:e.id,branchId:s.id,setShowUpgradeModal:o})]})]})},yhe=({children:e,branch:s,...n})=>{const{trackUiInteraction:r}=k(),[a,o]=m.useState(!1),i=m.useCallback(()=>o(!1),[]),c=m.useCallback(()=>{r("create_database_button_clicked"),o(!0)},[r]),{data:l}=Hs({projectId:s.project_id,branchId:s.id}),d=m.useMemo(()=>{var p;return(p=Bu((l==null?void 0:l.endpoints)??[]))==null?void 0:p.id},[l]),u=yr(m.useMemo(()=>d?{exclusive:{endpoints:[d]},shared:{projects:[s.project_id],branches:[s.id]}}:null,[s.id,s.project_id,d]));return t.jsxs(t.Fragment,{children:[t.jsx(CB,{projectId:s.project_id,branchId:s.id,isOpen:a,onRequestClose:i,formProps:{onSuccess:i}}),t.jsx(co,{lockedMessage:u,children:t.jsx(A,{...n,onClick:c,"data-qa":"database_create_button",disabled:!!u||n.disabled,children:e||"New Database"})})]})},whe="_root_1yn7r_1",She="_header_1yn7r_11",Che="_title_1yn7r_16",Ihe="_description_1yn7r_23",khe="_children_1yn7r_28",jd={root:whe,header:She,title:Che,description:Ihe,children:khe},Za=({title:e,action:s,description:n,children:r,className:a,...o})=>{const i=e||s||n;return t.jsxs("section",{className:V(jd.root,a),...o,children:[i&&t.jsxs("div",{className:jd.header,children:[t.jsxs("div",{className:jd.title,children:[t.jsx(J,{level:2,children:e}),s]}),n&&t.jsx("div",{className:jd.description,children:n})]}),t.jsx("div",{className:jd.children,children:r})]})},The="_buttonContainer_13dcw_1",TA={buttonContainer:The},Phe="_group_1t3xx_1",Nhe="_overflow_1t3xx_10",Ahe="_actions_1t3xx_20",za={group:Phe,overflow:Nhe,actions:Ahe},Ehe=({database:e})=>{const{trackUiInteraction:s}=k(),{deleteDatabase:n}=un(),{projectId:r}=F(),{branch:a}=Tt(),{data:o}=Hs({projectId:r,branchId:(a==null?void 0:a.id)??""}),i=m.useMemo(()=>{var u;return(u=Bu((o==null?void 0:o.endpoints)??[]))==null?void 0:u.id},[o]),c=m.useMemo(()=>{const u=new URLSearchParams;return u.set("database",e.name),u.toString()},[e]),l=yr(m.useMemo(()=>a&&i?{exclusive:{endpoints:i?[i]:void 0},shared:{projects:[a.project_id],branches:[a.id]}}:null,[a,i])),d=m.useMemo(()=>[{items:[{label:"Delete database",onClick(){s("branch_page_databases_delete_database_clicked"),n(e)},disabled:!!l},{label:"Query",onClick(){s("branch_page_databases_query_database_clicked")},href:xv(C.ProjectsItemBranchesSQLEditor,{projectId:r,branchId:a==null?void 0:a.id,queryString:c})}]}],[n,e,s,r,a,c,l]);return a?t.jsx(Jt,{sections:d,placement:"right top",children:t.jsx(fs,{"aria-label":"Database actions",isDisabled:!!l})}):null},Ohe=({database:e})=>{const{trackUiInteraction:s}=k(),{projectId:n}=F(),{branch:r}=Tt(),a=m.useMemo(()=>{const i=new URLSearchParams;return i.set("database",e.name),i},[e]),o=m.useMemo(()=>rN(n,r.id,a),[n,r,a]);return!o||!r?null:t.jsx(A,{as:ZL,appearance:"primary",size:"s",to:o,onClick:()=>s("branch_page_databases_edit_data_clicked"),children:"Edit data"})},Lhe=({databases:e})=>t.jsx("div",{"aria-label":"Databases list",children:e.map(s=>t.jsxs(pl,{"aria-label":"Databases list item",className:za.group,children:[t.jsx(Ft,{"aria-label":"Name",className:za.overflow,children:t.jsx("span",{children:s.name})}),t.jsx(Ft,{label:"Owner",className:za.overflow,children:t.jsx("span",{children:s.owner_name})}),t.jsx(Ft,{label:"Created",children:xe(s.created_at)}),t.jsx(Ft,{label:"Last updated",children:xe(s.updated_at)}),t.jsxs(Ft,{"aria-label":"Actions",bodyClassName:za.actions,children:[t.jsx(Ohe,{database:s}),t.jsx(Ehe,{database:s})]})]},s.id))}),$he=({branch:e,databases:s,roles:n,onResetToParentBranch:r})=>{const a=s.length>0,o=n.length===0,i=!e.default&&!a,c=t.jsx(ne,{content:"Adding a database requires a role to assign as the database owner. Add a role first.",disabled:!o,children:t.jsx("div",{children:t.jsx(yhe,{appearance:"secondary",disabled:o,branch:e,children:"Add database"})})});return t.jsx(Za,{title:"Databases",description:t.jsxs("span",{children:["Manage the Postgres databases on this branch. For more information, see"," ",t.jsx(M,{href:"https://neon.com/docs/manage/databases",openInNewTab:!0,children:"Manage databases."})]}),action:a&&c,children:a?t.jsx(Lhe,{databases:s}):t.jsx(jg,{icon:"database_gradient",text:t.jsxs("span",{children:[t.jsx("code",{children:e.name})," does not have any databases."]}),action:t.jsxs("div",{className:TA.buttonContainer,children:[i&&t.jsx(Fv,{branch:e,onSuccess:r,children:l=>t.jsx(A,{appearance:"secondary",size:"s",...l,children:"Reset from parent"})}),c]})})})},Rhe=()=>t.jsxs(t.Fragment,{children:[t.jsx(Za,{title:"Roles",children:Fa(2,e=>t.jsx(pl,{children:Fa(5,s=>t.jsx(Ft,{"aria-label":"Roles loading",children:t.jsx(D,{height:12,width:80})},s))},e))}),t.jsx(Za,{title:"Databases",children:Fa(2,e=>t.jsx(pl,{children:Fa(5,s=>t.jsx(Ft,{"aria-label":"Databases loading",children:t.jsx(D,{height:12,width:80})},s))},e))})]}),_S={unarchiveAlert:"Creating a role on an archived branch will unarchive it.",unarchiveAlertSlow:"Creating a role on an archived branch will unarchive it. Connection times may be slow during this process."},Bhe="_root_fjb5m_1",Mhe={root:Bhe},Dhe=()=>{const{register:e,formState:{errors:s}}=kt(),{branch:n}=Tt(),{selectOptionsById:r}=xt();return t.jsxs("div",{className:Mhe.root,children:[(n==null?void 0:n.current_state)==="archived"&&t.jsx(X,{appearance:"info",children:Wu(n)?_S.unarchiveAlertSlow:_S.unarchiveAlert}),t.jsx(B,{id:"branch_field",label:"Branch",inline:!0,children:t.jsx(bI,{value:n?r[n.id]:void 0,disabled:!0})}),t.jsx(B,{id:"name_field",error:!!s.name,label:"Name",inline:!0,children:t.jsx(ce,{...e("name",{required:!0})})})]})},Uhe=({initialRole:e,onSuccess:s,onError:n,children:r})=>{const{projectId:a}=F(),{branch:o}=Tt(),{fetch:i}=Ai(),{onRoleCreate:c}=Y1(),l=Ts({shouldUnregister:!0,mode:"onChange",defaultValues:{name:(e==null?void 0:e.name)||""}}),d=u=>W.createProjectBranchRole(a,(o==null?void 0:o.id)??"",{role:{name:u.name}}).then(({data:p})=>{c(p),s&&s(p.role),i()},p=>{Y(p),n&&n(p)});return t.jsx(es,{...l,children:t.jsx(Ht,{onSubmit:l.handleSubmit(d),children:r})})},Fhe=({initialRole:e,onError:s,onSuccess:n,...r})=>t.jsx(It,{title:"Role creation",width:500,"data-qa":"create_role_modal",...r,children:t.jsxs(Uhe,{initialRole:e,onSuccess:a=>{n&&n(a),r.onRequestClose&&r.onRequestClose()},onError:s,children:[t.jsx(qe,{children:t.jsx(Dhe,{})}),t.jsx(Ee,{children:t.jsx(Ie,{children:"Create"})})]})}),zhe=({branch:e,children:s,...n})=>{const{trackUiInteraction:r}=k(),[a,o]=m.useState(!1),i=m.useCallback(()=>o(!1),[]),c=m.useCallback(()=>{r("create_user_button_clicked"),o(!0)},[r]),{data:l}=Hs({projectId:e.project_id,branchId:e.id}),d=m.useMemo(()=>{var p;return(p=Bu((l==null?void 0:l.endpoints)??[]))==null?void 0:p.id},[l]),u=yr(m.useMemo(()=>d?{exclusive:{endpoints:[d]},shared:{projects:[e.project_id],branches:[e.id]}}:null,[e.id,e.project_id,d]));return t.jsxs(t.Fragment,{children:[t.jsx(Fhe,{isOpen:a,onRequestClose:i}),t.jsx(co,{lockedMessage:u,children:t.jsx(A,{...n,onClick:c,disabled:!!u||n.disabled,"data-qa":"create_role_button",children:s||"New Role"})})]})},qhe=({branch:e,handleResetPassword:s,handleDeleteRole:n})=>{const{trackUiInteraction:r}=k(),{data:a}=Hs({projectId:e.project_id,branchId:e.id}),o=m.useMemo(()=>{var l;return(l=Bu((a==null?void 0:a.endpoints)??[]))==null?void 0:l.id},[a]),i=yr(m.useMemo(()=>o?{exclusive:{endpoints:o?[o]:void 0},shared:{projects:[e.project_id],branches:[e.id]}}:null,[e.id,e.project_id,o])),c=m.useMemo(()=>[{items:[{label:"Reset password",onClick(){r("branch_page_roles_reset_password_clicked"),s()},disabled:!!i},{label:"Delete role",onClick(){r("branch_page_roles_delete_role_clicked"),n()},disabled:!!i}]}],[s,n,r,i]);return t.jsx(Jt,{sections:c,placement:"right top",children:t.jsx(co,{lockedMessage:i,children:t.jsx(fs,{"aria-label":"Role actions",isDisabled:!!i})})})},PA=({branch:e,role:s})=>{const{deleteRole:n}=Ai(),r=m.useCallback(()=>n(s),[n,s]);return s.name===Vu?null:t.jsx(kA,{branch:e,role:s,children:a=>t.jsx(qhe,{branch:e,handleResetPassword:a,handleDeleteRole:r})})},NA=({strings:e})=>t.jsx(ne,{content:e.join(", "),children:t.jsxs("span",{children:[e[0]??"-",e.length>1&&` +${e.length-1}`]})}),Hhe=({branch:e,roles:s,roleDatabaseNames:n})=>s.map(r=>t.jsxs(pl,{className:za.group,"data-qa":"role_list_item",children:[t.jsx(Ft,{"aria-label":"Name",className:za.overflow,children:t.jsx("span",{children:r.name})}),t.jsx(Ft,{label:"Owns",className:za.overflow,children:t.jsx(NA,{strings:n[r.name]})}),t.jsx(Ft,{label:"Created",children:xe(r.created_at)}),t.jsx(Ft,{label:"Last updated",children:xe(r.updated_at)}),t.jsx(Ft,{"aria-label":"Actions",bodyClassName:za.actions,children:t.jsx(PA,{role:r,branch:e})})]},r.name)),Vhe="_actions_142i3_1",Whe={actions:Vhe},Ghe=({branch:e,roles:s,roleDatabaseNames:n})=>{const r=m.useMemo(()=>[{key:"name",label:"Name"},{key:"name",label:"Owns",renderValue:a=>t.jsx(NA,{strings:n[a.name]})},{key:"name",label:"Created",renderValue:a=>xe(a.created_at)},{key:"name",label:"Last updated",renderValue:a=>xe(a.updated_at)},{key:"actions",label:"",renderValue:a=>!a.protected&&e&&t.jsx("div",{className:Whe.actions,children:t.jsx(PA,{branch:e,role:a})}),tdAttrs:{width:"50px"}}],[e,n]);return t.jsx(Mn,{cols:r,data:s,keyField:"name",keyPrefix:e==null?void 0:e.id})},Khe=({branch:e,roles:s,databases:n,onResetToParentBranch:r})=>{const a=m.useMemo(()=>s.reduce((d,u)=>({...d,[u.name]:n.filter(p=>p.owner_name===u.name).map(p=>p.name)}),{}),[n,s]),o=m.useMemo(()=>s.length>3?t.jsx(Ghe,{branch:e,roles:s,roleDatabaseNames:a}):t.jsx(Hhe,{branch:e,roles:s,roleDatabaseNames:a}),[e,a,s]),i=s.length>0,c=!e.default&&!i,l=t.jsx(zhe,{appearance:"secondary",branch:e,children:"Add role"});return t.jsx(Za,{title:"Roles",description:t.jsxs("span",{children:["Manage the Postgres roles on this branch. For more information, see"," ",t.jsx(M,{href:"https://neon.com/docs/manage/roles",openInNewTab:!0,children:"Manage roles."})]}),action:i&&l,"data-qa":"roles_section",children:i?o:t.jsx(jg,{icon:"roles_gradient",text:t.jsxs("span",{children:[t.jsx("code",{children:e.name})," does not have any roles."]}),action:t.jsxs("div",{className:TA.buttonContainer,children:[c&&t.jsx(Fv,{branch:e,onSuccess:r,children:d=>t.jsx(A,{appearance:"secondary",size:"s",...d,children:"Reset from parent"})}),l]})})})},Qhe=({onResetToParentBranch:e})=>{const{list:s,isLoading:n}=Ai(),{list:r,isLoading:a}=un(),{branch:o}=Tt();return o?n||a?t.jsx(Rhe,{}):t.jsxs(t.Fragment,{children:[t.jsx(Khe,{branch:o,roles:s,databases:r,onResetToParentBranch:e}),t.jsx($he,{branch:o,databases:r,roles:s,onResetToParentBranch:e})]}):t.jsx(is,{})},yd={computes:{label:"Computes",value:"computes",to:C.ProjectsItemBranchesComputes,event:"branch_page_compute_tab_clicked"},"roles-and-databases":{label:"Roles & Databases",value:"roles-and-databases",to:C.ProjectsItemBranchesRolesAndDatabases,event:"branch_page_roles_and_databases_tab_clicked"},"child-branches":{label:"Child branches",value:"child-branches",to:C.ProjectsItemBranchesChildBranches,event:"branch_page_child_branches_tab_clicked"}},Yhe=e=>{const s=nt(),{trackUiInteraction:n}=k(),{branchId:r,projectId:a,tab:o="computes"}=xl(),i=[yd.computes,yd["roles-and-databases"],yd["child-branches"]],c=m.useCallback(l=>{const d=yd[l];n(d.event),s.push(G(d.to,{projectId:a,branchId:r}))},[s,a,r,n]);return t.jsxs(t.Fragment,{children:[t.jsx(jr,{options:i,value:o,onChange:c}),i.some(l=>l.value===o)?t.jsxs(t.Fragment,{children:[o==="computes"&&t.jsx(jhe,{...e}),o==="roles-and-databases"&&t.jsx(Qhe,{onResetToParentBranch:e.onResetToParentBranch}),o==="child-branches"&&t.jsx(ehe,{branch:e.branch})]}):t.jsx(we,{to:G(yd.computes.to,{projectId:a,branchId:r})})]})},Jhe=({branch:e,annotation:s,refreshBranches:n,onDeleteBranch:r,onResetToParentBranch:a})=>{const{project:o}=F(),{limits:i,isLoading:c}=Et(),{fetch:l}=Ai(),d=m.useRef(!1),u=OC(e),{data:p}=Wm({projectId:o==null?void 0:o.id}),h=m.useMemo(()=>{if(!p||u)return null;for(const g of p.pages)for(const f of g.operations)if(f.branch_id===e.id&&f.action==="import_data")return f.failures_count>0?f:null;return null},[e.id,u,p]);return m.useEffect(()=>{!u&&d.current&&l(),d.current=u},[u,l]),c||!i?t.jsx(on,{}):!o||!e?t.jsx(XL,{}):t.jsxs(t.Fragment,{children:[t.jsx(Rde,{branch:e,annotation:s,refreshBranches:n,onDeleteBranch:r}),h?t.jsx(ki,{className:oS.branchImportToast,children:"Database import failed"}):u?t.jsx(LC,{className:oS.branchImportToast,children:"Database import in progress"}):null,t.jsx(Kue,{project:o,branch:e,annotation:s,onResetToParentBranch:a,onSetBranchProtection:n}),t.jsx(Yhe,{project:o,branch:e,onResetToParentBranch:a})]})},Zhe=()=>t.jsxs(t.Fragment,{children:[t.jsx(Dde,{}),t.jsx(Que,{}),t.jsx(Il,{title:"Computes"}),t.jsx(wde,{endpoints:[],isLoading:!0})]}),Xhe=(e,s)=>{var a;const{branchesById:n,annotations:r}=xt();return n[e]&&s===((a=n[e])==null?void 0:a.project_id)?{branch:n[e],annotation:r[e]}:{branch:void 0,annotation:void 0}},epe=()=>{const{branchId:e,projectId:s}=xl(),{isLoading:n}=F(),{branch:r,annotation:a}=Xhe(e,s),{fetch:o}=xt(),i=nt(),c=wv("branch"),[l,d]=$C(),u=n||l.isLoading,p=m.useCallback(()=>{W.getProjectBranch(s,e).then(({data:h})=>{h.branch.project_id===s?d({isLoading:!1,data:h.branch}):d({isLoading:!1,error:"Branch doesn't belong to the project"})}).catch(h=>{const g=e$(h);d({isLoading:!1,error:g})})},[s,e,d]);return m.useEffect(()=>{d({data:r,isLoading:!r}),p()},[r,d,p]),u?t.jsx(Zhe,{}):l.error||!l.data?t.jsx(is,{title:l.error}):t.jsxs(t.Fragment,{children:[c,t.jsx(Jhe,{branch:l.data,annotation:a,refreshBranches:()=>{o(),p()},onDeleteBranch:()=>{o(),i.push(G(C.ProjectsItemBranches,{projectId:s}))},onResetToParentBranch:p})]})},tpe={dividerText:"Or restore from a snapshot"},spe="_root_114b3_1",npe="_divider_114b3_7",bS={root:spe,divider:npe},rpe=(e,s)=>`${e}_old_${mr(s)}`,ape=e=>{const s=_e();return ve({mutationFn:({timestamp:n,branchPreservedName:r})=>W.restoreProjectBranch(e.project_id,e.id,{source_branch_id:e.id,source_timestamp:n,preserve_under_name:r}),onSuccess:()=>s.invalidateQueries({queryKey:wl({projectId:e.project_id})})})};var pr=(e=>(e.Hours="hours",e.Days="days",e.Weeks="weeks",e.Months="months",e))(pr||{}),Cs=(e=>(e.PITR="pitr",e.Snapshot="snapshot",e))(Cs||{});const Kr={title:({timestamp:e,type:s,isRestoreMode:n})=>{switch(s){case Cs.PITR:return`${n?"Restore":"Preview"} branch from ${mr(e,ke.DateTimeWithTimezone)}`;case Cs.Snapshot:return`${n?"Restore":"Preview"} snapshot_${mr(e,ke.DateTimeWithTimezone)}`}},drizzle:"Browse data",schemaDiff:"Compare schemas",timeTravel:"Query data",restore:"Restore",cancel:"Cancel",preview:"Preview data",descriptionTitle:({branchName:e,type:s})=>{switch(s){case Cs.PITR:return t.jsxs(t.Fragment,{children:["You're about to restore ",t.jsx(Pe,{children:e})," to an earlier point in time — here's what will happen:"]});case Cs.Snapshot:return"You're about to restore a snapshot — here's what will happen:"}},description:({currentBranchName:e,ttlInterval:s,timestamp:n,type:r,newBranchName:a})=>{switch(r){case Cs.PITR:return[t.jsxs(t.Fragment,{children:[t.jsx(Pe,{children:e})," will be restored to how it was on ",t.jsx("b",{children:mr(n,ke.DateTimeWithTimezone)}),"."]}),t.jsxs(t.Fragment,{children:["Your current branch will be kept as a backup and renamed to ",t.jsx(Pe,{children:a})]}),t.jsxs(t.Fragment,{children:["You can undo this restore as long as you keep ",t.jsx(Pe,{children:a})]}),t.jsxs(t.Fragment,{children:["The expiration time on ",t.jsx(Pe,{children:e})," will be extended to ",t.jsx("strong",{children:Z_(s)})]})];case Cs.Snapshot:return["The restore operation occurs instantly",t.jsxs(t.Fragment,{children:["Your ",t.jsx(Pe,{children:e})," branch will remain unchanged"]}),t.jsxs(t.Fragment,{children:[t.jsx(Pe,{children:a})," will be created as a new branch"]}),t.jsxs(t.Fragment,{children:["The expiration time on ",t.jsx(Pe,{children:e})," will be extended to ",t.jsx("strong",{children:Z_(s)})]})]}}},ope="_viewSelect_q2xi7_1",ipe="_description_q2xi7_5",cpe="_descriptionList_q2xi7_15",lpe="_descriptionItem_q2xi7_24",dpe="_descriptionIcon_q2xi7_29",wd={viewSelect:ope,description:ipe,descriptionList:cpe,descriptionItem:lpe,descriptionIcon:dpe};fr(()=>import("./load-bundle-CZe1gSU_.js"),__vite__mapDeps([31,2]));const zv=e=>["auth_jwks",e],qv=e=>_t({queryKey:zv(e),queryFn:async()=>(await W.getProjectJwks(e)).data}),upe=e=>{const s=_e();return ve({mutationFn:async n=>(await W.addProjectJwks(e,{provider_name:n.providerName,jwks_url:n.jwksUrl,jwt_audience:n.expectedAudience?n.expectedAudience:void 0})).data,onSuccess:()=>{s.invalidateQueries({queryKey:zv(e)})}})},hpe=e=>{const s=_e();return ve({mutationFn:async n=>(await W.deleteProjectJwks(e,n)).data,onSuccess:()=>{s.invalidateQueries({queryKey:zv(e)})}})},ppe={title:"Tables"},mpe="_container_1mjkm_1",gpe={container:mpe},fpe=()=>t.jsx("div",{className:gpe.container,children:t.jsx(Bl,{title:ppe.title,noBreadcrumbs:!0})}),_pe="_root_zdsh0_1",bpe="_root_darkTheme_zdsh0_119",xS={root:_pe,root_darkTheme:bpe},xpe=(e,s)=>{switch(e){case Nc.builtins.TIMESTAMPTZ:case Nc.builtins.TIMESTAMP:case Nc.builtins.DATE:case Nc.builtins.INTERVAL:return n=>n;default:return Nc.getTypeParser(e,s)}},vpe=(e,{isUnexpected:s,id:n})=>{const r={drizzle_error_id:n};s?xi(new Error(`Unexpected error in drizzle studio: ${e.message}`,{cause:e}),{extra:r}):xi(new Error("Handled error in drizzle studio",{cause:e}),{level:"info",extra:r})};function vc(e,s){return`${s}-${e}`}const jpe=({children:e,className:s,branchId:n,databases:r,excludeSchemas:a,excludeTables:o,readOnly:i,selectedDatabase:c,selectedSchema:l,selectedTable:d,header:u=t.jsx(fpe,{}),onDatabaseSelected:p,setupClient:h})=>{const g=m.useRef(null),f=m.useRef(!1),_=m.useRef({}),[b,x]=m.useState(null),[v,j]=m.useState(!1),{trackUiInteraction:y}=k(),{colorScheme:w}=ro(),S=m.useMemo(()=>r.map(({name:R})=>({id:vc(R,n),name:R})),[n,r]);m.useEffect(()=>()=>{f.current=!0},[]);const T=m.useCallback(R=>{y(`${t$}${R}`)},[y]),E=ur(async(R,$,K,Z=[])=>{var oe,se;if(!b&&g.current&&x(g.current.packageVersion),f.current)return{rows:[]};(oe=_.current)[se=vc(R,n)]??(oe[se]=await h(R));const U=_.current[vc(R,n)];if(!U)return{rows:[]};const te=3;for(let L=1;L<=te;L+=1)try{return await U(K,Z,{arrayMode:$,fullResults:!0,types:{...Nc,getTypeParser:xpe}})}catch(ee){const ie=String(ee).toLowerCase();if(L>=te||!ie.includes("failed to fetch"))throw ee;await new Promise(He=>setTimeout(He,1e3))}return{rows:[]}}),H=ur(async(R,$,K)=>{var U,te;if(!b&&g.current&&x(g.current.packageVersion),f.current)return[];(U=_.current)[te=vc(R,n)]??(U[te]=await h(R));const Z=_.current[vc(R,n)];return Z?await Z.transaction(oe=>$.map(({sql:se,params:L})=>oe(se,L)),{fetchOptions:{signal:K}}):[]});return m.useEffect(()=>{b&&(console.log("Tables version",b),s$("drizzle_studio.version",b))},[b]),m.useEffect(()=>{customElements.whenDefined("drizzle-studio").then(()=>{j(!0)})},[]),m.useLayoutEffect(()=>{v&&g.current&&(g.current.queryFn=E,g.current.transactionFn=H,g.current.onEvent=T,g.current.onError=vpe)},[v,T,E,H]),m.useLayoutEffect(()=>{v&&g.current&&(g.current.databases=S)},[v,S]),m.useLayoutEffect(()=>{v&&g.current&&(g.current.selectedSchema=l??null)},[v,l]),m.useLayoutEffect(()=>{v&&g.current&&(g.current.selectedTable=d??null)},[v,d]),m.useLayoutEffect(()=>{v&&g.current&&(g.current.excludeSchemas=a??[])},[v,a]),m.useLayoutEffect(()=>{v&&g.current&&(g.current.excludeTables=o??[])},[v,o]),m.useLayoutEffect(()=>{v&&g.current&&p&&(g.current.onDatabaseSelected=p)},[v,p]),m.useLayoutEffect(()=>{v&&g.current&&(g.current.readOnly=i??!1)},[v,i]),m.useLayoutEffect(()=>{v&&g.current&&(g.current.selectedDatabase=c?vc(c,n):null)},[v,n,c]),v?t.jsxs("drizzle-studio",{ref:g,className:V(s,xS.root,{[xS.root_darkTheme]:w==="dark"}),children:[t.jsx("div",{slot:"page-title",children:u}),e]}):t.jsx(Se,{})},ype=({branchId:e,databases:s,setupClient:n})=>{const{projectId:r}=F(),{data:a,status:o}=qv(r),[i,c]=m.useState(),l=m.useMemo(()=>o!=="error"&&(a==null?void 0:a.jwks.length)===0?[]:["auth"],[o,a==null?void 0:a.jwks.length]);return t.jsx(jpe,{databases:s,selectedDatabase:i,excludeSchemas:l,readOnly:!0,onDatabaseSelected:c,setupClient:n,branchId:e})},wpe="_content_9xqb_1",Spe={content:wpe},AA=({content:e})=>t.jsx(Wk,{appearance:"blue",size:"s",description:t.jsxs("div",{className:Spe.content,children:[t.jsx(q,{name:"info_italic",size:16}),t.jsx(P,{children:e})]})}),Cpe={bannerDescription:({timestamp:e,type:s})=>{switch(s){case Cs.PITR:return`You're viewing data as it existed on ${e}`;case Cs.Snapshot:return`Displaying data in snapshot_${e}`}}},Ipe="_root_o0avu_1",kpe="_drizzle_o0avu_7",vS={root:Ipe,drizzle:kpe},Tpe=({timestamp:e,databases:s,branchId:n,type:r})=>{const{project:a}=F(),[o]=$x(),i=`${n}.${a==null?void 0:a.proxy_host}`,c=m.useCallback(async l=>{if(a)try{const d=s.find(({name:h})=>h===l);if(!d)return;const u=a.store_passwords?d.owner_name:Vu,p=await o({branchId:n,projectId:a.id,role:u},!0).unwrap();return Rx(JC({host:i,database:l,password:p,role:u,options:`neon_timestamp:${e}`}))}catch(d){Y(d);return}},[s,e,o,a,i,n]);return t.jsxs("div",{className:vS.root,children:[t.jsx(AA,{content:Cpe.bannerDescription({timestamp:e,type:r})}),t.jsx("div",{className:vS.drizzle,children:t.jsx(ype,{setupClient:c,branchId:n,databases:s})})]})},Ppe={noDatabases:"You do not have any databases"},Npe="_alert_1cfm8_1",Ape={alert:Npe},Epe="_root_1awyq_1",Ope="_bar_1awyq_7",Lpe="_databaseSelect_1awyq_14",$pe="_schemaDiff_1awyq_19",bp={root:Epe,bar:Ope,databaseSelect:Lpe,schemaDiff:$pe},Rpe=({timestamp:e,branch:s,databaseOptions:n})=>{const[r,a]=m.useState(n[0].database),o=i=>{var l;const c=(l=n.find(({value:d})=>d===i))==null?void 0:l.database;c&&a(c)};return t.jsxs("div",{className:bp.root,children:[t.jsx("div",{className:bp.bar,children:t.jsx("div",{className:bp.databaseSelect,children:t.jsx(lt,{options:n,value:r.name,onChange:o,disabled:n.length===1,size:"s"})})}),t.jsx("div",{className:bp.schemaDiff,children:t.jsx(eI,{projectId:s.project_id,currentBranch:s,database:r,compareSource:{branch:s,mode:Zd.Timestamp,timestamp:e}})})]})},Bpe=()=>{const{list:e}=un();return t.jsx(t.Fragment,{children:e.length>1&&t.jsx(X,{appearance:"warning",children:Ac.manyDbWarning})})},Mpe="_root_m5ybw_1",Dpe="_controlPanel_m5ybw_7",Upe="_actions_m5ybw_11",Fpe="_description_m5ybw_17",zpe="_panel_m5ybw_22",qpe="_topBar_m5ybw_32",jc={root:Mpe,controlPanel:Dpe,actions:Upe,description:Fpe,panel:zpe,topBar:qpe},h_={restoreModalTitle:"Restore branch",cancel:"Cancel",restoreModalAction:"Restore"},Hpe=({restoreTo:e,onClose:s})=>{const{restore:n,isRestoring:r}=Ei(),{trackUiInteraction:a}=k();return t.jsxs(It,{isOpen:!0,onRequestClose:()=>{a("branch_restore_restore_cancelled"),s()},title:h_.restoreModalTitle,children:[t.jsx(qe,{gaps:!0,children:t.jsx(mA,{restoreTo:e})}),t.jsxs(Ee,{children:[t.jsxs(RC,{children:["For more, see"," ",t.jsx(M,{href:"https://neon.com/docs/guides/branch-restore",onClick:()=>a("branch_reset_docs_link_clicked"),openInNewTab:!0,children:"Branch restore"})]}),t.jsx(A,{appearance:"secondary",onClick:()=>{a("branch_restore_restore_cancelled"),s()},children:h_.cancel}),t.jsx(A,{disabled:r,appearance:"primary",onClick:()=>{a("branch_restore_restore_confirmed"),n()},children:h_.restoreModalAction})]})]})},Vpe="_root_4lb3g_1",Wpe="_expanded_4lb3g_9",Gpe="_expandButton_4lb3g_22",p_={root:Vpe,expanded:Wpe,expandButton:Gpe},Kpe="_root_1j0ed_1",Qpe="_body_1j0ed_9",Ype="_alert_1j0ed_18",Jpe="_list_1j0ed_22",Zpe="_descriptives_1j0ed_35",Xpe="_queryError_1j0ed_88",eme="_fixButton_1j0ed_94",Xn={root:Kpe,body:Qpe,alert:Ype,list:Jpe,descriptives:Zpe,queryError:Xpe,fixButton:eme},tme=({result:e,queryCount:s,isQueryRunning:n,queryRunError:r})=>{var b;const{currentIndex:a,onCurrentIndexChange:o}=nI(),i=le("query_error_ai_fix"),{trackUiInteraction:c}=k();m.useEffect(()=>o(0),[e.response,o]);const[l,d]=m.useState({}),[u,p]=m.useState(e.querySeq);e.querySeq!==u&&(d({}),p(e.querySeq));const h=x=>{d({...l,[a]:x})},g=m.useMemo(()=>{const x=(e.response??[]).map((v,j)=>({value:j,label:v.query,disabled:!1}));for(let v=x.length;v<s;v+=1)x.push({value:v,label:`${v+1}: …`,disabled:!0});return x},[e,s]);let f;s>0&&e.response!==void 0&&(f=e.response[a]);let _=t.jsx("div",{className:Xn.alert,children:t.jsx(X,{appearance:"error",children:"Something went wrong"})});if(f===void 0){if(!n)return null;_=t.jsx("div",{className:V(Xn.root),children:t.jsx(rI,{})})}else if(f.error)_=t.jsx("div",{className:Xn.alert,children:t.jsx(X,{appearance:"error",children:t.jsxs("div",{className:Xn.queryError,children:[t.jsx("div",{dangerouslySetInnerHTML:{__html:f.error}}),i&&r&&(r.isFixPending?t.jsx(A,{className:Xn.fixButton,icon:"pgvector",iconSide:"right",appearance:"secondary",size:"s",onClick:()=>{r.fixErrorCancel(),c("playground_fix_error_cancel_clicked")},children:"Cancel"}):t.jsx(A,{className:Xn.fixButton,icon:"pgvector",iconSide:"right",disabled:r.isFixDisabled,appearance:"secondary",size:"s",onClick:()=>{r.fixError(),c("playground_fix_error_clicked")},children:"Fix with AI"}))]})})});else if((b=f.explain_data)!=null&&b.length){const x=f.explain_data.map(v=>v["QUERY PLAN"]).join(`
`);_=t.jsx(jR,{query:f.fullSQL??f.query,plan:x})}else if(f.descriptiveHTML)_=t.jsx("div",{className:Xn.descriptives,dangerouslySetInnerHTML:{__html:f.descriptiveHTML}});else if(f.data){const x=l[a]??0;_=t.jsxs(t.Fragment,{children:[t.jsx(aI,{offset:x,onChangeOffset:h,data:f.data}),t.jsx(yR,{result:f})]})}return t.jsxs("div",{className:Xn.root,children:[s>1&&t.jsx(jr,{className:Xn.list,options:g,value:a,onChange:o}),t.jsx("div",{className:Xn.body,children:_})]})},EA=({className:e,result:s,isQueryRunning:n,queryRunError:r})=>{var h;const[a,o]=m.useState(!1),[i,c]=m.useState(!1),l=m.useRef(null),d=m.useRef(void 0);if(!s)return null;if(a&&!i&&setTimeout(()=>{c(a)},0),i&&!a){const g=l.current,f=()=>{g.removeEventListener("transitionend",f),c(a)};g.addEventListener("transitionend",f)}const u=d.current,p=u&&`${u.top}px 0px 0px ${u.left}px`;return t.jsxs("div",{"data-qa":"query_result",className:V(p_.root,e,i&&p_.expanded),ref:l,style:a!==i?{inset:p}:{},children:[t.jsx(tme,{isQueryRunning:n,queryCount:(n?s.queryCount:(h=s.response)==null?void 0:h.length)??0,result:s,queryRunError:r}),t.jsx("button",{type:"button",className:p_.expandButton,title:i?"Return results to pane":"Expand results to window",onClick:()=>{if(!i){const g=l.current;d.current=g.getBoundingClientRect()}o(!i)},children:t.jsx(q,{name:i?"contract":"expand",size:19})})]})},Uo={title:"Time travel assist",subtitle:"Optionally, verify the selected point in time before restoring.",databaseSelectLabel:"Database",queryButtonLabel:e=>`Query at ${{[Qe.Timestamp]:"timestamp",[Qe.LSN]:"LSN",[Qe.Head]:"HEAD"}[e]}`,queryCancelButtonLabel:"Cancel",queryPlaceholder:`/*
 * Check first!
 * Run read-only queries at the selected timestamp to preview data exactly as it existed at that moment.
 * Confirm you've chosen the right point in time before you restore
 */`,queryResultDescription:(e,s)=>{var n;return`Query result from ${e} on branch ${(n=s.sourceBranch)==null?void 0:n.name} as of ${(()=>{switch(s.mode){case Qe.Timestamp:return xe(s.timestamp,ke.Full);case Qe.LSN:return s.lsn;default:return"Head"}})()}`}},sme="_root_15v1u_1",nme="_header_15v1u_8",rme="_title_15v1u_14",ame="_subtitle_15v1u_19",ome="_queryEditor_15v1u_28",ime="_queryControls_15v1u_33",cme="_databaseFormField_15v1u_43",lme="_pickedPointDescription_15v1u_48",dme="_queryResult_15v1u_65",ume="_queryResultDescription_15v1u_70",er={root:sme,header:nme,title:rme,subtitle:ame,queryEditor:ome,queryControls:ime,databaseFormField:cme,pickedPointDescription:lme,queryResult:dme,queryResultDescription:ume},hme=()=>{var y;const{restoreTo:e,branch:s,queryResult:n,resultOffset:r,runQuery:a,totalRows:o,cancelQuery:i,changeResultOffset:c,queriedContext:l}=Ei(),{project:d,projectId:u}=F(),[p,h]=nn(gt.RestoreBranchSQL,u,Uo.queryPlaceholder),{data:g}=qu({branchId:(s==null?void 0:s.id)??"",projectId:(d==null?void 0:d.id)??""}),[f,_]=m.useState(null),{trackUiInteraction:b}=k(),x=m.useCallback(()=>{if(f){b("branch_restore_query_at_timestamp_clicked");const w=d!=null&&d.store_passwords?f.database.owner_name:Vu;a({database:f.value,query:p,role:w})}},[f,d==null?void 0:d.store_passwords,p,a,b]),v=new Date,j=!!(p.trim().length===0||!s||Ku(e,d,v));return d?t.jsxs("section",{className:er.root,children:[t.jsx("header",{className:er.header,children:t.jsxs("div",{children:[t.jsx(J,{level:4,size:"h3",className:er.title,children:Uo.title}),t.jsx("span",{className:er.subtitle,children:Uo.subtitle})]})}),t.jsxs("div",{className:er.pickedPointDescription,children:[t.jsxs("div",{children:["Branch: ",t.jsx("code",{children:((y=e.sourceBranch)==null?void 0:y.name)||"--"})]}),t.jsxs("div",{children:[e.mode===Qe.Head&&t.jsx(t.Fragment,{children:"HEAD"}),e.mode===Qe.Timestamp&&t.jsxs(t.Fragment,{children:["Timestamp:"," ",t.jsx("code",{children:e.timestamp?xe(e.timestamp,ke.Full):"--"})]}),e.mode===Qe.LSN&&t.jsxs(t.Fragment,{children:["LSN: ",t.jsx("code",{children:e.lsn||"--"})]})]})]}),t.jsx("div",{className:er.queryEditor,role:"textbox",tabIndex:0,onKeyDown:w=>{w.key==="Enter"&&(w.ctrlKey||w.metaKey)&&x()},children:t.jsx(Bx,{width:"100%",height:"100%",name:"query_editor",mode:`pgsql${(d==null?void 0:d.pg_version)??15}`,value:p,onChange:h,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,tabSize:2,showLineNumbers:!0,showPrintMargin:!1,fontSize:14}})}),t.jsxs("div",{className:er.queryControls,children:[t.jsx(B,{label:Uo.databaseSelectLabel,className:er.databaseFormField,children:t.jsx(gI,{projectId:(d==null?void 0:d.id)??"",branchId:(s==null?void 0:s.id)??"",value:f,placeholder:"--",options:g.selectOptions,disabled:g.selectOptions.length<=1,onChange:_,canCreateDatabase:!1,size:"s"})}),n.isLoading?t.jsx(A,{appearance:"danger",onClick:i,children:Uo.queryCancelButtonLabel}):t.jsx(A,{appearance:"secondary",onClick:x,icon:"play",disabled:j,children:Uo.queryButtonLabel(e.mode)})]}),l&&t.jsx("div",{className:er.queryResultDescription,children:Uo.queryResultDescription(l.database,l.pointInTime)}),t.jsxs(oI,{children:[t.jsx(EA,{className:er.queryResult,isQueryRunning:n.isLoading,result:n.data}),t.jsx(wR,{limit:SR,total:o,offset:r,onChangeOffset:c})]})]}):t.jsx(Se,{})},jS={sourceBranchLabel:"Restore from",switchHeadToggle:"Restore from the latest data (head)"},pme="_root_l7f6r_1",mme="_branchSelectField_l7f6r_7",gme="_pitPicker_l7f6r_11",m_={root:pme,branchSelectField:mme,pitPicker:gme},fme=({source:e,setSource:s})=>{const{branch:n,restoreTo:r,changeRestoreTo:a}=Ei(),{trackUiInteraction:o}=k();m.useEffect(()=>{n&&e&&n.id===e.id&&s(null)},[n,e,s]),m.useEffect(()=>{a({...r,sourceBranch:e})},[e,r,a]);const{selectOptions:i}=xt(),c=m.useMemo(()=>i.filter(({value:u})=>n&&n.id!==u),[n,i]),l=m.useMemo(()=>i.find(({value:u})=>{var p;return u===((p=r.sourceBranch)==null?void 0:p.id)})??null,[r.sourceBranch,i]),d=m.useCallback(()=>{o("branch_restore_head_toggled"),a({...r,...r.mode===Qe.Head?{mode:Qe.Timestamp,timestamp:null}:{mode:Qe.Head}})},[a,r,o]);return t.jsxs("div",{className:m_.root,children:[t.jsx(B,{label:jS.sourceBranchLabel,className:m_.branchSelectField,children:t.jsx(am,{options:c,value:l,includeNoneOption:!0,"data-qa":"source_branch_select",onChange:u=>{const p=(u==null?void 0:u.branch)??null;p&&s(p)}})}),t.jsx(_s,{isSelected:r.mode===Qe.Head,onChange:d,children:jS.switchHeadToggle}),r.mode!==Qe.Head&&t.jsx(Bv,{className:m_.pitPicker,value:r,onChange:a})]})},_me=()=>{const{branch:e,restoreTo:s,changeRestoreTo:n}=Ei();return m.useEffect(()=>{s.mode===Qe.Head?n({mode:Qe.Timestamp,sourceBranch:e,timestamp:null}):n({...s,sourceBranch:e})},[e,s,n]),t.jsx("div",{children:t.jsx(Bv,{value:s,onChange:n})})},bme=()=>{var S;const{selectOptions:e}=xt(),{branch:s,restoreTo:n}=Ei(),{project:r,isOwnProject:a,isLoading:o}=F(),{trackUiInteraction:i}=k(),c=new Date,[l,d]=m.useState(!1),u=!s||!!Ku(n,r,c),p=m.useRef(null);m.useEffect(()=>{var T;(T=p==null?void 0:p.current)==null||T.focus()},[]);const{isFreeSubscription:h}=fe(),g=a&&h,[f,_]=m.useState("fromHistory"),b=m.useCallback(T=>{_(T),i(T==="fromHistory"?"branch_restore_tab_from_history_clicked":"branch_restore_tab_from_another_branch_clicked")},[i]),x=m.useMemo(()=>[{label:"From history",value:"fromHistory"},{label:"From another branch",value:"anotherBranch",disabled:e.length<2}],[e]),[v,j]=m.useState(null),{billingUrl:y,isLoading:w}=to();return t.jsxs("div",{className:jc.root,children:[l&&s&&r&&t.jsx(yC,{projectId:r==null?void 0:r.id,branchId:(S=n.sourceBranch)==null?void 0:S.id,children:t.jsx(Hpe,{restoreTo:n,onClose:()=>d(!1)})}),t.jsxs("div",{className:jc.panel,children:[t.jsx("div",{className:jc.topBar,children:t.jsx("div",{className:jc.description,children:o?t.jsx(D,{}):t.jsxs(t.Fragment,{children:[Ac.description(zu((r==null?void 0:r.history_retention_seconds)??0))," ",g?t.jsxs(t.Fragment,{children:[t.jsx(M,{href:y,disabled:w,onClick:()=>i("branch_restore_update_to_pro_clicked"),children:Ac.descriptionUpgradeLink})," ",Ac.descriptionUpgradeAfter]}):t.jsx(M,{openInNewTab:!0,href:`${G(C.ProjectsItemSettings,{projectId:(r==null?void 0:r.id)??""})}#storage`,children:Ac.descriptionLink})]})})}),t.jsxs("div",{children:[t.jsx(jr,{options:x,value:f,onChange:b}),t.jsxs("div",{className:jc.controlPanel,children:[f==="fromHistory"&&t.jsx(_me,{}),f==="anotherBranch"&&t.jsx(fme,{source:v,setSource:j}),t.jsxs("div",{className:jc.actions,children:[t.jsx(A,{disabled:!!u,appearance:"primary",onClick:()=>{d(!0),i("branch_restore_restore_clicked")},children:Ac.restoreButtonLabel}),t.jsx(lle,{currentBranch:s,compareTo:n})]})]})]})]}),t.jsx(Bpe,{}),t.jsx(hme,{})]})},xme=()=>{const e=nt(),s=m.useCallback(n=>{e.push(G(C.ProjectsItemBranchesItem,{projectId:n.project_id,branchId:n.id}))},[e]);return t.jsx(CR,{onRestoreSuccess:s,children:t.jsx(bme,{})})},vme=e=>({fields:e.fields.map(s=>s.name),rows:e.rows.map(s=>s.map(n=>String(n))),truncated:!1}),jme=e=>{const{project:s}=F(),[n]=$x(),[r]=iI.useLazyRunQuery(),[a,o]=m.useState(0),[i,c]=m.useState(),[l,d]=m.useState(),[u,p]=m.useState(!1),h=()=>d(void 0),g=m.useRef(()=>{}),f=g.current,_=m.useCallback(async({database:b,query:x,timestamp:v})=>{if(!s)return;d(void 0),p(!0);const j=s.store_passwords?b.owner_name:Vu;try{const y=await n({branchId:e,projectId:s.id,role:j},!0).unwrap(),w=`${e}.${s.proxy_host}`,S=r({database:b.name,password:y,host:w,query:x,role:j,pointInTime:{mode:Zd.Timestamp,timestamp:v}});g.current=S.abort;const T=await S.unwrap();c(vme(T)),o(0)}catch(y){y.name!=="AbortError"&&(d(IR(y.message)),c(void 0),o(0))}finally{p(!1)}},[e,s,n,r]);return{queryResult:i,isQueryRunning:u,runQuery:_,cancelQuery:f,error:l,clearError:h,offset:a,changeOffset:o}},xp={queryPlaceholder:`/*
 * Run read-only queries to preview data as it existed at the selected time.
 * Make sure you've got the right restore point.
 */`,run:"Run query at timestamp",cancel:"Cancel",banner:e=>`You are viewing data as it existed on ${e}`},yme="_root_wjm4k_1",wme="_queryEditor_wjm4k_7",Sme="_actions_wjm4k_14",Cme="_queryResult_wjm4k_21",Ime="_alert_wjm4k_27",Sd={root:yme,queryEditor:wme,actions:Sme,queryResult:Cme,alert:Ime},kme=({timestamp:e,branchId:s,databaseOptions:n})=>{const{project:r}=F(),{queryResult:a,isQueryRunning:o,runQuery:i,cancelQuery:c,error:l,clearError:d,offset:u,changeOffset:p}=jme(s),[h,g]=m.useState(n[0].database),f=y=>{var S;const w=(S=n.find(({value:T})=>T===y))==null?void 0:S.database;w&&(d(),g(w))},[_,b]=m.useState(xp.queryPlaceholder),x=_.trim().length===0,v=m.useCallback(()=>i({database:h,query:_,timestamp:e}),[i,_,h,e]),j=m.useCallback(y=>{y.key==="Enter"&&(y.ctrlKey||y.metaKey)&&v()},[v]);return t.jsxs("div",{className:Sd.root,children:[t.jsx("div",{className:Sd.queryEditor,role:"textbox",tabIndex:0,onKeyDown:j,children:t.jsx(Bx,{width:"100%",height:"100%",focus:!0,name:"query_editor",mode:`pgsql${(r==null?void 0:r.pg_version)??15}`,value:_,onChange:b,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,tabSize:2,showLineNumbers:!0,showPrintMargin:!1,fontSize:14}})}),t.jsxs("div",{className:Sd.actions,children:[t.jsx(lt,{options:n,value:h.name,onChange:f,disabled:n.length===1,size:"s"}),o?t.jsx(A,{appearance:"danger",onClick:c,children:xp.cancel}):t.jsx(A,{appearance:"secondary",onClick:v,icon:"play_circle",disabled:x,children:xp.run})]}),a&&!o&&t.jsx(AA,{content:xp.banner(e)}),l&&t.jsx("div",{className:Sd.alert,children:t.jsx(X,{appearance:"error",children:t.jsx("div",{dangerouslySetInnerHTML:{__html:l}})})}),t.jsxs("div",{className:Sd.queryResult,children:[o&&t.jsx(rI,{}),a&&t.jsx(aI,{data:a,offset:u,onChangeOffset:p})]})]})},Tme=({timestamp:e,view:s,type:n,branch:r})=>{const{isLoading:a,selectOptions:o,list:i}=un();if(a)return t.jsx(Se,{});if(!i.length)return t.jsx("div",{className:Ape.alert,children:t.jsx(X,{children:Ppe.noDatabases})});switch(s){case"drizzle":return t.jsx(Tpe,{timestamp:e,databases:i,type:n,branchId:r.id});case"schema_diff":return t.jsx(Rpe,{timestamp:e,databaseOptions:o,branch:r});case"time_travel":return t.jsx(kme,{timestamp:e,databaseOptions:o,branchId:r.id});default:return null}},Pme=[{value:"drizzle",label:Kr.drizzle},{value:"time_travel",label:Kr.timeTravel},{value:"schema_diff",label:Kr.schemaDiff}];var OA=(e=>(e.Restore="restore",e.Preview="preview",e))(OA||{});const Nme=(e,s)=>{let n=e;const r=a=>n===a;for(let a=2;s.some(r);a+=1)n=`${e} (${a})`;return n},LA=({type:e,isOpen:s,onRequestClose:n,timestamp:r,restore:a,initialMode:o="restore",hideFooter:i=!1})=>{const c=le("snapshot_preview"),{branches:l}=xt(),{branch:d}=Tt(),[u,p]=m.useState(!1),[h,g]=m.useState(),[f,_]=m.useState("drizzle"),b=h==="restore",x=e===Cs.PITR||e===Cs.Snapshot&&c,v=e===Cs.PITR?rpe(d.name,r):$ue(d.name,r),j=m.useMemo(()=>l.map(S=>S.name),[l]),y=m.useMemo(()=>Nme(v,j),[v,j]),w=async()=>{try{p(!0),await a(y)}catch(S){Y(S)}finally{p(!1)}};return m.useEffect(()=>{if(!s){g(void 0),_("drizzle");return}g(o)},[s,o]),!h||!d?null:t.jsx(Fx,{title:Kr.title({timestamp:r,type:e,isRestoreMode:b}),isOpen:s,onRequestClose:n,noBodyPadding:!0,noDismiss:u,width:b?720:void 0,height:b?"auto":void 0,header:!b&&t.jsx("div",{className:wd.viewSelect,children:t.jsx(lt,{value:f,options:Pme,onChange:S=>S&&_(S),size:"s"})}),footer:!i&&t.jsxs(t.Fragment,{children:[t.jsx(A,{size:"l",loading:u,onClick:w,icon:"restore",children:Kr.restore}),b&&x&&t.jsx(A,{size:"l",appearance:"secondary",onClick:()=>g("preview"),icon:"search",children:Kr.preview}),t.jsx(dn,{size:"l",appearance:"secondary",children:Kr.cancel})]}),children:b?t.jsxs("div",{className:wd.description,children:[t.jsx(P,{appearance:"secondary",children:Kr.descriptionTitle({branchName:d.name,type:e})}),t.jsx("ul",{className:wd.descriptionList,children:Kr.description({currentBranchName:d.name,ttlInterval:d.ttl_interval_seconds??0,timestamp:r,type:e,newBranchName:y}).map((S,T)=>t.jsxs("li",{className:wd.descriptionItem,children:[t.jsx(q,{name:"check_flat",size:16,className:wd.descriptionIcon}),t.jsx(P,{appearance:"secondary",children:S})]},T))})]}):t.jsx(Tme,{type:e,view:f,timestamp:r,branch:d})})},Fo={title:"Instant point-in-time restore",description:e=>`Instantly restore your branch to any point in the past ${e}`,restore:"Restore",invalidBeforeBranchCreation:"Date is before branch creation",invalidBeforeRetention:"Date is beyond the history retention",invalidAfterNow:"Date is in the future",restoreSuccess:e=>`This branch and all its roles and databases successfully restored to their state on ${e}`},Ame="_root_31bqw_1",Eme="_content_31bqw_12",Ome="_actions_31bqw_19",Kc={root:Ame,content:Eme,actions:Ome};mt.extend(fD);const Lme=()=>t.jsxs("div",{className:Kc.root,children:[t.jsx(q,{name:"lightning_filled",size:28}),t.jsxs("div",{className:Kc.content,children:[t.jsx(D,{width:200,height:20}),t.jsx(D,{width:320,height:18})]}),t.jsxs("div",{className:Kc.actions,children:[t.jsx(D,{width:250,height:32}),t.jsx(D,{width:200,height:32})]})]}),$me=({branch:e})=>{const s=nt(),{project:n,projectId:r,isLoading:a}=F(),{mutateAsync:o}=ape(e),[i,c]=m.useState(!1),l=()=>c(!0),d=()=>c(!1),[u,p]=m.useState(new Date),[h,g]=m.useState(),[f,_]=m.useState(!1),b=u==null?void 0:u.toISOString(),x=m.useMemo(()=>mt(e.created_at??0),[e]),v=m.useMemo(()=>mt().subtract((n==null?void 0:n.history_retention_seconds)??0,"seconds"),[n]),j=m.useMemo(()=>mt.max(x,v),[x,v]),y=m.useMemo(()=>({maxDate:new Date,minDate:j.toDate()}),[j]),w=m.useCallback(E=>{if(p(E),mt(E).valueOf()>mt().valueOf()){g(Fo.invalidAfterNow),_(!0);return}if(mt(E).valueOf()<x.valueOf()){g(Fo.invalidBeforeBranchCreation),_(!0);return}if(mt(E).valueOf()<v.valueOf()){g(Fo.invalidBeforeRetention),_(!0);return}_(!1)},[x,v]),S=m.useCallback((E,H)=>{d(),pe(Fo.restoreSuccess(H)),s.push(G(C.ProjectsItemBranchesItem,{projectId:r,branchId:E.id}))},[s,r]),T=m.useCallback(E=>async H=>{try{const{data:{branch:R}}=await o({timestamp:E,branchPreservedName:H});S(R,E)}catch(R){Y(R)}},[o,S]);return m.useEffect(()=>{p(new Date),_(!1)},[e]),a?t.jsx(Lme,{}):t.jsxs(t.Fragment,{children:[b&&t.jsx(LA,{type:Cs.PITR,isOpen:i,onRequestClose:d,timestamp:b,restore:T(b)}),t.jsxs("div",{className:Kc.root,children:[t.jsx(q,{name:"lightning_filled",size:28}),t.jsxs("div",{className:Kc.content,children:[t.jsx(J,{level:6,children:Fo.title}),t.jsx(P,{size:"s",appearance:"tertiary",children:Fo.description(zu((n==null?void 0:n.history_retention_seconds)??0))})]}),t.jsxs("div",{className:Kc.actions,children:[t.jsx(ne,{content:h,visible:f,appearance:"error",zIndex:0,children:t.jsx("div",{children:t.jsx(n$,{date:u,onDateChange:w,isInvalid:f,calendarParams:y,showCalendar:!0})})}),t.jsx(A,{icon:"arrow_right",iconSide:"right",onClick:l,disabled:f||!u,children:Fo.restore})]})]})]})},yg=({projectId:e})=>["snapshots",e,"list"],Rme=e=>_t({queryKey:yg({projectId:e}),queryFn:async()=>{const{data:{snapshots:s}}=await W.listSnapshots(e);return s}}),Bme=e=>{const s=_e();return ve({mutationFn:async()=>{const n=mt().utc().format("YYYY-MM-DD HH:mm:ss"),{data:r}=await W.createSnapshot({branchId:e.id,projectId:e.project_id,name:`${e.id} ${n} (manual)`});ks.set(gt.NewManualSnapshotId,r.snapshot.id)},onSuccess:()=>s.invalidateQueries({queryKey:yg({projectId:e.project_id})})})},Mme=e=>{const s=_e();return ve({mutationFn:n=>W.deleteSnapshot(e.project_id,n),onSuccess:()=>s.invalidateQueries({queryKey:yg({projectId:e.project_id})})})},Dme=e=>{const s=_e();return ve({mutationFn:async({snapshotId:n,name:r})=>{await W.updateSnapshot(e.project_id,n,{snapshot:{name:r}})},onSuccess:()=>s.invalidateQueries({queryKey:yg({projectId:e.project_id})})})},$A=({projectId:e,branchId:s})=>["snapshot_schedule",e,s],Ume=(e,s)=>{const n=_e();return ve({mutationFn:r=>W.setSnapshotSchedule(e,s,r),onSuccess:async()=>{await n.invalidateQueries({queryKey:$A({projectId:e,branchId:s})})}})},Fme=(e,s,n)=>_t({queryKey:$A({projectId:e,branchId:s}),queryFn:async()=>{const{data:r}=await W.getSnapshotSchedule(e,s);return r},enabled:n}),ge={NONE:"none",DAILY:"daily",WEEKLY:"weekly",MONTHLY:"monthly"},sh=86400,Au=sh*7,Eu=sh*30;function zme(e){const s={daily:[],weekly:[],monthly:[],other:[]};for(const n of e)switch(n.frequency){case ge.DAILY:s.daily.push(n);break;case ge.WEEKLY:s.weekly.push(n);break;case ge.MONTHLY:s.monthly.push(n);break;default:s.other.push(n);break}return s}const qme=e=>{switch(e){case ge.DAILY:return sh;case ge.WEEKLY:return Au;case ge.MONTHLY:return Eu;default:return 1}},Hv=e=>{if(e>=11&&e<=13)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},RA=e=>{switch(e){case 1:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday";case 7:return"Sunday";default:return""}},Hme={[ge.DAILY]:"day",[ge.WEEKLY]:"week",[ge.MONTHLY]:"month"},On={title:"Next snapshot: tomorrow 00:00",next:"Daily at 11:00, auto-delete in 3 days.",noSchedule:"Set a snapshot schedule for the selected branch",disabled:"Create a snapshot for the selected branch",setSchedule:"Set schedule",editSchedule:"Edit schedule",createSnapshot:"Create snapshot",success:"Snapshot was successfully created",snapshotScheduleSuccess:"Snapshot schedule updated successfully!",failedToLoadSnapshotSchedule:"Failed to load snapshot schedule. Please try again later.",customSchedule:"Custom schedule",snapshotCounter:e=>e===0?"No snapshots yet.":`${e} snapshot${e===1?"":"s"} created.`,snapshotScheduleRecap:e=>{if(e.frequency===ge.NONE)return"No schedule set.";const s=e.frequency[0].toUpperCase()+e.frequency.slice(1).toLowerCase(),n=e.hour.toString().padStart(2,"0");let r="";e.retainFor===-1?r="no deletion":(r=`auto-delete in ${e.retainFor} ${Hme[e.frequency]}`,e.retainFor>1&&(r+="s"));let a="";e.frequency===ge.WEEKLY&&(a=`on ${RA(e.retainDay??1)}`);let o="";return e.frequency===ge.MONTHLY&&(o=`on the ${e.retainDay}${Hv(e.retainDay??1)}`),`${s} ${a} ${o} at ${n}:00, ${r}`}},Vme="_root_kon5p_1",Wme="_icon_kon5p_10",Gme="_content_kon5p_14",Kme="_actions_kon5p_21",qa={root:Vme,icon:Wme,content:Gme,actions:Kme},BA=e=>{switch(e){case ge.DAILY:return"days";case ge.WEEKLY:return"weeks";case ge.MONTHLY:return"months";default:return"days"}},g_={createdViaAPIAlert:"This schedule was created via the API and is not reflected in the UI. You can still update it here, but doing so will override the previous schedule.",snapshotScheduleAlert:(e,s,n,r)=>`Snapshots will start being created ${e} ${s&&e===ge.WEEKLY?`on ${RA(s)}`:""} ${s&&e===ge.MONTHLY?`on the ${s}${Hv(s)}`:""} at ${n.toString().padStart(2,"0")}:00, and each will be retained for ${r} ${BA(e)}.`,noSnapshotsAlert:"No snapshots will be created."},Qme="_row_1y5u4_1",Yme="_select_1y5u4_6",Jme="_divider_1y5u4_11",Zme="_locale_1y5u4_24",Xme="_modalBody_1y5u4_34",ege="_label_1y5u4_41",Nt={row:Qme,select:Yme,divider:Jme,locale:Zme,modalBody:Xme,label:ege},tge=Array.from({length:24},(e,s)=>({label:`${s.toString().padStart(2,"0")}:00`,value:s})),MA=[...Array.from({length:28},(e,s)=>({label:`${s+1}${Hv(s+1)}`,value:s+1})),{label:"Last day of the month",value:31}],DA=[{label:"Monday",value:1},{label:"Tuesday",value:2},{label:"Wednesday",value:3},{label:"Thursday",value:4},{label:"Friday",value:5},{label:"Saturday",value:6},{label:"Sunday",value:7}],f_={retain:!1,retainDay:1,retainForWeeks:1},Cd={retain:!1,retainDay:1,retainForMonths:1},sge=({schedule:e,setSchedule:s})=>t.jsxs("div",{className:Nt.row,children:[t.jsx(lt,{options:[{label:"No schedule",value:ge.NONE},{label:"Daily",value:ge.DAILY},{label:"Weekly",value:ge.WEEKLY},{label:"Monthly",value:ge.MONTHLY}],size:"s",className:Nt.select,value:e.frequency,onChange:n=>{s({...e,frequency:n})}}),e.frequency!==ge.NONE&&t.jsxs(t.Fragment,{children:[e.frequency===ge.WEEKLY&&t.jsxs(t.Fragment,{children:[t.jsx(P,{appearance:"tertiary",className:Nt.label,children:"on"}),t.jsx(lt,{options:DA,size:"s",className:Nt.select,value:e.retainDay,onChange:n=>{s({...e,retainDay:n})}})]}),e.frequency===ge.MONTHLY&&t.jsxs(t.Fragment,{children:[t.jsx(P,{appearance:"tertiary",className:Nt.label,children:"on the"}),t.jsx(lt,{options:MA,size:"s",className:Nt.select,value:e.retainDay,onChange:n=>{s({...e,retainDay:n})}})]}),t.jsx(P,{appearance:"tertiary",className:Nt.label,children:"at"}),t.jsx(lt,{options:tge,size:"s",className:Nt.select,value:e.hour,onChange:n=>{s({...e,hour:n})}}),t.jsx("div",{children:t.jsx(P,{appearance:"tertiary",className:Nt.locale,children:"UTC"})}),t.jsx(P,{appearance:"tertiary",className:Nt.label,children:"and retain them for"}),t.jsx(Mx,{value:e.retainFor??0,minValue:1,suffix:BA(e.frequency),onChange:n=>s({...e,retainFor:n})})]})]}),nge=({weeklyRetention:e,setWeeklyRetention:s})=>t.jsxs("div",{role:"group","aria-label":"Weekly retention",className:Nt.row,children:[t.jsx(ra,{checked:e.retain,onChange:n=>{s({...e,retain:n.target.checked})}}),t.jsx(P,{appearance:"tertiary",className:Nt.label,children:"Retain"}),t.jsx(lt,{options:DA,size:"s",className:Nt.select,value:e.retainDay,onChange:n=>{s({...e,retainDay:n})}}),t.jsx(P,{appearance:"tertiary",className:Nt.label,children:"snapshots for"}),t.jsx(Mx,{minValue:1,value:e.retainForWeeks,suffix:"weeks",onChange:n=>s({...e,retainForWeeks:n})})]}),rge=({monthlyRetention:e,setMonthlyRetention:s})=>t.jsxs("div",{role:"group","aria-label":"Monthly retention",className:Nt.row,children:[t.jsx(ra,{checked:e.retain,onChange:n=>{s({...e,retain:n.target.checked})}}),t.jsx(P,{appearance:"tertiary",className:Nt.label,children:"Retain"}),t.jsx(lt,{options:MA,size:"s",className:Nt.select,value:e.retainDay,onChange:n=>{s({...e,retainDay:n})}}),t.jsx(P,{appearance:"tertiary",className:Nt.label,children:"day of the month snapshots for"}),t.jsx(Mx,{minValue:1,value:e.retainForMonths,suffix:"months",onChange:n=>s({...e,retainForMonths:n})})]}),age=({isOpen:e,closeModal:s,schedule:n,weeklyRetention:r,monthlyRetention:a,isCreatedViaAPI:o,onSubmit:i})=>{const[c,l]=m.useState(n),[d,u]=m.useState(f_),[p,h]=m.useState(Cd);return m.useEffect(()=>{if(e)switch(l(n),n.frequency){case ge.DAILY:u(r||f_),h(a||Cd);break;case ge.WEEKLY:u(void 0),h(a||Cd);break;default:u(void 0),h(void 0);break}},[e,n,r,a]),t.jsxs(It,{isOpen:e,title:"Edit snapshot schedule",onRequestClose:s,width:800,children:[t.jsxs(qe,{className:Nt.modalBody,children:[t.jsx(sge,{schedule:c,setSchedule:g=>{let f=!1;if(g.frequency!==c.frequency)switch(f=!0,g.frequency){case ge.NONE:u(void 0),h(void 0);break;case ge.DAILY:u(f_),h(Cd);break;case ge.WEEKLY:u(void 0),h(Cd);break;case ge.MONTHLY:u(void 0),h(void 0);break}l({...g,retainDay:f?1:g.retainDay})}}),t.jsx("div",{className:Nt.divider}),c.frequency===ge.DAILY&&d&&t.jsx(nge,{weeklyRetention:d,setWeeklyRetention:u}),(c.frequency===ge.DAILY||c.frequency===ge.WEEKLY)&&p&&t.jsx(rge,{monthlyRetention:p,setMonthlyRetention:h}),t.jsx("div",{className:Nt.row,children:o&&t.jsx(X,{appearance:"warning",children:t.jsx(P,{children:g_.createdViaAPIAlert})})}),t.jsx("div",{className:Nt.row,children:t.jsxs(X,{children:[c.frequency===ge.NONE&&t.jsx(P,{children:g_.noSnapshotsAlert}),(c.frequency===ge.DAILY||c.frequency===ge.WEEKLY||c.frequency===ge.MONTHLY)&&t.jsx(P,{children:g_.snapshotScheduleAlert(c.frequency,c.retainDay,c.hour,c.retainFor)})]})})]}),t.jsxs(Ee,{children:[t.jsx(A,{appearance:"secondary",onClick:s,children:"Cancel"}),t.jsx(A,{appearance:"primary",onClick:async()=>{await i(c,d,p)},children:"Update schedule"})]})]})},__={SnapshotCounter:"snapshot-counter",ApiSchedule:"api-schedule",UiSchedule:"ui-schedule"},oge=(e,s)=>e?s!=null&&s.isCreatedViaAPI?"api-schedule":e&&s.schedule.frequency===ge.NONE?"snapshot-counter":e&&s.schedule.frequency!==ge.NONE?"ui-schedule":"snapshot-counter":"snapshot-counter",ige=({snapshotScheduleParams:e,snapshotCount:s,isSnapshotSchedulesEnabled:n})=>{switch(oge(n,e)){case __.SnapshotCounter:return t.jsx(J,{level:6,children:On.snapshotCounter(s)});case __.ApiSchedule:return t.jsxs(t.Fragment,{children:[t.jsx(J,{level:6,children:On.customSchedule}),t.jsx(P,{appearance:"tertiary",size:"s",children:On.snapshotCounter(s)})]});case __.UiSchedule:return t.jsxs(t.Fragment,{children:[t.jsx(J,{level:6,children:On.snapshotScheduleRecap(e.schedule)}),t.jsx(P,{appearance:"tertiary",size:"s",children:On.snapshotCounter(s)})]});default:return t.jsx(J,{level:6,children:On.snapshotCounter(s)})}},cge=()=>t.jsxs("div",{className:qa.root,children:[t.jsx(q,{name:"schedule",size:24,className:qa.icon}),t.jsxs("div",{className:qa.content,children:[t.jsx(D,{width:200,height:20}),t.jsx(D,{width:180,height:18}),t.jsx(D,{width:150,height:18})]}),t.jsxs("div",{className:qa.actions,children:[t.jsx(D,{width:150,height:32}),t.jsx(D,{width:160,height:32})]})]});function lge(e){var l,d,u,p,h,g,f,_;const s={frequency:ge.NONE,hour:0,retainFor:1},n={schedule:s,isCreatedViaAPI:!0};if(e.length===0)return{schedule:s,isCreatedViaAPI:!1};const r=zme(e);if(r.other.length>0||r.daily.length>1||r.weekly.length>1||r.monthly.length>1||(((l=r.daily[0])==null?void 0:l.retention_seconds)||0)%sh!==0||(((d=r.weekly[0])==null?void 0:d.retention_seconds)||0)%Au!==0||(((u=r.monthly[0])==null?void 0:u.retention_seconds)||0)%Eu!==0)return n;const a=[(p=r.daily[0])==null?void 0:p.hour,(h=r.weekly[0])==null?void 0:h.hour,(g=r.monthly[0])==null?void 0:g.hour].filter(b=>b!=null);if(a.length===0||!a.every(b=>b===a[0])||((f=r.monthly[0])==null?void 0:f.day)===29||((_=r.monthly[0])==null?void 0:_.day)===30)return n;const i=e.map(b=>({...b,order:b.frequency===ge.DAILY?0:b.frequency===ge.WEEKLY?1:2}));i.sort((b,x)=>b.order-x.order);const c={schedule:s,isCreatedViaAPI:!1};for(const[b,x]of i.entries())if(b===0)c.schedule={frequency:x.frequency,hour:x.hour??0,retainDay:x.day??1,retainFor:(x.retention_seconds||0)/qme(x.frequency)};else switch(x.frequency){case ge.WEEKLY:c.weeklyRetention={retain:!0,retainDay:x.day??0,retainForWeeks:x.retention_seconds?x.retention_seconds/Au:0};break;case ge.MONTHLY:c.monthlyRetention={retain:!0,retainDay:x.day??0,retainForMonths:x.retention_seconds?x.retention_seconds/Eu:0}}return c}const dge=({branch:e,snapshotCount:s})=>{const n=le("snapshot_schedules"),{mutateAsync:r,isPending:a}=Bme(e),{data:o,isLoading:i,error:c}=Fme(e.project_id,e.id,n);m.useEffect(()=>{c&&Ct(On.failedToLoadSnapshotSchedule)},[c]);const{mutateAsync:l}=Ume(e.project_id,e.id),[d,u]=m.useState(!1),p=()=>u(!0),h=()=>u(!1),g=()=>{pe(On.success)},f=async()=>{try{await r(),g()}catch(x){Y(x)}},_=m.useMemo(()=>lge((o==null?void 0:o.schedule)??[]),[o==null?void 0:o.schedule]);if(i)return t.jsx(cge,{});const b=async(x,v,j)=>{const y=[];switch(x.frequency){case ge.NONE:break;case ge.DAILY:y.push({frequency:"daily",hour:x.hour,retention_seconds:x.retainFor*sh});break;case ge.WEEKLY:y.push({frequency:ge.WEEKLY,hour:x.hour,day:x.retainDay,retention_seconds:x.retainFor*Au});break;case ge.MONTHLY:y.push({frequency:ge.MONTHLY,hour:x.hour,day:x.retainDay,retention_seconds:x.retainFor*Eu});break}v&&v.retain&&y.push({frequency:ge.WEEKLY,hour:x.hour,day:v.retainDay,retention_seconds:v.retainForWeeks*Au}),j&&j.retain&&y.push({frequency:ge.MONTHLY,hour:x.hour,day:j.retainDay,retention_seconds:j.retainForMonths*Eu}),await l({schedule:y},{onSuccess:()=>{pe(On.snapshotScheduleSuccess),u(!1)},onError:w=>{Y(w)}})};return t.jsxs(t.Fragment,{children:[t.jsx(age,{isOpen:d,closeModal:h,schedule:_.schedule,weeklyRetention:_.weeklyRetention,monthlyRetention:_.monthlyRetention,isCreatedViaAPI:_.isCreatedViaAPI,onSubmit:b}),t.jsxs("div",{className:qa.root,children:[t.jsx(q,{name:"schedule",size:24,className:qa.icon}),t.jsx("div",{className:qa.content,children:t.jsx(ige,{snapshotScheduleParams:_,snapshotCount:s,isSnapshotSchedulesEnabled:n})}),t.jsxs("div",{className:qa.actions,children:[n&&t.jsx(A,{appearance:"secondary",onClick:p,disabled:!!c,children:On.editSchedule}),t.jsx(A,{appearance:"secondary",icon:"snapshot",onClick:f,loading:a,children:On.createSnapshot})]})]})]})};pr.Hours+"",60*60,pr.Days+"",60*60*24,pr.Weeks+"",60*60*24*7,pr.Months+"",60*60*24*30;const uge={[pr.Hours]:"Hour(s)",[pr.Days]:"Day(s)",[pr.Weeks]:"Week(s)",[pr.Months]:"Month(s)"};Object.values(pr).map(e=>({value:e,label:uge[e]}));const dr={today:"Today",week:"This week",month:"This month",year:"This year",lastYear:"Last year"},yS=[dr.today,dr.week,dr.month,dr.year,dr.lastYear],hge=(e,s)=>s.isSame(e,"day")?dr.today:s.isSame(e,"week")?dr.week:s.isSame(e,"month")?dr.month:s.isSame(e,"year")?dr.year:s.isSame(e.subtract(1,"year"))?dr.lastYear:s.year().toString(),pge=e=>{const s=mt(),n=e.reduce((r,a)=>{const o=mt(a.created_at),i=hge(s,o);return r[i]?r[i]=[a,...r[i]]:r[i]=[a],r},{});return Object.entries(n).sort(([r],[a])=>{const o=yS.indexOf(r),i=yS.indexOf(a);return o!==-1&&i!==-1?o-i:1})},Js={delete:"Delete snapshot",successDeleted:"Snapshot was successfully deleted",successRestored:"Snapshot was successfully restored",inspect:"Inspect",restore:"Restore",deleteConfirmation:"This is a permanent operation. Deleted snapshots cannot be recovered.",oneStepRestoreLabel:"One-step restore",oneStepRestoreDescription:"Instantly restore data from the snapshot. The branch name and connection string stay the same — only the branch ID will change.",multiStepRestoreLabel:"Multi-step restore",multiStepRestoreDescription:"Create a new branch using the snapshot. Choose this option if you want to inspect the restored data before switching over to the new branch."},mge="_root_1vjfx_1",gge="_content_1vjfx_12",fge="_actions_1vjfx_19",_ge="_description_1vjfx_25",bge="_branchName_1vjfx_31",xge="_creationDate_1vjfx_39",vge="_expirationDate_1vjfx_43",ar={root:mge,content:gge,actions:fge,description:_ge,branchName:bge,creationDate:xge,expirationDate:vge};var _i=(e=>(e.OneStepRestore="oneStepRestore",e.MultiStepRestore="multiStepRestore",e))(_i||{});const vp={restoreDescription:"You're about to restore a snapshot — here's what will happen:",restoreTitle(e){return e===_i.OneStepRestore?"One-step restore":"Multi-step restore"},oneStepRestoreDescriptionPoints(e){return[t.jsx(t.Fragment,{children:"The restore operation occurs instantly"}),t.jsxs(t.Fragment,{children:["All data on ",t.jsx(Pe,{children:e.name})," will be restored"]}),e.expires_at?t.jsxs(t.Fragment,{children:["The ",t.jsx("strong",{children:"expiration time"})," of"," ",t.jsx(Pe,{children:e.name})," will be extended to"," ",t.jsx("strong",{children:Z_(e.ttl_interval_seconds??0)})]}):null,t.jsxs(t.Fragment,{children:[t.jsxs(Pe,{children:[e.name," (old)"]})," will be created as a backup of this restore operation, no data at risk. It will have no expiration date"]})].filter(Boolean)},multiStepRestoreDescriptionPoints(e,s){return[t.jsx(t.Fragment,{children:"The restore operation occurs instantly"}),t.jsxs(t.Fragment,{children:["Your ",t.jsx(Pe,{children:e.name})," branch will remain unchanged"]}),t.jsxs(t.Fragment,{children:[t.jsx(Pe,{children:s})," will be created as a new branch"]}),e.expires_at?t.jsxs(t.Fragment,{children:["After you finish restoring,"," ",t.jsx(Pe,{children:s})," gets a new"," ",t.jsx("strong",{children:"expiration date"})," with the same amount of time as before, starting from when the restore finishes."]}):null].filter(Boolean)}},jge="_description_4okno_1",yge="_descriptionList_4okno_11",wge="_descriptionItem_4okno_20",Sge="_descriptionIcon_4okno_25",jp={description:jge,descriptionList:yge,descriptionItem:wge,descriptionIcon:Sge},wS=()=>`branch_from_snapshot_${mt().format(ke.SnapshotDate)}`,Cge=({isOpen:e,onRequestClose:s,mode:n,simpleRestore:r,stepByStepRestore:a,onOpenPreviewModal:o})=>{const i=le("snapshot_preview"),{branch:c}=Tt(),[l,d]=m.useState(!1),u=async()=>{try{d(!0),await r()}catch(g){Y(g)}finally{d(!1)}},p=async()=>{try{d(!0),await a(wS())}catch(g){Y(g)}finally{d(!1)}},h=m.useMemo(()=>c?n===_i.OneStepRestore?vp.oneStepRestoreDescriptionPoints(c):vp.multiStepRestoreDescriptionPoints(c,wS()):[],[n,c]);return t.jsx(Fx,{title:vp.restoreTitle(n),isOpen:e,onRequestClose:s,noBodyPadding:!0,noDismiss:l,width:720,height:"auto",footer:t.jsxs(t.Fragment,{children:[t.jsx(dn,{size:"l",appearance:"secondary",children:"Cancel"}),i&&t.jsx(A,{size:"l",appearance:"secondary",onClick:o,icon:"search",children:"Inspect snapshot data"}),t.jsx(A,{size:"l",loading:l,onClick:()=>{n===_i.OneStepRestore?u():p()},icon:"restore",children:"Restore"})]}),children:t.jsxs("div",{className:jp.description,children:[t.jsx(P,{appearance:"secondary",children:vp.restoreDescription}),t.jsx("ul",{className:jp.descriptionList,children:h.map((g,f)=>t.jsxs("li",{className:jp.descriptionItem,children:[t.jsx(q,{name:"check_flat",size:16,className:jp.descriptionIcon}),t.jsx(P,{appearance:"secondary",children:g})]},f))})]})})},Ige=2e3,kge=({branch:e,id:s,name:n,created_at:r,expires_at:a,source_branch_name:o})=>{const i=le("snapshot_preview"),c=le("snapshot_restore"),l=nt(),{mutateAsync:d,isPending:u}=Mme(e),{mutateAsync:p}=Dme(e),{mutateAsync:h}=Bue(e),{mutateAsync:g}=Rue(e),{confirm:f}=Ye(),_=m.useRef(_i.OneStepRestore),[b,x]=m.useState(!1),[v,j]=m.useState(!1),y=se=>()=>{_.current=se,x(!0)},w=()=>x(!1),S=()=>j(!0),T=()=>j(!1),[E,H]=m.useState(!1),[R,$]=m.useState(!1),K=m.useCallback(se=>{w(),pe(Js.successRestored),l.push(G(C.ProjectsItemBranchesItem,{projectId:se.project_id,branchId:se.id}))},[l]),Z=async()=>{try{const se=await h({snapshotId:s});K(se.data.branch)}catch(se){Y(se)}},U=async se=>{try{const L=await g({snapshotId:s,snapshotRestoredBranchName:se});K(L.data.branch)}catch(L){Y(L)}},te=async()=>{try{if(!await f({appearance:"danger",header:Js.delete,text:Js.deleteConfirmation,confirmButtonText:Js.delete}))return;await d(s),pe(Js.successDeleted)}catch(se){Y(se)}},oe=[{items:[{label:Js.delete,onClick:te}]}];return m.useEffect(()=>{ks.get(gt.NewManualSnapshotId)===s&&(H(!0),ks.remove(gt.NewManualSnapshotId),setTimeout(()=>H(!1),Ige))},[s]),t.jsxs(t.Fragment,{children:[t.jsx(Cge,{isOpen:b,onRequestClose:w,mode:_.current,simpleRestore:Z,stepByStepRestore:U,onOpenPreviewModal:S}),t.jsx(LA,{type:Cs.Snapshot,onRequestClose:T,timestamp:r,initialMode:OA.Preview,hideFooter:!0,isOpen:v,restore:async()=>{}}),t.jsxs("div",{className:ar.root,children:[t.jsx(q,{size:20,name:E?"done_gradient":"snapshot"}),t.jsxs("div",{className:ar.content,children:[t.jsx(Qk,{value:n,onSave:async se=>{try{$(!0),await p({snapshotId:s,name:se})}catch(L){Y(L)}finally{$(!1)}},isLoading:R}),t.jsxs("div",{className:ar.description,children:[t.jsx(q,{name:"branch",size:12}),t.jsx("code",{title:o,className:ar.branchName,children:o}),t.jsx(P,{appearance:"tertiary",size:"s",className:ar.creationDate,children:mt(r).format(ke.SnapshotDate)}),t.jsxs(P,{appearance:"tertiary",size:"s",className:ar.expirationDate,children:["Expires on:"," ",a?mt(a).format(ke.SnapshotDate):"never"]})]})]}),t.jsxs("div",{className:ar.actions,children:[c&&t.jsx(Jt,{sections:[{items:[{label:Js.oneStepRestoreLabel,description:Js.oneStepRestoreDescription,onClick:y(_i.OneStepRestore)},{label:Js.multiStepRestoreLabel,description:Js.multiStepRestoreDescription,onClick:y(_i.MultiStepRestore)}]}],children:t.jsx(A,{appearance:"secondary",icon:"chevron_down",iconSide:"right",disabled:u,children:Js.restore})}),i&&t.jsx(A,{appearance:"secondary",onClick:S,disabled:u,children:Js.inspect}),t.jsx(Jt,{sections:oe,children:t.jsx(fs,{isDisabled:u})})]})]})]})},b_=()=>t.jsxs("div",{className:ar.root,children:[t.jsx(q,{size:20,name:"snapshot"}),t.jsxs("div",{className:ar.content,children:[t.jsx(D,{width:100,height:20}),t.jsx(D,{width:120,height:18})]}),t.jsxs("div",{className:ar.actions,children:[t.jsx(D,{width:80,height:32}),t.jsx(D,{width:80,height:32}),t.jsx(D,{width:32,height:32})]})]}),Tge="_labelWrapper_1b9i0_1",Pge="_label_1b9i0_1",Nge="_snapshotGroupItem_1b9i0_13",gu={labelWrapper:Tge,label:Pge,snapshotGroupItem:Nge},Age="_root_1h6pm_1",Ege="_track_1h6pm_6",Oge="_start_1h6pm_22",Lge="_end_1h6pm_26",$ge="_point_1h6pm_30",Rge="_disabled_1h6pm_45",Bge="_content_1h6pm_50",zo={root:Age,track:Ege,start:Oge,end:Lge,point:$ge,disabled:Rge,content:Bge},li=({children:e,className:s,hidePoint:n,isDisabled:r,isStartPoint:a,isEndPoint:o})=>t.jsxs("div",{className:V(zo.root,s,{[zo.disabled]:r,[zo.start]:a,[zo.end]:o}),children:[t.jsx("div",{className:zo.track,children:!n&&t.jsx("div",{className:zo.point})}),t.jsx("div",{className:zo.content,children:e})]}),Mge=({label:e,branch:s,snapshots:n,isLastGroup:r})=>t.jsxs("div",{children:[t.jsx(li,{className:gu.labelWrapper,hidePoint:!0,children:t.jsx(P,{className:gu.label,children:e})}),n.map((a,o)=>t.jsx(li,{className:gu.snapshotGroupItem,isEndPoint:r&&o===n.length-1,children:t.jsx(kge,{branch:s,...a})},a.id))]}),Dge=()=>t.jsxs("div",{children:[t.jsx(li,{hidePoint:!0,className:gu.labelWrapper,children:t.jsx(P,{size:"s",className:gu.label,children:t.jsx(D,{width:100,height:18})})}),t.jsx(li,{children:t.jsx(b_,{})}),t.jsx(li,{children:t.jsx(b_,{})}),t.jsx(li,{isEndPoint:!0,children:t.jsx(b_,{})})]}),Uge=({branch:e,snapshots:s,isLoading:n})=>{const r=m.useMemo(()=>s&&pge(s),[s]);return n?t.jsx(Dge,{}):t.jsx("div",{children:r==null?void 0:r.map(([a,o],i)=>t.jsx(Mge,{label:a,branch:e,snapshots:o,isLastGroup:i===r.length-1},a))})},Fge=({branch:e})=>{const{data:s,isLoading:n}=Rme(e.project_id),{branches:r,isLoading:a}=Hu({projectId:e.project_id}),o=m.useMemo(()=>r==null?void 0:r.reduce((l,d)=>(l[d.id]=d.name,l),{}),[r]),i=m.useMemo(()=>s==null?void 0:s.map(l=>{const d=o==null?void 0:o[l.source_branch_id??""];return{...l,source_branch_name:d}}),[s,o]),c=n||a;return t.jsxs("div",{children:[t.jsx(li,{isStartPoint:!0,isDisabled:!0,isEndPoint:!(s!=null&&s.length)&&!c,children:t.jsx(dge,{branch:e,snapshotCount:(s==null?void 0:s.length)??0})}),t.jsx(Uge,{branch:e,snapshots:i,isLoading:c})]})},zge=()=>{const{branch:e}=Tt();return e?t.jsxs("div",{className:bS.root,children:[t.jsx($me,{branch:e}),t.jsx(P,{appearance:"secondary",size:"s",className:bS.divider,children:tpe.dividerText}),t.jsx(Fge,{branch:e})]}):t.jsx(Se,{})},Id={old:{title:"Restore"},title:"Backup & Restore",description:e=>`Instantly restore a branch from a point in time or a snapshot${e?", and manage your snapshot schedule":""}`,earlyAccessToggle:"Early Access",earlyAccessHint:"Explore the new Backup & Restore page with snapshot capabilities. Toggle off to return to the original Restore page."},qge="_header_16dbf_1",Hge={header:qge};function Vge(){const e=le("snapshot_system"),[s,n]=nn(gt.EarlyAccessRestorePage,"opt-in",!0);return[e&&s,n]}const Wge=()=>{const e=le("snapshot_system"),s=le("snapshot_schedules"),[n,r]=Vge();return t.jsxs(t.Fragment,{children:[t.jsx(Bl,{title:e?Id.title:Id.old.title,subtitle:n?Id.description(s):void 0,className:Hge.header,actions:e&&t.jsxs(_s,{isSelected:n,onChange:a=>r(a),children:[Id.earlyAccessToggle,t.jsx(sn,{children:Id.earlyAccessHint})]})}),n?t.jsx(zge,{}):t.jsx(xme,{})]})},Gge="_container_1pk9s_1",Kge="_contentWrapper_1pk9s_8",Qge="_topText_1pk9s_12",Yge="_list_1pk9s_16",Jge="_infoText_1pk9s_20",kd={container:Gge,contentWrapper:Kge,topText:Qge,list:Yge,infoText:Jge},Zge=({onRequestClose:e,setShowUpgradeModal:s})=>{const{trackUiInteraction:n}=k({mountEvent:"protected_branch_upgrade_modal_shown"});return t.jsx(t.Fragment,{children:t.jsxs(It,{isOpen:!0,title:"Upgrade your plan to protect your branch",onRequestClose:e,width:700,children:[t.jsx(qe,{children:t.jsxs("div",{className:kd.container,children:[t.jsx(q,{name:"protect",size:40}),t.jsxs("div",{className:kd.contentWrapper,children:[t.jsx("div",{className:kd.topText,children:"Branch protection is only available on paid Neon plans. Upgrade to a launch plan to protect your branch and ensure:"}),t.jsxs("ul",{className:kd.list,children:[t.jsx("li",{children:"Your default branch cannot be deleted or reset"}),t.jsx("li",{children:"Computes associated with your default branch cannot be deleted"}),t.jsx("li",{children:"Your default branch will not be archived due to inactivity"}),t.jsx("li",{children:"SQL editor will warn you when running queries against your protected branch"}),t.jsx("li",{children:"Unique passwords are generated for all child branches of your default branch"}),t.jsx("li",{children:"IP allow lists can be selectively applied to your default branch"})]}),t.jsxs("div",{className:kd.infoText,children:["See"," ",t.jsx(Ke,{href:Um,target:"_blank",rel:"noopener noreferrer",children:"Protected branches"})," ","for more information."]})]})]})}),t.jsxs(Ee,{children:[t.jsx(A,{onClick:()=>{n("protected_branch_upgrade_modal_dismissed"),e==null||e()},appearance:"secondary",children:"Cancel"}),t.jsx(A,{onClick:()=>{n("protected_branch_upgrade_modal_upgrade_clicked"),e==null||e(),s(!0)},appearance:"primary",children:"Upgrade ($19/month)"})]})]})})},Xge="_root_h4un1_1",efe="_arrowButton_h4un1_6",tfe="_arrowButton_left_h4un1_19",sfe="_arrowButton_right_h4un1_28",nfe="_scrollBox_h4un1_38",yc={root:Xge,arrowButton:efe,arrowButton_left:tfe,arrowButton_right:sfe,scrollBox:nfe},rfe=({children:e})=>{const s=m.useRef(null),[n,r]=m.useState(!1),[a,o]=m.useState(!1),i=bi(()=>{const l=s.current,d=l.scrollWidth-l.offsetWidth;r(l.scrollLeft>0),o(l.scrollLeft<d)});m.useEffect(()=>(window.addEventListener("resize",i),()=>{window.removeEventListener("resize",i)}),[i]),m.useLayoutEffect(i);const c=l=>{const d=Math.floor(s.current.offsetWidth/2);s.current.scrollBy({left:l*d,behavior:"smooth"})};return t.jsxs("div",{className:yc.root,children:[t.jsx("div",{className:yc.scrollBox,ref:s,onScroll:i,children:e}),n&&t.jsx("button",{type:"button",className:V(yc.arrowButton,yc.arrowButton_left),title:"Scroll left",onClick:()=>{c(-1)},children:t.jsx(q,{name:"chevron_left",size:24})}),a&&t.jsx("button",{type:"button",className:V(yc.arrowButton,yc.arrowButton_right),title:"Scroll right",onClick:()=>{c(1)},children:t.jsx(q,{name:"chevron_right",size:24})})]})},afe="_card_138xs_1",ofe="_textContent_138xs_16",ife="_title_138xs_25",cfe="_description_138xs_30",yp={card:afe,textContent:ofe,title:ife,description:cfe},Li=({iconName:e,title:s,description:n,width:r,action:a})=>t.jsxs("div",{className:yp.card,style:r?{width:r}:void 0,"data-qa":"get-started-card",children:[t.jsx(q,{name:e,size:42}),t.jsxs("div",{className:yp.textContent,children:[t.jsx("div",{className:yp.title,children:s}),t.jsx("div",{className:yp.description,children:n})]}),a]}),x_={title:"Integrate Neon with your AI tools",description:"Connect to MCP clients like Cursor, Claude Desktop, Cline, Zed, and Windsurf.",actionButton:"Install MCP Server"},lfe=()=>{const{trackUiInteraction:e}=k();return t.jsx(Li,{iconName:"written_data",title:x_.title,description:x_.description,width:"277px",action:t.jsx(A,{appearance:"secondary",as:Ke,openInNewTab:!0,href:"https://neon.com/docs/ai/connect-mcp-clients-to-neon",onClick:()=>{e("get_started_widget_ai_tools_clicked")},children:x_.actionButton})})},v_={title:"Connect to your database",description:"Get connection details your app needs to connect to your database",actionButton:"Connect"},dfe=()=>{const{trackUiInteraction:e}=k(),{project:s}=F(),[n,r]=m.useState(!1);return t.jsxs(t.Fragment,{children:[s&&t.jsx(vg,{isOpen:n,project:s,onRequestClose:()=>{r(!1)}}),t.jsx(Li,{iconName:"connect",title:v_.title,description:v_.description,action:t.jsx(A,{appearance:"secondary",onClick:()=>{e("get_started_widget_connect_clicked"),r(!0)},children:v_.actionButton})})]})},ufe={startImport:"Start Import"},hfe="_button_33mbu_1",pfe={button:hfe},mfe=({connectionString:e})=>{const{trackUiInteraction:s}=k(),{projectId:n}=F(),[r,a]=m.useState(!1),o=nt(),i=m.useCallback(async()=>{a(!0),s("import_data_start_clicked");const c=new Date;try{const{data:{branch:l}}=await W.createProjectBranchImport(n,{branch_create:{branch:{name:`import-${c.toISOString()}`},endpoints:[{type:"read_write"}]},import_options:{source_connection_string:e}});s("import_data_start_succeeded"),o.push(G(C.ProjectsItemBranchesItem,{projectId:n,branchId:l.id}))}catch(l){s("import_data_start_failed"),Y(l)}finally{a(!1)}},[e,o,n,s]);return t.jsx(A,{className:pfe.button,appearance:"primary",loading:r,disabled:r,onClick:i,children:ufe.startImport})},Td={connectionStringLabel:"Your database connection string",runChecksButtonLabel:"Run Checks",loaderText:"Running checks...",limitExceededTitle:"Size limit exceeded",limitExceededMessage:"The size of the database exceeds what we support at the moment. Our Solutions team will reach out to you soon to provide assistance."},gfe="_container_m4alz_1",ffe="_form_m4alz_7",_fe="_connectionStringFormField_m4alz_14",bfe="_loaderContainer_m4alz_18",wp={container:gfe,form:ffe,connectionStringFormField:_fe,loaderContainer:bfe},xfe=({onOk:e})=>{const{trackUiInteraction:s}=k(),[n,r]=m.useState(!1),{limits:a}=Et(),{projectId:o}=F(),[i,c]=m.useState(""),[l,d]=m.useState(!1),[u,p]=m.useState([]),h=m.useCallback(f=>{c(f.target.value)},[c]),g=m.useCallback(async()=>{var f;r(!0),s("import_data_run_checks_clicked");try{const{data:_}=await W.getMigrationChecklist({connection_uri:i.trim(),project_id:o});p(_.data),a!==void 0&&_.database_size!==void 0&&a.max_import_size>=0&&a.max_import_size<_.database_size?(d(!0),s("import_data_run_checks_limits_exceeded")):(f=_.data)!=null&&f.every(({succeed:b,warning:x})=>x||b)&&(s("import_data_run_checks_succeeded"),e(i))}catch(_){s("import_data_run_checks_failed"),Y(_)}finally{r(!1)}},[a,e,o,i,s]);return t.jsxs("div",{className:wp.container,children:[t.jsxs(Ht,{onSubmit:g,formBodyClassName:wp.form,children:[t.jsx(B,{label:Td.connectionStringLabel,className:wp.connectionStringFormField,children:t.jsx(ce,{disabled:n,placeholder:"postgresql://",size:"s",value:i,onChange:h})}),t.jsx(A,{onClick:g,appearance:"primary",type:"submit",disabled:n||!i.trim()||a===void 0,children:Td.runChecksButtonLabel})]}),n?t.jsxs("div",{className:wp.loaderContainer,children:[t.jsx(on,{}),Td.loaderText]}):l?t.jsx(X,{appearance:"error",title:Td.limitExceededTitle,children:Td.limitExceededMessage}):t.jsx(FP,{checks:u})]})},$r={title:"Import Data",subtitle:"This tool checks compatibility before creating a copy of your data in Neon. Your source database remains untouched.",checksTitle:"Check compatibility",checksDescription:"We'll analyze your database and provide recommendations for a successful migration. No changes will be made to your source database.",importTitle:"Import data",importDescription:"We'll copy your data to a new branch.",importWarning:e=>t.jsxs(t.Fragment,{children:["Support for all database configurations is still evolving. Some databases may encounter issues. If your database is larger than 10 GB and you need help, ",e("contact us"),"."]}),importWarningTitle:"About automatic data import"},vfe="_title_m0bo0_1",jfe="_content_m0bo0_7",yfe="_importAlert_m0bo0_14",j_={title:vfe,content:jfe,importAlert:yfe},wfe=({onCloseDrawer:e})=>{const[s,n]=m.useState("checks"),[r,a]=m.useState(""),o=m.useCallback(u=>{a(u),n("import")},[]),{trackUiInteraction:i}=k(),[c,l]=m.useState(!1),d=m.useCallback(()=>{i("import_data_support_clicked"),l(!0)},[i]);return t.jsxs(t.Fragment,{children:[t.jsx(ao,{isOpen:c,onRequestClose:()=>l(!1)}),t.jsx(la,{"aria-label":$r.title,isOpen:!0,size:"l",onRequestClose:e,children:t.jsx(da,{title:t.jsxs("div",{className:j_.title,children:[$r.title,t.jsx(Ne,{appearance:"experimental",size:"m",children:"Beta"})]}),children:t.jsxs("div",{className:j_.content,children:[t.jsx(P,{as:"p",appearance:"secondary",children:$r.subtitle}),t.jsxs(RP,{children:[t.jsx(Mb,{title:$r.checksTitle,description:$r.checksDescription,isStepCollapsed:!1,isStepCompleted:s==="import",children:t.jsx(xfe,{onOk:o})}),t.jsxs(Mb,{title:$r.importTitle,isStepCollapsed:s!=="import",isStepCompleted:!1,children:[t.jsx(P,{as:"p",appearance:"secondary",children:$r.importDescription}),t.jsx(X,{className:j_.importAlert,title:$r.importWarningTitle,children:$r.importWarning(u=>t.jsx(M,{onClick:d,children:u}))}),t.jsx(mfe,{connectionString:r})]})]})]})})})]})},Sfe="importData",Cfe=e=>{const{trackUiInteraction:s}=k(),[n,r]=Ni(Sfe,{historyMethod:"push"}),a=bi(i=>{var c;s("import_data_button_clicked"),r("show"),(c=e.onClick)==null||c.call(e,i)}),o=bi(()=>{s("import_data_drawer_closed"),r(void 0)});return m.useEffect(()=>{s("import_data_button_shown")},[s]),t.jsxs(t.Fragment,{children:[t.jsx(A,{...e,onClick:a,children:e.children||"Import data"}),n&&t.jsx(wfe,{onCloseDrawer:o})]})},y_={title:"Import your data",description:"Automatically import your data directly into your Neon database",actionButton:"Import data"},Ife=()=>{const{trackUiInteraction:e}=k();return t.jsx(Li,{iconName:"data_import",title:y_.title,description:y_.description,action:t.jsx(Cfe,{appearance:"secondary",onClick:()=>{e("get_started_widget_import_database_clicked",{mode:"auto"})},children:y_.actionButton})})},w_={title:"Import your data",description:"Import your data directly into your Neon database",actionButton:"Import data"},kfe="manualImportData",Tfe=()=>{const{trackUiInteraction:e}=k(),[s,n]=Ni(kfe,{historyMethod:"push"}),{project:r}=F();return t.jsxs(t.Fragment,{children:[s&&t.jsx(zP,{project:r,onCloseDrawer:()=>{n(void 0)}}),t.jsx(Li,{iconName:"data_import",title:w_.title,description:w_.description,action:t.jsx(A,{appearance:"secondary",onClick:()=>{e("get_started_widget_import_database_clicked",{mode:"manual"}),n("show")},children:w_.actionButton})})]})},S_={title:"Get sample data",description:"Easily test out your Neon database with Neon prepared datasets",actionButton:"Get data"},Pfe=()=>{const{trackUiInteraction:e}=k();return t.jsx(Li,{iconName:"docs",title:S_.title,description:S_.description,action:t.jsx(A,{appearance:"secondary",as:Ke,openInNewTab:!0,href:"https://neon.com/docs/import/import-sample-data",onClick:()=>{e("get_started_widget_get_sample_data_clicked")},children:S_.actionButton})})},C_={title:"View database contents",description:"Manage your database and view table contents with the Tables page",actionButton:"Go to Tables page"},Nfe=()=>{const{trackUiInteraction:e}=k(),{projectId:s}=F(),{defaultBranch:n}=xt();return t.jsx(Li,{iconName:"table",title:C_.title,description:C_.description,action:t.jsx(A,{appearance:"secondary",as:Ke,disabled:!n,href:n?G(C.ProjectsItemDrizzle,{projectId:s,branchId:n.id}):void 0,onClick:()=>{e("get_started_widget_open_tables_clicked")},children:C_.actionButton})})},I_={title:"Connect from your IDE",description:"Use the Neon Local connect IDE extension to connect to your database.",actionButton:"Get extension"},Afe=()=>{const{trackUiInteraction:e}=k();return t.jsx(Li,{iconName:"vscode",title:I_.title,description:I_.description,action:t.jsx(A,{appearance:"secondary",as:Ke,openInNewTab:!0,href:"https://neon.com/docs/local/neon-local-connect",onClick:()=>{e("get_started_widget_vscode_extension_clicked")},children:I_.actionButton})})},SS={title:"Get started with your new database",dismiss:"Dismiss"},Efe="_root_zesyg_1",Ofe="_root_compact_zesyg_7",Lfe="_header_zesyg_12",$fe="_dismissButton_zesyg_19",Rfe="_cards_zesyg_23",Pd={root:Efe,root_compact:Ofe,header:Lfe,dismissButton:$fe,cards:Rfe},Bfe=({onDismiss:e})=>{const{project:s}=F(),{importAvailableRegions:n}=oo();k({mountEvent:"get_started_widget_shown"});const r=n.find(i=>i.id===(s==null?void 0:s.region_id)),a=le("vs_code_extension_get_started_card"),o=ot([t.jsx(dfe,{}),r?t.jsx(Ife,{}):t.jsx(Tfe,{}),a&&t.jsx(Afe,{}),t.jsx(lfe,{}),t.jsx(Nfe,{}),t.jsx(Pfe,{})]);return t.jsxs("div",{className:V(Pd.root,{[Pd.root_compact]:o.length<4}),children:[t.jsxs("div",{className:Pd.header,children:[t.jsx(J,{level:2,size:"h4",children:SS.title}),t.jsx(M,{className:Pd.dismissButton,onClick:e,children:SS.dismiss})]}),t.jsx(rfe,{children:t.jsx("div",{className:Pd.cards,children:o})})]})},Mfe=()=>{const{trackUiInteraction:e}=k(),s=LB(),{projectId:n}=F(),[r,a]=m.useState(()=>$B(n));if(!s||!r)return null;const o=()=>{e("get_started_widget_dismissed"),a(!1),RB(n)};return t.jsx(Bfe,{onDismiss:o})},Dfe=({projectId:e})=>{const{trackUiInteraction:s}=k();return t.jsx(A,{as:Ke,size:"s",appearance:"secondary",icon:"people",href:`${G(C.ProjectsItemSettings,{projectId:e})}#sharing`,onClick:()=>{s("header_project_share_button_clicked")},children:"Share"})},Ufe=({project:e})=>{const{trackUiInteraction:s}=k(),[n,r]=m.useState(!1);return t.jsxs(t.Fragment,{children:[e&&t.jsx(vg,{isOpen:n,project:e,onRequestClose:()=>{r(!1)}}),t.jsx(A,{appearance:"primary",icon:"connect",onClick:()=>{s("dashboard_toolbar_connect_clicked"),r(!0)},children:"Connect"})]})},Ffe=()=>{const{project:e,projectId:s}=F();return t.jsx(Il,{title:"Project Dashboard",breadcrumbs:t.jsx(hg,{}),actions:t.jsxs(t.Fragment,{children:[t.jsx(Ufe,{project:e}),t.jsx(Dfe,{projectId:s})]})})},UA=({project:e})=>{const{autoscalingMin:s,autoscalingMax:n}=Px(e),r={autoscaling_limit_min_cu:s,autoscaling_limit_max_cu:n};return t.jsx(bg,{endpoint:r})},Vv=e=>t.jsxs(Ti,{className:e.className,title:t.jsx(D,{style:{width:"240px",height:"12px"}}),children:[t.jsxs("div",{style:{display:"flex",gap:"22px",marginBottom:"40px"},children:[t.jsx(D,{style:{flexGrow:1,height:"44px"}}),t.jsx(D,{style:{flexGrow:1,height:"44px"}})]}),t.jsx(D,{style:{height:"44px",marginBottom:"40px"}}),t.jsx(D,{style:{height:"44px"}})]}),zfe="_root_fqm3d_1",qfe="_computeDefaultsValue_fqm3d_5",Hfe="_region_fqm3d_9",Sp={root:zfe,computeDefaultsValue:qfe,region:Hfe},Vfe=e=>{const{trackUiInteraction:s}=k(),{projectId:n,project:r,isLoading:a}=F(),{limits:o,isLoading:i}=Et(),c=o==null?void 0:o.max_autoscaling_cu,{getRegionSafe:l}=oo(),d=l((r==null?void 0:r.platform_id)??"",(r==null?void 0:r.region_id)??""),u=XF();return a||!r||i?t.jsx(Vv,{}):t.jsx(Ti,{...e,title:"Project settings",footer:u,links:c&&c>.25?t.jsx(M,{href:`${G(C.ProjectsItemSettings,{projectId:n})}#compute`,onClick:()=>s("storage_widget_go_to_settings_clicked"),children:"Manage"}):void 0,children:t.jsx("div",{className:Sp.root,children:t.jsxs(BC,{children:[t.jsxs("tr",{children:[t.jsx("td",{children:"Region"}),t.jsx("td",{children:t.jsx("div",{className:Sp.region,children:t.jsx("b",{children:d==null?void 0:d.name})})})]}),t.jsxs("tr",{children:[t.jsx("td",{children:"Default compute size"}),t.jsx("td",{children:t.jsx("b",{className:Sp.computeDefaultsValue,children:t.jsx(UA,{project:r})})})]}),t.jsxs("tr",{children:[t.jsx("td",{children:"History retention"}),t.jsx("td",{children:t.jsx("b",{className:Sp.computeDefaultsValue,children:zu(r.history_retention_seconds)})})]}),t.jsxs("tr",{children:[t.jsx("td",{children:"Postgres version"}),t.jsx("td",{children:t.jsx("b",{children:r==null?void 0:r.pg_version})})]})]})})})},Wfe={title:"Monitoring"},Gfe="_selectRow_dxbur_1",Kfe="_refreshButton_dxbur_10",CS={selectRow:Gfe,refreshButton:Kfe},Qfe="_root_19ivu_1",Yfe="_content_19ivu_8",Jfe="_dismissButton_19ivu_16",k_={root:Qfe,content:Yfe,dismissButton:Jfe},Zfe=({onDismiss:e})=>{const{trackUiInteraction:s}=k({mountEvent:"monitoring_widget_slack_app_announcement_shown"}),n=()=>{s("monitoring_widget_slack_app_announcement_dismissed"),e()};return t.jsxs("div",{className:k_.root,children:[t.jsxs("div",{className:k_.content,children:[t.jsx(q,{name:"slack",size:20}),t.jsx(M,{href:"https://neon.com/docs/manage/slack-app",openInNewTab:!0,onClick:()=>{s("monitoring_widget_slack_app_announcement_slack_app_link_clicked")},children:"Track your Neon projects in Slack"}),t.jsx(Ne,{appearance:"neon",children:"NEW"})]}),t.jsx("button",{type:"button",className:k_.dismissButton,title:"Dismiss",onClick:n,children:t.jsx(q,{name:"close",size:12})})]})};function Xfe(){const e=xx("growth_slack_app_announcement")==="monitoring_widget",[s,n]=m.useState(()=>!!ks.get(gt.SlackAppAnnouncementDismissed));return s||!e?{slackAppNode:null}:{slackAppNode:t.jsx(Zfe,{onDismiss:()=>{ks.set(gt.SlackAppAnnouncementDismissed,!0),n(!0)}})}}const e_e=({project:e})=>{var g;const{selectOptions:s}=xt(),{trackUiInteraction:n}=k(),{slackAppNode:r}=Xfe(),[a,o]=m.useState(null),[i,c]=m.useState(),l=Hs({projectId:e.id,branchId:((g=a==null?void 0:a.branch)==null?void 0:g.id)??""}),d=m.useMemo(()=>{var f;return((f=l.data)==null?void 0:f.endpoints)??[]},[l.data]);m.useEffect(()=>{!a&&s&&s.length>0&&o(s.find(f=>f.branch&&f.branch.default)??s[0])},[a,s]);const[u,p]=m.useState(0),h=m.useCallback(()=>{p(f=>f+1)},[]);return t.jsx(t.Fragment,{children:t.jsxs(Ti,{title:Wfe.title,links:t.jsx(M,{href:a!=null&&a.branch?G(C.ProjectsItemBranchesItemMonitoringMetrics,{projectId:e.id,branchId:a.branch.id}):void 0,onClick:()=>n("monitoring_widget_view_all_metrics_clicked"),children:"View all metrics"}),footer:r,children:[t.jsxs("div",{className:CS.selectRow,children:[t.jsx(B,{label:"Branch",children:t.jsx(am,{value:a,options:s,size:"s",onChange:o})}),t.jsx(B,{label:"Compute",children:t.jsx(Ix,{endpoints:d,endpointId:i,size:"s",onChange:f=>c((f==null?void 0:f.id)??void 0)})}),t.jsx("div",{className:CS.refreshButton,children:t.jsx(A,{appearance:"secondary",icon:"reset",size:"s",onClick:h,children:"Refresh"})})]}),i&&t.jsx(MC,{defaultRange:{type:"period",fromDate:new Date,period:r$.day},children:t.jsx(a$,{endpointId:i,height:280},u)})]})})},t_e="_branchName_1s5bc_1",s_e="_branchWrapper_1s5bc_7",n_e="_branchCell_1s5bc_13",T_={branchName:t_e,branchWrapper:s_e,branchCell:n_e},r_e=e=>{const{projectId:s,isLoading:n}=F(),r=Wm({projectId:s}),a=m.useMemo(()=>tA(r.data,d=>d.operations),[r.data]),{trackUiInteraction:o}=k(),{branchesById:i}=xt(),c=n||r.status==="pending";let l=t.jsx(P,{appearance:"secondary",children:"Something went wrong"});if(c)return t.jsx(Vv,{});if(r.status==="error")l=t.jsx(P,{appearance:"secondary",children:r.error.message});else if(a.length===0)l=t.jsx(P,{appearance:"secondary",children:"There are no operations yet"});else{const d=u=>{var p,h,g;return u.branch_id?(p=i[u.branch_id])!=null&&p.name?t.jsx(M,{"aria-label":(h=i[u.branch_id])==null?void 0:h.name,className:T_.branchWrapper,href:G(C.ProjectsItemBranchesItem,{projectId:s,branchId:u.branch_id}),onClick:()=>o("ops_widget_branch_link_clicked"),children:t.jsx("div",{className:T_.branchName,children:(g=i[u.branch_id])==null?void 0:g.name})}):t.jsx(Jb,{isDeleted:!0,branchId:u.branch_id}):"-"};l=t.jsxs(BC,{children:[t.jsxs("tr",{children:[t.jsx("th",{children:"Action"}),t.jsx("th",{children:"Branch"}),t.jsx("th",{children:"Date"}),t.jsx("th",{style:{textAlign:"left"},children:"Status"})]}),a.slice(0,5).map(u=>t.jsxs("tr",{children:[t.jsx("td",{children:t.jsx("b",{children:sA(u)})}),t.jsx("td",{className:T_.branchCell,children:d(u)}),t.jsx("td",{children:xe(u.created_at)}),t.jsx("td",{style:{textAlign:"left"},children:t.jsx(ZC,{status:u.status})})]},u.id))]})}return t.jsx(Ti,{...e,title:"Operations",links:t.jsx(M,{href:G(ue.ProjectsItemMonitoringOperations,{projectId:s}),onClick:()=>o("ops_widget_show_all_clicked"),children:"Show all"}),children:l})},a_e=vx({name:"branchWidget",initialState:{isVercelIntegrationAlertClosed:!1},reducers:{setIsVercelIntegrationAlertClosed:(e,{payload:s})=>{e.isVercelIntegrationAlertClosed=s}}}),Ou=jx(a_e);function*o_e(){try{const e=ks.get(gt.BranchWidget);if(e){const s=e;yield tC(Ou.actions.setIsVercelIntegrationAlertClosed(!!s.isVercelIntegrationAlertClosed))}}catch{ks.remove(gt.BranchWidget)}}function*i_e(){yield WC(Ou.actionTypes,function*(){const s=yield sC(Ou.selector);ks.set(gt.BranchWidget,s)})}function*c_e(){yield X1(o_e),yield eC(i_e)}Ou.setSaga(c_e);const Zb=Ou,l_e="_root_1iy8v_1",d_e="_close_1iy8v_9",u_e="_content_1iy8v_15",P_={root:l_e,close:d_e,content:u_e},N_={tag:"Preview Workflow",description:"You don't have any preview branches yet. Improve your workflow by adding database branching to your development previews.",button:"Install an integration"},h_e=()=>{const e=nt(),{projectId:s}=xl(),{isVercelIntegrationAlertClosed:n}=bl(Zb.selector),r=Dn(),{trackUiInteraction:a}=k(),{isVercelOrg:o,isLoading:i}=ae(),c=()=>{r(Zb.actions.setIsVercelIntegrationAlertClosed(!0)),a("branches_widget_install_integration_closed")},l=()=>{a("branches_widget_install_integration_clicked"),e.push(G(C.ProjectsItemIntegrations,{projectId:s}))};return n||i||o?null:t.jsxs("div",{className:P_.root,children:[t.jsx(ta,{appearance:"default",onClick:c,className:P_.close,iconName:"close",iconSize:12,"aria-label":"Close button"}),t.jsx(Ne,{appearance:"experimental",children:N_.tag}),t.jsx("p",{className:P_.content,children:N_.description}),t.jsx(A,{onClick:l,type:"button",appearance:"secondary",children:N_.button})]})},p_e="_createdBy_1q8ec_1",m_e={createdBy:p_e},g_e=({annotations:e={},endpoints:s})=>m.useMemo(()=>[{header:"Name",accessorKey:"name",maxSize:250,rowHeader:!0,render:n=>t.jsx(jA,{branch:n,searchWords:[]})},{header:"Primary compute",render:n=>t.jsx(xA,{branchId:n.id,endpoints:s})},{header:"Created by",size:110,render:n=>t.jsx("div",{className:m_e.createdBy,children:t.jsx(Tm,{iconOnly:!0,branch:n,annotation:e[n.id]})})}],[e,s]),f_e=({branches:e,annotations:s,endpoints:n,isLoading:r=!1})=>{const{trackUiInteraction:a}=k(),{projectId:o}=F(),i=g_e({annotations:s,endpoints:n});return t.jsx(Ps,{columns:i,rows:e,isLoading:r,"aria-label":"Branches",appearance:"borderless",rowHref:c=>G(C.ProjectsItemBranchesItem,{branchId:c.id,projectId:o}),onRowClick:()=>a("branches_widget_row_clicked")})},__e=e=>{var h;const{trackUiInteraction:s}=k(),{projectId:n,project:r,isLoading:a}=F(),{branches:o,annotations:i,isLoading:c}=xt(),l=cn({projectId:n}),d=a||c||!r,u=m.useMemo(()=>o.slice(0,5),[o]),p=m.useMemo(()=>o.find(OC),[o]);return d?t.jsx(Vv,{}):t.jsxs(Ti,{...e,title:"Branches",links:t.jsx(M,{href:G(C.ProjectsItemBranches,{projectId:n}),onClick:()=>s("branches_widget_go_to_branches_list_clicked"),children:"View all"}),children:[p&&t.jsxs(LC,{children:["Database import in progress on '",p.name,"' branch"]}),t.jsx(f_e,{branches:u,annotations:i,endpoints:((h=l.data)==null?void 0:h.endpoints)??[]}),t.jsx(h_e,{})]})},b_e=()=>{const e=le("growth_remove_non_primary_compute_limit"),{isFreeSubscription:s,isPaidSubscription:n,subscriptionType:r}=fe(),{isLoading:a,startPeriod:o,usage:i,allowance:c}=sI(),{isOwnProject:l}=F(),{branchesCount:d,isLoading:u}=xt(),{limits:p,isLoading:h}=Et();return{items:m.useMemo(()=>{const f=ot([as({isFreeSubscription:s,usageType:"storage",usage:i.projectStorage,allowance:c.storage,converterFn:Ds,isPaidSubscription:n,subscriptionType:r}),as({isFreeSubscription:s,usageType:"compute",usage:i.projectComputeTime,allowance:c.compute,converterFn:Ya,isPaidSubscription:n,subscriptionType:r}),e?void 0:as({isFreeSubscription:s,usageType:"branchCompute",usage:i.nonPrimaryCompute,allowance:c.nonPrimaryCompute,converterFn:Ya,isPaidSubscription:n,subscriptionType:r}),as({isFreeSubscription:s,usageType:"dataTransfer",usage:i.dataTransfer,allowance:c.dataTransfer,converterFn:Ds,isPaidSubscription:n,subscriptionType:r}),as({isFreeSubscription:s,usageType:"branches",usage:d,allowance:(p==null?void 0:p.max_branches)||-1,showAllowance:s,isPaidSubscription:n,subscriptionType:r})]);return l?f:$P(f)},[s,i.projectStorage,i.projectComputeTime,i.nonPrimaryCompute,i.dataTransfer,c.storage,c.compute,c.nonPrimaryCompute,c.dataTransfer,n,r,d,p==null?void 0:p.max_branches,l,e]),isLoading:a||u||h,startPeriod:mr(o,ke.Date)}},x_e=()=>{var b,x;const{isFreeSubscription:e,isPaidSubscription:s,subscriptionType:n}=fe(),{isOwnProject:r,projectId:a,project:o}=F(),i=o$(),{branchesCount:c,isLoading:l}=xt(),{limits:d,isLoading:u}=Et(),{data:p,isLoading:h}=Nx.useGetProjectConsumptionQuery(a),{startPeriod:g,isLoading:f}=Vm();return{items:m.useMemo(()=>{var T,E,H;const j=new eT((p==null?void 0:p.v3_metrics)??[]).collectProjectUsageMetrics(e,o),y=i$((T=i.pg_settings)==null?void 0:T["neon.max_cluster_size"]),w=((E=i.metrics.items)==null?void 0:E.per_project_aggr_inbound_private_network_traffic)!==void 0||((H=i.metrics.items)==null?void 0:H.per_project_aggr_outbound_private_network_traffic)!==void 0,S=ot([as({isFreeSubscription:e,usageType:"branches",usage:c,allowance:(d==null?void 0:d.max_branches)||-1,showAllowance:e,isPaidSubscription:s,subscriptionType:n}),as({isFreeSubscription:e,usageType:"compute",usage:j.computeSeconds,allowance:(d==null?void 0:d.per_project.compute_time_seconds)??-1,converterFn:c$,showAllowance:e,isPaidSubscription:s,subscriptionType:n}),as({isFreeSubscription:e,usageType:"storage",usage:e?(o==null?void 0:o.written_data_bytes)??0:j.storage,allowance:y??-1,showAllowance:e,converterFn:e?Ds:bu,isPaidSubscription:s,subscriptionType:n}),...e?[as({isFreeSubscription:e,usageType:"dataTransfer",usage:(o==null?void 0:o.data_transfer_bytes)??0,allowance:(d==null?void 0:d.per_project.data_transfer_bytes)??-1,showAllowance:e,converterFn:Ds,isPaidSubscription:s,subscriptionType:n})]:[],...w?[as({isFreeSubscription:e,usageType:"privateDataTransfer",usage:j.privateTransfer,allowance:-1,showAllowance:!1,converterFn:Ds,isPaidSubscription:s,subscriptionType:n})]:[],...e?[]:[as({isFreeSubscription:e,usageType:"publicDataTransfer",usage:j.publicTransfer,allowance:-1,showAllowance:!1,converterFn:Ds,isPaidSubscription:s,subscriptionType:n})]]);return r?S:$P(S)},[p==null?void 0:p.v3_metrics,e,o,i.pg_settings,(b=i.metrics.items)==null?void 0:b.per_project_aggr_inbound_private_network_traffic,(x=i.metrics.items)==null?void 0:x.per_project_aggr_outbound_private_network_traffic,c,d==null?void 0:d.max_branches,d==null?void 0:d.per_project.compute_time_seconds,d==null?void 0:d.per_project.data_transfer_bytes,s,n,r]),isLoading:h||l||u||f,startPeriod:mr(g,ke.Date)}},v_e=({showUpgrade:e})=>{const s=b_e();return t.jsx(gv,{data:s,type:"project",showUpgrade:e})},j_e=({showUpgrade:e})=>{const s=x_e();return t.jsx(gv,{data:s,type:"project",showUpgrade:e})},y_e=()=>{const{isPaidAccount:e,isPricingV3Account:s}=fe(),{isOwnProject:n}=F(),r=m.useMemo(()=>n&&!e,[n,e]);return s?t.jsx(j_e,{showUpgrade:r}):t.jsx(v_e,{showUpgrade:r})},w_e="_topSection_14cul_3",S_e="_container_14cul_10",C_e="_col_14cul_15",Cp={topSection:w_e,container:S_e,col:C_e},I_e=()=>{const{project:e}=F(),s=le("growth_protected_branch_upgrade_modal"),n=it(st.ProtectedBranchUpgrade),r=wv("project"),a=e&&e.provisioner===l$.K8SNeonvm,[o,i]=m.useState(!1),c=s&&n.isModalOpen&&(e==null?void 0:e.id);return t.jsxs(t.Fragment,{children:[o&&t.jsx(Pt,{type:dt.Default,isOpen:o,onRequestClose:()=>{i(!1)}}),c&&t.jsx(Zge,{setShowUpgradeModal:i,onRequestClose:()=>{n.closeModal()}}),r,t.jsx(Ffe,{}),t.jsxs("div",{className:Cp.topSection,children:[t.jsx(Mfe,{}),t.jsx(y_e,{})]}),t.jsxs("div",{className:Cp.container,"data-qa":"project_dashboard",children:[t.jsx("div",{className:Cp.col,children:a?t.jsx(e_e,{project:e}):t.jsx(r_e,{})}),t.jsxs("div",{className:Cp.col,children:[t.jsx(__e,{}),t.jsx(Vfe,{})]})]})]})},k_e=(e,s,n)=>{const{data:r,isLoading:a,error:o}=_t({queryKey:["dataAPI",e,s,n],queryFn:async()=>{var i;if(!e||!s||!n)return null;try{return(await W.getProjectBranchDataApi(e,s,n)).data.url}catch(c){if(yl(c)&&((i=c.response)==null?void 0:i.status)===404)return null;throw c}}});return{url:r,isLoading:a,error:o}},T_e=({projectId:e,branchId:s,databaseName:n},{onSuccess:r,onError:a,...o})=>{const i=_e();return ve({mutationFn:()=>W.deleteProjectBranchDataApi(e,s,n,{}),onSuccess:(...c)=>{r==null||r(...c),i.invalidateQueries({queryKey:["dataAPI",e,s,n]})},onError:(c,...l)=>{a==null||a(c,...l),Y(c)},...o})},P_e=({projectId:e,branchId:s,databaseName:n},{onSuccess:r,onError:a,...o})=>{const i=_e();return ve({mutationFn:({authProviderType:c,providerName:l,jwksUrl:d,expectedAudience:u})=>{let p={};const h=u==null?void 0:u.trim();switch(c){case"external":p={auth_provider:"external",jwks_url:d,jwt_audience:h&&h!==""?h:void 0,provider_name:l};break;case"neon_auth":p={auth_provider:"neon_auth"};break;default:p={};break}return W.createProjectBranchDataApi(e,s,n,p)},onSuccess:(...c)=>{r==null||r(...c),i.invalidateQueries({queryKey:["dataAPI",e,s,n]})},onError:(c,...l)=>{a==null||a(c,...l),Y(c)},...o})},N_e="_snippet_q8uhj_1",A_e="_fitHeight_q8uhj_6",E_e="_expandHeight_q8uhj_10",A_={snippet:N_e,fitHeight:A_e,expandHeight:E_e},O_e=({snippetOption:e,height:s="static",onReveal:n,onCopy:r})=>{const[a,o]=m.useState(e.tabs[0]),{tabs:i}=e,{fetchPassword:c}=Sl(),{project:l}=F(),{list:d}=Ai(),[u]=El(),{list:p}=un();let h=p.find(y=>y.name===u);h||(h=p[0]);const g=h==null?void 0:h.owner_name,f=d.find(y=>y.name===g)??d[0];e.tabs.includes(a)||o(e.tabs[0]);function _(){const y=e.tabs.find(w=>w.value===a.value);return(y==null?void 0:y.codeSnippet)??""}const b=m.useCallback(y=>{const w=i.find(S=>S.value===y);o(w)},[i]),x=DC(async()=>{if(!f||!h)return"";let y="";if(l&&l.store_passwords)try{y=await c(l.id,f)??""}catch(w){Y(w)}return a.codeSnippet.replace(kR,y)}),v=l!=null&&l.store_passwords&&a.hasSecrets?{getUnmaskedValue:x,onReveal:n}:void 0,j={getUnmaskedValue:x,onCopy:r};return t.jsxs("div",{children:[t.jsx(jr,{variant:"contained",options:i,value:a.value,onChange:b}),t.jsx(vi,{className:V(A_.snippet,{[A_.fitHeight]:s==="fit",[A_.expandHeight]:s==="expand"}),variant:"contained",mode:a.language,scrollable:!0,reveal:v,copy:j,children:_()})]})},L_e="_instructionsText_ejnn9_8",$_e="_instructionsHighlight_ejnn9_13",R_e="_instructionsCodeSpan_ejnn9_17",Wv={instructionsText:L_e,instructionsHighlight:$_e,instructionsCodeSpan:R_e},Lu=({children:e,className:s})=>t.jsx("p",{className:V(Wv.instructionsText,s),children:e}),Gv=({children:e,className:s})=>t.jsx("b",{className:V(Wv.instructionsHighlight,s),children:e}),B_e=({children:e,className:s})=>t.jsx(Pe,{className:V(Wv.instructionsCodeSpan,s),children:e}),Nm=[{value:"clerk",label:"Clerk",icon:"clerk_icon",jwksUrlSlug:"clerk",expectedAudienceRequired:!1},{value:"auth0",label:"Auth0",icon:"auth0_icon",jwksUrlSlug:"auth0",expectedAudienceRequired:!1},{value:"aws_cognito",label:"AWS Cognito",icon:"aws_incognito",jwksUrlSlug:"amazonaws",expectedAudienceRequired:!1},{value:"gcp_identity",label:"GCP Cloud Identity",icon:"gcp_identity",jwksUrlSlug:"google",expectedAudienceRequired:!0},{value:"azure_ad",label:"Entra",icon:"azure_ad",jwksUrlSlug:"microsoft",expectedAudienceRequired:!1},{value:"stytch",label:"Stytch",icon:"stytch",jwksUrlSlug:"stytch",expectedAudienceRequired:!1},{value:"descope",label:"Descope",icon:"descope_auth",jwksUrlSlug:"descope",expectedAudienceRequired:!1},{value:"keycloak",label:"Keycloak",icon:"keycloak_icon",jwksUrlSlug:"realms",expectedAudienceRequired:!1},{value:"firebase_auth",label:"Firebase Auth",icon:"firebase",jwksUrlSlug:"firebase",expectedAudienceRequired:!0},{value:"stack",label:"Stack Auth",icon:"stack_auth",jwksUrlSlug:"stack-auth",expectedAudienceRequired:!1},{value:"other",label:"Other",icon:"other",expectedAudienceRequired:!1}];function M_e(e){const s=Nm.find(n=>n.value===e);return s||Nm.find(n=>n.value==="other")}const D_e="_body_1nwuy_1",U_e="_helpMessage_1nwuy_6",F_e="_providersList_1nwuy_10",z_e="_inputContainer_1nwuy_17",q_e="_helpLink_1nwuy_23",H_e="_jwksInput_1nwuy_28",V_e="_providerIconUnselected_1nwuy_32",W_e="_fieldContainer_1nwuy_36",G_e="_jwksInputDarkMode_1nwuy_44",sr={body:D_e,helpMessage:U_e,providersList:F_e,inputContainer:z_e,helpLink:q_e,jwksInput:H_e,providerIconUnselected:V_e,fieldContainer:W_e,jwksInputDarkMode:G_e},K_e="other",IS=2050,FA=({submitButton:e})=>{const s=kt(),{colorScheme:n}=ro(),[r,a]=m.useState(!1),{setValue:o}=s,i=m.useMemo(()=>Ux(c=>{const l=URL.canParse(c);if(!c.length||!l){o("providerName",""),a(!1);return}const d=Nm.find(u=>u.jwksUrlSlug&&c.includes(u.jwksUrlSlug));o("providerName",(d==null?void 0:d.value)??K_e),a((d==null?void 0:d.expectedAudienceRequired)??!1)},300,{leading:!0,trailing:!0}),[o]);return t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsxs("div",{className:sr.inputContainer,children:[t.jsx(B,{className:sr.fieldContainer,error:!!s.formState.errors.jwksUrl,label:"JSON Web Key Set (JWKS) URL / Endpoint",children:t.jsx(ce,{className:V(sr.jwksInput,{[sr.jwksInputDarkMode]:n==="dark"}),size:"l",type:"url",placeholder:"https://your.auth.provider/jwks/PROJECT_ID",maxLength:IS,...s.register("jwksUrl",{required:!0,onChange:c=>{i(c.target.value)}})})}),t.jsx(B,{className:sr.fieldContainer,label:t.jsxs(t.Fragment,{children:[r?null:"(Optional) ","JWT Audience"," ",t.jsxs(sn,{children:[t.jsxs("p",{children:["Only JWTs with the ",t.jsx("em",{children:'"aud"'})," field set to this value will be accepted."]}),t.jsx("br",{}),t.jsx("p",{children:"If unspecified, any JWT will be accepted as long as it was signed by a JWK listed in this JWKS URL."})]})]}),error:!!s.formState.errors.expectedAudience,children:t.jsx(ce,{size:"l",type:"text",maxLength:IS,...s.register("expectedAudience",{required:r})})}),e]}),t.jsx(M,{className:sr.helpLink,openInNewTab:!0,href:d$,icon:"external_link",iconSize:"s",children:"Where do I get this URL?"})]}),t.jsx("div",{className:sr.providersList,children:Nm.map(c=>{const l=s.watch("providerName")===c.value;return t.jsx("span",{children:t.jsx(ne,{content:c.label,placement:"top",children:t.jsx("div",{className:V({[sr.providerIconUnselected]:!l}),children:t.jsx(q,{name:c.icon,size:32})})})},c.value)})})]})},Q_e=({handleCreate:e,isOpen:s,createJwksRequestStatus:n,onRequestClose:r})=>{const a=kt(),{trackUiInteraction:o}=k(),{reset:i}=a,c=m.useMemo(()=>({title:"Add new authentication provider",isOpen:s,maxWidth:700,onRequestClose:()=>{i(),r==null||r(),o("neon_authorize_add_provider_modal_dismissed")}}),[s,r,o,i]);return t.jsxs(gs,{modalProps:c,providerProps:a,onSubmit:e,children:[t.jsxs(qe,{className:sr.body,children:[t.jsxs(Lu,{className:sr.helpMessage,children:["Enter the URL where your authentication provider's JSON Web Key Set (JWKS) is hosted. This URL allows us to retrieve the public keys needed to verify JSON Web Tokens (JWTs) issued by your provider."," "]}),t.jsx(FA,{})]}),t.jsx(Ee,{children:t.jsx(Ie,{disabled:!a.formState.isValid,loading:n==="pending",onClick:()=>{o("neon_authorize_add_provider_modal_submitted")},children:"Set Up"})})]})},Y_e="/assets/assets/empty-state-diagram-dark-D13rg5wl.svg",J_e="/assets/assets/empty-state-diagram-light-DCxISfU5.svg",Z_e="_emptyStateContainer_1mh8t_1",X_e="_authProviderRow_1mh8t_5",ebe="_jwksUrlColumnContent_1mh8t_11",tbe="_jwksUrlCopyButton_1mh8t_29",sbe="_actionsColumn_1mh8t_34",nbe="_headerSection_1mh8t_38",rbe="_imageContainer_1mh8t_42",abe="_emptyStateActions_1mh8t_56",obe="_widget_1mh8t_64",Jr={emptyStateContainer:Z_e,authProviderRow:X_e,jwksUrlColumnContent:ebe,jwksUrlCopyButton:tbe,actionsColumn:sbe,headerSection:nbe,imageContainer:rbe,emptyStateActions:abe,widget:obe},ibe=({jwks:e})=>{const{trackUiInteraction:s}=k(),n=hpe(e.project_id),{confirm:r}=Ye(),a=m.useMemo(()=>[{items:[{label:"Remove Provider",async onClick(){s("neon_authorize_remove_provider_shown"),await r({header:"Delete Provider",text:t.jsx(X,{appearance:"warning",children:"Are you sure you want to remove this provider?"}),confirmButtonText:"Confirm"})?(s("neon_authorize_remove_provider_confirmed"),n.mutate(e.id,{onSuccess:()=>{pe("Removed the provider successfully")},onError:()=>{Ct("Failed to remove the provider")}})):s("neon_authorize_remove_provider_dismissed")}}]}],[e,n,r,s]);return t.jsx(Jt,{sections:a,placement:"bottom",children:t.jsx(fs,{"aria-label":"Provider actions"})})},cbe=({handleOpenCreateForm:e})=>{const{colorScheme:s}=ro(),n=s==="light"?J_e:Y_e;return t.jsxs("div",{className:Jr.emptyStateContainer,children:[t.jsx("div",{className:Jr.headerSection,children:t.jsxs(Lu,{children:["Add your authentication provider to serve as the authority for signing JWT tokens and secure your REST API with JWT validation."," ",t.jsx(M,{openInNewTab:!0,href:u$,icon:"external_link",children:"Learn more"})]})}),t.jsx("div",{className:Jr.imageContainer,children:t.jsx("img",{src:n,alt:"Neon RLS Diagram"})}),t.jsx("div",{className:Jr.emptyStateActions,children:t.jsx(A,{onClick:e,size:"l",children:"Set up authentication provider"})})]})},lbe=({jwks:e})=>{const{trackUiInteraction:s}=k();return[...e.map(a=>({...a,...M_e(a.provider_name)}))].sort((a,o)=>{const i=new Date(a.created_at);return new Date(o.created_at).getTime()-i.getTime()}).map(a=>t.jsx(Ti,{className:Jr.widget,title:t.jsx(q,{name:a.provider_name==="stack"?"neon":a.icon,size:30,title:a.label}),links:t.jsxs("div",{className:Jr.actionsColumn,children:[a.provider_name==="stack"&&t.jsx(M,{href:"https://neon.com/docs/neon-auth/overview",openInNewTab:!0,icon:"external_link",children:"Neon Auth Overview"}),t.jsx(ibe,{jwks:a})]}),footer:t.jsx(Ft,{label:"Created on",children:xe(a.created_at)}),children:t.jsxs("div",{className:Jr.authProviderRow,children:[t.jsxs("div",{className:Jr.jwksUrlColumnContent,children:[t.jsx(Ft,{label:"JKWS URL",title:a.jwks_url,children:a.jwks_url}),t.jsx(vl,{onCopy:()=>s("neon_authorize_copy_jwks_url_clicked"),className:Jr.jwksUrlCopyButton,text:a.jwks_url})]}),a.jwt_audience&&t.jsx(Ft,{label:t.jsxs(t.Fragment,{children:["JWT Audience"," ",t.jsxs(sn,{children:[t.jsxs("p",{children:["Only JWTs with the ",t.jsx("em",{children:'"aud"'})," field set to this value will be accepted."]}),t.jsx("br",{}),t.jsx("p",{children:"If unspecified, any JWT will be accepted as long as it was signed by a JWK listed in this JWKS URL."})]})]}),"aria-label":"Actions",children:a.jwt_audience})]})},a.id))},zA=()=>{const{trackUiInteraction:e}=k(),[s,n]=m.useState(void 0),r=Ts({mode:"onSubmit"}),{reset:a}=r,{projectId:o}=F(),{data:i,status:c}=qv(o),l=upe(o),{fetch:d}=Ai(),u=(i==null?void 0:i.jwks.length)===0,p=m.useCallback(_=>{l.mutate(_,{onSuccess:()=>{u?n(void 0):(n(void 0),pe("Authentication provider configured")),a(),d()},onError:b=>{var v,j;const x="Failed to set up authentication provider";yl(b)&&((j=(v=b.response)==null?void 0:v.data)!=null&&j.message)?Ct(`${x}: ${b.response.data.message}`):Ct(x)}})},[l,u,d,a]);let h,g;switch(c){case"error":h=t.jsx("div",{children:"Failed to load JWKS — please refresh or contact us if this persists."});break;case"pending":h=t.jsx(D,{height:12,width:80});break;case"success":u?h=t.jsx(cbe,{handleOpenCreateForm:()=>{e("neon_authorize_empty_state_add_provider_clicked"),n({modal:"add-jwks-modal"})}}):h=t.jsx(lbe,{jwks:i.jwks});break}let f=null;return(s==null?void 0:s.modal)==="add-jwks-modal"&&(f=t.jsx(Q_e,{isOpen:!0,createJwksRequestStatus:l.status,handleCreate:p,onRequestClose:()=>n(void 0)})),t.jsxs(De,{id:"authentication-providers",children:[t.jsx(Te,{actions:g,children:"Authentication providers"}),t.jsxs(es,{...r,children:[h,f]})]})},Nd={title:"Data API",description:"Access your database through auto-generated REST API endpoints.",urlTitle:"REST API Endpoint",urlDescription:"Provides read-write access to tables without Row Level Security enabled.",footer:t.jsxs(P,{children:["To read and write data with the Data API, set up"," ",t.jsx(Ke,{href:"https://neon.com/docs/guides/neon-auth",children:"authentication"})," ","and RLS policies."," ",t.jsx(Ke,{href:UC,children:"Learn more"})]})},dbe="_field_urd9z_1",ube="_appUrlSection_urd9z_5",hbe="_appUrl_urd9z_5",E_={field:dbe,appUrlSection:ube,appUrl:hbe},pbe=({url:e})=>t.jsxs(Za,{title:Nd.title,description:Nd.description,children:[t.jsxs("section",{children:[t.jsx(J,{level:6,className:E_.field,children:t.jsx(P,{appearance:"secondary",children:Nd.urlTitle})}),t.jsxs("div",{className:E_.appUrlSection,children:[t.jsx(Bn,{className:E_.appUrl,children:e}),t.jsx(P,{appearance:"tertiary",size:"s",children:Nd.urlDescription})]})]}),t.jsx(P,{children:Nd.footer})]}),mbe="_wrapper_jvaxz_1",kS={wrapper:mbe},qA=({tooltip:e,tooltipDisabled:s,children:n,...r})=>t.jsx("div",{className:kS.wrapper,children:t.jsx(ne,{content:e,disabled:s,children:t.jsx("div",{className:kS.wrapper,children:t.jsx(A,{...r,children:n})})})}),HA=e=>{const{org:s,isLoading:n}=ae(),{isOrgAdmin:r,isLoading:a}=qt(),{isCollaborator:o,isLoading:i}=jl(e),c=n||i||a;return c?{isAllowedToManage:!1,isLoading:c}:o?{isAllowedToManage:!1,isCollaborator:!0,isLoading:c}:s?{isAllowedToManage:r,isLoading:c}:{isAllowedToManage:!0,isLoading:c}},fu={title:"Disable",description:"Disables the Data API for this branch. This will immediately terminate all active connections and block access to data for any apps, websites, or services using the API.",successToast:"Data API has been disabled",disableNotAllowedSharedProject:"You cannot disable the Data API on shared projects. Contact the Project owner for help.",disableNotAllowed:"You need additional permissions to disable the Data API. Contact your Organization Admin for help."},gbe=({isLoading:e,isAllowedToManage:s,isCollaborator:n})=>e||s?null:n?fu.disableNotAllowedSharedProject:fu.disableNotAllowed,fbe=({projectId:e,branchId:s,databaseName:n})=>{const{isAllowedToManage:r,isCollaborator:a,isLoading:o}=HA(e),{mutate:i,isPending:c}=T_e({projectId:e,branchId:s,databaseName:n},{onSuccess:()=>{pe(fu.successToast)},onError:l=>{Y(l)}});return t.jsx(Za,{title:fu.title,description:fu.description,children:t.jsx(qA,{appearance:"danger",tooltip:gbe({isLoading:o,isAllowedToManage:r,isCollaborator:a})??void 0,tooltipDisabled:o||r,disabled:o||!r,onClick:()=>{i()},loading:c,children:"Disable"})})},di={title:"Enable",description:t.jsxs(P,{children:["Enable the ",t.jsx("b",{children:"Data API"})," to instantly create a REST API for your database.",t.jsx("br",{}),"Query tables, views, and functions using standard HTTP requests without writing any backend code."," ",t.jsx(Ke,{href:UC,children:"Learn more"})]}),authProviderInfo:t.jsxs(P,{children:["Your auth provider manages sign‑up, login, and account access for the Data API.",t.jsx("br",{}),"It issues the JWTs required for API requests. Neon Auth is selected by default."]}),successToast:"Data API has been enabled",installNotAllowedSharedProject:"You cannot install the Data API on shared projects. Contact the Project Admin for help.",installNotAllowedTTLBranch:"You cannot install the Data API on a branch with an expiration date.",installNotAllowed:"You need additional permissions to install the Data API. Contact your Organization Admin for help."},_be="_authProviderTypeSelect_19l6m_1",bbe={authProviderTypeSelect:_be},Ad={neon_auth:{value:"neon_auth",label:"Neon Auth",disabled:!1},external:{value:"external",label:"Other Provider",disabled:!1},skip:{value:"skip",label:"Skip (setup later)",disabled:!1}},xbe=({isLoading:e,isAllowedToManage:s,isCollaborator:n,isTTLBranch:r})=>r?di.installNotAllowedTTLBranch:e||s?null:n?di.installNotAllowedSharedProject:di.installNotAllowed,vbe=({branch:e,databaseName:s})=>{var x;const n=le("data_api_enable_subzero"),[r,a]=m.useState("neon_auth"),{trackUiInteraction:o}=k(),{isAllowedToManage:i,isCollaborator:c,isLoading:l}=HA(e.project_id),{projectId:d}=F(),{data:u}=qv(d),p=Ts({defaultValues:{authProviderType:"neon_auth",providerName:"",jwksUrl:"",expectedAudience:""},mode:"onChange"}),{mutate:h,isPending:g}=P_e({projectId:e.project_id,branchId:e.id,databaseName:s},{onSuccess:()=>{pe(di.successToast)}});if(!u||l||g)return t.jsx(Se,{});const f=!!e.expires_at,_=u==null?void 0:u.jwks.length;_>0?Ad.skip.label=`Use existing (${_} JWKS)`:(Ad.skip.label="Skip (setup later)",n||(Ad.skip.disabled=!0));const b=Ad[r];return t.jsx(es,{...p,children:t.jsxs(Za,{title:di.title,description:di.description,children:[t.jsx(B,{label:"Authentication provider",error:(x=p.formState.errors.authProviderType)==null?void 0:x.message,className:bbe.authProviderTypeSelect,children:t.jsx(na,{value:b,onChange:v=>{a(v?v.value:"neon_auth")},options:Object.values(Ad)})}),di.authProviderInfo,r==="external"&&t.jsx(FA,{}),t.jsx(qA,{tooltip:xbe({isLoading:l,isAllowedToManage:i,isCollaborator:c,isTTLBranch:f})??void 0,tooltipDisabled:l||i&&!f,disabled:l||!i||f,onClick:()=>{o("data_api_enable");const v=p.getValues();h({authProviderType:r==="skip"?void 0:r,providerName:v.providerName,jwksUrl:v.jwksUrl,expectedAudience:v.expectedAudience})},loading:g,children:"Enable"})]})})},TS={title:"Working with the Data API",description:t.jsxs(t.Fragment,{children:["To build apps that use the Data API, configure authentication for your users and"," ",t.jsx(Ke,{href:"https://neon.com/postgresql/postgresql-administration/postgresql-row-level-security",children:"Row-Level Security in Postgres"}),"."]})},jbe="_stepList_1dz6t_1",ybe={stepList:jbe},VA=2*Fm,wbe=100,Uc="neon_auth",Sbe="ProjectUser",Cbe=`
  SELECT
    users."projectUserId" as "id",
    users."displayName" as "name",
    users."profileImageUrl" as "avatar",
    users."createdAt" as "created_at",
    users."updatedAt" as "updated_at",
    channel."value" as "email",
    channel."isVerified" as "emailVerified",
    (
      to_jsonb(users.*) ||
      jsonb_build_object(
        'lastActiveAt', (SELECT MAX("eventStartedAt") as "lastActiveAt" FROM ${Uc}."Event"
                        WHERE data->>'userId' =(users."projectUserId")::text),
        'contacts', (SELECT jsonb_agg(to_jsonb(channel.*)) FROM ${Uc}."ContactChannel" as channel
                    WHERE channel."projectUserId" = users."projectUserId")
      )
    ) as raw_json
  FROM
    ${Uc}."ProjectUser" as users,
    ${Uc}."ContactChannel" as channel
  WHERE users."projectUserId" = channel."projectUserId"
  ORDER BY users."createdAt" DESC
  LIMIT ${wbe}

`,Ibe=zt({id:at(),raw_json:zt({}).passthrough(),name:at().nullable(),email:at().email().nullable(),emailVerified:el().nullable(),avatar:at().nullable(),created_at:Ga().nullable(),updated_at:Ga().nullable()}),kbe=zt({count:en()}),Xa={recentUsers:e=>["neonAuthRecentUsers",e],usersCount:e=>["neonAuthUsersCount",e]},Tbe=(e,s)=>po({queryKey:{key:Xa.recentUsers(e),appendConnectionString:!1},query:Cbe,zodSchema:Ibe,options:{enabled:!!s,staleTime:VA},connectionParams:{branchId:s==null?void 0:s.branch_id,dbName:s==null?void 0:s.db_name}}),Pbe=(e,s)=>po({queryKey:{key:Xa.usersCount(e),appendConnectionString:!1},query:`SELECT COUNT(*)::integer as "count"
     FROM ${Uc}."ProjectUser"
`,zodSchema:kbe,options:{enabled:!!s,staleTime:VA},connectionParams:{branchId:s==null?void 0:s.branch_id,dbName:s==null?void 0:s.db_name}}),WA=2*Fm,Nbe=100,wg="neon_auth",GA="users_sync",Sg=`${wg}.${GA}`,Abe=[`schema "${wg}" already exists`,"Failed to create the schema"],Ebe=e=>e.includes(`relation "${Sg}" does not exist`),PS=e=>Abe.some(s=>e.includes(s)),Obe=["id","name","email","raw_json","updated_at","created_at","deleted_at"],Lbe=zt({id:at(),raw_json:zt({}).passthrough(),name:at().nullable(),email:at().email().nullable(),created_at:Ga().nullable(),updated_at:Ga().nullable(),deleted_at:Ga().nullable()}),$be=zt({count:en()}),aa={recentUsers:e=>["getRecentUsers",e],usersCount:e=>["getAllUsersCount",e]},Rbe=()=>{const{projectId:e}=F(),{data:s}=$i(e),n=s==null?void 0:s[0];return po({queryKey:{key:aa.recentUsers(e),appendConnectionString:!1},query:`SELECT ${Obe.join(", ")}
     FROM ${Sg}
     WHERE deleted_at IS NULL
     ORDER BY created_at DESC
     LIMIT ${Nbe}`,zodSchema:Lbe,options:{enabled:!!n,staleTime:WA},connectionParams:{branchId:n==null?void 0:n.branch_id,dbName:n==null?void 0:n.db_name}})},Bbe=()=>{const{projectId:e}=F(),{data:s}=$i(e),n=s==null?void 0:s[0];return po({queryKey:{key:aa.usersCount(e),appendConnectionString:!1},query:`SELECT COUNT(id)::integer as "count"
     FROM ${Sg}
     WHERE deleted_at IS NULL
`,zodSchema:$be,options:{enabled:!!n,staleTime:WA},connectionParams:{branchId:n==null?void 0:n.branch_id,dbName:n==null?void 0:n.db_name}})},Mbe=e=>{const s=_e();return ve({mutationFn:async n=>(await W.deleteNeonAuthUser(e,n)).data,onSuccess:()=>{s.invalidateQueries({queryKey:aa.usersCount(e)}),s.invalidateQueries({queryKey:aa.recentUsers(e)}),s.invalidateQueries({queryKey:Xa.usersCount(e)}),s.invalidateQueries({queryKey:Xa.recentUsers(e)})}})},Ii={all:e=>["identityIntegrations",e],authProviderKeys:({projectId:e,authProvider:s})=>["authProviderKeys",e,s]},$i=(e,s)=>_t({...s,queryKey:Ii.all(e),queryFn:async()=>{var r;const n=await W.listNeonAuthIntegrations(e);return(r=s==null?void 0:s.onSuccess)==null||r.call(s),n.data.data}}),Dbe=e=>{const s=_e();return ve({mutationFn:async({identityProvider:n,deleteData:r})=>(await W.deleteNeonAuthIntegration(e,n.value,{delete_data:r})).data,onSuccess:()=>{s.invalidateQueries({queryKey:Ii.all(e)}),s.removeQueries({queryKey:aa.usersCount(e),exact:!0}),s.removeQueries({queryKey:aa.recentUsers(e),exact:!0}),s.removeQueries({queryKey:Xa.usersCount(e),exact:!0}),s.removeQueries({queryKey:Xa.recentUsers(e),exact:!0})}})},Ube=()=>{const e=_e();return ve({mutationFn:async s=>(await W.createNeonAuthIntegration(s)).data,onSuccess:(s,n)=>{e.invalidateQueries({queryKey:Ii.all(n.project_id)})}})},Fbe=({projectId:e,authProvider:s})=>{const n=_e();return _t({retry:!1,queryKey:Ii.authProviderKeys({projectId:e,authProvider:s}),queryFn:()=>n.getQueryData(Ii.authProviderKeys({projectId:e,authProvider:s})),enabled:!1})},KA=()=>{const e=_e();return ve({mutationFn:async s=>(await W.createNeonAuthProviderSdkKeys(s)).data,onSuccess:(s,n)=>{e.setQueryData(Ii.authProviderKeys({projectId:n.project_id,authProvider:n.auth_provider}),s)}})},zbe=e=>ve({mutationFn:async()=>(await W.syncAuthKeysVercel(e,{})).data}),qbe=()=>{const e=_e(),{projectId:s}=F();return ve({mutationFn:async n=>(await W.transferNeonAuthProviderProject(n)).data,onSuccess:()=>{e.invalidateQueries({queryKey:Ii.all(s)})}})},Hbe=()=>{const e=_e();return ve({mutationFn:async s=>(await W.createNeonAuthNewUser(s)).data,onSuccess:(s,n)=>{e.invalidateQueries({queryKey:aa.recentUsers(n.project_id)}),e.invalidateQueries({queryKey:aa.usersCount(n.project_id)}),e.invalidateQueries({queryKey:Xa.usersCount(n.project_id)}),e.invalidateQueries({queryKey:Xa.recentUsers(n.project_id)})}})},Vbe="_root_1f463_1",Wbe="_header_1f463_7",Gbe="_headerTitle_1f463_12",Kbe="_headerAction_1f463_18",Qbe="_stepCompletedIcon_1f463_24",Ybe="_content_1f463_28",Ea={root:Vbe,header:Wbe,headerTitle:Gbe,headerAction:Kbe,stepCompletedIcon:Qbe,content:Ybe},Xb=({title:e,description:s,status:n="pending",action:r,children:a})=>t.jsxs("div",{className:Ea.root,children:[n==="pending"?t.jsx(q,{name:"empty_task",size:20}):t.jsx(q,{name:"check_circle_inverted2",size:20,className:Ea.stepCompletedIcon}),t.jsxs("div",{className:Ea.content,children:[t.jsxs("header",{className:Ea.header,children:[t.jsxs("div",{className:Ea.headerTitle,children:[t.jsx(J,{level:6,children:e}),t.jsx(P,{children:s})]}),t.jsx("div",{className:Ea.headerAction,children:r})]}),t.jsx("div",{children:a})]})]}),QA=()=>t.jsxs("div",{className:Ea.root,children:[t.jsx(D,{width:20,height:20}),t.jsxs("div",{className:Ea.content,children:[t.jsx(D,{height:20,width:120}),t.jsx(D,{height:20,width:"100%"})]})]}),Ip={title:"Configure Neon Auth",description:"Authentication for your application's users whose actions will access the Data API. This will be used to set up your access policies.",completed:{title:"Neon Auth is ready",description:"Get your authentication keys from the Neon Auth config and add them to your app."}},Jbe=()=>{const e=F(),{data:s,isLoading:n}=$i(e.projectId);if(n)return t.jsx(QA,{});const r=s==null?void 0:s.some(a=>a.auth_provider==="stack");return t.jsx(Xb,{title:r?Ip.completed.title:Ip.title,description:r?Ip.completed.description:Ip.description,status:r?"completed":"pending",action:t.jsx(A,{appearance:"secondary",as:Ke,href:G(C.ProjectsItemIdentity,{projectId:e.projectId}),icon:"settings",children:"Configure"})})},qo={title:"Protect your data",description:t.jsxs(t.Fragment,{children:["All of your tables need to be protected with"," ",t.jsx(Ke,{href:"https://neon.com/postgresql/postgresql-administration/postgresql-row-level-security",children:"Row-Level Security"}),"."]}),descriptionNoTables:t.jsxs(t.Fragment,{children:["There are no tables in your project yet. When you create tables, be sure to enable"," ",t.jsx(Ke,{href:"https://neon.com/postgresql/postgresql-administration/postgresql-row-level-security",children:"Row-Level Security"})," ","to protect your data."]}),warning:e=>{const s=e.length,n=e.map(r=>r.relname).join(", ");return t.jsx("div",{style:{display:"inline"},children:t.jsxs(P,{children:[n," ",Ms("is",s)," publicly accessible to anyone with the project URL because RLS is not enabled."]})})},completed:{title:"Data is protected",description:t.jsxs(t.Fragment,{children:["All of your tables are protected with"," ",t.jsx(Ke,{href:"https://neon.com/postgresql/postgresql-administration/postgresql-row-level-security",children:"Row-Level Security"}),"."]})}},Zbe=zt({relname:at(),relrowsecurity:el()}),Xbe=()=>{const e=_g(),{projectId:s}=F();return po({queryKey:{key:["get_public_tables",(e==null?void 0:e.database.name)??"",s,(e==null?void 0:e.database.branch_id)??""],appendConnectionString:!1},query:`
SELECT
  relname,
  relrowsecurity
FROM
  pg_class
JOIN
  pg_catalog.pg_namespace n ON n.oid = pg_class.relnamespace
WHERE
  n.nspname = 'public'
  AND relkind = 'r';
    `,zodSchema:Zbe,options:{enabled:!!e,staleTime:2*Fm},connectionParams:{branchId:e==null?void 0:e.database.branch_id,dbName:e==null?void 0:e.database.name}})},exe=()=>{const{data:e,isLoading:s}=Xbe();if(s||!e)return t.jsx(QA,{});if(e.length===0)return t.jsx(Xb,{title:qo.title,description:qo.descriptionNoTables,status:"pending"});const n=e.filter(a=>!a.relrowsecurity),r=n.length===0;return t.jsx(Xb,{title:r?qo.completed.title:qo.title,description:r?qo.completed.description:qo.description,status:r?"completed":"pending",children:n.length>0&&t.jsx(X,{appearance:"warning",children:qo.warning(n)})})},txe=()=>t.jsx(Za,{title:TS.title,description:TS.description,children:t.jsxs("div",{className:ybe.stepList,children:[t.jsx(Jbe,{}),t.jsx(exe,{})]})}),sxe=({databaseName:e})=>{const{branch:s}=Tt(),{url:n,isLoading:r}=k_e((s==null?void 0:s.project_id)??"",(s==null?void 0:s.id)??"",e??"");return!s||r?t.jsx(Se,{}):t.jsx(t.Fragment,{children:n?t.jsxs(t.Fragment,{children:[t.jsx(pbe,{url:n},"enabled"),t.jsx(zA,{}),t.jsx(txe,{}),t.jsx(fbe,{projectId:s.project_id,branchId:s.id,databaseName:e})]}):t.jsx(vbe,{branch:s,databaseName:e},"disabled")})},nxe="_header_1gf0r_1",rxe="_beta_badge_1gf0r_5",YA={header:nxe,beta_badge:rxe},axe=t.jsxs(t.Fragment,{children:["Data API",t.jsx(Ne,{appearance:"experimental",size:"s",margin:"left",className:YA.beta_badge,children:"Beta"})]}),oxe=()=>{const[e,s]=m.useState(),{selectOptions:n}=un(),r=n.find(o=>o.value===e),a=n.length>1;return m.useEffect(()=>{!a&&n.length===1&&!e&&s(n[0].value)},[a,n,e]),t.jsxs(t.Fragment,{children:[t.jsx(Bl,{title:axe,className:YA.header,actions:a&&t.jsxs(t.Fragment,{children:[t.jsx("span",{children:"Database:"}),t.jsx(Ym,{"data-qa":"data_api_database_select",value:r,canCreateDatabase:!1,onChange:o=>{o&&s(o.value)}})]})}),t.jsx("div",{children:e&&t.jsx(sxe,{databaseName:e})})]})},ixe="_container_wonxm_1",cxe="_poster_wonxm_7",lxe="_content_wonxm_13",dxe="_buttons_wonxm_22",kp={container:ixe,poster:cxe,content:lxe,buttons:dxe},JA=e=>{const{org:s,isLoading:n}=ae(),{isOrgAdmin:r,isLoading:a}=qt(),{isCollaborator:o,isLoading:i}=jl(e),c=n||i||a;return c?{canManageIntegration:!1,isLoading:c}:o?{canManageIntegration:!1,isCollaborator:!0,isLoading:c}:s?{canManageIntegration:r,isLoading:c}:{canManageIntegration:!0,isLoading:c}},Fc={installNeonAuthOnSharedProjectNotAllowed:"You cannot install Neon Auth on shared projects. Contact the Project Admin for help.",manageNeonAuthOnSharedProjectNotAllowed:"You cannot manage Neon Auth on shared projects. Contact the Project Admin for help.",installNeonAuthNotAllowed:"You need additional permissions to install Neon Auth. Contact your Organization Admin for help.",manageNeonAuthNotAllowed:"You need additional permissions to manage Neon Auth. Contact your Organization Admin for help.",getInstallNeonAuthReason:({isLoading:e,canManageIntegration:s,isCollaborator:n})=>{if(!(e||s))return n?Fc.installNeonAuthOnSharedProjectNotAllowed:Fc.installNeonAuthNotAllowed},getManageNeonAuthReason:({isLoading:e,canManageIntegration:s,isCollaborator:n})=>{if(!(e||s))return n?Fc.manageNeonAuthOnSharedProjectNotAllowed:Fc.manageNeonAuthNotAllowed}},NS=`The ${wg} schema already exists in your database. Please drop it before setting up the Neon Auth integration.`,uxe=e=>{const{mutate:s,isPending:n}=Ube(),{refetch:r}=$i(e),{trackUiInteraction:a}=k(),{defaultBranch:o}=xt(),[i]=El(),{mutate:c}=KA(),{data:l}=qu({branchId:o==null?void 0:o.id,projectId:e});let d;o&&(d=l.list.find(h=>h.name===i),d||(d=l.list.find(h=>h.branch_id===o.id)));const u=m.useCallback(h=>{if(!o||!d)return;a("neon_identity_empty_state_connect_provider_clicked",{provider:h,provisioningMode:"MANUAL"});const g=bD();g.onmessage=_=>{if(!xD(_))return;const b={autoClose:3e3},{data:x}=_.data;if(x.status==="error"){let{errorMessage:v}=x;PS(v)&&(v=NS),Ct(ju(v),b),a("neon_identity_integration_added_error_callback",{provider:h,provisioningMode:"MANUAL"})}else a("neon_identity_integration_added_success_callback",{provider:h,provisioningMode:"MANUAL"}),r(),c({project_id:e,auth_provider:h}),vD()};const f={project_id:e,auth_provider:h,database_name:d.name,role_name:d.owner_name,branch_id:o.id};kI({url:_D.init(f)})},[r,o,d,e,a,c]),p=m.useCallback(h=>{!o||!d||(a("neon_identity_empty_state_connect_provider_clicked",{provider:h,provisioningMode:"AUTO"}),s({project_id:e,auth_provider:h,database_name:d.name,branch_id:o.id},{onSuccess:()=>{a("neon_identity_integration_added_success_callback",{provider:h,provisioningMode:"AUTO"}),c({project_id:e,auth_provider:h})},onError:g=>{const _=Zt(g,"Failed to provision Stack Auth");a("neon_identity_integration_added_error_callback",{provider:h,provisioningMode:"AUTO"}),PS(_)?Ct(NS,{autoClose:3e3}):Ct(ju(_),{autoClose:3e3})}}))},[s,o,d,e,a,c]);return{isPending:n,autoProvisionNeonAuth:p,manualProvisionNeonAuth:u}},hxe="_wrapper_4kdk8_1",pxe="_buttons_4kdk8_6",mxe="_flex_4kdk8_13",Tp={wrapper:hxe,buttons:pxe,flex:mxe},gxe=!1,fxe=()=>{const{projectId:e}=F(),{canManageIntegration:s,isCollaborator:n,isLoading:r}=JA(e),a=le("neon_auth_source_of_truth"),{autoProvisionNeonAuth:o,manualProvisionNeonAuth:i,isPending:c}=uxe(e),l=!s,d=c||r,u=gxe,p=Fc.getInstallNeonAuthReason({isLoading:d,canManageIntegration:s,isCollaborator:n});return t.jsxs("div",{className:Tp.buttons,children:[t.jsxs("div",{className:Tp.flex,children:[t.jsx(ne,{content:p,disabled:!l,children:t.jsx("div",{className:Tp.wrapper,children:t.jsx(A,{appearance:"primary",size:"s",onClick:()=>o("stack"),disabled:l,loading:d,children:"Enable Neon Auth"})})}),a&&t.jsx(ne,{content:p,disabled:!l,children:t.jsx("div",{className:Tp.wrapper,children:t.jsx(A,{appearance:"primary",size:"s",onClick:()=>o("stack_v2"),disabled:l,loading:d,children:"Enable Neon Auth V2"})})})]}),t.jsxs("div",{children:[l||d?null:t.jsxs(P,{size:"s",children:["Using Stack Auth already?"," ",t.jsx(M,{onClick:()=>i("stack"),children:"Connect your project"})]}),u]})]})},_xe="/assets/assets/neon-auth-dark-BVavWW27.svg",bxe="/assets/assets/neon-auth-light-CuR4ekLV.svg",xxe=()=>{const{colorScheme:e}=ro(),s=e==="light"?bxe:_xe;return t.jsxs("div",{className:kp.container,children:[t.jsx("img",{className:kp.poster,src:s,alt:"Neon Auth"}),t.jsxs("div",{className:kp.content,children:[t.jsx(J,{level:2,children:"Your app’s users, in your Neon database"}),t.jsx(P,{align:"center",children:"Embed ready-made auth UI components into your app in minutes. User data lives directly in your Neon database, no syncing required."})]}),t.jsx("div",{className:kp.buttons,children:t.jsx(fxe,{})})]})},vxe="_section_8zd5f_1",jxe="_sectionContent_8zd5f_8",yxe="_fieldContainer_8zd5f_14",wxe="_labelContainer_8zd5f_19",Sxe="_label_8zd5f_19",Cxe="_arrayContainer_8zd5f_31",Ixe="_numberContainer_8zd5f_36",kxe="_stringContainer_8zd5f_37",Txe="_collapsible_8zd5f_43",Pxe="_trueIcon_8zd5f_51",Nxe="_booleanBadge_8zd5f_55",Xs={section:vxe,sectionContent:jxe,fieldContainer:yxe,labelContainer:wxe,label:Sxe,arrayContainer:Cxe,numberContainer:Ixe,stringContainer:kxe,collapsible:Txe,trueIcon:Pxe,booleanBadge:Nxe};function AS(e){const s=mt(Number(e));return s.isValid()?xe(s.toDate()):null}const ZA=({value:e})=>{if(typeof e=="boolean"){let s;return e?s="check_circle_inverted2":s="clear",t.jsxs(Ne,{className:Xs.booleanBadge,children:[t.jsx("span",{className:V({[Xs.trueIcon]:e}),children:t.jsx(q,{name:s,size:16,title:e.toString()})}),t.jsx(P,{size:"s",children:e.toString()})]})}if(typeof e=="string"){if(URL.canParse(e))return t.jsx(M,{openInNewTab:!0,icon:"external_link",iconSize:"s",href:e,children:e});const n=AS(e);return t.jsxs(Lu,{className:Xs.stringContainer,children:[t.jsx("span",{children:e}),n&&t.jsxs(t.Fragment,{children:[t.jsx("span",{children:"-"}),t.jsx("span",{children:n})]})]})}if(typeof e=="number"){const s=AS(e);return t.jsxs(Lu,{className:Xs.numberContainer,children:[t.jsx("span",{children:e}),s&&t.jsxs(t.Fragment,{children:[t.jsx("span",{children:"-"}),t.jsx("span",{children:s})]})]})}return Array.isArray(e)?e.length===0?t.jsx("span",{children:"—"}):t.jsx("div",{className:Xs.arrayContainer,children:e.map((s,n)=>{if(s==null)return null;let r=s;return typeof s=="object"&&(r=JSON.stringify(s)),t.jsx("div",{children:t.jsx(ZA,{value:r})},n)})}):t.jsx("span",{children:String(e)})},ex=({label:e,value:s})=>s==null?null:t.jsxs("div",{className:Xs.fieldContainer,children:[t.jsx("div",{className:Xs.labelContainer,children:t.jsx(P,{size:"s",className:Xs.label,children:VI(e)})}),t.jsx(ZA,{value:s})]}),XA=({data:e})=>e==null?null:t.jsx(t.Fragment,{children:Object.entries(e).map(([s,n])=>{if(n===null)return null;const r=n&&typeof n=="object";return t.jsx("div",{className:Xs.section,children:r?t.jsx(b3,{title:t.jsx(P,{size:"s",className:Xs.label,children:VI(s)}),iconPosition:"right",children:t.jsx("div",{className:Xs.collapsible,children:t.jsx(XA,{data:n})})}):t.jsx("div",{className:Xs.sectionContent,children:t.jsx(ex,{label:s,value:n})})},s)})}),Axe=({userRawJson:e})=>t.jsx(XA,{data:e}),Exe="_drawerLayout_sl2z1_1",Oxe="_mainContent_sl2z1_9",Lxe="_contentSection_sl2z1_13",$xe="_rawJson_sl2z1_19",Ed={drawerLayout:Exe,mainContent:Oxe,contentSection:Lxe,rawJson:$xe},Kv=({projectId:e})=>{const{confirm:s}=Ye(),{mutateAsync:n}=Mbe(e);return{deleteAuthUser:async a=>{if(await s({header:"Delete this User?",text:t.jsx(X,{appearance:"error",children:"Removing this user will prevent them from signing in. Are you sure you want to remove it?"}),confirmButtonText:"Delete",appearance:"danger"}))try{await n(a),pe("User deleted successfully")}catch(i){const c=Zt(i);Ct(c)}}}},eE=({providerUser:e,projectId:s,identityProviderOption:n,onCloseDrawer:r})=>{const{trackUiInteraction:a}=k(),{deleteAuthUser:o}=Kv({projectId:s}),[i,c]=m.useState("summary"),l=m.useCallback(async()=>{await o(e.id),r()},[o,e.id,r]);return t.jsxs(la,{isOpen:!0,size:"l","aria-label":"Neon RLS integration instructions",onRequestClose:r,children:[t.jsx(da,{title:"User Details",subtitle:t.jsxs(Lu,{children:["View all the user details provided by"," ",t.jsx(Gv,{children:n.label}),"."]}),children:t.jsxs("div",{className:Ed.drawerLayout,children:[t.jsx(_s,{isSelected:i==="raw_json",onChange:d=>{const u=d?"neon_identity_user_details_raw_json_toggle_clicked":"neon_identity_user_details_summary_toggle_clicked";c(d?"raw_json":"summary"),a(u)},children:"Show raw JSON"}),t.jsxs("div",{className:Ed.mainContent,children:[i==="summary"?t.jsxs("div",{className:Ed.contentSection,children:[t.jsx(ex,{label:"User ID",value:e.id}),t.jsx(ex,{label:"Email",value:e.email}),t.jsx(Axe,{userRawJson:e.raw_json})]}):t.jsx("div",{className:Ed.contentSection,children:t.jsx("pre",{className:Ed.rawJson,children:JSON.stringify(e.raw_json,null,2)})})," "]})]})}),t.jsxs(Ax,{"space-between":!0,children:[t.jsx(A,{appearance:"danger",onClick:l,children:"Delete user"}),t.jsx(A,{appearance:"secondary",onClick:r,children:"Close"})]})]})},Rxe=zt({email:at().email(),name:at().optional().transform(e=>(e==null?void 0:e.trim())||void 0)}),tE=({authProvider:e,appearance:s})=>{var u,p;const{projectId:n}=F(),{mutateAsync:r,isPending:a}=Hbe(),[o,i]=m.useState(!1),c=Ts({defaultValues:{email:"",name:void 0},resolver:Pi(Rxe)});function l(){i(!1),c.reset()}const d=DC(async h=>{try{await r({project_id:n,auth_provider:e.value,email:h.email,name:h.name}),l()}catch(g){Ct(Zt(g))}});return t.jsxs(t.Fragment,{children:[t.jsx(A,{onClick:()=>{i(!0)},appearance:s,children:"Create user"}),t.jsxs(gs,{modalProps:{title:"Create user",isOpen:o,onRequestClose:l},providerProps:c,onSubmit:d,children:[t.jsx(qe,{children:t.jsxs(lx,{children:[t.jsx(B,{label:"Email",error:(u=c.formState.errors.email)==null?void 0:u.message,children:t.jsx(ce,{required:!0,placeholder:"email@example.com",...c.register("email")})}),t.jsx(B,{label:"Name",error:(p=c.formState.errors.name)==null?void 0:p.message,children:t.jsx(ce,{placeholder:"Name (optional)",...c.register("name")})})]})}),t.jsxs(Ee,{children:[t.jsx(ln,{}),t.jsx(Ie,{loading:a,children:"Create"})]})]})]})},O_={emptyStateTitle:"Ready for your first users",setupButtonText:"Setup instructions",noUsersText:e=>`Integrate ${e} into your application to get started`},Bxe="_wrapper_1cgmk_1",Mxe="_actions_1cgmk_13",ES={wrapper:Bxe,actions:Mxe},sE=({authProvider:e})=>t.jsxs("div",{className:ES.wrapper,children:[t.jsx(q,{name:"people",size:16}),t.jsx(P,{appearance:"primary",size:"l",children:O_.emptyStateTitle}),t.jsx(P,{appearance:"secondary",children:O_.noUsersText(e.label)}),t.jsxs("div",{className:ES.actions,children:[t.jsx(tE,{authProvider:e,appearance:"secondary"}),t.jsx(A,{as:Ke,href:FC,openInNewTab:!0,appearance:"primary",size:"s",icon:"external_link",children:O_.setupButtonText})]})]}),Dxe="_dashboardUsersWrapper_4961n_1",Uxe="_userNameColumn_4961n_7",nE={dashboardUsersWrapper:Dxe,userNameColumn:Uxe},Fxe="_header_1d8l8_1",zxe="_title_1d8l8_7",qxe="_actions_1d8l8_12",L_={header:Fxe,title:zxe,actions:qxe},Hxe=({projectId:e,totalUsersCount:s,identityIntegration:n})=>{const{trackUiInteraction:r}=k(),a=n.auth_provider,o={database:n.db_name,schema:a==="stack_v2"?Uc:wg,table:a==="stack_v2"?Sbe:GA},i=new URLSearchParams(o),c=s?`View all ${s} users`:"View all users";return t.jsx(M,{onClick:()=>r("neon_identity_users_sync_table_clicked"),href:`${G(C.ProjectsItemDrizzle,{projectId:e,branchId:n.branch_id})}?${i.toString()}`,children:c})},rE=({projectId:e,totalUsersCount:s,identityIntegration:n,authProvider:r})=>t.jsxs("div",{className:L_.header,children:[t.jsx("div",{className:L_.title,children:t.jsx(P,{children:"Recent sign ups"})}),t.jsxs("div",{className:L_.actions,children:[t.jsx(Hxe,{projectId:e,totalUsersCount:s,identityIntegration:n}),t.jsx(tE,{authProvider:r,appearance:"secondary"})]})]}),Vxe=[{header:"User",accessorKey:"user",size:450,maxSize:450,enableSorting:!0,sortingFn:"alphanumeric",rowHeader:!0,render:e=>t.jsxs("div",{className:nE.userNameColumn,children:[e.name,t.jsx(P,{appearance:"tertiary",children:e.email})]})},{header:"Last updated",accessorKey:"updated_at",size:250,maxSize:300,enableSorting:!0,sortingFn:"datetime",render:e=>t.jsx(t.Fragment,{children:e.updated_at?xe(e.updated_at):"—"})},{header:"Joined",accessorKey:"created_at",size:250,maxSize:300,enableSorting:!0,sortingFn:"datetime",render:e=>t.jsx(t.Fragment,{children:e.created_at?xe(e.created_at):"—"})}],Wxe=({identityIntegration:e})=>{var p,h,g,f,_;const{projectId:s}=F(),{trackUiInteraction:n}=k(),r=kl(e==null?void 0:e.auth_provider),a=Bbe(),o=Rbe(),{deleteAuthUser:i}=Kv({projectId:s}),[c,l]=m.useState(void 0),u=(p=_e().getQueryState(aa.recentUsers(s)))==null?void 0:p.error;if((h=o.error)!=null&&h.message||u!=null&&u.message){const b=((g=o.error)==null?void 0:g.message)??(u==null?void 0:u.message)??"";return Ebe(b)?t.jsx(is,{title:t.jsx(P,{children:"Your sync table is missing"}),subtitle:t.jsxs(t.Fragment,{children:[t.jsxs(P,{children:["Your"," ",t.jsx(B_e,{children:Sg})," ","table is missing. User data cannot be synced from your auth provider."]}),t.jsx("br",{}),t.jsxs(P,{children:[t.jsxs(Gv,{children:["Remove the Neon Auth"," "]})," ","integration and set it up again to fix this."]})]})}):t.jsx(is,{title:"Error fetching users data",subtitle:b,actions:t.jsx(A,{loading:o.isRefetching,onClick:()=>o.refetch(),children:"Retry"})})}return t.jsx("div",{className:nE.dashboardUsersWrapper,children:!e||((f=o.data)==null?void 0:f.length)===0?t.jsx(sE,{authProvider:r}):t.jsxs(t.Fragment,{children:[t.jsx(rE,{identityIntegration:e,authProvider:r,projectId:s,totalUsersCount:(_=a.data)==null?void 0:_[0].count}),t.jsx(Ps,{columns:Vxe,rows:o.data??[],"aria-label":"Auth Provider Users",isLoading:o.isLoading,defaultSorting:{column:"created_at",direction:"descending"},onRowClick:b=>{n("neon_identity_user_row_clicked"),l(b)},rowActions:b=>[{label:"View Details",onClick:()=>{n("neon_identity_user_row_clicked"),l(b)}},{label:"Delete",onClick:()=>{i(b.id)}}],pageSize:20}),c&&t.jsx(eE,{providerUser:c,projectId:s,identityProviderOption:r,onCloseDrawer:()=>l(void 0)})]})})},Gxe="_wrapper_1mw2d_1",Kxe="_error_1mw2d_7",Qxe="_userNameColumn_1mw2d_14",tx={wrapper:Gxe,error:Kxe,userNameColumn:Qxe},Yxe=[{header:"User",accessorKey:"user",size:450,maxSize:450,enableSorting:!0,sortingFn:"alphanumeric",rowHeader:!0,render:e=>t.jsxs("div",{className:tx.userNameColumn,children:[e.name,t.jsx(P,{appearance:"tertiary",children:e.email})]})},{header:"Last updated",accessorKey:"updated_at",size:250,maxSize:300,enableSorting:!0,sortingFn:"datetime",render:e=>t.jsx(t.Fragment,{children:e.updated_at?xe(e.updated_at):"—"})},{header:"Joined",accessorKey:"created_at",size:250,maxSize:300,enableSorting:!0,sortingFn:"datetime",render:e=>t.jsx(t.Fragment,{children:e.created_at?xe(e.created_at):"—"})}],Jxe=({identityIntegration:e})=>{var d,u;const{projectId:s}=F(),{trackUiInteraction:n}=k(),r=Tbe(s,e),a=Pbe(s,e),o=kl(e==null?void 0:e.auth_provider),[i,c]=m.useState(void 0),{deleteAuthUser:l}=Kv({projectId:s});if(r.error){const p=r.error.message;return t.jsx(is,{title:t.jsx(P,{children:"Error fetching users data"}),subtitle:t.jsxs("div",{className:tx.error,children:[t.jsx(Bn,{copy:!1,children:p}),t.jsx("br",{}),t.jsx(A,{loading:r.isRefetching,onClick:()=>r.refetch(),children:"Retry"})]})})}return r.isFetching||((d=r.data)==null?void 0:d.length)===0?t.jsx(sE,{authProvider:o}):t.jsxs("div",{className:tx.wrapper,children:[t.jsx(rE,{identityIntegration:e,authProvider:o,projectId:s,totalUsersCount:(u=a.data)==null?void 0:u[0].count}),t.jsx(Ps,{columns:Yxe,rows:r.data??[],"aria-label":"Auth Provider Users",isLoading:r.isLoading,defaultSorting:{column:"created_at",direction:"descending"},onRowClick:p=>{n("neon_identity_user_row_clicked"),c(p)},rowActions:p=>[{label:"View Details",onClick:()=>{n("neon_identity_user_row_clicked"),c(p)}},{label:"Delete",onClick:()=>{l(p.id)}}],pageSize:20}),i&&t.jsx(eE,{providerUser:i,projectId:s,identityProviderOption:o,onCloseDrawer:()=>c(void 0)})]})},Zxe=({identityIntegration:e})=>kl(e==null?void 0:e.auth_provider).value==="stack_v2"?t.jsx(Jxe,{identityIntegration:e}):t.jsx(Wxe,{identityIntegration:e}),Xxe=({variables:e,connectionString:s})=>({label:"Next.js",tabs:[{value:"nextjs",label:"Next.js",codeSnippet:`# Neon Auth environment variables for Next.js
NEXT_PUBLIC_STACK_PROJECT_ID='${e.auth_provider_project_id}'
NEXT_PUBLIC_STACK_PUBLISHABLE_CLIENT_KEY='${e.pub_client_key}'
STACK_SECRET_SERVER_KEY='${e.secret_server_key}'

${s?`# Database owner connection string
DATABASE_URL='${s}'`:""}`,language:"nix",hasSecrets:!0},{value:"react",label:"React",codeSnippet:`# Neon Auth environment variables for React (Vite)
VITE_STACK_PROJECT_ID='${e.auth_provider_project_id}'
VITE_STACK_PUBLISHABLE_CLIENT_KEY='${e.pub_client_key}'
STACK_SECRET_SERVER_KEY='${e.secret_server_key}'

${s?`# Database owner connection string
DATABASE_URL='${s}'`:""}`,language:"nix",hasSecrets:!0},{value:"js",label:"JavaScript",codeSnippet:`# Neon Auth environment variables for JavaScript/Node
STACK_PROJECT_ID='${e.auth_provider_project_id}'
STACK_PUBLISHABLE_CLIENT_KEY='${e.pub_client_key}'
STACK_SECRET_SERVER_KEY='${e.secret_server_key}'

${s?`# Database owner connection string
DATABASE_URL='${s}'`:""}`,language:"nix",hasSecrets:!0}]}),eve=({envVariables:e,identityIntegration:s})=>{const{trackUiInteraction:n}=k(),r=Ev({connectionParams:{branchId:s.branch_id,dbName:s.db_name,maskPassword:!0,poolerEnabled:!0}}),a=Xxe({variables:e,connectionString:r});return t.jsxs(t.Fragment,{children:[t.jsxs(P,{children:["Select your framework from the tabs below and copy the environment variables to ",t.jsx(Pe,{children:".env"})," or"," ",t.jsx(Pe,{children:".env.local"}),"file:"]}),t.jsx(O_e,{snippetOption:a,height:"fit",onCopy:()=>{n("neon_identity_env_vars_copied")},onReveal:()=>{n("neon_identity_env_vars_revealed")}}),t.jsxs(P,{children:["Learn to setup your application and to use these environment variables on"," ",t.jsx(M,{href:FC,openInNewTab:!0,icon:"external_link",children:"Neon Auth documentation"})]})]})},tve="_container_1d2hu_1",sve="_emptyState_1d2hu_7",OS={container:tve,emptyState:sve},nve="_buttons_jrhgo_1",rve={buttons:nve},ave=({identityProviderOption:e,permission:s})=>{const{projectId:n}=F(),{trackUiInteraction:r}=k(),{mutateAsync:a,isPending:o}=KA(),{mutateAsync:i,isPending:c}=zbe(n),{isVercelOrg:l}=ae(),d=async()=>{r("neon_identity_generate_keys_clicked");try{await a({project_id:n,auth_provider:e.value})}catch(h){const g=Zt(h);Ct(`Failed to generate SDK keys: ${g}`,{autoClose:3e3})}},u=async()=>{r("neon_identity_sync_keys_vercel_clicked");try{await i(),pe("Successfully synced keys to Vercel.")}catch(h){const g=Zt(h);Ct(`Failed to sync SDK keys to vercel: ${g}`)}};let p=null;return l&&(p=t.jsx(ne,{disabled:s.canManageIntegration,content:s.reason,children:t.jsx("div",{children:t.jsx(A,{onClick:u,loading:c,appearance:"secondary",disabled:!s.canManageIntegration,children:"Sync Keys to Vercel"})})})),t.jsxs("div",{className:rve.buttons,children:[t.jsx(ne,{disabled:s.canManageIntegration,content:s.reason,children:t.jsx("div",{children:t.jsx(A,{onClick:d,loading:o,appearance:"secondary",disabled:!s.canManageIntegration,children:"Generate keys"})})}),p]})},ove=({authProvider:e,permission:s,identityIntegration:n})=>{const{projectId:r}=F(),{data:a}=Fbe({projectId:r,authProvider:e.value});return!a?t.jsxs("div",{className:OS.container,children:[t.jsx(P,{appearance:"primary",children:"Generate your environment variables and copy them to your app’s codebase."}),t.jsxs("div",{className:OS.emptyState,children:[t.jsx(ave,{permission:s,identityProviderOption:e}),t.jsxs(P,{appearance:"secondary",children:[t.jsx(Gv,{children:"Save your keys"}),". You can only view them once."]})]})]}):t.jsx(eve,{envVariables:a,identityIntegration:n})},Qv=e=>["authDomains",e],ive=e=>_t({queryKey:Qv(e),queryFn:async()=>(await W.listNeonAuthRedirectUriWhitelistDomains(e)).data.domains}),cve=e=>{const s=_e();return ve({mutationFn:async({domain:n,authProvider:r})=>(await W.addNeonAuthDomainToRedirectUriWhitelist(e,{domain:n,auth_provider:r})).data,onSuccess:()=>{s.invalidateQueries({queryKey:Qv(e)})}})},lve=e=>{const s=_e();return ve({mutationFn:async({domain:n,authProvider:r})=>(await W.deleteNeonAuthDomainFromRedirectUriWhitelist(e,{auth_provider:r,domains:[{domain:n}]})).data,onSuccess:()=>{s.invalidateQueries({queryKey:Qv(e)})}})},dve="_container_1r7di_1",uve="_formWrapper_1r7di_9",hve="_buttonWrapper_1r7di_15",pve="_formField_1r7di_20",Jp={container:dve,formWrapper:uve,buttonWrapper:hve,formField:pve},mve="_container_1a87i_1",gve="_list_1a87i_6",fve="_item_1a87i_16",Qc={container:mve,list:gve,item:fve},_ve=({authProvider:e,domains:s,canRemoveDomains:n,isLoading:r})=>{const{projectId:a}=F(),{confirm:o}=Ye(),{mutateAsync:i}=lve(a),c=m.useCallback(async l=>{if(await o({header:"Remove domain?",appearance:"danger",confirmButtonText:"Remove",text:t.jsxs(P,{children:["Are you sure you want to remove ",t.jsx("strong",{children:l})," from the trusted list? Your project will no longer be able to redirect to this domain."]})}))try{await i({domain:l,authProvider:e.value}),pe(t.jsxs(P,{children:[t.jsx("strong",{children:l})," removed from trusted list"]}))}catch(u){Y(u)}},[i,e,o]);return!r&&s.length===0?null:r?t.jsx(D,{height:12,width:100}):t.jsxs("div",{className:Qc.container,children:[t.jsx(J,{level:5,children:"Your trusted domains"}),t.jsx("ul",{className:Qc.list,children:s.map(l=>t.jsxs("li",{className:Qc.item,children:[t.jsx("span",{children:l.domain}),n&&t.jsx(ta,{iconName:"trash",iconSize:16,appearance:"error",onClick:()=>c(l.domain)})]},l.domain))})]})},bve=zt({domain:at().url()}),xve=({authProvider:e,permission:s})=>{var c;const{projectId:n}=F(),{mutateAsync:r,isPending:a}=cve(n),o=Ae({resolver:Pi(bve),defaultValues:{domain:""}}),i=m.useCallback(async l=>{try{await r({domain:l.domain,authProvider:e.value}),o.reset()}catch(d){const u=Zt(d);Y(u)}},[r,e,o]);return t.jsx(Xt,{gaps:!0,providerProps:o,onSubmit:i,children:t.jsxs("div",{className:Jp.formWrapper,children:[t.jsx(B,{label:"Add new domain",className:Jp.formField,error:(c=o.formState.errors.domain)==null?void 0:c.message,children:t.jsx(ce,{disabled:a||!s.canManageIntegration,placeholder:"Add new domain (e.g. https://www.example.com)",...o.register("domain",{onBlur:()=>o.clearErrors(),required:{value:!0,message:"This field is required"}})})}),t.jsx("div",{className:Jp.buttonWrapper,children:t.jsx(ne,{content:s.reason,disabled:s.canManageIntegration,children:t.jsx("div",{children:t.jsx(Ie,{appearance:"secondary",loading:a,disabled:a||!s.canManageIntegration,children:"Add domain"})})})})]})})},vve=({authProvider:e,permission:s})=>{const{projectId:n}=F(),{data:r,isLoading:a}=ive(n);return t.jsxs(De,{children:[t.jsx(Te,{level:3,children:"Domains"}),t.jsxs("div",{className:Jp.container,children:[t.jsx(P,{children:"Enter trusted domains for authentication redirects (e.g., SSO). Your app will only redirect to domains on this list. All others will be blocked."}),t.jsx(_ve,{authProvider:e,isLoading:a,canRemoveDomains:s.canManageIntegration,domains:r??[]}),t.jsx(xve,{authProvider:e,permission:s})]})]})},jve="_buttonWrapper_1e7t8_1",Cg={buttonWrapper:jve},yve=2e3,wve=1e4,Sve=({identityIntegration:e,permission:s})=>{const{projectId:n}=F(),{trackUiInteraction:r}=k(),a=kl(e.auth_provider),o=m.useRef(0),{mutateAsync:i,isPending:c}=qbe(),l=m.useRef(null),d=m.useRef(e.owned_by);m.useEffect(()=>{if(d.current==="user")return;d.current==="neon"&&e.owned_by==="user"&&(r("neon_identity_transfer_ownership_confirmed",{provider:a.value}),pe(`The ${a.label} project has been transferred to your account!`)),d.current=e.owned_by},[e.owned_by,a.label,a.value,r]),$i(n,{onSuccess:()=>{o.current+=1},refetchInterval:()=>l.current===null?!1:Math.min(yve*(o.current+1),wve)});const u=m.useCallback(async()=>{try{const h=await i({project_id:n,auth_provider:a.value});r("neon_identity_transfer_ownership_clicked"),l.current=kI({url:h.url})}catch(h){const g=Zt(h);Ct(`Failed to transfer ownership: ${g}`)}},[n,a.value,i,r]),p=e.owned_by==="neon";return t.jsxs(De,{children:[t.jsx(Te,{level:3,children:"Project ownership"}),t.jsx(P,{children:p?"Neon currently manages this project for you. To customize settings, you can transfer it to Stack Auth and manage it there.":"This project is now managed in Stack Auth. Open the Stack Auth dashboard to customize settings."}),t.jsx("div",{className:Cg.buttonWrapper,children:t.jsx(ne,{content:s.reason,disabled:s.canManageIntegration,children:t.jsx("div",{children:p?t.jsx(A,{onClick:u,icon:"connect_with",loading:c,disabled:c||!s.canManageIntegration,appearance:"danger",children:"Claim project"}):t.jsx(A,{as:Ke,href:a.urls.overview(e.auth_provider_project_id),onClick:()=>r("neon_identity_user_view_in_provider_clicked"),openInNewTab:!0,iconSide:"right",icon:"external_link",appearance:"secondary",children:"View in Stack Auth"})})})})]})},Cve=({handleClose:e,identityProvider:s})=>{const{trackUiInteraction:n}=k(),{projectId:r}=F(),{mutateAsync:a}=Dbe(r),[o,i]=m.useState(!0),c=async()=>{const l={autoClose:3e3};try{n("neon_identity_remove_provider_confirmed",{optedToClearData:o}),await a({identityProvider:s,deleteData:o}),pe("Removed the integration successfully",l)}catch(d){const u=Zt(d);Ct(`Failed to remove the integration: ${u}`,l)}};return t.jsx(h$,{header:"Remove Neon Auth integration",onConfirm:c,confirmButtonText:"Remove",appearance:"danger",onClose:e,text:t.jsxs(t.Fragment,{children:[t.jsx(X,{appearance:"warning",children:"Are you sure you want to remove this integration?"}),t.jsxs(Dx,{defaultChecked:o,onChange:()=>i(l=>!l),children:["Clear all data associated with this integration",t.jsx(sn,{children:"By checking this, you will permanently remove all data and related database objects linked to this integration."})]})]})})},Ive=({authProvider:e,permission:s})=>{const[n,r]=m.useState(!1);return t.jsxs(De,{children:[t.jsx(Te,{level:3,children:"Disable Auth"}),t.jsx(P,{children:"Disabling Neon Auth will delete all users and data associated with this integration."}),n&&t.jsx(Cve,{identityProvider:e,handleClose:()=>r(!1)}),t.jsx("div",{className:Cg.buttonWrapper,children:t.jsx(ne,{content:s.reason,disabled:s.canManageIntegration,children:t.jsx("div",{children:t.jsx(A,{appearance:"danger",disabled:!s.canManageIntegration,onClick:()=>r(!0),children:"Disable Auth"})})})})]})},aE=e=>["neon_auth","emailServerConfig",e],kve=e=>_t({queryKey:aE(e),queryFn:async()=>(await W.getNeonAuthEmailServer(e)).data}),Tve=e=>{const s=_e();return ve({mutationFn:async n=>(await W.updateNeonAuthEmailServer(e,n)).data,onSuccess:()=>{s.invalidateQueries({queryKey:aE(e)})}})},Pve=e=>ve({mutationFn:async s=>{if(s.emailServerConfig.type!=="standard")throw new Error("Test email can only be sent with custom SMTP configuration");const r=(await W.sendNeonAuthTestEmail(e,{host:s.emailServerConfig.host,port:s.emailServerConfig.port,username:s.emailServerConfig.username,password:s.emailServerConfig.password,sender_email:s.emailServerConfig.sender_email,sender_name:s.emailServerConfig.sender_name,recipient_email:s.recipientEmail})).data;if(!r.success)throw new Error(r.error_message||"Failed to send test email");return r}}),Nve="_container_ivlmv_1",LS={container:Nve},Ave=Dt.object({recipient_email:Dt.string().email("Must be a valid email address")}),Eve=({projectId:e,emailServerConfig:s,onRequestClose:n})=>{const{mutateAsync:r,isPending:a}=Pve(e),[o,i]=m.useState(null),c=Ae({resolver:Pi(Ave),defaultValues:{recipient_email:""}}),l=m.useCallback(async d=>{i(null);try{await r({recipientEmail:d.recipient_email,emailServerConfig:s}),pe(`A test email has been successfully sent to ${d.recipient_email}`),n()}catch(u){const p=Zt(u);i(p)}},[r,s,n]);return t.jsxs(gs,{modalProps:{title:"Send test email",isOpen:!0,onRequestClose:n,width:500},providerProps:c,onSubmit:l,children:[t.jsxs(qe,{gaps:!0,children:[t.jsx(P,{children:"Send a test email to check that your email server is configured correctly."}),t.jsx(ye,{control:c.control,name:"recipient_email",render:({field:d})=>{var u;return t.jsx(B,{label:"Recipient email",error:(u=c.formState.errors.recipient_email)==null?void 0:u.message,children:t.jsx(ce,{"aria-label":"recipient email",type:"email",placeholder:"Enter email address",value:d.value,onChange:d.onChange})})}}),o&&t.jsx(X,{appearance:"error",children:t.jsx(P,{appearance:"error",children:o})})]}),t.jsxs(Ee,{children:[t.jsx(Ie,{disabled:!c.formState.isValid,loading:a,children:"Send"}),t.jsx(dn,{appearance:"secondary",children:"Cancel"})]})]})},oE={google:{id:"google",label:"Google",icon:"google",redirect_uri:"https://api.stack-auth.com/api/v1/auth/oauth/callback/google",docsLink:{label:"Get Google OAuth 2.0 credentials",url:"https://developers.google.com/identity/protocols/oauth2"}},github:{id:"github",label:"GitHub",icon:"github",redirect_uri:"https://api.stack-auth.com/api/v1/auth/oauth/callback/github",docsLink:{label:"Create a GitHub OAuth App",url:"https://docs.github.com/en/apps/oauth-apps/building-oauth-apps/creating-an-oauth-app"}},microsoft:{id:"microsoft",label:"Microsoft",icon:"microsoftv2",redirect_uri:"https://api.stack-auth.com/api/v1/auth/oauth/callback/microsoft",docsLink:{label:"Register your app with Microsoft Entra ID",url:"https://learn.microsoft.com/en-us/entra/identity-platform/v2-oauth2-auth-code-flow"}}},Ove=Dt.object({id:Dt.enum(["google","github","microsoft"]),providerType:Dt.enum(["standard","shared"]),client_id:Dt.string().optional(),client_secret:Dt.string().optional()}).superRefine((e,s)=>{e.providerType!=="shared"&&(e.client_id||s.addIssue({code:Dt.ZodIssueCode.custom,path:["client_id"],message:"Client ID is required"}),e.client_secret||s.addIssue({code:Dt.ZodIssueCode.custom,path:["client_secret"],message:"Client Secret is required"}))}),Lve=Dt.discriminatedUnion("type",[Dt.object({type:Dt.literal("shared")}),Dt.object({type:Dt.literal("standard"),host:Dt.string().min(1,"Host is required"),port:Dt.number().int().positive("Port must be a positive integer"),username:Dt.string().min(1,"Username is required"),password:Dt.string().min(1,"Password is required"),sender_email:Dt.string().email("Must be a valid email address"),sender_name:Dt.string().min(1,"Sender name is required")})]),iE="noreply@stackframe.co",$ve=[{name:"host",label:"Host",type:"text"},{name:"port",label:"Port",type:"number"},{name:"username",label:"Username",type:"text"},{name:"password",label:"Password",type:"password"},{name:"sender_email",label:"Sender email",type:"text"},{name:"sender_name",label:"Sender name",type:"text"}],Rve=({projectId:e,emailServerConfig:s,onRequestClose:n})=>{const{mutateAsync:r,isPending:a}=Tve(e),o=Ae({resolver:Pi(Lve),defaultValues:{type:s.type,host:s.type==="standard"?s.host:"",port:s.type==="standard"?s.port:25,username:s.type==="standard"?s.username:"",password:s.type==="standard"?s.password:"",sender_email:s.type==="standard"?s.sender_email:"",sender_name:s.type==="standard"?s.sender_name:""}}),i=m.useCallback(async c=>{try{await r(c),pe("Email server config updated successfully"),n()}catch(l){Ct(Zt(l))}},[r,n]);return t.jsxs(gs,{modalProps:{title:"Edit email server",isOpen:!0,onRequestClose:n,width:500},providerProps:o,onSubmit:i,children:[t.jsxs(qe,{gaps:!0,children:[t.jsx(ye,{control:o.control,name:"type",render:({field:c})=>t.jsx(B,{label:"Email server",children:t.jsx(lt,{"aria-label":"email server type",value:c.value,options:[{label:`Shared (${iE})`,value:"shared"},{label:"Custom SMTP server",value:"standard"}],onChange:l=>{c.onChange(l),o.clearErrors()}})})}),o.watch("type")==="standard"&&t.jsx(t.Fragment,{children:$ve.map(({name:c,type:l,label:d})=>t.jsx(ye,{control:o.control,name:c,render:({field:u})=>{var p;return t.jsx(B,{label:d,error:(p=o.formState.errors[c])==null?void 0:p.message,children:t.jsx(ce,{"aria-label":u.name,type:l,value:u.value,onChange:h=>{const g=l==="number"?Number(h.target.value):h.target.value;u.onChange(g)}})},u.name)}},c))})]}),t.jsxs(Ee,{children:[t.jsx(Ie,{disabled:!o.formState.isValid,loading:a,children:"Save"}),t.jsx(dn,{appearance:"secondary",children:"Cancel"})]})]})},Bve=({permission:e})=>{const{projectId:s}=F(),[n,r]=m.useState(!1),[a,o]=m.useState(!1),{data:i,isLoading:c}=kve(s);return t.jsxs(t.Fragment,{children:[t.jsxs(De,{children:[t.jsx(Te,{level:3,children:"Email server"}),t.jsxs($e,{className:LS.container,children:[t.jsx(P,{children:"Set up the email server and sender address for system emails and invites"}),c?t.jsxs(t.Fragment,{children:[t.jsx(D,{height:12,width:100}),t.jsx(D,{height:12,width:100}),t.jsx(D,{height:12,width:100})]}):t.jsxs("div",{className:LS.container,children:[t.jsx(B,{label:"Server",children:(i==null?void 0:i.type)==="shared"?"Shared":"Custom SMTP server"}),t.jsx(B,{label:"Sender address",children:(i==null?void 0:i.type)==="shared"?iE:i==null?void 0:i.sender_email})]})]}),t.jsx(Ns,{children:t.jsxs("div",{className:Cg.buttonWrapper,children:[t.jsx(ne,{content:e.reason,disabled:e.canManageIntegration,children:t.jsx("div",{children:t.jsx(A,{onClick:()=>r(!0),appearance:"secondary",disabled:!e.canManageIntegration,children:"Configure email server"})})}),e.canManageIntegration&&(i==null?void 0:i.type)==="standard"&&t.jsx(A,{onClick:()=>o(!0),appearance:"secondary",children:"Send test email"})]})})]}),i&&n&&t.jsx(Rve,{projectId:s,emailServerConfig:i,onRequestClose:()=>r(!1)}),a&&i&&t.jsx(Eve,{projectId:s,emailServerConfig:i,onRequestClose:()=>o(!1)})]})},Ig=e=>["neon_auth","oauthProviders",e],Mve=e=>_t({queryKey:Ig(e),queryFn:async()=>(await W.listNeonAuthOauthProviders(e)).data.providers}),Dve=e=>{const s=_e();return ve({mutationFn:async({oauthProvider:n})=>(await W.addNeonAuthOauthProvider(e,n)).data,onSuccess:()=>{s.invalidateQueries({queryKey:Ig(e)})}})},Uve=e=>{const s=_e();return ve({mutationFn:async({oauthProviderId:n,oauthProvider:r})=>(await W.updateNeonAuthOauthProvider(e,n,r)).data,onSuccess:()=>{s.invalidateQueries({queryKey:Ig(e)})}})},Fve=e=>{const s=_e();return ve({mutationFn:async n=>(await W.deleteNeonAuthOauthProvider(e,n)).data,onSuccess:()=>{s.invalidateQueries({queryKey:Ig(e)})}})},zve="_providersGrid_szscr_1",qve="_providerTile_szscr_9",Hve="_footer_szscr_30",Vve="_actions_szscr_34",Am={providersGrid:zve,providerTile:qve,footer:Hve,actions:Vve},cE=({onRequestClose:e,onSuccess:s,projectId:n,oauthProvider:r,existingProvider:a})=>{const{mutateAsync:o,isPending:i}=Dve(n),{mutateAsync:c,isPending:l}=Uve(n),{trackUiInteraction:d}=k(),u=Ae({resolver:Pi(Ove),defaultValues:{id:r.id,providerType:(a==null?void 0:a.type)??"standard",client_id:a==null?void 0:a.client_id,client_secret:a==null?void 0:a.client_secret}}),p=m.useCallback(async _=>{try{d("neon_identity_oauth_provider_add_clicked",{id:_.id,providerType:_.providerType});const b=_.providerType==="shared"?{}:{client_id:_.client_id,client_secret:_.client_secret};await o({oauthProvider:{id:_.id,...b}}),pe(`${r.label} OAuth provider added successfully`),e(),s()}catch(b){const x=Zt(b);Ct(x)}},[o,r.label,e,s,d]),h=m.useCallback(async _=>{try{d("neon_identity_oauth_provider_add_clicked",{id:_.id,providerType:_.providerType});const b=_.providerType==="shared"?{}:{client_id:_.client_id,client_secret:_.client_secret};await c({oauthProviderId:r.id,oauthProvider:b}),pe(`${r.label} OAuth provider updated successfully`),e(),s()}catch(b){const x=Zt(b);Ct(x)}},[c,r,e,s,d]),g=m.useCallback(async _=>{a?await h(_):await p(_)},[a,h,p]),f=u.watch("providerType");return t.jsxs(gs,{modalProps:{title:`${r.label} OAuth Provider`,isOpen:!0,onRequestClose:e,width:600},providerProps:u,onSubmit:g,children:[t.jsxs(qe,{gaps:!0,children:[t.jsx(ye,{control:u.control,name:"providerType",render:({field:_})=>t.jsx(_s,{"aria-label":"provider type",isSelected:_.value==="shared",onChange:b=>{_.onChange(b?"shared":"standard"),u.clearErrors()},children:"Shared Keys"})}),f==="shared"?t.jsxs(t.Fragment,{children:[t.jsx(P,{children:"Shared keys are created by the Stack Auth team for development. It helps you get started, but will show a Stack Auth logo and name on the OAuth screen."}),t.jsx(X,{appearance:"warning",children:t.jsx(P,{children:"Shared keys should never be used in production."})})]}):t.jsxs(t.Fragment,{children:[t.jsxs(P,{children:["Create a ",r.label," OAuth app and set the callback url to: ",t.jsx("br",{}),t.jsx(Pe,{children:r.redirect_uri})]}),t.jsx(ye,{control:u.control,name:"client_id",render:({field:_})=>{var b;return t.jsx(B,{label:"Client ID",error:(b=u.formState.errors.client_id)==null?void 0:b.message,children:t.jsx(ce,{..._,value:_.value??"",placeholder:"Client ID"})})}}),t.jsx(ye,{control:u.control,name:"client_secret",render:({field:_})=>{var b;return t.jsx(B,{label:"Client Secret",error:(b=u.formState.errors.client_secret)==null?void 0:b.message,children:t.jsx(ce,{..._,value:_.value??"",placeholder:"Client Secret"})})}})]})]}),t.jsxs(Ee,{className:Am.footer,children:[t.jsx("div",{children:r.docsLink&&f==="standard"&&t.jsx(M,{openInNewTab:!0,icon:"external_link",href:r.docsLink.url,children:r.docsLink.label})}),t.jsxs("div",{className:Am.actions,children:[t.jsx(Ie,{disabled:!u.formState.isValid||i||l,loading:i||l,onClick:()=>u.handleSubmit(g),children:a?"Update":"Add"}),t.jsx(dn,{appearance:"secondary",children:"Cancel"})]})]})]})},Wve=({isOpen:e,projectId:s,onRequestClose:n,availableProviders:r=[]})=>{const[a,o]=m.useState();return t.jsxs(t.Fragment,{children:[t.jsxs(It,{isOpen:e,onRequestClose:n,title:"Add OAuth Provider",width:600,children:[t.jsxs(qe,{children:[t.jsx(P,{children:"Choose an OAuth provider to add to your authentication configuration."}),t.jsx("div",{className:Am.providersGrid,children:r.map(i=>t.jsxs("button",{type:"button",className:Am.providerTile,onClick:()=>o(i),children:[t.jsx(q,{name:i.icon,size:32}),t.jsx(P,{children:i.label})]},i.id))})]}),t.jsx(Ee,{children:t.jsx(dn,{appearance:"secondary",children:"Cancel"})})]}),a&&t.jsx(cE,{projectId:s,onSuccess:n,onRequestClose:()=>o(void 0),oauthProvider:a})]})},Gve="_container_11iw1_1",Kve="_provider_11iw1_7",Qve="_removeProvider_11iw1_13",sx={container:Gve,provider:Kve,removeProvider:Qve},Yve=({projectId:e,oauthProvider:s})=>{const n=oE[s.id],[r,a]=m.useState(!1),{confirm:o}=Ye(),{trackUiInteraction:i}=k(),{mutateAsync:c,isPending:l}=Fve(e),d=m.useCallback(async()=>{if(i("neon_identity_oauth_provider_remove_clicked",{id:s.id}),await o({header:`Remove ${n.label} OAuth provider?`,text:t.jsxs(X,{appearance:"error",children:["Removing this provider will prevent users from signing in with"," ",n.label,", including existing users who have used it before. They might not be able to log in anymore. Are you sure you want to remove it?"]}),confirmButtonText:"Remove",appearance:"danger"}))try{i("neon_identity_oauth_provider_remove_confirmed",{id:s.id}),await c(s.id),pe(`${n.label} OAuth provider removed successfully`)}catch(h){const g=Zt(h);Ct(g)}else i("neon_identity_oauth_provider_remove_dismissed",{id:s.id})},[o,c,s.id,n.label,i]),u=m.useMemo(()=>[{items:[{label:"Configure",onClick:()=>a(!0)},{label:`Remove ${n.label}`,itemTextClassName:sx.removeProvider,onClick:d}]}],[n.label,d]);return t.jsxs("div",{className:Qc.item,children:[r&&t.jsx(cE,{projectId:e,oauthProvider:n,existingProvider:s,onRequestClose:()=>a(!1),onSuccess:()=>{}}),t.jsxs("span",{className:sx.provider,children:[t.jsx(q,{name:n.icon,size:24}),t.jsxs(P,{children:[n.label,s.type==="shared"&&t.jsx(Ne,{size:"s",margin:"left",children:"Shared keys"})]})]}),t.jsx(Jt,{sections:u,placement:"bottom end",children:t.jsx(fs,{isDisabled:l})})]})},Jve=({permission:e})=>{const{projectId:s}=F(),{data:n,isLoading:r}=Mve(s),[a,o]=m.useState(!1),i=m.useMemo(()=>Object.entries(oE).filter(([c])=>!(n!=null&&n.some(l=>l.id===c))).map(([,c])=>c),[n]);return t.jsxs(t.Fragment,{children:[t.jsxs(De,{children:[t.jsx(Te,{level:3,children:"OAuth providers"}),t.jsxs($e,{className:sx.container,children:[t.jsx(P,{children:"Select the OAuth sign-in methods you want available in your app"}),r?t.jsxs(t.Fragment,{children:[t.jsx(D,{height:12,width:100}),t.jsx(D,{height:12,width:100}),t.jsx(D,{height:12,width:100})]}):t.jsx("div",{className:Qc.container,children:t.jsx("ul",{className:Qc.list,children:n==null?void 0:n.map(c=>t.jsx(Yve,{projectId:s,oauthProvider:c},c.id))})})]}),i.length>0&&t.jsx(Ns,{children:t.jsx("div",{className:Cg.buttonWrapper,children:t.jsx(ne,{content:e.reason,disabled:e.canManageIntegration,children:t.jsx("div",{children:t.jsx(A,{onClick:()=>o(!0),appearance:"secondary",disabled:!e.canManageIntegration,children:"Add OAuth provider"})})})})})]}),i.length>0&&t.jsx(Wve,{projectId:s,isOpen:a,onRequestClose:()=>o(!1),availableProviders:i})]})},Zve=({identityIntegration:e})=>t.jsxs(De,{children:[t.jsx(Te,{level:3,children:"Project Info"}),t.jsxs($e,{children:[t.jsx(B,{label:"Stack Auth Project ID",children:t.jsx(Bn,{children:e.auth_provider_project_id})}),t.jsx(B,{label:"JWKS URL",children:t.jsx(Bn,{hideOverflow:!0,children:e.jwks_url})})]})]}),Xve=({identityIntegration:e})=>{const{projectId:s}=F(),{canManageIntegration:n,isCollaborator:r,isLoading:a}=JA(s),o=kl(e==null?void 0:e.auth_provider),i=m.useMemo(()=>({canManageIntegration:n,reason:Fc.getManageNeonAuthReason({isLoading:a,canManageIntegration:n,isCollaborator:r})}),[n,r,a]);return t.jsxs(t.Fragment,{children:[t.jsx(Zve,{identityIntegration:e}),t.jsxs(De,{children:[t.jsx(Te,{level:3,children:"Environment variables"}),t.jsx(ove,{permission:i,authProvider:o,identityIntegration:e})]}),t.jsx(vve,{authProvider:o,permission:i}),t.jsx(Jve,{permission:i}),t.jsx(Bve,{permission:i}),t.jsx(Sve,{identityIntegration:e,permission:i}),t.jsx(Ive,{authProvider:o,permission:i})]})},eje="_dashboard_94ntd_1",tje="_dashboardTabs_94ntd_7",sje="_tabsContainer_94ntd_12",$_={dashboard:eje,dashboardTabs:tje,tabsContainer:sje},nje=2*Fm,rje=10,lE="neon_auth",aje="teams_sync",oje="team_memberships_sync",ije=`${lE}.${aje}`,cje=`${lE}.${oje}`,lje=zt({id:at(),raw_json:zt({}).passthrough(),name:at().nullable(),created_at:Ga().nullable(),updated_at:Ga().nullable(),user_count:en().int().nonnegative()}),dje={teams:e=>["getTeams",e]},uje=()=>{const{projectId:e}=F(),{data:s}=$i(e),n=s==null?void 0:s[0];return po({queryKey:{key:dje.teams(e),appendConnectionString:!1},query:`SELECT
        teams.id as id,
        teams.name as name,
        teams.created_at as created_at,
        teams.updated_at as updated_at,
        teams.raw_json as raw_json,
        COUNT(members.user_id)::integer as user_count
     FROM
        ${ije} teams
     LEFT JOIN
        ${cje} members
        ON teams.id = members.team_id
        AND members.deleted_at IS NULL
    WHERE
      teams.deleted_at IS NULL
    GROUP BY
      teams.id,
      teams.name,
      teams.created_at,
      teams.updated_at
     ORDER BY teams.created_at DESC
     LIMIT ${rje}`,zodSchema:lje,options:{enabled:!!n,staleTime:nje},connectionParams:{branchId:n==null?void 0:n.branch_id,dbName:n==null?void 0:n.db_name}})},hje=[{header:"Team",accessorKey:"name",size:250,maxSize:300,enableSorting:!0,sortingFn:"alphanumeric",rowHeader:!0},{header:"Members",accessorKey:"user_count",size:250,maxSize:300,enableSorting:!0,sortingFn:"alphanumeric"},{header:"Created At",accessorKey:"created_at",size:250,maxSize:300,enableSorting:!0,sortingFn:"datetime",render:e=>t.jsx(t.Fragment,{children:e.created_at?xe(e.created_at):"—"})},{header:"Last updated",accessorKey:"updated_at",size:250,maxSize:300,enableSorting:!0,sortingFn:"datetime",render:e=>t.jsx(t.Fragment,{children:e.updated_at?xe(e.updated_at):"—"})}],pje=()=>{var s;const e=uje();if((s=e.error)!=null&&s.message){const n=Zt(e.error);return t.jsx(is,{title:"Error fetching users data",subtitle:n,actions:t.jsx(A,{loading:e.isRefetching,onClick:()=>e.refetch(),children:"Retry"})})}return t.jsx(Ps,{columns:hje,rows:e.data??[],"aria-label":"Auth Provider Teams",isLoading:e.isLoading,defaultSorting:{column:"created_at",direction:"descending"}})};zt({tab:yI(["users","teams","configuration"]).optional().catch(void 0)});const mje=()=>{const e="tab",[s,n]=Ni(e);return{currentTab:s??"users",setCurrentTab:n}},gje=[{label:"Users",value:"users"},{label:"Teams",value:"teams"},{label:"Configuration",value:"configuration"}],fje=({authIntegration:e})=>{const s=!!e,{currentTab:n,setCurrentTab:r}=mje(),a=le("neon_auth_teams_sync"),o=m.useMemo(()=>gje.filter(i=>i.value==="teams"?a:s?!0:i.value!=="configuration"),[a,s]);return t.jsxs("div",{className:$_.dashboard,children:[t.jsx(jr,{options:o,value:n,onChange:i=>r(i),className:$_.dashboardTabs}),t.jsxs("div",{className:$_.tabsContainer,children:[n==="users"&&t.jsx(Zxe,{identityIntegration:e}),n==="teams"&&t.jsx(pje,{}),n==="configuration"&&s&&t.jsx(Xve,{identityIntegration:e})]})]})},_je="_identityTitle_176qq_1",bje="_pageHeaderSubtitle_176qq_7",xje="_pageHeaderSubtitleEmptyState_176qq_13",vje="_errorActionsWrapper_176qq_19",Pp={identityTitle:_je,pageHeaderSubtitle:bje,pageHeaderSubtitleEmptyState:xje,errorActionsWrapper:vje},jje=()=>{const{projectId:e}=F(),{data:s,isPending:n,error:r,refetch:a}=$i(e);if(n||!s)return t.jsx(Se,{});if(r)return t.jsx(is,{title:"Failed to load Neon Auth integrations.",subtitle:r.message,actions:t.jsxs("div",{className:Pp.errorActionsWrapper,children:[t.jsx(UP,{subject:"Failed to load Neon Auth integrations",description:`The following error occurred when opening the Neon Auth integrations page: ${r.message}`}),t.jsx(A,{size:"s",onClick:()=>a(),children:"Retry"})]})});if(!(s!=null&&s.length))return t.jsx(xxe,{});const o=s[0],i=mt(o.created_at).fromNow(),c=kl(o.auth_provider);return t.jsxs(t.Fragment,{children:[t.jsx(Il,{title:t.jsxs("span",{className:Pp.identityTitle,children:["Auth ",t.jsx(Ne,{appearance:"experimental",children:"Beta"})]}),subtitle:t.jsxs(P,{appearance:"secondary",className:V(Pp.pageHeaderSubtitle,Pp.pageHeaderSubtitleEmptyState),children:["Connected to ",c.label," ",i,t.jsxs(sn,{size:"l",children:["This Neon project was connected to ",c.label," ","on ",xe(o.created_at),"."]})]})}),t.jsx("section",{children:t.jsx(fje,{authIntegration:o})})]})},yje="_sections_1m9vq_1",wje="_addedSection_1m9vq_7",Sje="_sectionTitle_1m9vq_14",Cje="_cardsList_1m9vq_22",Np={sections:yje,addedSection:wje,sectionTitle:Sje,cardsList:Cje},Ije={vercel:Bne,github:Xse,outerbase:Xne,datadog:qre,opentelemetry:mae},kje=()=>{const e=pv(),s=dg(),n=Zu(),r=CN();m.useEffect(()=>{ere()},[]);const{projectId:a}=F();return n.status==="error"?t.jsx("section",{children:t.jsx(is,{title:"Failed to load integrations",subtitle:n.error.message})}):n.status==="pending"?t.jsx(ise,{}):t.jsxs(IB,{children:[t.jsx("div",{className:Np.sections,children:Object.keys(pi).map(o=>{var i;if((i=r[o])!=null&&i.length)return t.jsxs("section",{"data-qa":`${o}-integrations-list`,role:"list","aria-label":pi[o],className:V({[Np.addedSection]:o===Ua.Added}),children:[t.jsxs("div",{className:Np.sectionTitle,id:o,children:[t.jsx(J,{level:2,children:pi[o]}),o===Ua.Added?t.jsx(M,{icon:"external_link",href:p$,openInNewTab:!0,children:"Read more"}):null]}),t.jsx("div",{className:Np.cardsList,children:r[o].map(c=>{var l;if(o===Ua.Added){const d=(l=n.data)==null?void 0:l[c.id];return t.jsx(nse,{integration:c,status:d&&"status"in d?zN(d.status):void 0,integrationExportStats:d&&"exportStats"in d?d.exportStats:void 0},c.id)}return t.jsx(Vte,{integration:c,beta:e[c.id],featured:o===Ua.Featured,disabled:c.disabled},c.id)})})]},o)})}),Object.entries(Ije).map(([o,i])=>{var d;const c=o,l=i;return s[c]?null:t.jsx(l,{projectId:a,configuration:(d=n.data)==null?void 0:d[c]},c)})]})};var nh=(e=>(e.Metrics="metrics",e.Operations="operations",e.ActiveQueries="active-queries",e.QueryHistory="query-history",e))(nh||{});const Qd={metrics:{label:"Metrics",value:"metrics",to:C.ProjectsItemBranchesItemMonitoringMetrics,event:"monitoring_page_metrics_tab_clicked"},operations:{label:"System operations",value:"operations",to:C.ProjectsItemBranchesItemMonitoringOperations,event:"monitoring_page_operations_tab_clicked"},"active-queries":{label:"Active Queries",value:"active-queries",to:C.ProjectsItemBranchesItemMonitoringActiveQueries,event:"monitoring_page_active_queries_tab_clicked"},"query-history":{label:"Query History",value:"query-history",to:C.ProjectsItemBranchesItemMonitoringQueryHistory,event:"monitoring_page_query_history_tab_clicked"}},Tje=[Qd.metrics,Qd["active-queries"],Qd["query-history"],Qd.operations],Pje=({selected:e})=>{const{projectId:s}=F(),{branch:n}=Tt(),{trackUiInteraction:r}=k(),a=nt();return t.jsx(jr,{options:Tje,value:e,onChange:o=>{const i=Qd[o];r(i.event),n&&a.push(G(i.to,{projectId:s,branchId:n.id}))}})},$S={metricsButton:"Export metrics",upgradeButton:"Upgrade to export metrics"},Nje="_header_16dbf_1",Aje={header:Nje},Eje=()=>{const{project:e}=F(),{trackUiInteraction:s}=k(),[n,r]=m.useState(!1),a=m.useCallback(()=>{s("monitoring_page_upgrade_modal_opened"),r(!0)},[s]),o=m.useCallback(()=>{s("monitoring_page_upgrade_modal_closed"),r(!1)},[s]),{datadog:i}=dg();return e?i?t.jsxs(t.Fragment,{children:[t.jsx(A,{icon:"datadog",appearance:"secondary",size:"s",onClick:a,children:$S.upgradeButton}),t.jsx(Pt,{type:dt.ExportMetrics,isOpen:n,onRequestClose:o})]}):t.jsx(A,{icon:"datadog",appearance:"secondary",as:g$,href:`${G(C.ProjectsItemIntegrations,{projectId:e.id})}#datadog`,children:$S.metricsButton}):null},kg=(e,s)=>{const n=m.memo(r=>{const a=Yd(JN);return t.jsxs(t.Fragment,{children:[t.jsx(Bl,{title:"Monitoring",actions:t.jsx(Eje,{}),className:Aje.header}),t.jsx("div",{children:t.jsxs(MC,{defaultRange:ZN(a),children:[t.jsx(Pje,{selected:s}),t.jsx(m$,{children:t.jsx(e,{...r})})]})})]})});return n.displayName=`withMonitoringPageLayout(${e.displayName})`,n},Oje=()=>t.jsx(zA,{}),Lje=({project:e,override:s,onSuccess:n,onFail:r,children:a,...o})=>{const i=e==null?void 0:e.id,c=Px(e),l=Fn(),d=m.useMemo(()=>({autoscaling_limit_cu:{max:c.autoscalingMax,min:c.autoscalingMin},suspend_timeout_seconds:c.suspendTimeoutSeconds}),[c]),u=Ts({defaultValues:d,shouldUnregister:!0}),p=no("edit_suspend_timeout"),h=m.useCallback(async({autoscaling_limit_cu:g,suspend_timeout_seconds:f})=>{const _={};if(g&&(_.autoscaling_limit_min_cu=g.min,_.autoscaling_limit_max_cu=g.max),p&&(_.suspend_timeout_seconds=f),!i)throw new Error("ProjectId should be specified");if(s){const b={...e,default_endpoint_settings:_};return n==null||n(b),null}try{const b=await l({projectId:i,data:{default_endpoint_settings:_}});n==null||n(b)}catch(b){r==null||r(b)}return null},[p,i,e,s,n,r,l]);return t.jsx(es,{...u,children:t.jsx(Ht,{...o,onSubmit:g=>{g.stopPropagation(),u.handleSubmit(h)(g)},children:a})})},RS={paidPlansStartingAtPlanFee:e=>`Paid plans start at ${Us(e)} per month.`,paidPlansStartingAtMinimumSpend:e=>`Paid plans minimum monthly spend starts at ${Us(e)}.`},$je="_featuresCard_7ghte_1",Rje="_upgradeLink_7ghte_12",Bje="_defaultValuesTable_7ghte_16",Mje="_featureList_7ghte_22",Dje="_featureIcon_7ghte_38",Uje="_upgradeToScale_7ghte_49",$c={featuresCard:$je,upgradeLink:Rje,defaultValuesTable:Bje,featureList:Mje,featureIcon:Dje,upgradeToScale:Uje},Fje=({onSuccess:e,onFail:s,children:n})=>{const{trackUiInteraction:r}=k(),{email:a,name:o}=Ru(O1),{submitContactSalesForm:i}=ml(),c=Ts({defaultValues:{message:"",email:a,name:o},shouldUnregister:!0}),l=async d=>{r("contact_sales_submitted");try{await i(d),e==null||e()}catch{s==null||s()}};return t.jsx(es,{...c,children:t.jsx(Ht,{onSubmit:c.handleSubmit(l),children:n})})},zje="_companyFields_1qmum_1",qje={companyFields:zje},BS=[{value:"1_4",label:"1-4 employees"},{value:"5_19",label:"5-19 employees"},{value:"20_99",label:"20-99 employees"},{value:"100_499",label:"100-499 employees"},{value:"500",label:"≥ 500 employees"}],Hje=()=>{var i,c,l,d,u;const{register:e,control:s,formState:n}=kt(),[r,a]=m.useState(null),o=m.useMemo(()=>BS.find(p=>p.value===r)??null,[r]);return t.jsxs(t.Fragment,{children:[t.jsx(B,{error:(i=n.errors.name)==null?void 0:i.message,label:"Your name",children:t.jsx(ce,{...e("name",{required:{value:!0,message:"This field is required"}})})}),t.jsx(B,{error:(c=n.errors.email)==null?void 0:c.message,label:"Email",children:t.jsx(ce,{...e("email",{required:{value:!0,message:"This field is required"},pattern:{value:dx,message:"Please input a valid email"}})})}),t.jsxs("div",{className:qje.companyFields,children:[t.jsx(B,{error:(l=n.errors.companyWebsite)==null?void 0:l.message,label:"Company website",children:t.jsx(ce,{...e("companyWebsite")})}),t.jsx(B,{error:(d=n.errors.companySize)==null?void 0:d.message,label:"Company size",children:t.jsx(ye,{name:"companySize",control:s,render:({field:p})=>t.jsx(na,{value:o,onChange:h=>{h&&(p.onChange(h.value),a(h.value))},options:BS})})})]}),t.jsx(B,{error:(u=n.errors.message)==null?void 0:u.message,label:"How may we help you?",children:t.jsx(eo,{rows:6,placeholder:"Your message to our Sales team",...e("message",{required:{value:!0,message:"This field is required"}})})})]})},Vje=({onRequestClose:e,...s})=>t.jsx(oa,{title:"Contact Sales",...s,onRequestClose:e,children:t.jsxs(Fje,{onSuccess:()=>{ze(t.jsx(tt,{children:"Sent!"})),e==null||e()},onFail:()=>{ze(t.jsx(ki,{children:t.jsxs(t.Fragment,{children:["Request failed. Please try again or contact us at"," ",t.jsx(f$,{as:"a",href:b$,onClick:n=>n.stopPropagation(),children:_$}),"."]})}),{...wx,toastId:"contact_sales_form_failed"})},children:[t.jsx(ia,{children:t.jsx(Hje,{})}),t.jsxs(Ee,{children:[t.jsx(so,{}),t.jsx(Ie,{children:"Send"})]})]})}),Wje=({children:e="Contact sales",...s})=>{const[n,r]=m.useState(!1),{trackUiInteraction:a}=k();return t.jsxs(t.Fragment,{children:[t.jsx(Vje,{isOpen:n,onRequestClose:()=>{a("contact_sales_dismissed"),r(!1)}}),t.jsx(M,{...s,onClick:()=>{a("pro_promo_modal_contact_sales_clicked"),r(!0)},children:e})]})},Gje=[{title:"Larger computes",description:t.jsxs(t.Fragment,{children:["Configure a compute size to fit your workload. Compute sizes range from .25 vCPUs with 1 GB of RAM to 7 vCPUs with 28 GB of RAM."," ",t.jsx(Wje,{})," if you require larger computes."]}),iconName:"compute_size"},{title:"Autoscaling compute",description:"Enable autoscaling to scale your compute resources as your workload changes. You are billed based on the average compute size, which is measured at short intervals.",beta:!0,iconName:"compute_size_autoscale"},{title:"Configurable autosuspend compute",description:"Disable or set a custom timeout for Neon's autosuspend compute feature, which automatically suspends a compute after a period of inactivity.",iconName:"autosuspend",beta:!1}],dE=()=>{const{limits:e}=Et();return zC(e==null?void 0:e.max_autoscaling_cu)<=qC},Kje=()=>{const{shouldDisplayPricingV3:e}=F1(),n=L1()[e?"launch_v3":"launch"],r=n.serviceFee??0,a=n.minimumMonthlySpend??0;return t.jsxs(t.Fragment,{children:[t.jsx("table",{className:$c.defaultValuesTable,children:t.jsxs("tbody",{children:[t.jsxs("tr",{children:[t.jsx("td",{children:t.jsx(P,{size:"m",children:"Fixed size:"})}),t.jsx("td",{children:t.jsx(P,{size:"m",appearance:"primary",children:$n(qC)})})]}),t.jsxs("tr",{children:[t.jsx("td",{children:t.jsx(P,{size:"m",children:"Autosuspend:"})}),t.jsx("td",{children:t.jsx(P,{size:"m",appearance:"primary",children:"After 5 minutes of inactivity"})})]})]})}),t.jsxs("div",{className:$c.featuresCard,children:[t.jsx(P,{bold:!0,appearance:"primary",children:"Paid plan features:"}),t.jsx("ul",{className:$c.featureList,children:Gje.map(({title:o,iconName:i})=>t.jsxs("li",{children:[t.jsx("div",{className:$c.featureIcon,children:i&&t.jsx(q,{name:i,size:16})}),t.jsx(P,{appearance:"primary",children:o})]},o))}),t.jsxs(P,{size:"s",children:[U1(a)?RS.paidPlansStartingAtMinimumSpend(a):r>0&&RS.paidPlansStartingAtPlanFee(r),t.jsx(s5,{className:$c.upgradeLink,actionName:"edit_endpoint_upgrade_to_pro_clicked"})]})]})]})},Qje=({endpoint:e})=>{const{limits:s}=Et(),{trigger:n,watch:r,control:a}=kt(),o=dE(),{trackUiInteraction:i}=k();return m.useEffect(()=>{n("autoscaling_limit_cu")},[n,r("autoscaling_limit_cu")]),t.jsx("div",{children:o?t.jsx(Kje,{}):t.jsxs(t.Fragment,{children:[t.jsx(ye,{name:"autoscaling_limit_cu",control:a,rules:{shouldUnregister:!0},render:({field:c})=>t.jsx(t.Fragment,{children:t.jsx(x$,{maxValue:zC(s==null?void 0:s.max_autoscaling_cu),value:c.value,endpoint:e,onChange:l=>{i("autoscaling_limit_cu_slider_cu_limit_selected"),c.onChange(l)}})})}),t.jsx(e5,{className:$c.upgradeToScale})]})})},Yje=()=>{const e=no("edit_suspend_timeout"),{limits:s}=Et(),n=dE();return t.jsx(t.Fragment,{children:e&&!n&&s&&t.jsx(v$,{name:"suspend_timeout_seconds",minAutosuspendSeconds:s.min_autosuspend_seconds})})},Jje=()=>t.jsxs(t.Fragment,{children:[t.jsx(Qje,{}),t.jsx(Yje,{})]}),Zje="_fields_96e8n_1",Xje="_warning_96e8n_7",MS={fields:Zje,warning:Xje},eye=({formProps:e,...s})=>t.jsx(oa,{title:e.override?"Override default compute size for this branch only":"Change default compute settings",...s,children:t.jsxs(Lje,{...e,onFail:Y,children:[t.jsx(ia,{className:MS.fields,children:t.jsx(Jje,{})}),t.jsxs(Ee,{children:[t.jsxs(RC,{children:["Learn more about"," ",t.jsx(M,{href:"https://neon.com/docs/manage/endpoints#compute-size-and-autoscaling-configuration",openInNewTab:!0,children:"compute sizes"})]}),t.jsx(so,{}),t.jsx(Ie,{children:"Save"})]}),t.jsx(X,{appearance:"warning",className:MS.warning,children:"These defaults will be used as the initial settings for any primary or read replica computes you create. Modifying these defaults does not alter the settings of any existing computes."})]})}),tye="_computeSettingsList_17kw2_1",sye={computeSettingsList:tye},nye=()=>{const{trackUiInteraction:e}=k(),{project:s,isLoading:n}=F(),r=ux(s),{isVercelOrg:a,isLoading:o}=ae(),i=Px(s),{limits:c}=Et(),l=c==null?void 0:c.max_autoscaling_cu,[d,u]=m.useState(!1),p=m.useCallback(()=>u(!0),[]),h=m.useCallback(()=>{u(!1)},[]),g=j$(),{billingUrl:f,isLoading:_}=to(),b=i.suspendTimeoutSeconds!==-1?fv(i.suspendTimeoutSeconds):"disabled";return s?t.jsxs(t.Fragment,{children:[t.jsx(eye,{isOpen:d,onRequestClose:h,formProps:{project:s,onSuccess:h}}),t.jsx(De,{id:"compute","aria-labelledby":g,children:t.jsxs($e,{children:[t.jsx(Te,{id:g,children:"Compute defaults"}),t.jsxs("div",{children:[t.jsx("p",{children:"These defaults will be used as the initial settings for any primary or read replica computes you create. Modifying these defaults does not alter the settings of any existing computes."}),t.jsxs("ul",{className:sye.computeSettingsList,children:[t.jsxs("li",{children:[t.jsx("b",{children:"Compute size: "}),t.jsx(UA,{project:s})]}),t.jsxs("li",{children:[t.jsx("b",{children:"Scale to zero: "}),b]})]}),r&&!a&&t.jsxs("span",{children:[t.jsx(M,{href:f,disabled:_,onClick:()=>{e("project_settings_compute_upgrade_to_pro_clicked")},children:"Upgrade"}),t.jsx("span",{children:" to control compute size and scale to zero"})]})]}),(l??0)>.25&&t.jsx(Ns,{children:t.jsx(A,{disabled:n||o,onClick:p,"data-qa":"change_compute_setting_button",size:"s",children:"Modify defaults"})})]})})]}):t.jsx(Se,{})},uE=({children:e="contact support"})=>{const{isModalOpen:s,openModal:n,closeModal:r}=it(st.Support),{trackUiInteraction:a}=k();return t.jsxs(t.Fragment,{children:[t.jsx(ao,{onRequestClose:()=>{a("support_form_dismissed"),r()},isOpen:s}),t.jsx(M,{onClick:n,children:e})]})},wc={deletionAlert:e=>t.jsxs(t.Fragment,{children:["Permanently delete project ",t.jsx("b",{children:e}),". This action is not reversible. Proceed with caution."]}),sharedProjectAlert:e=>{var s;return t.jsxs(t.Fragment,{children:["Only the"," ",e.org_id?"organization admins":`project owner (${((s=e.owner)==null?void 0:s.email)??""})`," ","can delete the project."]})},deleteButton:"Delete project",protectedBranchesAlert:"You can't delete this project because it has protected branches. Unprotect all branches first, then try again.",vercelOrgAlert:"To delete this project, use the Neon Postgres integration in Vercel.",hipaaAlert:t.jsxs(t.Fragment,{children:["To delete a HIPAA-enabled project, please ",t.jsx(uE,{}),"."]})},rye=()=>{var x;const{projectId:e,project:s,isOwnProject:n}=F(),{isOrgAdmin:r,isLoading:a}=qt(),{branches:o,isLoading:i}=xt(),{isVercelOrg:c}=ae(),{confirm:l}=Ye(),{trackUiInteraction:d}=k(),u=nt(),{mutate:p,result:h}=y$(),g=async()=>{d("project_settings_delete_project_clicked");const v=(s==null?void 0:s.name)??"unknown";await l({header:"Do you want to delete this project?",confirmButtonText:"Delete",appearance:"danger",text:t.jsxs(X,{appearance:"error",children:["This action cannot be undone. This will permanently delete the project"," ",t.jsx("code",{children:v}),". Proceed with caution."]}),inputs:{default:{label:t.jsxs("span",{children:['To confirm, type "',t.jsx("b",{children:v}),'" in the box below.']}),expectedValue:v}}})&&p(e).then(()=>{ze(t.jsx(tt,{children:t.jsxs(t.Fragment,{children:["Project ",t.jsx("b",{children:v})," was successfully deleted"]})})),s!=null&&s.org_id?u.push(G(C.OrgProjectsList,{orgId:s.org_id})):u.push(C.ProjectsList)},Y)},f=m.useMemo(()=>o.some(v=>v.protected),[o]),_=!!((x=s==null?void 0:s.settings)!=null&&x.hipaa),b=!c&&(n||r);return!s||i||a?t.jsx(Se,{}):t.jsx(De,{id:"delete",children:t.jsxs($e,{children:[t.jsx(Te,{children:"Delete project"}),b?t.jsxs(t.Fragment,{children:[t.jsx(X,{appearance:"error",children:f?wc.protectedBranchesAlert:_?wc.hipaaAlert:wc.deletionAlert(s.name)}),t.jsx(Ns,{children:t.jsx(A,{"data-qa":"delete-project-button",onClick:g,disabled:f||_,loading:h.isLoading,appearance:"danger",size:"s",children:wc.deleteButton})})]}):t.jsx(t.Fragment,{children:c?t.jsx(X,{appearance:"info",children:wc.vercelOrgAlert}):t.jsx(X,{children:wc.sharedProjectAlert(s)})})]})})},Ap={projectNameLabel:"Project name",projectIdLabel:"Project ID",success:"Project updated successfully",submitButton:"Save"},Ho={label:"HIPAA compliance",enabledLabel:e=>`Enabled on ${xe(e,ke.DateFull)}`,notAllowedLabel:t.jsxs(t.Fragment,{children:[t.jsx(M,{openInNewTab:!0,href:"https://neon.com/contact-sales",children:"Add HIPAA to your Organization's plan"})," ","to enable it for your projects."]}),tooltip:t.jsxs(t.Fragment,{children:[t.jsx(uE,{children:"Contact support"})," to disable HIPAA compliance for this project."]}),confirmHeader:"Confirm HIPAA",confirmText:"Are you sure you want to enable HIPAA for this project?",hipaaEnabledSuccess:e=>`HIPAA has been enabled for project ${e}`},aye="_switchWrapper_1cwta_1",oye={switchWrapper:aye},iye=()=>{const{confirm:e}=Ye(),s=bC("allow_hipaa_projects"),n=kt(),{field:r}=mx({name:"hipaa",control:n.control}),a=r.onChange,{isLoading:o,project:i}=F(),c=Fn(),l=m.useCallback(async u=>{if(!(!u||!await e({header:Ho.confirmHeader,text:Ho.confirmText}))){a(u);try{await c({projectId:i.id,data:{settings:{hipaa:!0}}}),pe(Ho.hipaaEnabledSuccess(i.name))}catch(h){Y(h),a(!1)}}},[e,a,c,i]),{isPricingV3Account:d}=fe();return o||!i||s===void 0||d&&!s?null:t.jsx(ne,{content:t.jsx(P,{children:Ho.tooltip}),disabled:!r.value,children:t.jsx("div",{className:oye.switchWrapper,children:t.jsx(_s,{isDisabled:!s||r.value,isSelected:r.value,onChange:l,children:t.jsxs("div",{children:[t.jsx(P,{children:Ho.label}),t.jsx(P,{appearance:"secondary",children:r.value&&i.hipaa_enabled_at!==void 0?Ho.enabledLabel(i.hipaa_enabled_at):!d&&!s&&Ho.notAllowedLabel})]})})})})},DS=64,cye=()=>{var l;const{isLoading:e,project:s,projectId:n}=F(),{trackUiInteraction:r}=k(),a=m.useCallback(()=>{r("project_settings_project_id_copied")},[r]),o=Ae({defaultValues:{name:s==null?void 0:s.name,hipaa:(s==null?void 0:s.hipaa_enabled_at)!==void 0}}),i=Fn(),c=d=>(r("project_settings_general_page_save"),i({projectId:n,data:d}).then(()=>{pe(Ap.success)}).catch(Y));return e?t.jsx(Se,{}):s?t.jsx(De,{id:"general",children:t.jsxs($e,{children:[t.jsx(Te,{children:t.jsx(oi,{id:"NJQjXS",defaultMessage:[{type:0,value:"General"}]})}),t.jsxs(Xt,{providerProps:o,onSubmit:c,gaps:!0,children:[t.jsxs(wu,{children:[t.jsx(B,{id:"name_field",error:(l=o.formState.errors.name)==null?void 0:l.message,label:Ap.projectNameLabel,children:t.jsx(ce,{...o.register("name",{maxLength:{value:DS,message:`Name should be less than ${DS} characters`}})})}),t.jsx(B,{label:Ap.projectIdLabel,children:t.jsx(Bn,{"data-qa":"project-id",copy:{onCopy:a},children:n})})]}),t.jsx(iye,{}),t.jsx("div",{children:t.jsx(Ie,{children:Ap.submitButton})})]})]})}):null},lye="_checkboxLabel_13xpi_1",dye="_protectedBranchName_13xpi_5",uye="_disabledText_13xpi_16",Ep={checkboxLabel:lye,protectedBranchName:dye,disabledText:uye},hye=({control:e})=>{var d,u;const s=le("private_networking_new_ui"),{projectId:n,project:r}=F(),{branches:a}=Hu({projectId:n}),o=Fn(),i=m.useCallback(p=>o({projectId:n,data:{settings:{allowed_ips:{protected_branches_only:p}}}}),[n,o]),c=a.filter(p=>p.protected),l=c.length>0;return s?t.jsxs($e,{children:[t.jsx(Te,{level:4,size:"h5",children:"Branch access"}),t.jsx("p",{children:"Restrict IP access to protected branches only while allowing development teams full access to other branches."}),t.jsx(_s,{isSelected:((u=(d=r==null?void 0:r.settings)==null?void 0:d.allowed_ips)==null?void 0:u.protected_branches_only)&&l,onChange:i,isDisabled:!l,children:t.jsx("span",{className:l?void 0:Ep.disabledText,children:"Restrict IP access to protected branches only"})}),t.jsx("div",{children:l?c.map((p,h)=>t.jsxs("span",{children:[t.jsx("code",{className:Ep.protectedBranchName,children:p.name}),h<c.length-1&&", "]})):t.jsx("span",{className:Ep.disabledText,children:"No protected branches on the project yet."})})]}):t.jsx(ye,{name:"protected_branches_only",control:e,render:({field:p})=>t.jsx(B,{id:"branch_selector","aria-label":"Branch access",children:t.jsxs($e,{children:[t.jsx(Te,{level:4,size:"h5",children:"Branch access"}),t.jsxs("p",{children:["Restrict IP access to protected branches only while allowing development teams full access to other branches. Be sure to set a branch as protected before enabling this option. See"," ",t.jsx(M,{href:Um,openInNewTab:!0,children:"Protected branches"})," ","for more information."]}),t.jsx(ra,{id:"branch_selector",disabled:p.disabled,ref:p.ref,checked:p.value===!0,labelClassName:Ep.checkboxLabel,onChange:h=>p.onChange(h.target.checked),children:"Restrict IP access to protected branches only"})]})})})},pye="_container_18ebk_1",mye="_header_18ebk_6",US={container:pye,header:mye},gye=e=>{if(e)return(em(e)?e:[e]).filter(Boolean)[0].message},Op={toModel:e=>e.split(",").map(s=>s.trim()),toPresentation:e=>e.join(", ")},fye=({field:e,fieldState:s,headerAction:n,validate:r})=>{const[a,o]=m.useState(Op.toPresentation(e.value??[]));return m.useEffect(()=>{CI(Op.toModel(a),e.value)||o(Op.toPresentation(e.value??[]))},[e.value,a]),t.jsx(B,{id:"ip_addresses",className:US.container,label:t.jsxs("span",{className:US.header,children:["Allowed IP addresses and ranges ",n]}),description:"Separate multiple entries with commas.",error:gye(s.error),children:t.jsx(eo,{placeholder:"e.g., 192.0.2.1, 198.51.100.20-198.51.100.50, 203.0.113.0/24, 2001:DB8:5432::/48",ref:e.ref,rows:3,disabled:e.disabled,value:a,onChange:i=>{o(i.target.value),e.onChange(Op.toModel(i.target.value)),r()}})})},_ye=({control:e,headerAction:s,validate:n})=>t.jsx(ye,{control:e,name:"ips",render:({field:r,fieldState:a})=>t.jsx(fye,{field:r,fieldState:a,validate:n,headerAction:s})}),FS="[a-fA-F\\d:]",Ha=e=>e&&e.includeBoundaries?`(?:(?<=\\s|^)(?=${FS})|(?<=${FS})(?=\\s|$))`:"",En="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",Mt="[a-fA-F\\d]{1,4}",Tg=`
(?:
(?:${Mt}:){7}(?:${Mt}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${Mt}:){6}(?:${En}|:${Mt}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${Mt}:){5}(?::${En}|(?::${Mt}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${Mt}:){4}(?:(?::${Mt}){0,1}:${En}|(?::${Mt}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${Mt}:){3}(?:(?::${Mt}){0,2}:${En}|(?::${Mt}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${Mt}:){2}(?:(?::${Mt}){0,3}:${En}|(?::${Mt}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${Mt}:){1}(?:(?::${Mt}){0,4}:${En}|(?::${Mt}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${Mt}){0,5}:${En}|(?::${Mt}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),bye=new RegExp(`(?:^${En}$)|(?:^${Tg}$)`),xye=new RegExp(`^${En}$`),vye=new RegExp(`^${Tg}$`),Pg=e=>e&&e.exact?bye:new RegExp(`(?:${Ha(e)}${En}${Ha(e)})|(?:${Ha(e)}${Tg}${Ha(e)})`,"g");Pg.v4=e=>e&&e.exact?xye:new RegExp(`${Ha(e)}${En}${Ha(e)}`,"g");Pg.v6=e=>e&&e.exact?vye:new RegExp(`${Ha(e)}${Tg}${Ha(e)}`,"g");const hE={exact:!1},pE=`${Pg.v4().source}\\/(3[0-2]|[12]?[0-9])`,mE=`${Pg.v6().source}\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])`,jye=new RegExp(`^${pE}$`),yye=new RegExp(`^${mE}$`),wye=({exact:e}=hE)=>e?jye:new RegExp(pE,"g"),Sye=({exact:e}=hE)=>e?yye:new RegExp(mE,"g"),gE=wye({exact:!0}),fE=Sye({exact:!0}),Yv=e=>gE.test(e)?4:fE.test(e)?6:0;Yv.v4=e=>gE.test(e);Yv.v6=e=>fE.test(e);const Cye=at({errorMap:(e,s)=>({message:`Invalid IP address: '${s.data}'`})}).trim().superRefine((e,s)=>{try{hl(e)}catch{s.addIssue({code:Rc.custom,message:`Invalid IP address: '${e}'`})}}),Iye=jI(e=>Yv(e)!==0,e=>({message:`Invalid CIDR format: '${e}'`})),kye=at().superRefine((e,s)=>{const n=e.split("-").map(r=>r.trim());if(n.length!==2){s.addIssue({code:Rc.custom,message:`IP range must be separated by single '-': '${e}'`});return}try{const[r,a]=n.map(o=>hl(o));if(r.version!==a.version){s.addIssue({code:Rc.custom,message:`IPs in range must have same version: '${e}'`});return}r.compare(a)===1&&s.addIssue({code:Rc.custom,message:`The start part of IP range should be lower than end part: '${e}'`})}catch{s.addIssue({code:Rc.custom,message:`Invalid IP address range: '${e}'`})}}),zS=zt({protected_branches_only:el().optional(),ips:mi(at()).or(wI()).superRefine((e,s)=>(e==null||e.map(n=>{if(n.includes("/"))return Iye.safeParse(n);if(n.includes("-"))return kye.safeParse(n);if(n.trim().length>0)return Cye.safeParse(n)}).forEach((n,r)=>{n&&!n.success&&n.error.errors.forEach(a=>s.addIssue({...a,path:[r]}))}),e))}),Tye=(e,s,{disabled:n}={})=>{const{trackUiInteraction:r}=k(),{confirm:a}=Ye(),o=Fn(),{control:i,handleSubmit:c,formState:l,reset:d,trigger:u}=Ae({resolver:Pi(zS),defaultValues:{ips:(s==null?void 0:s.ips)??[],protected_branches_only:(s==null?void 0:s.protected_branches_only)??!0},disabled:n});return{control:i,handleSubmit:c(async({ips:h,protected_branches_only:g})=>{r("project_settings_ip_allow_form_submit_clicked");try{const f=zS.parse({ips:h==null?void 0:h.filter(Boolean),protected_branches_only:g});if($U(f.ips)&&f.ips!==(s==null?void 0:s.ips)){if(!await a({header:"Edit IP Allow list",text:t.jsx(X,{appearance:"warning",children:"Removing all IP addresses from the allowlist will permit database connection attempts from any IP address. However, any database connection still requires authentication."}),confirmButtonText:"Confirm"})){r("project_settings_ip_allow_form_submit_declined"),d(s,{keepDefaultValues:!1});return}r("project_settings_ip_allow_form_submit_confirmed")}await o({projectId:e,data:{settings:{allowed_ips:f}}}),ze(t.jsx(tt,{children:"IP Allow updated!"}))}catch(f){$m(f)}}),formState:l,validate:u}},_E=({project:e,disabled:s})=>{var c;const{control:n,handleSubmit:r,formState:a,validate:o}=Tye(e.id,(c=e.settings)==null?void 0:c.allowed_ips,{disabled:s}),i=a.isValid;return t.jsx(t.Fragment,{children:t.jsx(Ht,{onSubmit:r,children:t.jsxs($e,{children:[t.jsx(_ye,{control:n,validate:o}),t.jsx(hye,{control:n}),t.jsx(A,{type:"submit",size:"s","data-qa":"ip_allow_form_submit",disabled:s||!i,loading:a.isSubmitting,children:a.isSubmitting?"Saving changes...":"Save changes"})]})})})},Zp={title:"IP Allow",description:e=>t.jsxs(t.Fragment,{children:["Control database access in this project by adding allowed IP addresses. Enter individual IP addresses, define ranges with a dash, or use"," ",t.jsx(M,{openInNewTab:!0,href:"https://neon.com/docs/reference/glossary#cidr-notation",icon:"external_link",onClick:e,children:"CIDR notation"})," ","for more flexibility."]}),learnMore:"Learn more",upgradeRequired:e=>t.jsxs(t.Fragment,{children:["Limit database access to trusted IP addresses."," ",t.jsx(M,{"data-qa":"upgrade_button",onClick:e,children:"Upgrade your plan"})," ","to enable this feature."]})},Pye=({onUpgradeClick:e,project:s,isIPAllowUnavailable:n})=>{const{trackUiInteraction:r}=k(),{isLoading:a}=F();return n?t.jsx("div",{children:Zp.upgradeRequired(e)}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[Zp.description(()=>{r("project_settings_ip_allow_learn_more_clicked")})," ",t.jsx(M,{openInNewTab:!0,href:"https://neon.com/docs/manage/projects#configure-ip-allow",icon:"external_link",onClick:()=>{r("project_settings_ip_allow_learn_more_clicked")},children:Zp.learnMore})]}),t.jsx(_E,{project:s,disabled:a})]})},Nye=({project:e})=>{const{trackUiInteraction:s}=k(),{isLoading:n,limits:r}=Et(),a=!(r!=null&&r.max_allowed_ips),[o,i]=m.useState(!1),c=le("private_networking_new_ui"),l=()=>{s("project_settings_ip_allow_upgrade_to_pro_clicked"),i(!0)};return n?t.jsx(on,{}):t.jsxs(t.Fragment,{children:[t.jsx(Pt,{type:dt.IpAllowRules,isOpen:o,onRequestClose:()=>i(!1)}),t.jsxs($e,{children:[!c&&t.jsx(Te,{level:3,children:Zp.title}),t.jsx(Pye,{onUpgradeClick:l,isIPAllowUnavailable:a,project:e})]})]})},tr={title:"Private networking",description:"Securely connect your apps to Neon's infrastructure over a protected internal network using AWS PrivateLink.",learnMore:"Learn more",orgSettingsLink:"Configure in organization settings",suffix:{nonOrg:"Only available on select plans for the organization accounts.",orgCollaborator:"Ask organization admin to configure.",userCollaborator:"Ask the project owner to configure."},convertButton:"Create organization"},Aye="_pageHeader_17yw7_1",Eye={pageHeader:Aye},Oye=({project:e})=>{const{orgId:s}=ae(),{isOwnProject:n}=F(),[r,a]=m.useState(!1);return e?s?t.jsxs(t.Fragment,{children:[t.jsxs("p",{children:[tr.description," ",t.jsx(M,{href:Xc,icon:"external_link",openInNewTab:!0,children:tr.learnMore})]}),t.jsx(A,{appearance:"secondary",as:Ke,href:G(C.OrgSettings,{orgId:s}),children:tr.orgSettingsLink})]}):t.jsxs(t.Fragment,{children:[t.jsxs("p",{children:[tr.description," ",n?tr.suffix.nonOrg:e.org_id?tr.suffix.orgCollaborator:tr.suffix.userCollaborator," ",t.jsx(M,{href:Xc,icon:"external_link",openInNewTab:!0,children:tr.learnMore})]}),n&&t.jsxs(t.Fragment,{children:[r&&t.jsx(Xx,{onRequestClose:()=>a(!1)}),t.jsx(A,{appearance:"secondary",size:"s",onClick:()=>a(!0),children:tr.convertButton})]})]}):null},Lye=({project:e})=>t.jsxs($e,{children:[t.jsx(Te,{level:3,titleClassName:Eye.pageHeader,children:tr.title}),t.jsx(Oye,{project:e})]}),$ye="_panel_81njg_1",Rye={panel:$ye},Bye="_panel_hi5dh_1",Mye="_upgradeLink_hi5dh_5",Em={panel:Bye,upgradeLink:Mye},Dye=({project:e,onClickUpgrade:s})=>{var l;const{limits:n}=Et(),r=le("block_connections"),a=(n==null?void 0:n.max_allowed_ips)!=null&&(n==null?void 0:n.max_allowed_ips)>0,o=!((l=e.settings)!=null&&l.block_public_connections),i=Fn(),c=d=>{i({projectId:e.id,data:{settings:{block_public_connections:d}}})};return t.jsx(t.Fragment,{children:t.jsxs(De,{className:Em.panel,children:[t.jsx(_s,{isSelected:o,onChange:d=>c(!d),isDisabled:!r,children:"Allow traffic via the public internet"}),!a&&t.jsxs("div",{children:[t.jsx("button",{className:Em.upgradeLink,onClick:()=>s(!0),type:"button",children:"Upgrade your plan"})," ","to limit database access to trusted IP addresses."]}),a&&o&&t.jsx(_E,{project:e,disabled:!1})]})})},Uye="_list_ylm1v_1",Fye="_addMoreEndpointsText_ylm1v_7",R_={list:Uye,addMoreEndpointsText:Fye},zye="_card_gum2c_1",qye="_cardItem_gum2c_11",Hye="_header_gum2c_16",Vye="_icon_gum2c_26",Ca={card:zye,cardItem:qye,header:Hye,icon:Vye},qS=({endpointId:e,configured:s})=>{const{project:n}=F(),{data:r}=xC({vpcEndpointId:e,regionId:(n==null?void 0:n.region_id)??""});return r?t.jsxs("div",{className:Ca.card,children:[t.jsxs("div",{className:Ca.cardItem,children:[t.jsx("div",{className:Ca.header,children:"Connection allowed"}),t.jsx("div",{children:r.state==="accepted"&&s?t.jsxs(t.Fragment,{children:[t.jsx(q,{name:"check",size:16,className:Ca.icon})," Yes"]}):t.jsx("span",{children:"No"})})]}),t.jsxs("div",{className:Ca.cardItem,children:[t.jsx("div",{className:Ca.header,children:"VPC Endpoint Id"}),t.jsx("div",{children:r.vpc_endpoint_id})]}),t.jsxs("div",{className:Ca.cardItem,children:[t.jsx("div",{className:Ca.header,children:"Label"}),t.jsx("div",{children:r.label||"-"})]})]}):null},Wye=({projectId:e,regionId:s})=>{const{data:n,isLoading:r}=w$(e),{data:a,isLoading:o}=S$(s),i=r||o;if(i)return t.jsx($e,{children:t.jsx(Se,{})});const{configuredVPCs:c,notConfiguredVPCs:l}=(a==null?void 0:a.reduce((d,u)=>(!n||n.length===0||n.some(h=>h.vpc_endpoint_id===u.vpc_endpoint_id)?d.configuredVPCs.push(u):d.notConfiguredVPCs.push(u),d),{configuredVPCs:[],notConfiguredVPCs:[]}))??{configuredVPCs:[],notConfiguredVPCs:[]};return!n&&!i?null:t.jsxs($e,{children:[(!a||a.length===0)&&t.jsxs(t.Fragment,{children:[t.jsx(X,{appearance:"warning",title:"No configured VPC endpoints.",action:t.jsxs(Ke,{forceNative:!0,openInNewTab:!0,href:Xc,children:["Configure using CLI ",t.jsx(q,{name:"external_link",size:16})]}),children:"There are no configured endpoints in the cell/region"}),t.jsxs("p",{className:R_.addMoreEndpointsText,children:["Add more private link or restrict access to a specific private link"," ",t.jsxs(Ke,{forceNative:!0,openInNewTab:!0,href:Fj,children:["using our CLI ",t.jsx(q,{name:"external_link",size:12})]})]})]}),!r&&a!=null&&(c.length>0||l.length>0)&&t.jsxs("div",{className:R_.list,children:[t.jsx(Te,{level:4,size:"h5",children:"Available restrictions"}),c==null?void 0:c.map(d=>t.jsx(qS,{endpointId:d.vpc_endpoint_id,configured:!0},d.vpc_endpoint_id)),l&&l.length>0&&t.jsxs(t.Fragment,{children:[l.map(d=>t.jsx(qS,{endpointId:d.vpc_endpoint_id,configured:!1},d.vpc_endpoint_id)),t.jsxs("p",{className:R_.addMoreEndpointsText,children:[t.jsx(q,{name:"add_outlined",size:12})," Add more private link or restrict access to a specific private link"," ",t.jsxs(Ke,{forceNative:!0,openInNewTab:!0,href:Fj,children:["using our CLI ",t.jsx(q,{name:"external_link",size:12})]})]})]})]})]})},Gye=({project:e,onClickUpgrade:s})=>{var l;const{limits:n}=Et(),r=!(n!=null&&n.max_vpc_endpoints_per_region),a=!((l=e.settings)!=null&&l.block_vpc_connections),o=!r&&a,i=Fn(),c=d=>{i({projectId:e.id,data:{settings:{block_vpc_connections:d}}})};return t.jsxs(De,{className:Em.panel,children:[t.jsx(_s,{isSelected:o,onChange:d=>c(!d),isDisabled:r,children:"Allow traffic via Virtual Private Network (VPC)"}),r&&t.jsxs("div",{children:[t.jsx("button",{type:"button",onClick:()=>s(!0),className:Em.upgradeLink,children:"Upgrade your plan"})," ","to limit database access using VPC."]}),o&&t.jsxs(t.Fragment,{children:[t.jsx("p",{children:"Restrict access to this project to specific VPC endpoints. By default, projects can be accessed using any VPC endpoint configured at the organiztion level."}),t.jsx($e,{children:t.jsx(Wye,{projectId:e.id,regionId:e.region_id})})]})]})},Kye=()=>{const{project:e}=F(),{isLoading:s}=Et(),[n,r]=m.useState(!1);return!e||s?t.jsx(Se,{}):t.jsxs(De,{id:"network-security",className:Rye.panel,children:[t.jsx(Pt,{type:dt.IpAllowRules,isOpen:n,onRequestClose:()=>r(!1)}),t.jsx(Te,{children:"Networking"}),t.jsx(Dye,{project:e,onClickUpgrade:r}),t.jsx(Gye,{project:e,onClickUpgrade:r})]})},Qye={title:"Network security"},Yye=()=>{const e=le("private_networking"),s=le("private_networking_new_ui");return e&&s},Jye=()=>{const{project:e}=F(),{isLoading:s}=Et(),n=Yye();return!e||s?t.jsx(Se,{}):n?t.jsx(Kye,{}):t.jsxs(De,{id:"network-security",children:[t.jsx(Te,{children:Qye.title}),t.jsx(Nye,{project:e}),t.jsx(Lye,{project:e})]})},Od={header:"Logical Replication",nextStepsTitle:"Next steps",nextSteps:t.jsxs("p",{children:["After enabling logical replication, the next steps are creating publications in Neon and configuring subscribers. For detailed instructions, please refer to our"," ",t.jsx(M,{href:"https://neon.com/docs/guides/logical-replication-guide",openInNewTab:!0,icon:"external_link",children:"documentation"})]}),logicalReplicationEnabled:"Logical replication is enabled for this project.",enableLogicalReplicationButton:"Enable"},HS=t.jsxs(X,{appearance:"warning",children:[t.jsx(oi,{id:"P4YirL",defaultMessage:[{type:0,value:"Enabling logical replication:"}]}),t.jsxs("ul",{children:[t.jsx("li",{children:t.jsx(oi,{id:"kT2zWj",defaultMessage:[{type:0,value:"Restarts all computes in your Neon project, dropping any active connections"}]})}),t.jsx("li",{children:t.jsx(oi,{id:"VM21aR",defaultMessage:[{type:0,value:"Changes your Postgres "},{type:8,value:"code",children:[{type:0,value:"wal_level"}]},{type:0,value:" setting to "},{type:8,value:"code",children:[{type:0,value:"logical"}]}],values:{code:e=>t.jsx(Pe,{children:e})}})}),t.jsx("li",{children:t.jsx(oi,{id:"/ZQlsK",defaultMessage:[{type:0,value:"Can not be turned off once enabled"}]})})]})]}),Zye=()=>{var c;const{confirm:e}=Ye(),{trackUiInteraction:s}=k(),{project:n}=F(),r=Fn(),a=(c=n==null?void 0:n.settings)==null?void 0:c.enable_logical_replication,o=m.useCallback(async()=>{if(!n)return;if(s("logical_replication_enable_clicked"),!await e({header:"Enable logical replication",text:HS,confirmButtonText:"Enable"})){s("logical_replication_enable_cancelled");return}s("logical_replication_enable_confirmed"),r({projectId:n.id,data:{settings:{enable_logical_replication:!0}}}).catch(d=>$m(d))},[n,s,r,e]),i=yr(m.useMemo(()=>n?{shared:{projects:[n.id]}}:null,[n]));return n?t.jsxs(De,{id:"out-replication",children:[t.jsx($e,{children:t.jsx(Te,{children:Od.header})}),!!a&&t.jsx(X,{appearance:"success",children:Od.logicalReplicationEnabled}),t.jsx("p",{children:t.jsx(oi,{id:"GnN0x+",defaultMessage:[{type:0,value:"Logical replication lets you replicate data changes from Neon to external data services and platforms."}]})}),!a&&HS,a?t.jsxs(t.Fragment,{children:[t.jsx(J,{level:3,size:"h4",children:Od.nextStepsTitle}),Od.nextSteps]}):t.jsx(co,{lockedMessage:i,children:t.jsx(A,{appearance:"primary",size:"s",onClick:o,disabled:!!i,children:Od.enableLogicalReplicationButton})})]}):null},Jv=({projectId:e})=>["listProjectPermissions",e],Xye=({projectId:e})=>_t({queryKey:Jv({projectId:e}),queryFn:async()=>(await W.listProjectPermissions(e)).data,enabled:!!e,retry:0}),ewe=({projectId:e},{onSuccess:s,onError:n,...r}={})=>{const a=_e();return ve({mutationKey:["revokePermissionFromProject",e],mutationFn:async({permissionId:o})=>(await W.revokePermissionFromProject(e,o)).data,onSuccess:(...o)=>{a.invalidateQueries({queryKey:Jv({projectId:e})}),s==null||s(...o)},onError:(o,...i)=>{Y(o),n==null||n(o,...i)},...r})},twe=({projectId:e},{onSuccess:s,onError:n,...r}={})=>{const a=_e();return ve({mutationKey:["grantPermissionToProject",e],mutationFn:async o=>(await W.grantPermissionToProject(e,o)).data,onSuccess:(...o)=>{a.invalidateQueries({queryKey:Jv({projectId:e})}),s==null||s(...o)},onError:(o,...i)=>{Y(o),n==null||n(o,...i)},...r})},Sc={title:"Invite collaborators",emailLabel:"Email address",emailPlaceholder:"name@example.com",emailFooter:"Comma separated emails",submitButton:"Invite",invitationSuccess:(e,s)=>`Collaborator ${e} received access to project ${s}`},swe="_emailInput_1qx2h_1",nwe={emailInput:swe},rwe=({project:e,onSubmit:s,onRequestClose:n})=>{var i;const r=Ae({mode:"onSubmit",defaultValues:{collaborator_emails:""}}),a=twe({projectId:e.id},{onSuccess:c=>pe(Sc.invitationSuccess(c.granted_to_email,e.name))}),o=c=>{Im(c.collaborator_emails).forEach(l=>a.mutate({email:l})),s()};return t.jsx(t.Fragment,{children:t.jsxs(gs,{modalProps:{title:Sc.title,isOpen:!0,onRequestClose:n,width:550},providerProps:r,onSubmit:o,children:[t.jsx(qe,{gaps:!0,children:t.jsxs(B,{label:Sc.emailLabel,error:(i=r.formState.errors.collaborator_emails)==null?void 0:i.message,children:[t.jsx(ce,{autoFocus:!0,placeholder:Sc.emailPlaceholder,className:nwe.emailInput,...r.register("collaborator_emails",{required:{value:!0,message:"This field is required"},validate:c=>Im(c)!==null||"Please enter a valid email address"})}),t.jsx(P,{appearance:"secondary",style:{marginTop:4},children:Sc.emailFooter})]})}),t.jsxs(Ee,{children:[t.jsx(ln,{}),t.jsx(Ie,{children:Sc.submitButton})]})]})})},awe=({project:e,...s})=>{const{trackUiInteraction:n}=k(),r=it(st.InviteProjectCollaborators);return t.jsxs(t.Fragment,{children:[r.isModalOpen&&t.jsx(rwe,{project:e,onSubmit:()=>{n("project_settings_sharing_invite_modal_submitted"),r.closeModal()},onRequestClose:()=>{n("project_settings_sharing_invite_modal_cancelled"),r.closeModal()}}),t.jsx(A,{size:"s",onClick:()=>{n("project_settings_sharing_invite_clicked"),r.openModal()},...s,children:"Invite"})]})},zc={title:"Collaborators",description:e=>t.jsx(t.Fragment,{children:e?t.jsxs(t.Fragment,{children:["You have been added to this project. Other collaborators are listed below. Collaborators have limited permissions.",t.jsx(sn,{children:"Collaborators can manage all database resources, but they can't delete the project."})]}):"Invite external collaborators to join this project. Existing collaborators are listed below."}),emailColumnLabel:"Email",revokeLabel:"Revoke project sharing",revokeSuccess:(e,s)=>`Removed collaborator ${e} access to project ${s}`,footnote:(e,s,n)=>t.jsxs("p",{children:["* This project is owned by ",t.jsx("strong",{children:e}),"."," ",s!==void 0&&t.jsxs(t.Fragment,{children:[n?"Manage member permissions on":"View members from the"," ",t.jsx(M,{href:G(C.OrgPeople,{orgId:s.id}),children:"People page"}),"."]})]})},owe=({permissionId:e,project:s,email:n})=>{const{trackUiInteraction:r}=k(),a=ewe({projectId:s.id},{onSuccess:()=>pe(zc.revokeSuccess(n,s.name))}),o=m.useMemo(()=>[{items:[{label:zc.revokeLabel,onClick(){r("project_settings_sharing_revoke_clicked"),a.mutate({permissionId:e})}}]}],[r,a,e]);return t.jsx(Jt,{sections:o,placement:"bottom right",children:t.jsx(fs,{"aria-label":`Actions for collaborator ${n}`})})},iwe=()=>{var h,g;const e=nt(),s=Dn(),{project:n,isLoading:r,projectId:a}=F(),{org:o,isLoading:i}=ae(),{isOrgAdmin:c}=qt(),{data:l}=gx(),d=!!(l!=null&&l.some(({id:f})=>f===(n==null?void 0:n.id))),u=Xye({projectId:a});m.useEffect(()=>{yl(u.error)&&u.error.status===404&&(s(Nx.util.invalidateTags(["Projects"])),e.push(C.ProjectsList))},[u.error,e,s]);const p=m.useMemo(()=>[{key:"user_email",label:zc.emailColumnLabel,renderValue:({granted_to_email:f})=>t.jsx(P,{children:f})},tI(({id:f,granted_to_email:_})=>t.jsx(owe,{project:n,permissionId:f,email:_}))],[n]);return!n||i||r?null:t.jsxs(De,{id:"sharing",children:[t.jsxs($e,{children:[t.jsx(Te,{actions:t.jsx(awe,{project:n}),children:zc.title}),t.jsx(P,{appearance:"secondary",children:zc.description(d)})]}),t.jsx(Mn,{cols:p,data:(h=u.data)==null?void 0:h.project_permissions,isLoading:u.isLoading,dataPlaceholderProps:{title:"You haven't shared your project with anyone yet"}}),(d||o!==void 0)&&zc.footnote(((g=n.owner)==null?void 0:g.name)??"",o,c)]})},cwe="_root_14q3m_1",lwe="_value_14q3m_6",dwe="_unit_14q3m_10",B_={root:cwe,value:lwe,unit:dwe},uwe=Object.values(Xr).filter(e=>e!==Xr.Seconds&&e!==Xr.Minutes).map(e=>({value:e,label:ju(e)})),hwe=({savedValue:e,onChangeValue:s,onEmptyValue:n})=>{const[r,a]=m.useState(""),[o,i]=m.useState();m.useEffect(()=>{if(o)if(r){const d=Number(r)*hr[o.value];s(d)}else n("Provide a correct value")},[r,o,s,n]),m.useEffect(()=>{if(e===void 0)return;const{highestValue:d,highestUnit:u}=Rm(e);a(String(d)),i({value:u,label:ju(u)})},[e]);const c=d=>{a(d.target.value)},l=d=>{i(d)};return t.jsx(t.Fragment,{children:o&&t.jsxs("div",{className:B_.root,children:[t.jsx(ce,{type:"number",value:r,onChange:c,className:B_.value}),t.jsx(na,{value:o,options:uwe,onChange:d=>l(d??void 0),className:B_.unit})]})})},nx=[{value:0,unit:gn.Hours},{value:1,unit:gn.Hours},{value:2,unit:gn.Hours},{value:6,unit:gn.Hours},{value:12,unit:gn.Hours},{value:1,unit:gn.Days},{value:2,unit:gn.Days},{value:7,unit:gn.Days},{value:14,unit:gn.Days},{value:21,unit:gn.Days},{value:30,unit:gn.Days}],pwe=({savedValue:e,defaultValue:s,maxValue:n,onChangePreset:r})=>{const[a,o]=m.useState(),i=m.useMemo(()=>nx.filter(({value:d,unit:u})=>d*hr[u]<=n),[n]),c=m.useMemo(()=>nx.findIndex(({value:d,unit:u})=>d*hr[u]===s),[s]),l=d=>{const{value:u,unit:p}=i[d];return`${u}${p}`};return m.useEffect(()=>{if(a!==void 0){const{value:d,unit:u}=i[a];r(d*hr[u])}},[a,r,i]),m.useEffect(()=>{if(e===void 0)return;const d=i.findIndex(({value:u,unit:p})=>u*hr[p]===e);if(d!==-1){o(d);return}o(c)},[c,e,i]),t.jsx(t.Fragment,{children:a!==void 0&&t.jsx(mb,{value:a,onChange:d=>o(d),max:i.length-1,formatMark:l,filled:!1})})};function mwe(e){return yr(m.useMemo(()=>({shared:{projects:[e]},exclusive:{actions:[`apply_storage_config@${e}`]}}),[e]))}const Xp={title:"Instant restore",description:()=>t.jsxs(t.Fragment,{children:["Choose the length of your restore window. This setting enables"," ",t.jsx("b",{children:"instant restore"})," for point-in-time recovery, time travel queries, and branching from past states."]}),longRetentionWarning:"Note: A longer restore window can increase your storage usage.",learnMore:"Learn more"},gwe="_form_uuzdu_1",fwe="_controlContainer_uuzdu_7",_we="_control_uuzdu_7",bwe="_error_uuzdu_20",Lp={form:gwe,controlContainer:fwe,control:_we,error:bwe},VS=HC,xwe=HC,vwe=({project:e,limits:s})=>{const n=s?s.max_history_retention_seconds:VS,[r,a]=m.useState(!1),[o,i]=m.useState(""),[c,l]=m.useState(),[d,u]=m.useState(),p=m.useMemo(()=>{if(e)return e.history_retention_seconds},[e]);m.useEffect(()=>{if(p===void 0)return;const v=nx.findIndex(({value:j,unit:y})=>j*hr[y]===p);u(v===-1)},[p]);const h=v=>{l(v),i(v>n?`History retention can be set for up to ${zu(n)}`:"")},g=v=>{l(v),i("")},f=Fn(),_=m.useCallback(v=>(v.preventDefault(),a(!0),f({projectId:e.id,data:{history_retention_seconds:c}}).then(()=>{ze(t.jsx(tt,{children:"Successfully updated history retention settings"}))}).catch(Y).finally(()=>a(!1))),[f,c,e.id]),b=r||p===c||!!o,x=mwe(e.id);return t.jsx(t.Fragment,{children:t.jsx(t.Fragment,{children:t.jsxs($e,{children:[t.jsx("div",{children:Xp.description()}),t.jsxs("form",{className:Lp.form,onSubmit:_,children:[t.jsxs("div",{className:Lp.controlContainer,children:[t.jsx("div",{className:Lp.control,children:d?t.jsx(hwe,{savedValue:p,onChangeValue:h,onEmptyValue:i}):t.jsx(pwe,{savedValue:p,defaultValue:Math.min(VS,n),maxValue:n,onChangePreset:g})}),o&&t.jsx("div",{className:Lp.error,children:o})]}),Number(c)>xwe&&t.jsxs(X,{appearance:"warning",children:[Xp.longRetentionWarning," ",t.jsx(M,{href:"https://neon.com/docs/manage/projects#configure-history-retention",icon:"external_link",children:Xp.learnMore})]}),t.jsx(KF,{}),t.jsx("div",{children:t.jsx(co,{lockedMessage:x,children:t.jsx(A,{type:"submit",disabled:b||!!x,size:"s",children:r?"Saving...":"Save"})})})]})]})})})},jwe=()=>{const{project:e,isLoading:s}=F(),{limits:n,isLoading:r}=Et();return!e||s||r||!n?t.jsx(Se,{}):t.jsxs(De,{id:"storage",children:[t.jsx(Te,{children:Xp.title}),t.jsx(vwe,{project:e,limits:n})]})},$p={createLinkButton:"Create claim link",title:"Claim link successfully created",claimLinkCreated:"Share this link with the Neon account you want to own the project. When they sign in and open the link, they can select the organization to transfer the project into.",claimLinkLabel:"Project claim link"},ywe="_linkLabel_1hash_1",wwe="_info_1hash_7",WS={linkLabel:ywe,info:wwe},Swe=()=>{const e=C$(),{projectId:s}=F(),{trackUiInteraction:n}=k(),[{data:r,error:a,isLoading:o},i]=$C({isLoading:!1}),[c,l]=m.useState(!1),d=m.useCallback(async()=>{if(n("project_settings_transfer_create_link_clicked"),r===void 0)try{const{id:p}=await e({projectId:s});i({data:p,isLoading:!1})}catch(p){p instanceof Error?i({error:p.message,isLoading:!1}):xi(p,{tags:{projectId:s,action:"create_claim_link"}})}l(!0)},[e,s,i,n,r]),u=m.useMemo(()=>{const p=new URL(Va+C.Claim,window.location.origin);return p.searchParams.set("tr",r||""),p.searchParams.set("p",s||""),p.toString()},[r,s]);return t.jsxs(t.Fragment,{children:[t.jsx(A,{size:"s",loading:o,appearance:"secondary",onClick:d,children:$p.createLinkButton}),c&&t.jsx(It,{title:$p.title,isOpen:!0,onRequestClose:()=>{n("project_settings_transfer_create_link_modal_dismissed"),l(!1)},children:t.jsxs(qe,{children:[o&&t.jsx(on,{}),a&&t.jsx(X,{appearance:"error",children:a}),r&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:WS.info,children:$p.claimLinkCreated}),t.jsx("div",{className:WS.linkLabel,children:$p.claimLinkLabel}),t.jsx(Bn,{hideOverflow:!0,copy:{onCopy:()=>{n("project_settings_claim_link_copied")}},children:u})]})]})})]})},Rp={header:"Transfer project",info:"You can only transfer projects to an organization you are a member of. Transfers are instant, with no downtime.",infoWithClaimLink:t.jsxs("span",{children:["Move this project to another organization you belong to. Transfers are instant, with no downtime.",t.jsx("br",{}),t.jsx("br",{}),"Or, create a ",t.jsx("strong",{children:"claim link"})," so another Neon account can take ownership."]}),transferButton:"Transfer project"},Cwe="_buttonWrapper_1ed8t_1",Iwe="_footer_1ed8t_5",GS={buttonWrapper:Cwe,footer:Iwe},kwe=()=>{const{project:e}=F(),{trackUiInteraction:s}=k(),n=nt(),r=it(st.TransferProject),{enabled:a,isLoading:o,disabledMessage:i}=mP(),c=le("transfer_link_projects_ui");return!e||o?t.jsx(Se,{}):t.jsxs(t.Fragment,{children:[r.isModalOpen&&t.jsx(fP,{project:e,onRequestClose:()=>{r.closeModal(),s("transfer_project_modal_dismissed")},onSuccess:l=>{r.closeModal(),s("transfer_project_modal_confirmed"),n.push(G(C.OrgProjectsList,{orgId:l}))}}),t.jsx(De,{id:"transfer",children:t.jsxs($e,{children:[t.jsx(Te,{children:Rp.header}),t.jsx(P,{appearance:"secondary",children:c?Rp.infoWithClaimLink:Rp.info}),t.jsxs(Ns,{className:GS.footer,children:[t.jsx(ne,{content:i,disabled:a,children:t.jsx("div",{className:GS.buttonWrapper,children:t.jsx(A,{"data-qa":"transfer-project-button",onClick:()=>{s("project_settings_transfer_project_clicked"),r.openModal()},disabled:!a,size:"s",children:Rp.transferButton})})}),c&&t.jsx(Swe,{})]})]})})]})},Twe={nextUpdate:e=>`Next update: ${xe(e,ke.UpdateScheduleUpcomingDateAndTime)}`},Pwe=({date:e})=>t.jsx(X,{"data-qa":"next-update-time",children:t.jsx(P,{as:"p",children:Twe.nextUpdate(e)})}),M_={title:"Updates",description:"Keep your computes up to date with the latest Postgres version updates, security patches, and Neon features. Updates require a brief restart of your project’s computes.",learnMore:"Learn more"},Nwe="_sectionsGap_1gvn5_1",Awe={sectionsGap:Nwe},D_={description:"Select your preferred time window for updates. Compute restarts typically take only a few seconds.",days:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"]},Ewe="_container_11k2x_1",Owe={container:Ewe},Lwe=({onChange:e,value:s,disabled:n,ref:r})=>{const{trackUiInteraction:a}=k(),o=l=>l+1,i=l=>s.includes(l),c=l=>()=>{a("project_settings_update_schedule_day_changed",{day:D_.days[l-1].toLowerCase()}),e([l])};return t.jsxs("div",{className:Owe.container,ref:r,children:[t.jsx(P,{as:"p",children:D_.description}),t.jsx(Fu,{children:D_.days.map((l,d)=>t.jsx(gr,{active:i(o(d)),onClick:c(o(d)),disabled:n,children:l},l))})]})},Cc={save:"Save",upgradeToEdit:"Upgrade to customize",whyUpgrade:"On the Free Plan, Neon schedules updates as needed, typically completing in just a few seconds. For more control over when updates occur, upgrade your plan to set a specific time window for updates.",schedule:"Schedule",noSchedule:"An update schedule hasn't been set for this project yet. You can choose a preferred schedule now, or Neon will set one for you in the coming weeks.",restartsOutsideOfSchedule:"Neon may occasionally restart computes outside the selected update window to address critical security issues or perform essential maintenance."},$we="_button_1wi41_1",Rwe="_restartOutsideOfScheduleAlert_1wi41_5",U_={button:$we,restartOutsideOfScheduleAlert:Rwe},Bwe={time:"Time"},Mwe="_container_1uh3k_1",Dwe="_select_1uh3k_8",KS={container:Mwe,select:Dwe},Uwe={timeInYourTimezone:(e,s)=>`The selected UTC time corresponds to ${s} in your timezone (${e})`},Fwe="_infoMessage_19619_1",zwe={infoMessage:Fwe},qwe=e=>{const s=new Date;s.setUTCHours(e),s.setUTCMinutes(0);const n=Intl.DateTimeFormat().resolvedOptions(),r=s.toLocaleTimeString(n.locale,{hour:"2-digit",minute:"2-digit",timeZone:n.timeZone,hour12:!0});return Uwe.timeInYourTimezone(n.timeZone,r)},Hwe=({hours:e})=>t.jsx(Gc,{icon:"ext_geospacial",className:zwe.infoMessage,children:qwe(e)}),Vwe=1;function Wwe(e){const s=e.start_time.split(":"),n=s.length===2?Number(s[0]):0;return{weekdays:e.weekdays,startHour:n}}function bE(e){return(e+Vwe)%24}function Gwe(e){const s=e.startHour.toString().padStart(2,"0"),n=bE(e.startHour).toString().padStart(2,"0");return{weekdays:e.weekdays,start_time:`${s}:00`,end_time:`${n}:00`}}const QS=e=>{const s=e<12?"AM":"PM";return`${e%12||12}:00 ${s}`},Kwe=({onChange:e,value:s,disabled:n,ref:r})=>{const{trackUiInteraction:a}=k(),o=m.useMemo(()=>Array.from({length:24},(c,l)=>({label:`${QS(l)} - ${QS(bE(l))} UTC`,value:l})),[]),i=m.useCallback(c=>{a("project_settings_update_schedule_time_changed",{start_hour_utc:c}),e(c)},[a,e]);return t.jsxs("div",{className:KS.container,children:[t.jsx(B,{label:Bwe.time,children:t.jsx(lt,{ref:r,options:o,onChange:i,value:s,className:KS.select,size:"s",disabled:n,filterable:!0})}),t.jsx(Hwe,{hours:s})]})},Qwe={toastSuccessMessage:"Schedule updated successfully!"},Ywe={weekdays:[7],startHour:0},Jwe=(e,s)=>{const n=Fn(),r=bx("edit_maintenance_window");return{form:Ae({defaultValues:s?Wwe(s):Ywe,disabled:!r}),handleSubmit:async i=>{try{await n({projectId:e,data:{settings:{maintenance_window:Gwe(i)}}}),pe(Qwe.toastSuccessMessage)}catch(c){Y(c)}},canEditUpdateSchedule:r}},Zwe=({projectId:e,maintenanceWindow:s})=>{const{form:n,handleSubmit:r,canEditUpdateSchedule:a}=Jwe(e,s),{trackUiInteraction:o}=k(),[i,c]=m.useState(!1),l=m.useCallback(()=>{o("project_settings_update_schedule_upgrade_to_customize_clicked"),c(!0)},[o]),d=m.useCallback(()=>c(!1),[]),u=m.useCallback(p=>(o("project_settings_update_schedule_save_clicked"),r(p)),[o,r]);return t.jsxs(t.Fragment,{children:[t.jsx(Pt,{type:dt.Default,isOpen:i,onRequestClose:d}),a?t.jsxs(Xt,{providerProps:n,onSubmit:u,gaps:!0,children:[t.jsx(Te,{level:3,children:Cc.schedule}),t.jsx(ye,{render:({field:p})=>t.jsx(Lwe,{...p}),name:"weekdays"}),t.jsx(ye,{name:"startHour",render:({field:p})=>t.jsx(Kwe,{...p})}),!s&&t.jsx(X,{"data-qa":"update-schedule-not-populated",children:Cc.noSchedule}),t.jsx(Ie,{className:U_.button,children:Cc.save}),t.jsx(Gc,{icon:"info_italic",className:U_.restartOutsideOfScheduleAlert,children:Cc.restartsOutsideOfSchedule})]}):t.jsxs(t.Fragment,{children:[t.jsx(P,{as:"p",children:Cc.whyUpgrade}),t.jsx(A,{className:U_.button,onClick:l,children:Cc.upgradeToEdit})]})]})},Xwe=()=>{var n;const{project:e}=F(),{trackUiInteraction:s}=k();return t.jsxs(De,{id:"update-schedule","data-qa":"maintenance-window-page",children:[t.jsx(Te,{children:M_.title}),t.jsxs("div",{className:Awe.sectionsGap,children:[t.jsxs($e,{children:[t.jsxs(P,{as:"p",children:[M_.description," ",t.jsx(M,{openInNewTab:!0,href:"https://neon.com/docs/manage/updates",icon:"external_link",onClick:()=>{s("project_settings_update_schedule_learn_more_clicked")},children:M_.learnMore})]}),(e==null?void 0:e.maintenance_scheduled_for)&&t.jsx(Pwe,{date:e.maintenance_scheduled_for})]}),t.jsx($e,{children:e?t.jsx(Zwe,{projectId:e.id,maintenanceWindow:(n=e==null?void 0:e.settings)==null?void 0:n.maintenance_window}):t.jsx(Se,{})})]})]})},e0e=()=>{const{isLoading:e}=F(),{isLoading:s}=Et(),{isFetching:n}=fe(),{orgId:r,isLoading:a}=ae();return e||s||n&&(a||!!r)?t.jsx(Se,{}):t.jsxs(t.Fragment,{children:[t.jsx(cye,{}),t.jsx(nye,{}),t.jsx(jwe,{}),t.jsx(Xwe,{}),t.jsx(iwe,{}),t.jsx(Jye,{}),t.jsx(Oje,{}),t.jsx(Zye,{}),t.jsx(kwe,{}),t.jsx(rye,{})]})},Oa={title:"Projects shared with me",subtitle:t.jsxs(t.Fragment,{children:["Projects shared with you by other users. Learn about"," ",t.jsx(M,{openInNewTab:!0,href:"https://neon.com/docs/guides/project-collaboration-guide",children:"project collaboration"}),"."]}),nameHeader:"Name",organizationHeader:"Organization",regionHeader:"Region",createdAtHeader:"Created at",storageHeader:"Storage",pgVersionHeader:"Postgres version"},t0e="_projectNameCell_lypcp_1",s0e="_projectName_lypcp_1",YS={projectNameCell:t0e,projectName:s0e},n0e=()=>{const{getRegionSafe:e}=oo();return m.useMemo(()=>[{id:"name",header:Oa.nameHeader,accessorKey:"name",enableSorting:!0,rowHeader:!0,render:({project:s})=>s?t.jsxs("div",{className:YS.projectNameCell,children:[t.jsx(P,{className:YS.projectName,bold:!0,children:s.name}),s.hipaa_enabled_at!==void 0&&t.jsx(ne,{content:"HIPAA compliant",children:t.jsx(Ne,{children:"HIPAA"})})]}):t.jsx(D,{height:12})},{id:"organization",header:Oa.organizationHeader,render:({project:s})=>s?t.jsx(P,{children:s.org_name}):t.jsx(D,{height:12})},{id:"region_name",header:Oa.regionHeader,render:({project:s})=>{var n;return s?t.jsx(P,{children:(n=e(s.platform_id,s.region_id))==null?void 0:n.name}):t.jsx(D,{height:12})}},{id:"created_at",header:Oa.createdAtHeader,render:({project:s})=>s?t.jsx(P,{appearance:"secondary",children:xe(s.created_at)}):t.jsx(D,{height:12})},{id:"synthetic_storage_size",header:Oa.storageHeader,render:({project:s})=>s?t.jsx(P,{nowrap:!0,bold:!0,children:s.synthetic_storage_size?_l(s.synthetic_storage_size):"-"}):t.jsx(D,{height:12,width:24})},{id:"pg_version",header:Oa.pgVersionHeader,render:({project:s})=>s?t.jsx(P,{children:s.pg_version}):t.jsx(D,{height:12,width:24})},{id:"actions",render:({project:s})=>s?t.jsx(LP,{project:s,isUserProject:!1}):null,size:62,maxSize:62}],[e])},r0e=()=>{const{data:e,isLoading:s,unavailableIds:n,error:r}=Du(),a=m.useMemo(()=>vm(e,n),[e,n]),o=!!(a!=null&&a.length),{trackUiInteraction:i}=k(),c=n0e();return t.jsxs(t.Fragment,{children:[t.jsx(Il,{title:Oa.title,subtitle:Oa.subtitle}),(o||!!r)&&t.jsx(t.Fragment,{children:r?t.jsx(Fb,{variant:"shared"}):c&&t.jsx(Ps,{isLoading:s,"aria-label":"Shared projects",columns:c,rows:a,rowHref:l=>G(C.ProjectsItem,{projectId:l.id}),onRowClick:()=>i("project_list_project_opened")})})]})},a0e="_root_11bgo_1",o0e="_body_11bgo_7",JS={root:a0e,body:o0e};var Ld={exports:{}},$d={},Bp={},ZS;function i0e(){if(ZS)return Bp;ZS=1,Bp.__esModule=!0,Bp.cloneElement=c;var e=s(zm());function s(l){return l&&l.__esModule?l:{default:l}}function n(l,d){var u=Object.keys(l);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(l);d&&(p=p.filter(function(h){return Object.getOwnPropertyDescriptor(l,h).enumerable})),u.push.apply(u,p)}return u}function r(l){for(var d=1;d<arguments.length;d++){var u=arguments[d]!=null?arguments[d]:{};d%2?n(Object(u),!0).forEach(function(p){a(l,p,u[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(u)):n(Object(u)).forEach(function(p){Object.defineProperty(l,p,Object.getOwnPropertyDescriptor(u,p))})}return l}function a(l,d,u){return d=o(d),d in l?Object.defineProperty(l,d,{value:u,enumerable:!0,configurable:!0,writable:!0}):l[d]=u,l}function o(l){var d=i(l,"string");return typeof d=="symbol"?d:String(d)}function i(l,d){if(typeof l!="object"||l===null)return l;var u=l[Symbol.toPrimitive];if(u!==void 0){var p=u.call(l,d);if(typeof p!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(l)}function c(l,d){return d.style&&l.props.style&&(d.style=r(r({},l.props.style),d.style)),d.className&&l.props.className&&(d.className=l.props.className+" "+d.className),e.default.cloneElement(l,d)}return Bp}var Rd={},XS;function xE(){if(XS)return Rd;XS=1,Rd.__esModule=!0,Rd.resizableProps=void 0;var e=s(VC());TI();function s(r){return r&&r.__esModule?r:{default:r}}var n={axis:e.default.oneOf(["both","x","y","none"]),className:e.default.string,children:e.default.element.isRequired,draggableOpts:e.default.shape({allowAnyClick:e.default.bool,cancel:e.default.string,children:e.default.node,disabled:e.default.bool,enableUserSelectHack:e.default.bool,offsetParent:e.default.node,grid:e.default.arrayOf(e.default.number),handle:e.default.string,nodeRef:e.default.object,onStart:e.default.func,onDrag:e.default.func,onStop:e.default.func,onMouseDown:e.default.func,scale:e.default.number}),height:function(){for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];var c=o[0];if(c.axis==="both"||c.axis==="y"){var l;return(l=e.default.number).isRequired.apply(l,o)}return e.default.number.apply(e.default,o)},handle:e.default.oneOfType([e.default.node,e.default.func]),handleSize:e.default.arrayOf(e.default.number),lockAspectRatio:e.default.bool,maxConstraints:e.default.arrayOf(e.default.number),minConstraints:e.default.arrayOf(e.default.number),onResizeStop:e.default.func,onResizeStart:e.default.func,onResize:e.default.func,resizeHandles:e.default.arrayOf(e.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:e.default.number,width:function(){for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];var c=o[0];if(c.axis==="both"||c.axis==="x"){var l;return(l=e.default.number).isRequired.apply(l,o)}return e.default.number.apply(e.default,o)}};return Rd.resizableProps=n,Rd}var e1;function vE(){if(e1)return $d;e1=1,$d.__esModule=!0,$d.default=void 0;var e=i(zm()),s=TI(),n=i0e(),r=xE(),a=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function o(x){if(typeof WeakMap!="function")return null;var v=new WeakMap,j=new WeakMap;return(o=function(w){return w?j:v})(x)}function i(x,v){if(x&&x.__esModule)return x;if(x===null||typeof x!="object"&&typeof x!="function")return{default:x};var j=o(v);if(j&&j.has(x))return j.get(x);var y={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in x)if(S!=="default"&&Object.prototype.hasOwnProperty.call(x,S)){var T=w?Object.getOwnPropertyDescriptor(x,S):null;T&&(T.get||T.set)?Object.defineProperty(y,S,T):y[S]=x[S]}return y.default=x,j&&j.set(x,y),y}function c(){return c=Object.assign?Object.assign.bind():function(x){for(var v=1;v<arguments.length;v++){var j=arguments[v];for(var y in j)Object.prototype.hasOwnProperty.call(j,y)&&(x[y]=j[y])}return x},c.apply(this,arguments)}function l(x,v){if(x==null)return{};var j={},y=Object.keys(x),w,S;for(S=0;S<y.length;S++)w=y[S],!(v.indexOf(w)>=0)&&(j[w]=x[w]);return j}function d(x,v){var j=Object.keys(x);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(x);v&&(y=y.filter(function(w){return Object.getOwnPropertyDescriptor(x,w).enumerable})),j.push.apply(j,y)}return j}function u(x){for(var v=1;v<arguments.length;v++){var j=arguments[v]!=null?arguments[v]:{};v%2?d(Object(j),!0).forEach(function(y){p(x,y,j[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(j)):d(Object(j)).forEach(function(y){Object.defineProperty(x,y,Object.getOwnPropertyDescriptor(j,y))})}return x}function p(x,v,j){return v=h(v),v in x?Object.defineProperty(x,v,{value:j,enumerable:!0,configurable:!0,writable:!0}):x[v]=j,x}function h(x){var v=g(x,"string");return typeof v=="symbol"?v:String(v)}function g(x,v){if(typeof x!="object"||x===null)return x;var j=x[Symbol.toPrimitive];if(j!==void 0){var y=j.call(x,v);if(typeof y!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(x)}function f(x,v){x.prototype=Object.create(v.prototype),x.prototype.constructor=x,_(x,v)}function _(x,v){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(y,w){return y.__proto__=w,y},_(x,v)}var b=function(x){f(v,x);function v(){for(var y,w=arguments.length,S=new Array(w),T=0;T<w;T++)S[T]=arguments[T];return y=x.call.apply(x,[this].concat(S))||this,y.handleRefs={},y.lastHandleRect=null,y.slack=null,y}var j=v.prototype;return j.componentWillUnmount=function(){this.resetData()},j.resetData=function(){this.lastHandleRect=this.slack=null},j.runConstraints=function(w,S){var T=this.props,E=T.minConstraints,H=T.maxConstraints,R=T.lockAspectRatio;if(!E&&!H&&!R)return[w,S];if(R){var $=this.props.width/this.props.height,K=w-this.props.width,Z=S-this.props.height;Math.abs(K)>Math.abs(Z*$)?S=w/$:w=S*$}var U=w,te=S,oe=this.slack||[0,0],se=oe[0],L=oe[1];return w+=se,S+=L,E&&(w=Math.max(E[0],w),S=Math.max(E[1],S)),H&&(w=Math.min(H[0],w),S=Math.min(H[1],S)),this.slack=[se+(U-w),L+(te-S)],[w,S]},j.resizeHandler=function(w,S){var T=this;return function(E,H){var R=H.node,$=H.deltaX,K=H.deltaY;w==="onResizeStart"&&T.resetData();var Z=(T.props.axis==="both"||T.props.axis==="x")&&S!=="n"&&S!=="s",U=(T.props.axis==="both"||T.props.axis==="y")&&S!=="e"&&S!=="w";if(!(!Z&&!U)){var te=S[0],oe=S[S.length-1],se=R.getBoundingClientRect();if(T.lastHandleRect!=null){if(oe==="w"){var L=se.left-T.lastHandleRect.left;$+=L}if(te==="n"){var ee=se.top-T.lastHandleRect.top;K+=ee}}T.lastHandleRect=se,oe==="w"&&($=-$),te==="n"&&(K=-K);var ie=T.props.width+(Z?$/T.props.transformScale:0),He=T.props.height+(U?K/T.props.transformScale:0),Ot=T.runConstraints(ie,He);ie=Ot[0],He=Ot[1];var mn=ie!==T.props.width||He!==T.props.height,Hn=typeof T.props[w]=="function"?T.props[w]:null,me=w==="onResize"&&!mn;Hn&&!me&&(E.persist==null||E.persist(),Hn(E,{node:R,size:{width:ie,height:He},handle:S})),w==="onResizeStop"&&T.resetData()}}},j.renderResizeHandle=function(w,S){var T=this.props.handle;if(!T)return e.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+w,ref:S});if(typeof T=="function")return T(w,S);var E=typeof T.type=="string",H=u({ref:S},E?{}:{handleAxis:w});return e.cloneElement(T,H)},j.render=function(){var w=this,S=this.props,T=S.children,E=S.className,H=S.draggableOpts;S.width,S.height,S.handle,S.handleSize,S.lockAspectRatio,S.axis,S.minConstraints,S.maxConstraints,S.onResize,S.onResizeStop,S.onResizeStart;var R=S.resizeHandles;S.transformScale;var $=l(S,a);return(0,n.cloneElement)(T,u(u({},$),{},{className:(E?E+" ":"")+"react-resizable",children:[].concat(T.props.children,R.map(function(K){var Z,U=(Z=w.handleRefs[K])!=null?Z:w.handleRefs[K]=e.createRef();return e.createElement(s.DraggableCore,c({},H,{nodeRef:U,key:"resizableHandle-"+K,onStop:w.resizeHandler("onResizeStop",K),onStart:w.resizeHandler("onResizeStart",K),onDrag:w.resizeHandler("onResize",K)}),w.renderResizeHandle(K,U))}))}))},v}(e.Component);return $d.default=b,b.propTypes=r.resizableProps,b.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1},$d}var Bd={},t1;function c0e(){if(t1)return Bd;t1=1,Bd.__esModule=!0,Bd.default=void 0;var e=c(zm()),s=o(VC()),n=o(vE()),r=xE(),a=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function o(v){return v&&v.__esModule?v:{default:v}}function i(v){if(typeof WeakMap!="function")return null;var j=new WeakMap,y=new WeakMap;return(i=function(S){return S?y:j})(v)}function c(v,j){if(v&&v.__esModule)return v;if(v===null||typeof v!="object"&&typeof v!="function")return{default:v};var y=i(j);if(y&&y.has(v))return y.get(v);var w={},S=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var T in v)if(T!=="default"&&Object.prototype.hasOwnProperty.call(v,T)){var E=S?Object.getOwnPropertyDescriptor(v,T):null;E&&(E.get||E.set)?Object.defineProperty(w,T,E):w[T]=v[T]}return w.default=v,y&&y.set(v,w),w}function l(){return l=Object.assign?Object.assign.bind():function(v){for(var j=1;j<arguments.length;j++){var y=arguments[j];for(var w in y)Object.prototype.hasOwnProperty.call(y,w)&&(v[w]=y[w])}return v},l.apply(this,arguments)}function d(v,j){var y=Object.keys(v);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(v);j&&(w=w.filter(function(S){return Object.getOwnPropertyDescriptor(v,S).enumerable})),y.push.apply(y,w)}return y}function u(v){for(var j=1;j<arguments.length;j++){var y=arguments[j]!=null?arguments[j]:{};j%2?d(Object(y),!0).forEach(function(w){p(v,w,y[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(y)):d(Object(y)).forEach(function(w){Object.defineProperty(v,w,Object.getOwnPropertyDescriptor(y,w))})}return v}function p(v,j,y){return j=h(j),j in v?Object.defineProperty(v,j,{value:y,enumerable:!0,configurable:!0,writable:!0}):v[j]=y,v}function h(v){var j=g(v,"string");return typeof j=="symbol"?j:String(j)}function g(v,j){if(typeof v!="object"||v===null)return v;var y=v[Symbol.toPrimitive];if(y!==void 0){var w=y.call(v,j);if(typeof w!="object")return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return(j==="string"?String:Number)(v)}function f(v,j){if(v==null)return{};var y={},w=Object.keys(v),S,T;for(T=0;T<w.length;T++)S=w[T],!(j.indexOf(S)>=0)&&(y[S]=v[S]);return y}function _(v,j){v.prototype=Object.create(j.prototype),v.prototype.constructor=v,b(v,j)}function b(v,j){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(w,S){return w.__proto__=S,w},b(v,j)}var x=function(v){_(j,v);function j(){for(var w,S=arguments.length,T=new Array(S),E=0;E<S;E++)T[E]=arguments[E];return w=v.call.apply(v,[this].concat(T))||this,w.state={width:w.props.width,height:w.props.height,propsWidth:w.props.width,propsHeight:w.props.height},w.onResize=function(H,R){var $=R.size;w.props.onResize?(H.persist==null||H.persist(),w.setState($,function(){return w.props.onResize&&w.props.onResize(H,R)})):w.setState($)},w}j.getDerivedStateFromProps=function(S,T){return T.propsWidth!==S.width||T.propsHeight!==S.height?{width:S.width,height:S.height,propsWidth:S.width,propsHeight:S.height}:null};var y=j.prototype;return y.render=function(){var S=this.props,T=S.handle,E=S.handleSize;S.onResize;var H=S.onResizeStart,R=S.onResizeStop,$=S.draggableOpts,K=S.minConstraints,Z=S.maxConstraints,U=S.lockAspectRatio,te=S.axis;S.width,S.height;var oe=S.resizeHandles,se=S.style,L=S.transformScale,ee=f(S,a);return e.createElement(n.default,{axis:te,draggableOpts:$,handle:T,handleSize:E,height:this.state.height,lockAspectRatio:U,maxConstraints:Z,minConstraints:K,onResizeStart:H,onResize:this.onResize,onResizeStop:R,resizeHandles:oe,transformScale:L,width:this.state.width},e.createElement("div",l({},ee,{style:u(u({},se),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},j}(e.Component);return Bd.default=x,x.propTypes=u(u({},r.resizableProps),{},{children:s.default.element}),Bd}var s1;function l0e(){return s1||(s1=1,Ld.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")},Ld.exports.Resizable=vE().default,Ld.exports.ResizableBox=c0e().default),Ld.exports}var d0e=l0e();const n1={protectedBranchAlert:{title:"Protected Branch",message:"You're about to query a protected branch. Changes may impact production. Only proceed if you're sure."}},u0e="_container_yjwc0_1",h0e="_root_yjwc0_6",p0e="_actions_yjwc0_16",m0e="_run_action_yjwc0_21",g0e="_btn_yjwc0_29",f0e="_divider_yjwc0_33",_0e="_info_yjwc0_39",b0e="_info_item_yjwc0_44",x0e="_status_yjwc0_52",v0e="_status_icon_yjwc0_61",j0e="_connecting_yjwc0_65",y0e="_idle_yjwc0_69",w0e="_idleInTransaction_yjwc0_73",S0e="_failedTransaction_yjwc0_77",C0e="_disconnected_yjwc0_81",I0e="_modalFooter_yjwc0_85",k0e="_modalTitle_yjwc0_94",ft={container:u0e,root:h0e,actions:p0e,run_action:m0e,btn:g0e,divider:f0e,info:_0e,info_item:b0e,status:x0e,status_icon:v0e,connecting:j0e,idle:y0e,idleInTransaction:w0e,failedTransaction:S0e,disconnected:C0e,modalFooter:I0e,modalTitle:k0e},T0e={[rt.Connecting]:ft.connecting,[rt.Idle]:ft.idle,[rt.IdleInTransaction]:ft.idleInTransaction,[rt.FailedTransaction]:ft.failedTransaction,[rt.Disconnected]:ft.disconnected},P0e={[rt.Connecting]:"Connecting ...",[rt.Idle]:"Connected",[rt.IdleInTransaction]:"In transaction",[rt.FailedTransaction]:"Failed transaction: ROLLBACK required",[rt.Disconnected]:"Ready to connect"},N0e={[rt.Connecting]:"connect",[rt.Idle]:"check_circle_inverted",[rt.IdleInTransaction]:"data_transfer",[rt.FailedTransaction]:"warning",[rt.Disconnected]:"connect"},A0e=({isOpen:e,onRequestClose:s,onRunServerless:n,storeModalPreference:r})=>{const[a,o]=m.useState(!1);function i(c){a&&r({shouldNotShow:!0,expiresAt:Date.now()+1e3*60*60*24*7}),s(),n(c)}return t.jsx(It,{isOpen:e,onRequestClose:s,title:t.jsx("header",{className:ft.modalTitle,children:n1.protectedBranchAlert.title}),children:t.jsx(qe,{children:t.jsxs("section",{children:[n1.protectedBranchAlert.message,t.jsxs("footer",{className:ft.modalFooter,children:[t.jsx(Dx,{checked:a,onChange:()=>o(c=>!c),children:"Don't show me this again"}),t.jsx(A,{onClick:c=>i(c),children:"Run query"})]})]})})})},E0e=()=>{const{projectId:e}=F(),{branch:s}=Tt(),{state:{numberOfQueriesToBeRun:n,isQueryRunning:r,query:a,isDisabled:o,timeTravelError:i,result:c,branchHasEndpoints:l,connectionStatus:d},actions:u}=zn(),[p,h]=nn(gt.ProtectedAlertController,`${e}-${(s==null?void 0:s.id)||"default"}`,{shouldNotShow:!1,expiresAt:0}),{currentIndex:g}=nI(),{trackUiInteraction:f}=k(),[_,b]=m.useState(!1),x=m.useMemo(()=>{if(!c||!c.response||!Array.isArray(c.response))return"";const U=c.response[g];if(!U||!U.data||!U.data.rows)return"";const te=U.data.rows.length;return te?`${te} row${te!==1?"s":""}`:"No result"},[c,g]),v=m.useMemo(()=>{if(!c)return"";const U=c.duration;if(U!==void 0)return zj(U);if(!Array.isArray(c.response))return"";const te=c.response[g];if(!te)return"";const{duration:oe}=te;return oe?zj(oe):""},[c,g]),j=m.useCallback(U=>{u.runWithServerlessDriver({showHidden:U.shiftKey}),f("playground_run")},[u,f]),y=m.useCallback(U=>{u.runWithServerlessDriver({showHidden:U.shiftKey}),f("playground_run_in_txn")},[u,f]),w=m.useCallback(()=>{u.runWithServerlessDriver({overrideQuery:"ROLLBACK"}),f("playground_rollback")},[u,f]),S=m.useCallback(()=>{u.runWithServerlessDriver({overrideQuery:"COMMIT"}),f("playground_commit")},[u,f]),T=m.useCallback(U=>{u.runWithServerlessDriver({explain:!0,showHidden:U.shiftKey}),f("playground_explain")},[u,f]),E=m.useCallback(U=>{u.runWithServerlessDriver({explain:!0,analyze:!0,showHidden:U.shiftKey}),f("playground_analyze")},[u,f]),H=m.useCallback(()=>{u.cancelServerlessDriver(),f("playground_cancel")},[u,f]),R=m.useMemo(()=>s&&l?null:s?t.jsxs(t.Fragment,{children:["The selected branch does not have a compute endpoint."," ",t.jsx(M,{href:G(C.ProjectsItemBranchesItem,{projectId:e,branchId:s.id}),children:"Manage compute endpoints for this branch."})]}):t.jsx(t.Fragment,{children:"Please select a branch first."}),[s,l,e]),$=T0e[d],K=typeof n=="number"?` (${n||"no"} quer${n===1?"y":"ies"})`:"";let Z=P0e[d];return(d===rt.Idle||d===rt.IdleInTransaction)&&(Z+=K),t.jsxs("div",{className:ft.container,children:[t.jsx(A0e,{isOpen:_,storeModalPreference:h,onRequestClose:()=>{b(!1)},onRunServerless:j}),t.jsxs("div",{className:V(ft.status,$),children:[t.jsxs("span",{children:[t.jsx(q,{size:14,name:N0e[d],className:ft.status_icon}),Z]}),a.length>Hj&&t.jsxs("span",{children:[t.jsx(q,{size:14,name:"warning",className:ft.status_icon}),"This query will still run OK, but the last"," ",a.length-Hj," characters will be truncated from query history"]})]}),t.jsxs("div",{className:ft.root,children:[t.jsxs("div",{className:ft.actions,children:[l&&t.jsxs(t.Fragment,{children:[t.jsx(ne,{disabled:i===null,content:t.jsx("span",{children:i==null?void 0:i.message}),children:t.jsxs("div",{className:ft.run_action,children:[r&&t.jsx(A,{disabled:o,icon:"close",onClick:H,appearance:"danger",size:"s",children:"Cancel"}),!r&&d===rt.FailedTransaction&&t.jsx(A,{disabled:o,icon:"rollback",onClick:w,size:"s",children:"ROLLBACK"}),!r&&(d===rt.Idle||d===rt.Connecting||d===rt.Disconnected)&&t.jsx(A,{disabled:o||d===rt.Connecting||n===0,appearance:"primary",icon:"play_outline",onClick:U=>{const te=p.expiresAt>Date.now();if(p.shouldNotShow||!(s!=null&&s.protected)||te){j(U);return}b(!0)},size:"s",children:"Run"}),!r&&d===rt.IdleInTransaction&&t.jsx(A,{disabled:o||n===0,appearance:"secondary",icon:"play_outline",onClick:y,size:"s",children:"Run in transaction"})]})}),!r&&(d===rt.Idle||d===rt.Connecting)&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:ft.divider}),t.jsx(A,{disabled:o||d===rt.Connecting||n===0,onClick:T,appearance:"secondary",className:V(ft.btn),size:"s",children:"Explain"}),t.jsx(A,{disabled:o||d===rt.Connecting||n===0,onClick:E,appearance:"secondary",className:V(ft.btn),size:"s",children:"Analyze"})]}),!r&&d===rt.IdleInTransaction&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:ft.divider}),t.jsx(A,{disabled:o,onClick:S,icon:"check",appearance:"secondary",className:V(ft.btn),size:"s",children:"COMMIT"}),t.jsx(A,{disabled:o,onClick:w,icon:"rollback",appearance:"secondary",className:V(ft.btn),size:"s",children:"ROLLBACK"})]})]}),!l&&t.jsx("div",{className:ft.info_item,children:R})]}),t.jsx("div",{className:ft.info,children:r?t.jsx(on,{}):t.jsxs(t.Fragment,{children:[v&&t.jsx("div",{className:ft.info_item,children:v}),x&&t.jsx("div",{className:ft.info_item,children:x})]})})]})]})},O0e="_root_qfmdc_1",L0e="_success_qfmdc_27",$0e="_icon_qfmdc_31",R0e="_iconSuccess_qfmdc_39",B0e="_textArea_qfmdc_43",M0e="_actions_qfmdc_63",D0e="_inputArea_qfmdc_74",U0e="_generateTitle_qfmdc_84",Rr={root:O0e,success:L0e,icon:$0e,iconSuccess:R0e,textArea:B0e,actions:M0e,inputArea:D0e,generateTitle:U0e},r1=3,F0e=({ref:e,className:s,placeholder:n,pending:r,textareaRef:a,success:o,onSubmit:i,onCancel:c,onRequestClose:l})=>{const[d,u]=m.useState(""),[p,h]=m.useState(r1);return m.useEffect(()=>{if(o){if(p===-1){h(r1),l();return}setTimeout(()=>{h(g=>g-1)},1e3)}},[o,p,l]),t.jsxs("div",{ref:e,className:V(Rr.root,o&&Rr.success,s),children:[r?t.jsx(on,{}):o?t.jsx(q,{className:Rr.iconSuccess,name:"success",size:20}):t.jsx(q,{className:Rr.icon,name:"pgvector",size:20}),t.jsxs("div",{className:Rr.inputArea,children:[r&&t.jsx("div",{className:Rr.generateTitle,children:"Generating SQL..."}),o&&t.jsx("div",{className:Rr.generateTitle,children:"Successfully generated SQL based on your prompt!"}),t.jsx("textarea",{rows:Math.min(d.split(`
`).length,3),className:Rr.textArea,placeholder:n,ref:a,value:d,disabled:r,onChange:g=>u(g.target.value),onKeyDown:g=>{g.key==="Enter"&&(g.metaKey||g.ctrlKey)&&(g.preventDefault(),i(d))}})]}),r?t.jsx(A,{appearance:"secondary",size:"s",onClick:c,children:"Cancel"}):o?t.jsxs(A,{icon:"cross_small",appearance:"secondary",size:"s",onClick:l,children:[p,"s • ESC"]}):t.jsxs("div",{className:Rr.actions,children:[t.jsx(ta,{appearance:"default",disabled:d.trim()==="",iconName:"arrow_in_circle_right",iconSize:16,onClick:()=>{i(d)}}),t.jsx(ta,{appearance:"default",iconName:"cross_small",iconSize:16,onClick:l})]})]})},z0e="_aiPromptPopper_1qreg_1",q0e="_aiPromptOverlay_1qreg_9",H0e="_aiGenerateLink_1qreg_18",F_={aiPromptPopper:z0e,aiPromptOverlay:q0e,aiGenerateLink:H0e},V0e=m.lazy(()=>fr(()=>import("./index-DCachKiE.js"),__vite__mapDeps([32,1,2,5,6,7,4,8,9,10,11,12,13,33,34,16,17,18,19,20,14,15,21,22,23,24,25,26,27,28,35,30])).then(e=>({default:e.CodeEditorV2}))),W0e=({height:e,ref:s})=>{const{projectId:n,project:r}=F(),{trackUiInteraction:a}=k(),o=le("sql_editor_codemirror"),{state:{query:i,isDisabled:c,isQueryRunning:l,isTextToSqlPopupOpen:d,isTextToSqlPending:u},actions:{textToSql:p,textToSqlCancel:h,runWithServerlessDriver:g,cancelServerlessDriver:f,onChangeTextToSqlPopup:_,onChangeQuery:b,onChangeQuerySelection:x}}=zn(),v=ur(()=>{c||g()}),j=ur(()=>{l&&f()}),y=m.useMemo(()=>Q1(100,L=>{TR(n,L)}),[n]);m.useLayoutEffect(()=>{y(i)},[y,i]),m.useEffect(()=>()=>{var L;y.cancel(),s&&"current"in s&&s.current&&((L=s.current)==null||L.clearSelection())},[y,n,s]);const w=m.useCallback(()=>{var ie,He;const L=!window.document.activeElement||window.document.activeElement.tagName==="BODY",ee=!((ie=window.document.getSelection())!=null&&ie.toString());L&&ee&&s&&"current"in s&&s.current&&((He=s.current)==null||He.focus())},[s]);m.useEffect(()=>(window.addEventListener("click",w),()=>{window.removeEventListener("click",w)}),[w]);const S=m.useRef(null);m.useLayoutEffect(()=>{d&&S.current&&S.current.focus()},[d]);const[T,E]=m.useState(!1),H=m.useCallback(async L=>{a("playground_text_to_sql_modal_submitted");const{result:ee}=await p(L);ee==="success"&&E(!0)},[p,a]);m.useEffect(()=>{d||E(!1)},[d,T]);const R=m.useCallback(()=>{a("playground_text_to_sql_run_cancel_clicked"),h()},[h,a]),$=m.useCallback(()=>{d&&(_(!1),T||a("playground_text_to_sql_modal_cancel_clicked"))},[d,_,T,a]);m.useEffect(()=>{const L=ee=>{(ee.metaKey||ee.ctrlKey)&&ee.key==="M"&&(ee.preventDefault(),_(!d),a("playground_text_to_sql_keyboard_toggle",{action:d?"close":"open"})),ee.key==="Escape"&&$()};return document.addEventListener("keydown",L),()=>{document.removeEventListener("keydown",L)}},[_,d,a,$]);const K=le("text_to_sql"),Z=ur(()=>{K&&(_(!d),a("playground_text_to_sql_keyboard_toggle",{action:d?"close":"open"}))}),U=m.useCallback(L=>{L.preventDefault(),_(!0),a("playground_text_to_sql_button_clicked")},[_,a]),te=m.useMemo(()=>{let L=(r==null?void 0:r.pg_version)??15;return L<14&&(L=14),L>16&&(L=16),L},[r]),oe=m.useMemo(()=>({"Mod-Enter":v,Esc:j,"Mod-Shift-m":Z}),[v,j,Z]),se=ur(()=>{s&&"current"in s&&s.current&&x(s.current.getSelectedText())});return t.jsxs(t.Fragment,{children:[t.jsx(I$,{className:F_.aiPromptPopper,hidden:!d,children:t.jsx(F0e,{pending:u,success:T,textareaRef:S,onSubmit:H,onCancel:R,onRequestClose:$,placeholder:"Describe the type of SQL query you are looking to run..."})}),o?t.jsx(V0e,{ref:s,mode:"sql",value:i,onChange:b,onSelectionChange:se,keyBindings:oe,autoFocus:!0,height:e}):t.jsx(Bx,{ref:s,name:"query_editor",mode:`pgsql${te}`,width:"100%",height:e||"100%",value:i,onChange:b,onSelectionChange:se,onSubmit:v,onEscape:j,onAI:Z,style:{height:e||"100%",width:"100%"},setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,tabSize:2,showLineNumbers:!0,showPrintMargin:!1,fontSize:14},focus:!0}),K&&i===""&&t.jsxs("div",{className:F_.aiPromptOverlay,children:["Type SQL or"," ",t.jsx(ne,{content:`${cm.isMacOs?"⌘":"Ctrl"}+Shift+M`,children:t.jsx("button",{type:"button",className:F_.aiGenerateLink,onClick:U,children:"Generate with AI"})}),"..."]})]})},a1=100,jE=({isOpen:e,proposedName:s,onClose:n,onSaveQuery:r})=>{var d,u;const a=Ts({defaultValues:{name:s}}),{handleSubmit:o,register:i,formState:c}=a,{trackUiInteraction:l}=k();return t.jsx(oa,{isOpen:e,onRequestClose:n,title:"Save query",children:t.jsx(es,{...a,children:t.jsxs(Ht,{id:"query-save-form",onSubmit:o(p=>(l("playground_save"),r(p.name))),children:[t.jsx(ia,{children:t.jsx(B,{id:"name",error:(u=(d=c.errors)==null?void 0:d.name)==null?void 0:u.message,inline:!0,label:"Name",children:t.jsx(ce,{autoFocus:!0,...i("name",{required:{value:!0,message:"This field is required"},maxLength:{value:a1,message:`Query name should be less than ${a1} characters`}})})})}),t.jsxs(Ee,{children:[t.jsx(so,{}),t.jsx(Ie,{children:"Save"})]})]})})})},G0e=()=>{const[e,s]=m.useState(!1),{actions:{saveQuery:n},state:{selectedQueryName:r,selectedQueryId:a,queryChanged:o,queriesHistory:i,query:c}}=zn(),l=m.useCallback(()=>s(!1),[]),d=m.useCallback(()=>{r?n(a,r):s(!0)},[a,r,n]),u=m.useCallback(h=>n(null,h).then(l).catch(Y),[n,l]),p=m.useMemo(()=>{const h=((i==null?void 0:i.slice(0,10))||[]).find(g=>g.query===c);return r||(h==null?void 0:h.name)||"New Query"},[i,c,r]);return t.jsxs(t.Fragment,{children:[t.jsx(A,{disabled:!!(r&&!o),appearance:"secondary",size:"s",onClick:d,children:"Save"}),t.jsx(jE,{isOpen:e,proposedName:p,onClose:l,onSaveQuery:u},p)]})},K0e="_root_11gck_1",Q0e="_title_11gck_11",Y0e="_main_11gck_24",J0e="_opts_11gck_40",Z0e="_bigSelect_11gck_50",X0e="_smallSelect_11gck_56",eSe="_notSaved_11gck_62",tSe="_datePicker_11gck_66",sSe="_divider_11gck_73",Br={root:K0e,title:Q0e,main:Y0e,opts:J0e,bigSelect:Z0e,smallSelect:X0e,notSaved:eSe,datePicker:tSe,divider:sSe},nSe=()=>{const{state:{selectedQueryName:e,database:s,queryChanged:n,endpointId:r,isTimeTravelMode:a,timeTravelTimestamp:o,timeTravelError:i,isTextToSqlPopupOpen:c},actions:{onChangeDatabase:l,onChangeEndpointId:d,onChangeIsTimeTravelMode:u,onChangeTimeTravelTimestamp:p,onChangeTextToSqlPopup:h}}=zn(),{project:g,projectId:f}=F(),{trackUiInteraction:_}=k(),b=m.useCallback(()=>{u(!a),_(a?"playground_time_travel_mode_off":"playground_time_travel_mode_on")},[a,u,_]),x=m.useCallback(E=>{const H=typeof E=="string"?vC(Da(E),Da(ke.Full),!0):E;p(H.toDate())},[p]),v=pA(g),{selectOptions:j}=un(),[y,w]=El(),S=m.useMemo(()=>y?j.find(E=>E.value===y):void 0,[j,y]);m.useEffect(()=>{S&&S!==s&&l(S)},[s,l,S]);const T=le("text_to_sql");return t.jsxs("div",{className:Br.root,children:[t.jsxs("div",{className:Br.main,children:[t.jsxs("div",{className:Br.title,children:[t.jsx("div",{children:e||"Untitled"}),e&&n&&t.jsx("span",{className:Br.notSaved,children:"*"})]}),t.jsx(G0e,{})]}),t.jsxs("div",{className:Br.opts,children:[t.jsx(Av,{id:"endpoint",size:"s",disabled:a,endpointId:r,projectId:f,onChange:E=>{E&&d(E.id)},containerClassName:Br.bigSelect,popoverMaxWidth:350}),t.jsx(Ym,{id:"database",size:"s",value:S,canCreateDatabase:!1,onChange:E=>{w((E==null?void 0:E.value)??void 0)},containerClassName:Br.smallSelect,popoverMaxWidth:300}),t.jsx(Yk,{placement:"bottom right",trigger:t.jsx(A,{appearance:i===null?"secondary":"danger",icon:"time","aria-label":"time travel menu",onClick:()=>{h(!1)}}),content:t.jsxs(t.Fragment,{children:[t.jsx(_s,{isSelected:a,onChange:b,children:"Time Travel Enabled"}),t.jsx(B,{"aria-label":"Time Travel Timestamp",className:Br.datePicker,error:i==null?void 0:i.message,children:t.jsx(jC,{value:o,size:"s",disabled:!a,showTimezone:!0,onChange:x,isValidDate:v,dateFormat:Da(ke.Date),timeFormat:Da(ke.TimeFull)})})]})}),T&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:Br.divider}),t.jsx(ne,{content:t.jsxs("span",{children:["Generate SQL",t.jsx("br",{}),cm.isMacOs?"⌘":"Ctrl","+Shift+M"]}),children:t.jsx(A,{appearance:"secondary",active:c,icon:"pgvector",onClick:()=>{_("playground_text_to_sql_button_clicked"),h(!c)}})})]})]})]})},o1={alertText:"This account has reached its compute limit for this month. Upgrade to continue using SQL editor.",upgradeButton:"Upgrade plan"},rSe="_alertWrapper_1gwai_1",aSe={alertWrapper:rSe};function oSe(e){switch(e){case"compute_time":return dt.ComputeSizeLimitReached;case"data_transfer":return dt.Default}}const iSe=({overLimitMetric:e})=>{const[s,n]=m.useState(!1);return t.jsxs(t.Fragment,{children:[t.jsx(Pt,{type:oSe(e),isOpen:s,onRequestClose:()=>{n(!1)}}),t.jsx("div",{className:aSe.alertWrapper,children:t.jsx(X,{appearance:"warning",action:t.jsx(M,{noWrap:!0,onClick:()=>{n(!0)},children:o1.upgradeButton}),children:o1.alertText})})]})},cSe="_history_113ev_1",lSe="_historyRecord_113ev_8",dSe="_selected_113ev_18",uSe="_recordName_113ev_25",hSe="_recordNameGenerated_113ev_34",pSe="_recordTooltipContent_113ev_47",mSe="_recordTime_113ev_58",gSe="_placeholder_113ev_72",Wr={history:cSe,historyRecord:lSe,selected:dSe,recordName:uSe,recordNameGenerated:hSe,recordTooltipContent:pSe,recordTime:mSe,placeholder:gSe},fSe=({disabled:e})=>{const{state:{queriesHistory:s},actions:{onChangeQuery:n,selectQuery:r}}=zn(),{trackUiInteraction:a}=k(),o=le("query_name_generation"),[i,c]=m.useState(null),l=m.useCallback(async d=>{await r(null)&&(c(d.id??0),n(d.query??""))},[n,r]);return t.jsx(t.Fragment,{children:(s==null?void 0:s.length)===0?t.jsx("div",{className:Wr.placeholder,children:t.jsx(Gu,{iconName:"empty_history",size:"s",iconSize:48,title:"Your history is empty",muted:e})}):s==null?void 0:s.map(d=>t.jsx(ne,{content:t.jsx("div",{className:Wr.recordTooltipContent,children:d.query}),placement:"right",disabled:!o||e,children:t.jsxs("div",{role:"button",tabIndex:0,className:V(Wr.historyRecord,{[Wr.selected]:d.id===i}),"aria-disabled":e,onClick:()=>{e||(l(d),a("playground_history_select"))},onKeyDown:u=>{e||u.key==="Enter"&&(l(d),a("playground_history_select",{keyboard:!0}))},children:[o?t.jsx("div",{className:Wr.recordNameGenerated,children:d.name||d.query}):t.jsx("div",{className:Wr.recordName,children:d.query}),t.jsx("div",{className:Wr.recordTime,children:mt(d.created_at).format("MMM D, YYYY - h:mma")})]})},d.id))})},yE=m.memo(({disabled:e})=>{const{state:{queriesHistory:s}}=zn();return t.jsx("div",{className:Wr.history,children:s?t.jsx(fSe,{disabled:e}):Fa(3,n=>t.jsxs("div",{role:"button",className:Wr.historyRecord,children:[t.jsx(D,{style:{width:200,height:20}}),t.jsx("div",{style:{height:10}}),t.jsx(D,{style:{width:100,height:20}})]},n))})});yE.displayName="QueryHistory";const _Se="_root_xj6ja_1",bSe="_item_xj6ja_6",xSe="_active_xj6ja_18",vSe="_itemName_xj6ja_30",jSe="_placeholder_xj6ja_35",Ic={root:_Se,item:bSe,active:xSe,delete:"_delete_xj6ja_26",itemName:vSe,placeholder:jSe},wE=m.memo(({disabled:e})=>{const{state:{queriesSaved:s,selectedQueryName:n},actions:{selectQuery:r,deleteSavedQuery:a,renameQuery:o}}=zn(),{trackUiInteraction:i}=k(),c=m.useCallback(p=>{a(p),i("playground_saved_delete")},[a,i]),[l,d]=m.useState(),u=m.useCallback(p=>o((l==null?void 0:l.id)??0,p).then(()=>d(void 0)).catch(Y),[o,l]);return t.jsxs("div",{className:Ic.root,children:[t.jsx(jE,{isOpen:!!l,onClose:()=>d(void 0),onSaveQuery:u,proposedName:(l==null?void 0:l.name)??""},l==null?void 0:l.id),(s==null?void 0:s.length)===0?t.jsx("div",{className:Ic.placeholder,children:t.jsx(Gu,{iconName:"empty_saved",size:"s",iconSize:53,title:"You have no saved queries now"})}):s==null?void 0:s.map(p=>t.jsxs("div",{role:"button",onKeyPress:h=>{h.key==="Enter"&&r(p.name??"")},tabIndex:0,className:V({[Ic.item]:!0,[Ic.active]:p.name===n}),"aria-disabled":e,onClick:()=>{e||r(p.name??"")},children:[t.jsx("span",{className:Ic.itemName,title:p.name,children:p.name}),!e&&t.jsx("span",{children:t.jsxs(Sx,{triggerElement:({onClick:h,ref:g})=>t.jsx(q,{ref:g,onClick:h,name:"actions",size:16}),children:[t.jsx(Wa,{as:"button",onClick:()=>d(p),children:"Rename"}),t.jsx(Wa,{as:"button",className:Ic.delete,onClick:()=>c(p.id??0),children:"Delete"})]})})]},p.id))]})});wE.displayName="QueriesSaved";const ySe="_root_ym4k9_1",wSe="_header_ym4k9_11",SSe="_newQuery_ym4k9_15",CSe="_actions_ym4k9_19",ISe="_body_ym4k9_25",Md={root:ySe,header:wSe,newQuery:SSe,actions:CSe,body:ISe},kSe=()=>new URL(window.location.href).searchParams.get("query")?"saved":"history",SE=m.memo(({disabled:e})=>{const[s,n]=m.useState(kSe),{trackUiInteraction:r}=k(),{actions:{onChangeQuery:a,selectQuery:o}}=zn(),i=m.useCallback(()=>{a(""),o(null)},[a,o]);return t.jsxs("div",{className:Md.root,children:[t.jsx("div",{className:Md.header,children:t.jsx(Bl,{title:"SQL Editor",noBreadcrumbs:!0,actions:t.jsx("div",{className:Md.newQuery,children:t.jsx(A,{wide:!0,appearance:"secondary",icon:"add",disabled:e,onClick:i,size:"s","aria-label":"New Query"})})})}),t.jsx("div",{className:Md.actions,children:t.jsxs(Fu,{children:[t.jsx(gr,{active:s==="saved",disabled:e,onClick:()=>{n("saved"),r("playground_tab_saved")},children:"Saved"}),t.jsx(gr,{active:s==="history",disabled:e,onClick:()=>{n("history"),r("playground_tab_history")},children:"History"})]})}),t.jsxs("div",{className:Md.body,children:[s==="saved"&&t.jsx(wE,{disabled:e}),s==="history"&&t.jsx(yE,{disabled:e})]})]})});SE.displayName="QuerySidebar";const TSe={timeTravelMode:e=>`You are viewing data as it existed on ${xe(e,ke.Full)}`},PSe=()=>{const{state:{isTimeTravelMode:e,timeTravelTimestamp:s}}=zn();return e?t.jsx(Wk,{"data-qa":"time-travel-banner",appearance:"blue",icon:"info_italic",description:TSe.timeTravelMode(s),actions:[]}):null},Ka={branchWarmup:{title:"Warming up",description:"This table's branch is being unarchived, during which query and modification response times may be slow."},branchArchived:{title:"Archived branch",description:"This branch is archived. Querying will unarchive it.",descriptionSlow:"This branch is archived. Querying will unarchive it, during which query response times may be slow."},branchProtected:{title:"Protected branch",description:"This branch is protected. Direct changes can affect production data. Proceed with caution."}},NSe="_root_3jzpz_1",ASe="_sidebar_3jzpz_10",ESe="_main_3jzpz_19",OSe="_alert_3jzpz_27",LSe="_handle_3jzpz_33",$Se="_partEditor_3jzpz_43",RSe="_partResult_3jzpz_48",BSe="_serverlessDriver_3jzpz_55",MSe="_editor_3jzpz_59",DSe="_protectedAlert_3jzpz_64",Nn={root:NSe,sidebar:ASe,main:ESe,alert:OSe,handle:LSe,partEditor:$Se,partResult:RSe,serverlessDriver:BSe,editor:MSe,protectedAlert:DSe},USe=({branch:e})=>!e||!EC(e)?null:t.jsx(Qx,{title:Ka.branchWarmup.title,className:Nn.alert,children:Ka.branchWarmup.description}),FSe=({branch:e})=>!e||e.current_state!=="archived"?null:t.jsx(Qx,{title:Ka.branchArchived.title,className:Nn.alert,children:Wu(e)?Ka.branchArchived.descriptionSlow:Ka.branchArchived.description}),zSe=({branch:e})=>{const[s,n]=nn(gt.ProtectedAlertController,e.id,{shouldNotShow:!1,expiresAt:0});m.useEffect(()=>{s.expiresAt<Date.now()&&n({shouldNotShow:!1,expiresAt:0})},[s.expiresAt,n]);const r=s.expiresAt>=Date.now()&&s.shouldNotShow;return!e.protected||r?null:t.jsxs("div",{className:Nn.protectedAlert,title:Ka.branchProtected.title,children:[t.jsx(Qx,{type:"warn",title:Ka.branchProtected.title,children:Ka.branchProtected.description}),t.jsx(A,{appearance:"clear",onClick:()=>{n({shouldNotShow:!0,expiresAt:Date.now()+1e3*60*60*24})},"aria-label":"Close",children:t.jsx(q,{name:"close",size:16})})]})},kc=8,i1=62,qSe=()=>{var j;const{branch:e}=Tt(),{state:{result:s,isQueryRunning:n,ipBlocked:r,isDisabled:a,isQueryErrorFixPending:o,overLimitMetric:i},editorRef:c,actions:l}=zn(),[d,u]=m.useState(0),[p,h]=m.useState(0),[g,f]=m.useState([800,800]),_=m.useRef(null),b=(y,{size:w})=>{h(w.height)},x=m.useMemo(()=>k$(300,()=>{_.current&&f([_.current.offsetWidth-200,_.current.offsetHeight-200])}),[]);m.useEffect(()=>{_.current&&(u(Math.floor((_.current.offsetWidth+kc)/2)),h(Math.floor((_.current.offsetHeight+kc)/2.75)),f([_.current.offsetWidth-200,_.current.offsetHeight-200]))},[]),m.useEffect(()=>(window.addEventListener("resize",x),()=>{window.removeEventListener("resize",x)}),[x]);let v={height:`calc(100% - ${p}px)`,width:"100%"};return _.current&&(v={height:`${((j=_.current)==null?void 0:j.offsetHeight)-p-i1+kc/2}px`,width:"100%"}),t.jsxs("div",{className:Nn.root,ref:_,children:[r&&t.jsx(Rv,{}),t.jsx("div",{className:Nn.sidebar,children:t.jsx(SE,{})}),t.jsxs("div",{className:Nn.main,children:[t.jsx(nSe,{}),e&&t.jsx(zSe,{branch:e}),t.jsx(USe,{branch:e}),t.jsx(FSe,{branch:e}),p&&d?t.jsx(d0e.Resizable,{height:p,width:d,axis:"y",onResize:b,minConstraints:[200,200],maxConstraints:g,handle:t.jsx("div",{className:Nn.handle,style:{minWidth:`${kc}px`,minHeight:`${kc}px`}}),children:t.jsxs("div",{className:Nn.partEditor,style:{height:`${p}px`,width:"100%"},children:[t.jsx("div",{className:Nn.editor,children:t.jsx(W0e,{ref:c,height:`${p-kc/2-i1}px`})}),t.jsx(E0e,{})]})}):t.jsx("div",{}),t.jsx("div",{className:V(Nn.partResult,Nn.serverlessDriver),style:v,children:i?t.jsx(iSe,{overLimitMetric:i}):t.jsxs(t.Fragment,{children:[s!=null&&t.jsx(PSe,{}),t.jsx(EA,{result:s,isQueryRunning:n,queryRunError:{fixError:l.queryFixError,fixErrorCancel:l.queryFixErrorCancel,isFixDisabled:a,isFixPending:o}})]})})]})]})},HSe=e=>{const{state:{credentials:s},actions:{onChangeCredentials:n}}=zn(),{selectOptions:r,isLoading:a}=Ai(),o=Ts({mode:"onChange",defaultValues:{user:s==null?void 0:s.user,password:""}}),i=d=>{n(d),e.onSubmit()},c=()=>{n(),e.onSubmit()},l=d=>{if(!d.user||!d.user.name){c();return}i(d)};return t.jsxs(Ht,{className:"QueryRoleForm",onSubmit:o.handleSubmit(l),actions:t.jsxs(t.Fragment,{children:[t.jsx(A,{appearance:"secondary",size:"l",onClick:c,children:"Use default"}),t.jsx(A,{type:"submit",size:"l",children:"Ok"})]}),children:[t.jsx(B,{id:"user_",children:t.jsx(ye,{name:"user",control:o.control,render:({field:d})=>t.jsx(na,{...d,value:d.value?r.find(u=>u.value===d.value.name):void 0,onChange:u=>{if(!u){d.onChange(void 0);return}d.onChange(r.find(p=>p.value===u.value))},loading:a,options:r})})}),t.jsx(B,{id:"password",children:t.jsx(ce,{placeholder:"Password",type:"password",...o.register("password")})})]})},CE=m.memo(()=>{const[e,s]=m.useState(!1);return t.jsxs(t.Fragment,{children:[t.jsx(It,{isOpen:e,onRequestClose:()=>s(!1),title:"Set role",children:t.jsx(qe,{children:t.jsx(HSe,{onSubmit:()=>s(!1)})})}),t.jsx("div",{className:JS.root,children:t.jsxs("div",{className:JS.body,children:[null,t.jsx(qSe,{})]})})]})});CE.displayName="QueryLayout";const IE=m.memo(()=>{const{isLoading:e,projectId:s}=F();return e?t.jsx(Se,{}):t.jsx(PR,{children:t.jsxs(oI,{children:[t.jsx(CE,{}),t.jsx(Rv,{})]})},s)});IE.displayName="Query";const VSe="_root_1u3cy_1",WSe={root:VSe},GSe=()=>t.jsxs("div",{className:WSe.root,children:[t.jsx(UN,{headingId:"github"}),t.jsx(VN,{headingId:"vercel"})]}),Vt={pageHeader:"Personal information",firstNameLabel:"First name",lastNameLabel:"Last name",nameFormSubmitButton:"Save",nameFormSubmitToast:"User data was successfully updated!",emailLabel:"Email",changeEmailLabel:"Change email",socialAccountsHeader:"Sign-in methods",unlinkProviderConfirmationText:e=>`Are you sure you want to unlink ${e} from your account?`,unlinkProviderConfirmationTitle:"Unlink social account",unlinkProviderConfirmationOk:"Yes, proceed",unlinkProviderSuccessToast:e=>`Successfully unlinked ${e} from your account`},KSe="_nameFields_nxw1d_1",QSe="_emailLabelWrapper_nxw1d_10",YSe="_providersTitle_nxw1d_15",JSe="_providerCard_nxw1d_19",ZSe="_providers_nxw1d_15",XSe="_providerText_nxw1d_37",e1e="_formBody_nxw1d_41",Ta={nameFields:KSe,emailLabelWrapper:QSe,providersTitle:YSe,providerCard:JSe,providers:ZSe,providerText:XSe,formBody:e1e},t1e=()=>{var o,i,c;const{data:e}=bt(),s=Ae({mode:"onChange",defaultValues:{id:e==null?void 0:e.id,first_name:(e==null?void 0:e.firstName)??"",last_name:(e==null?void 0:e.lastName)??"",email:e==null?void 0:e.email}}),{formState:n,register:r}=s,a=m.useCallback(l=>W.updateUser(l).then(()=>{s.reset(l),ze(t.jsx(tt,{children:Vt.nameFormSubmitToast}))}).catch(Y),[s]);return t.jsx(De,{id:"profile",children:t.jsx(es,{...s,children:t.jsx(Ht,{onSubmit:s.handleSubmit(a),children:t.jsxs($e,{children:[t.jsx(Te,{children:Vt.pageHeader}),t.jsx("div",{children:t.jsxs("div",{className:Ta.nameFields,children:[t.jsx(B,{error:(o=n.errors.first_name)==null?void 0:o.message,label:Vt.firstNameLabel,children:t.jsx(ce,{...r("first_name",{required:{value:!0,message:"This field is required"}})})}),t.jsx(B,{error:(i=n.errors.last_name)==null?void 0:i.message,label:Vt.lastNameLabel,children:t.jsx(ce,{...r("last_name",{required:{value:!0,message:"This field is required"}})})})]})}),t.jsx("div",{children:t.jsxs(B,{error:(c=n.errors.email)==null?void 0:c.message,children:[t.jsx(Bm,{children:Vt.emailLabel}),t.jsx(ce,{...r("email",{required:{value:!0,message:"This field is required"}}),disabled:!0})]})}),t.jsx(Ns,{children:t.jsx(A,{type:"submit",disabled:n.isSubmitting||!n.isDirty,children:Vt.nameFormSubmitButton})})]})})})})},Qr={changeEmailInstructions:"Enter your new email address below. We'll send a verification link to this address.",changeEmailWarning:e=>`Important: Changing your email will unlink your account from ${e}. You can only use this new email to sign in going forward.`,changeEmailToast:"Check your email inbox to confirm the email change!",changeEmailPasswordInstructions:"You need to set a password for your new email address.",newEmailLabel:"New email",newEmailConfirmationLabel:"Confirm new email address",newEmailMatchingError:"Email confirmation should match",modalTitle:e=>e===1?"Set email":"Set password",changeEmailSubmit:e=>e?"Submit":"Next"},s1e="_text_f98al_1",n1e="_formBody_f98al_8",c1={text:s1e,formBody:n1e},_u={newPasswordLabel:"New password",newPasswordConfirmationLabel:"Confirm new password",newPasswordMatchingError:"Password confirmation should match",modalTitle:"Set password",changePasswordInstructions:"You need to set a password before unlinking your social provider."},r1e="_formBody_ku1q6_1",a1e={formBody:r1e},kE=({form:e,onSubmit:s,infoMessage:n})=>{var a,o;const r=e.watch("new_password");return t.jsxs(Xt,{providerProps:e,onSubmit:s,children:[t.jsxs(ia,{className:a1e.formBody,children:[t.jsx(P,{children:n}),t.jsx(B,{id:"new_password",label:_u.newPasswordLabel,error:(a=e.formState.errors.new_password)==null?void 0:a.message,children:t.jsx(eu,{name:"new_password",autoComplete:"new-password",registerProps:{deps:"password_confirmation"},applyConstraints:!0,tooltipPlacement:"auto",autoFocus:!0})}),t.jsx(B,{id:"new_password_confirmation",label:_u.newPasswordConfirmationLabel,error:(o=e.formState.errors.new_password_confirmation)==null?void 0:o.message,children:t.jsx(eu,{name:"new_password_confirmation",autoComplete:"new-password",registerProps:{validate:i=>i===r||_u.newPasswordMatchingError}})})]}),t.jsxs(Ee,{children:[t.jsx(so,{}),t.jsx(Ie,{})]})]})},o1e=e=>{const{id:s}=Ru(T$),n=Ae({defaultValues:{id:s}}),r=a=>W.updateUser(a).then(()=>{var o;(o=e.onSuccess)==null||o.call(e)}).catch(Y);return t.jsx(t.Fragment,{children:t.jsx(oa,{...e,isOpen:!0,title:_u.modalTitle,children:t.jsx(kE,{onSubmit:r,form:n,infoMessage:_u.changePasswordInstructions})})})},i1e=({form:e,onSubmit:s,isFinal:n,userAuthAccounts:r})=>{var i,c;const a=e.watch("email"),o=new Intl.ListFormat().format(r.filter(l=>l!=="keycloak").map(l=>Z9[l]));return t.jsx(es,{...e,children:t.jsxs(Ht,{onSubmit:e.handleSubmit(s),children:[t.jsxs(ia,{className:c1.formBody,children:[t.jsxs("div",{className:c1.text,children:[t.jsx(P,{children:Qr.changeEmailInstructions}),o.length>0&&t.jsx(X,{children:Qr.changeEmailWarning(o)})]}),t.jsx(B,{label:Qr.newEmailLabel,error:(i=e.formState.errors.email)==null?void 0:i.message,children:t.jsx(ce,{autoFocus:!0,autoComplete:"email",...e.register("email",{required:{value:!0,message:"This field is required"},deps:"email_confirmation"}),"data-qa":"new_email_change"})}),t.jsx(B,{label:Qr.newEmailConfirmationLabel,error:(c=e.formState.errors.email_confirmation)==null?void 0:c.message,children:t.jsx(ce,{autoComplete:"email",...e.register("email_confirmation",{validate:l=>l===a||Qr.newEmailMatchingError}),"data-qa":"new_email_change_confirm"})})]}),t.jsxs(Ee,{children:[t.jsx(so,{}),t.jsx(Ie,{children:Qr.changeEmailSubmit(n)})]})]})})},c1e=e=>{const{data:s}=bt(),n=Ae({defaultValues:{id:s==null?void 0:s.id}}),r=Ae({defaultValues:{id:s==null?void 0:s.id}}),[a,o]=m.useState(1),i=e.userHasPassword?1:2,c=async()=>Promise.resolve(o(d=>d+1)),l=()=>{const d={...n.getValues(),...r.getValues()};return W.updateUser({id:d.id,email:d.email,new_password:d.new_password}).then(()=>{ze(t.jsx(tt,{children:Qr.changeEmailToast})),e.onSuccess()}).catch(Y)};return t.jsx(t.Fragment,{children:t.jsxs(oa,{...e,isOpen:!0,title:Qr.modalTitle(a),children:[a===1&&t.jsx(i1e,{onSubmit:i>1?c:l,isFinal:i===1,form:n,userAuthAccounts:e.userAuthAccounts}),a===2&&t.jsx(kE,{onSubmit:l,form:r,infoMessage:Qr.changeEmailPasswordInstructions})]})})},l1e=({isInitialized:e,userHasPassword:s,userLinkedAccounts:n,invalidate:r})=>{var y,w;const{trackUiInteraction:a}=k(),{data:o,isLoading:i,invalidate:c}=bt(),l=Ae({defaultValues:{id:o==null?void 0:o.id,first_name:(o==null?void 0:o.firstName)??"",last_name:(o==null?void 0:o.lastName)??"",email:o==null?void 0:o.email}}),{formState:d,register:u}=l,p=m.useCallback(S=>W.updateUser({id:S.id,first_name:S.first_name,last_name:S.last_name}).then(()=>{c(),l.reset(S),ze(t.jsx(tt,{children:Vt.nameFormSubmitToast}))}).catch(Y),[l,c]),h=m.useMemo(()=>n??[],[n]),g=m.useCallback(S=>{W.detachSocialLink({provider:S.provider}).then(()=>{r(),ze(t.jsx(tt,{children:Vt.unlinkProviderSuccessToast(S.provider_display_name)}))},Y)},[r]),f=it(st.ChangePassword,!1),[_,b]=m.useState(),{confirm:x}=Ye(),v=m.useCallback(S=>{x({text:Vt.unlinkProviderConfirmationText(S.provider_display_name),header:Vt.unlinkProviderConfirmationTitle,confirmButtonText:Vt.unlinkProviderConfirmationOk}).then(T=>{if(!T){a("user_profile_detach_social_link_dismissed");return}a("user_profile_detach_social_link_confirmed"),s||h.length>1?g(S):(b(S),f.openModal())})},[x,g,s,h.length,f,a]),j=it(st.ChangeEmail);return i?t.jsx(Se,{}):t.jsxs(t.Fragment,{children:[j.isModalOpen&&t.jsx(c1e,{onRequestClose:()=>{a("user_profile_change_email_modal_dismissed"),j.closeModal()},onSuccess:()=>{a("user_profile_change_email_modal_confirmed"),j.closeModal()},userHasPassword:s,userAuthAccounts:h.map(({provider:S})=>S)??[]}),f.isModalOpen&&t.jsx(o1e,{onRequestClose:()=>{a("user_profile_password_modal_dismissed"),f.closeModal()},onSuccess:()=>{a("user_profile_password_modal_confirmed"),f.closeModal(),g(_)}}),t.jsxs(De,{id:"profile",children:[t.jsxs($e,{children:[t.jsx(Te,{children:Vt.pageHeader}),t.jsxs(Xt,{providerProps:l,onSubmit:p,formBodyClassName:Ta.formBody,children:[t.jsxs("div",{className:Ta.nameFields,children:[t.jsx(B,{error:(y=d.errors.first_name)==null?void 0:y.message,label:Vt.firstNameLabel,children:t.jsx(ce,{...u("first_name",{required:{value:!0,message:"This field is required"}})})}),t.jsx(B,{error:(w=d.errors.last_name)==null?void 0:w.message,label:Vt.lastNameLabel,children:t.jsx(ce,{...u("last_name",{required:{value:!0,message:"This field is required"}})})})]}),t.jsx("div",{children:t.jsx(A,{type:"submit",disabled:!e||d.isSubmitting||!d.isDirty,"data-qa":"save_name",children:Vt.nameFormSubmitButton})})]})]}),t.jsx($e,{children:t.jsxs(B,{"aria-label":Vt.emailLabel,children:[t.jsxs("div",{className:Ta.emailLabelWrapper,children:[t.jsx(Bm,{children:Vt.emailLabel}),t.jsx(M,{disabled:!e,onClick:()=>{a("user_profile_change_email_clicked"),j.openModal()},children:Vt.changeEmailLabel})]}),t.jsx(ce,{...u("email"),disabled:!0})]})}),h.length>0&&t.jsxs("div",{children:[t.jsx(J,{level:3,className:Ta.providersTitle,children:Vt.socialAccountsHeader}),t.jsx($e,{children:t.jsx("div",{className:Ta.providers,children:h.map(S=>t.jsxs("div",{className:Ta.providerCard,children:[P$(S.provider)&&t.jsx(q,{name:S.provider,size:20}),t.jsxs("div",{className:Ta.providerText,children:[S.provider==="github"?"@":"",S.username]}),t.jsx(ta,{iconName:"close",iconSize:16,disabled:S.provider==="vercelmp",onClick:()=>{a("user_profile_detach_social_link_clicked"),v(S)}})]},S.provider))})})]})]})]})},d1e=()=>{const{isKeycloakUser:e,...s}=_T();return e?t.jsx(l1e,{...s}):t.jsx(t1e,{})},u1e=()=>{const e=m.useCallback(async()=>W.getUserDeletionChecklist(),[]),{data:s,isLoading:n}=II(e),r=m.useMemo(()=>s==null?void 0:s.data.conditions.map(a=>({name:a.name,satisfied:a.expected===a.actual,expected:a.expected,actual:a.actual})),[s]);return{isLoading:n,conditions:r}},Dd={title:"Delete account",confirmationButtonText:"Delete account",disclaimer:t.jsxs(t.Fragment,{children:[t.jsx(P,{bold:!0,children:"This action will immediately deactivate your account."}),t.jsx(P,{children:"After 30 days, this account will be permanently deleted."})]}),emailLabel:t.jsxs(P,{children:["Enter ",t.jsx("strong",{children:"your account email"})," to confirm deletion"]}),validationText:"This field doesn't contain the required value"},h1e=({onSuccess:e,onRequestClose:s})=>{var o;const{data:n}=bt(),r=Ae(),a=async i=>{try{await W.deleteUser(),e==null||e(i)}catch(c){Y(c)}};return t.jsxs(gs,{providerProps:r,onSubmit:a,modalProps:{title:Dd.title,isOpen:!0,onRequestClose:s,width:650},children:[t.jsxs(qe,{gaps:!0,children:[t.jsx(X,{appearance:"warning",children:Dd.disclaimer}),t.jsx(B,{label:Dd.emailLabel,error:(o=r.formState.errors.email)==null?void 0:o.message,children:t.jsx(ce,{...r.register("email",{validate:i=>i===(n==null?void 0:n.email)||Dd.validationText})})})]}),t.jsxs(Ee,{children:[t.jsx(ln,{}),t.jsx(Ie,{appearance:"danger",children:Dd.confirmationButtonText})]})]})},p1e={project_count:(e,s)=>t.jsxs(t.Fragment,{children:["Delete all your personal"," ",e.satisfied?"projects":t.jsx(M,{href:G(C.ProjectsList),onClick:s,children:"projects"})]}),subscription_type:(e,s)=>t.jsxs(t.Fragment,{children:["Downgrade your"," ",e.satisfied?"account":t.jsx(M,{href:G(C.UserBilling),onClick:s,children:"account"})]}),org_admin_membership_count:()=>t.jsx(t.Fragment,{children:"Leave all organizations"})},Ud={title:"Delete account",unsatisfiedInfo:"Before you can delete your account, you need to:",satisfiedInfo:"This account is ready to be deleted. You've already completed the following actions.",deleteButtonText:"Delete account",conditionText:(e,s)=>p1e[e.name](e,s)},m1e="_conditions_1o49l_1",g1e="_condition_1o49l_1",l1={conditions:m1e,condition:g1e},f1e={project_count:"user_profile_delete_project_count_link_clicked",org_admin_membership_count:"user_profile_delete_org_admin_membership_count_link_clicked",subscription_type:"user_profile_delete_subscription_type_link_clicked"},_1e=()=>{const e=it(st.DeleteUser),s=Ae(),n=()=>{e.openModal()},{trackUiInteraction:r}=k(),{isLoading:a,conditions:o}=u1e();if(a||!o)return null;const i=o.every(c=>c.satisfied);return t.jsxs(t.Fragment,{children:[e.isModalOpen&&t.jsx(h1e,{onSuccess:()=>{r("user_profile_delete_modal_confirmed"),G1().then(()=>px())},onRequestClose:()=>{r("user_profile_delete_modal_dismissed"),e.closeModal()}}),t.jsx(De,{id:"delete",children:t.jsxs($e,{children:[t.jsx(Te,{children:Ud.title}),t.jsxs(Xt,{gaps:!0,providerProps:s,onSubmit:n,children:[t.jsx(P,{appearance:"secondary",children:i?Ud.satisfiedInfo:Ud.unsatisfiedInfo}),t.jsx("div",{className:l1.conditions,children:o.map(c=>t.jsxs("div",{className:l1.condition,children:[t.jsx(q,{name:c.satisfied?"success":"done",size:20}),t.jsx(P,{children:Ud.conditionText(c,()=>r(f1e[c.name]))})]},c.name))}),t.jsx(Ns,{children:t.jsx(Ie,{appearance:"danger",disabled:!i,onClick:()=>{r("user_profile_delete_submitted")},children:Ud.deleteButtonText})})]})]})})]})},b1e="_channel_40sxr_1",x1e="_joined_40sxr_5",d1={channel:b1e,joined:x1e},Vo={title:"Early access",subtitle:e=>`Join the early access program to preview upcoming features for ${e}'s projects. You can opt out anytime.`,benefits:["Test new features before anyone else","Shape the product with direct feedback"],alreadyIn:e=>t.jsxs("div",{className:d1.joined,children:[t.jsxs(P,{children:["Thank you for being an early access member! ",t.jsx("b",{children:e}),"'s projects have exclusive access to upcoming features."]}),t.jsxs(P,{children:["Get support and share feedback in our"," ",t.jsx(M,{href:xu,openInNewTab:!0,children:"Discord community"}),"."]}),t.jsx(P,{children:"Please contact support if you wish to opt out of early access."})]}),joinDiscord:t.jsxs(t.Fragment,{children:["Share feedback directly with our team. Join our"," ",t.jsx(M,{href:xu,openInNewTab:!0,children:"Discord community"})," ","for discussions in the"," ",t.jsx("b",{className:d1.channel,children:"#neon-early-access"})," channel."]}),successJoin:"Successfully joined the early access program!",submitJoin:"Join early access"},v1e="_formBody_6f5xe_1",j1e="_joinMessage_6f5xe_7",u1={formBody:v1e,joinMessage:j1e},y1e=()=>{const{data:e}=bt(),s=bx("beta_program"),{trackUiInteraction:n}=k(),r=Ae(),a=m.useCallback(async()=>{try{n("user_profile_early_access_joined"),await W.joinUserEarlyAccess(),pe(Vo.successJoin),setTimeout(()=>{window.location.reload()},3e3)}catch(o){Y(o)}},[n]);return e===void 0?null:t.jsx(De,{id:"early-access",children:t.jsxs($e,{children:[t.jsx(Te,{children:Vo.title}),t.jsx(Xt,{providerProps:r,onSubmit:a,formBodyClassName:u1.formBody,children:s?t.jsx("div",{children:Vo.alreadyIn(e.displayName)}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsx(J,{level:5,children:Vo.subtitle(e.displayName)}),t.jsx("ul",{children:Vo.benefits.map(o=>t.jsx("li",{children:o},o))})]}),t.jsx("div",{children:t.jsx(P,{className:u1.joinMessage,children:Vo.joinDiscord})}),t.jsx(Ns,{children:t.jsx(Ie,{children:Vo.submitJoin})})]})})]})})},w1e="_formBody_ku1q6_1",S1e={formBody:w1e},C1e=()=>{var p,h;const{userHasPassword:e,isInitialized:s,invalidate:n,isError:r}=_T(),{data:a}=bt(),o=Ae({defaultValues:{id:a==null?void 0:a.id,password:"",new_password:"",new_password_confirmation:""}}),{watch:i,formState:c,reset:l}=o,d=i("new_password"),u=m.useCallback(async({id:g,password:f,new_password:_})=>{var b;try{await W.updateUser({id:g,password:f,new_password:_}),ze(t.jsx(tt,{children:"Password updated"})),n(),l()}catch(x){yl(x)&&((b=x.response)==null?void 0:b.status)===404?ze(t.jsx(ki,{children:"Current password is not correct"})):Y(x)}},[l,n]);return r?t.jsx(is,{}):s?t.jsx(De,{id:"password",children:t.jsxs($e,{children:[t.jsx(Te,{children:e?"Change password":"Set password"}),t.jsxs(Xt,{providerProps:o,className:S1e.formBody,onSubmit:u,gaps:!0,children:[e&&t.jsx(B,{id:"password",label:"Current password",children:t.jsx(eu,{name:"password",autoComplete:"current-password"})}),t.jsx(B,{error:(p=c.errors.new_password)==null?void 0:p.message,label:e?"New password":"Password",id:"new_password",children:t.jsx(eu,{name:"new_password",applyConstraints:!0,autoComplete:"new-password",registerProps:{deps:"new_password_confirmation"}})}),t.jsx(B,{error:(h=c.errors.new_password_confirmation)==null?void 0:h.message,label:`Confirm ${e?"new":""} password`,id:"new_password_confirmation",children:t.jsx(eu,{name:"new_password_confirmation",autoComplete:"new-password",registerProps:{validate:g=>g===d||"Password confirmation should match"}})}),t.jsx(Ns,{children:t.jsx(A,{type:"submit",disabled:!s||c.isSubmitting||!c.isDirty||Object.keys(c.errors).length>0,"data-qa":"save_password",children:e?"Update password":"Set password"})})]})]})}):t.jsx(Se,{})},z_={title:"Referral program",referralCode:e=>t.jsxs(t.Fragment,{children:["Your referral link:"," ",t.jsxs(M,{href:`${sm}?refcode=${e}`,openInNewTab:!0,children:[sm,"?refcode=",e]})]}),errorText:e=>t.jsxs(t.Fragment,{children:["Something went wrong. ",e.message]})},I1e=()=>{const[e,s]=m.useState({type:"idle"});return m.useEffect(()=>{(async()=>{s({type:"loading"});try{const{data:n}=await W.getCurrentUserRefCode();s({type:"loaded",referralCode:n.ref_code})}catch(n){s({type:"error",error:n instanceof Error?n:new Error(String(n))})}})()},[]),t.jsx(De,{id:"referral",children:t.jsxs($e,{children:[t.jsx(Te,{children:z_.title}),(()=>{switch(e.type){case"idle":case"loading":return t.jsx("div",{children:t.jsx(on,{})});case"loaded":return t.jsx("p",{children:z_.referralCode(e.referralCode)});case"error":return t.jsx("p",{children:z_.errorText(e.error)})}})()]})})},q_={title:"Create an organization to keep building with Neon",subtitle:"You need an organization to create and manage projects.",createOrgLabel:"Create organization"},k1e="_alert_z4i39_1",T1e={alert:k1e},P1e=()=>{const e=it(st.CreateOrg),{data:s}=Un();return s===void 0||s.length>0?null:t.jsxs(t.Fragment,{children:[e.isModalOpen&&t.jsx(Xx,{onRequestClose:()=>{e.closeModal()}}),t.jsx(X,{appearance:"info",className:T1e.alert,title:q_.title,action:t.jsx(M,{onClick:()=>{e.openModal()},children:q_.createOrgLabel}),children:q_.subtitle})]})},N1e=()=>{const e=le("referral_codes"),{isKeycloakUser:s}=m.useContext(eg),{data:n}=bt(),r=ca(n);return t.jsxs(t.Fragment,{children:[r&&t.jsx(P1e,{}),t.jsx(d1e,{}),s&&t.jsx(C1e,{}),t.jsx(hA,{}),!r&&t.jsx(y1e,{}),e&&t.jsx(I1e,{}),t.jsx(_1e,{})]})},h1={createProject:"Create project",continue:"Continue"},A1e="_root_withGlobe_fi5bt_1",E1e="_root_withoutGlobe_fi5bt_6",O1e="_contentColumn_fi5bt_12",L1e="_asideColumn_fi5bt_17",Mp={root_withGlobe:A1e,root_withoutGlobe:E1e,contentColumn:O1e,asideColumn:L1e},$1e="_layout_8mfm6_3",R1e="_page_8mfm6_17",B1e="_withGlobe_8mfm6_25",M1e="_footer_8mfm6_26",D1e="_content_8mfm6_34",U1e="_footerContent_8mfm6_51",Tc={layout:$1e,page:R1e,withGlobe:B1e,footer:M1e,content:D1e,footerContent:U1e},F1e="_root_1uhev_1",z1e="_step_1uhev_6",q1e="_step_active_1uhev_14",H_={root:F1e,step:z1e,step_active:q1e},H1e=({currentStepIndex:e,totalSteps:s})=>t.jsx("div",{className:H_.root,children:Fa(s).map(n=>t.jsx("span",{className:V(H_.step,{[H_.step_active]:n<=e})},n))}),V1e=({form:e,stepper:s,isShowGlobe:n,actions:r,contentRef:a,contentClassName:o,maxFooterWidth:i,"data-qa":c,onSubmit:l,children:d})=>t.jsx(es,{...e,children:t.jsxs("form",{className:V(Tc.layout,{[Tc.withGlobe]:n}),autoComplete:"off","data-qa":c,style:i?{"--js-max-footer-width":`${i}px`}:void 0,onSubmit:l,children:[t.jsx("div",{className:Tc.page,children:t.jsx("div",{ref:a,className:V(o,Tc.content),children:d})}),r&&t.jsx("div",{className:Tc.footer,children:t.jsxs("div",{className:Tc.footerContent,children:[t.jsx("div",{children:r}),n&&s.totalSteps>=2&&t.jsx(H1e,{currentStepIndex:s.currentStepIndex,totalSteps:s.totalSteps})]})})]})}),W1e="_header_1lbth_1",G1e="_separator_1lbth_9",p1={header:W1e,separator:G1e},TE=({title:e,headingLevel:s,hideLogo:n=!1})=>{const r=m.useRef(null);return m.useEffect(()=>{const a=r.current;a&&a.getBoundingClientRect().y<15&&a.scrollIntoView()},[]),t.jsxs("div",{ref:r,className:p1.header,children:[!n&&t.jsxs(t.Fragment,{children:[t.jsx(q,{name:"neon",size:26}),t.jsx("span",{className:p1.separator,children:"/"})]}),t.jsx(J,{level:s,size:"h2",children:e})]})},K1e="_formContainer_dl2mm_1",Q1e="_formContent_dl2mm_6",m1={formContainer:K1e,formContent:Q1e},Y1e=({title:e,headingLevel:s})=>t.jsxs("div",{className:m1.formContainer,children:[t.jsx(TE,{title:e,headingLevel:s}),t.jsx("div",{className:m1.formContent,children:t.jsx(xI,{})})]});function g1(e){return e.map(s=>({value:s.replace(/\s+/,"_").toLowerCase(),label:s}))}const St={title:"Tell us about your database",workload:"I want a database for",workloadOptions:[{label:"Production",value:"production"},{label:"Staging & testing",value:"staging"},{label:"Local development",value:"local_dev"},{label:"Other",value:"other"}],estimatedDatabaseSize:"Expected storage needs",estimatedDatabaseSizeOptions:g1(["Not sure","1 GB","5 GB","10 GB","50 GB","100 GB","1 TB+"]),expectedDailyUsage:"Anticipated activity level",expectedDailyUsageOptions:g1(["Not sure","Light","Moderate","Heavy"]),dataImport:"Planning to import existing data?",dataImportOptions:{yes:"Yes",no:"No"},dataImportHelp:t.jsxs(t.Fragment,{children:["Follow our"," ",t.jsx(M,{href:"https://neon.com/docs/import/migrate-intro",openInNewTab:!0,icon:"external_link",children:"migration guides"})," "]}),fieldError:"Field validation error"},J1e="_formContainer_iibhy_1",Z1e="_formContent_iibhy_6",X1e="_fieldLabel_iibhy_13",eCe="_workloadCheckboxList_iibhy_18",tCe="_checkboxLabel_iibhy_25",sCe="_sliderField_iibhy_30",nCe="_radioGroupContainer_iibhy_39",rCe="_alertWrapper_iibhy_45",Zs={formContainer:J1e,formContent:Z1e,fieldLabel:X1e,workloadCheckboxList:eCe,checkboxLabel:tCe,sliderField:sCe,radioGroupContainer:nCe,alertWrapper:rCe};function aCe(){return{workload:{production:!1,staging:!1,local_dev:!1,other:!1},estimatedDatabaseSize:St.estimatedDatabaseSizeOptions[1].value,expectedDailyUsage:St.expectedDailyUsageOptions[1].value,dataImport:!1}}const oCe=({headingLevel:e})=>{k({mountEvent:"onboarding_survey_step_shown"});const{control:s,formState:{isSubmitting:n}}=kt();return t.jsxs("div",{className:Zs.formContainer,"data-qa":"create_project_survey_step",children:[t.jsx(TE,{title:St.title,headingLevel:e}),t.jsxs("div",{className:Zs.formContent,children:[t.jsx(ye,{name:"survey.workload",control:s,render:({field:r,fieldState:a})=>t.jsx(B,{label:St.workload,labelClassName:Zs.fieldLabel,error:a.error&&St.fieldError,children:t.jsx("div",{className:Zs.workloadCheckboxList,children:St.workloadOptions.map(({value:o,label:i})=>t.jsx(Dx,{checked:r.value[o],disabled:n,onChange:c=>{r.onChange({...r.value,[o]:c})},children:t.jsx("span",{className:Zs.checkboxLabel,children:i})},o))})})}),t.jsx(ye,{name:"survey.estimatedDatabaseSize",control:s,rules:{required:!0},render:({field:r,fieldState:a})=>{const o=St.estimatedDatabaseSizeOptions.findIndex(({value:i})=>i===r.value);return t.jsx(B,{label:St.estimatedDatabaseSize,error:a.error&&St.fieldError,className:Zs.sliderField,labelClassName:Zs.fieldLabel,children:t.jsx(mb,{value:o,disabled:n,min:0,max:St.estimatedDatabaseSizeOptions.length-1,size:"l",appearance:"neon",formatMark:i=>St.estimatedDatabaseSizeOptions[i].label,onChange:i=>{r.onChange(St.estimatedDatabaseSizeOptions[i].value)}})})}}),t.jsx(ye,{name:"survey.expectedDailyUsage",control:s,rules:{required:!0},render:({field:r,fieldState:a})=>{const o=St.expectedDailyUsageOptions.findIndex(({value:i})=>i===r.value);return t.jsx(B,{label:St.expectedDailyUsage,error:a.error&&St.fieldError,className:Zs.sliderField,labelClassName:Zs.fieldLabel,children:t.jsx(mb,{value:o,disabled:n,min:0,max:St.expectedDailyUsageOptions.length-1,size:"l",appearance:"neon",formatMark:i=>St.expectedDailyUsageOptions[i].label,onChange:i=>{r.onChange(St.expectedDailyUsageOptions[i].value)}})})}}),t.jsx(ye,{name:"survey.dataImport",control:s,render:({field:r,fieldState:a})=>t.jsxs(B,{label:St.dataImport,error:a.error&&St.fieldError,labelClassName:Zs.fieldLabel,children:[t.jsxs("div",{className:Zs.radioGroupContainer,children:[t.jsx(sa,{name:r.name,value:"yes",disabled:n,checked:r.value,onChange:()=>{r.onChange(!0)},children:St.dataImportOptions.yes}),t.jsx(sa,{name:r.name,value:"no",checked:!r.value,disabled:n,onChange:()=>{r.onChange(!1)},children:St.dataImportOptions.no})]}),t.jsx(qm,{collapsed:!r.value,children:t.jsx("div",{className:Zs.alertWrapper,children:t.jsx(X,{icon:"info_italic",children:St.dataImportHelp})})})]})})]})]})},PE=["form","details"],Mr=PE[0];function iCe(e){return PE.includes(e)}const V_="step";function cCe(e){return Object.entries(e).reduce((s,[n,r])=>r?[...s,n]:s,[])}function lCe({onStartAnalyticEvent:e,onDoneAnalyticEvent:s}){const n=le("growth_onboarding_survey"),r=nt(),a=gl(),{trackUiInteraction:o}=k(),i=m.useRef(Date.now()),c=m.useMemo(()=>{const b=["form"];return n&&b.push("details"),b},[n]);k(e?{mountEvent:{name:e,params:{steps:JSON.stringify(c)}}}:void 0);const[l,d]=m.useState(Mr),u=m.useMemo(()=>({currentStepIndex:c.includes(l)?c.indexOf(l):0,totalSteps:c.length}),[c,l]),p=m.useMemo(()=>new URLSearchParams(a.search).get(V_)??Mr,[a.search]);function h(b){const x=new URLSearchParams(a.search);b===Mr?x.delete(V_):x.set(V_,b),r.push(`?${x.toString()}`)}m.useEffect(()=>{l===Mr&&p&&p!==l&&h(Mr)},[]),PB(()=>{d(iCe(p)?p:Mr)},[p]);function g(b){if(o("onboarding_project_form_submitted",{project_id:b.project.id,duration:Date.now()-i.current}),n&&b.survey){try{ks.set(gt.OnboardingSurveyAnswers,b.survey)}catch{}o("onboarding_survey_answers",{workflows:JSON.stringify(cCe(b.survey.workload)),database_size:b.survey.estimatedDatabaseSize,daily_usage:b.survey.expectedDailyUsage,data_import:b.survey.dataImport})}s&&o(s),r.push(G(C.ProjectsItem,{projectId:b.project.id}))}function f(){l!==Mr&&h(Mr)}function _(b,x){const v=c.indexOf(l);if(v===-1){h(Mr),xi(new Error("Invalid step"));return}const j=c[v+1];if(j){h(j),b.preventDefault();return}x==null||x(b)}return{currentStepId:l,stepper:u,onContinueClick:_,onSuccess:g,onFail:f}}const f1=434,dCe=({title:e,headingLevel:s=1,shouldShowGlobe:n,onStartAnalyticEvent:r,onDoneAnalyticEvent:a})=>{const o=le("growth_onboarding_survey"),{trackUiInteraction:i}=k(),{isSuspendedAccount:c}=fe(),{currentStepId:l,stepper:d,onContinueClick:u,onSuccess:p,onFail:h}=lCe({onStartAnalyticEvent:r,onDoneAnalyticEvent:a}),g=le("collect_slow_queries"),{form:f,onSubmit:_}=BB({createdBy:"GLOBE_ONBOARDING",logMinDurationStatement:g?500:void 0,onSuccess:p,onFail:h}),b=m.useRef(null),x=m.useRef(null),v=m.useRef(void 0),j=bP({rootRef:b,shouldShowGlobe:n});return m.useEffect(()=>{o&&f.setValue("survey",aCe())},[o,f]),t.jsxs(V1e,{form:f,stepper:d,isShowGlobe:j,contentRef:b,contentClassName:V({[Mp.root_withGlobe]:j,[Mp.root_withoutGlobe]:!j}),maxFooterWidth:j?void 0:f1,"data-qa":"create_project_form",onSubmit:y=>{x.current&&v.current===void 0&&(v.current=x.current.clientHeight),u(y,f.handleSubmit(_))},actions:t.jsx(Ie,{size:"l",disabled:c,onClick:()=>{i("onboarding_project_form_create_project_clicked")},children:d.currentStepIndex<d.totalSteps-1?h1.continue:h1.createProject}),children:[t.jsx("div",{className:Mp.contentColumn,style:{maxWidth:f1},children:t.jsx("div",{ref:x,children:(()=>{switch(l){case"form":return t.jsx(Y1e,{title:e,headingLevel:s});case"details":return t.jsx(oCe,{headingLevel:s})}})()})}),j&&t.jsx("div",{className:Mp.asideColumn,children:t.jsx(OP,{})})]})},uCe=1024,NE=()=>t.jsx(dCe,{title:"Get started with Neon",onStartAnalyticEvent:"onboarding_flow_started",onDoneAnalyticEvent:"onboarding_flow_done",shouldShowGlobe:()=>window.innerWidth>=uCe}),hCe=()=>{const e=CN();return{type:"toc",items:Object.keys(pi).filter(s=>e[s].length!==0).map(s=>({id:s,label:pi[s]}))}},_1={type:"toc",items:[{id:"profile",label:"Profile"},{id:"password",label:"Password"},{id:"api-keys",label:"API keys"},{id:"early-access",label:"Early access"},{id:"referral",label:"Referral code"},{id:"delete",label:"Delete account"}]},pCe={type:"toc",items:ot([{id:"general",label:"General"},{id:"compute",label:"Compute"},{id:"storage",label:"Instant restore"},{id:"update-schedule",label:"Updates"},{id:"sharing",label:"Collaborators"},{id:"network-security",label:"Network Security"},{id:"authentication-providers",label:"Authentication Providers"},{id:"out-replication",label:"Logical Replication"},{id:"transfer",label:"Transfer"},{id:"delete",label:"Delete"}])},mCe={type:"toc",items:[{id:"github",label:"GitHub"},{id:"vercel",label:"Vercel"}]},gCe=({isReferralCodesEnabled:e,isKeycloakUser:s,userIsOrgBased:n})=>({..._1,items:_1.items.filter(r=>{switch(r.id){case"referral":return e;case"password":return s;case"early-access":return!n;default:return!0}})}),fCe=({isVercelOrg:e,isFreeSubscription:s,orgHasCollaborators:n})=>({type:"toc",items:ot([{id:"members",label:"Members"},!e&&{id:"pending",label:"Pending invites"},!s&&n&&{id:"collaborators",label:"Collaborators"}])}),_Ce=({isVercelOrg:e})=>({type:"toc",items:ot([{id:"general",label:"General information"},{id:"api-keys",label:"API keys"},{id:"early-access",label:"Early access"},{id:"private-networking",label:"Private Networking"},!e&&{id:"transfer",label:"Transfer projects"},{id:"delete",label:"Delete organization"}])}),AE=({billingSections:e})=>({type:"toc",items:e.map(({id:s,name:n})=>({id:s,label:n}))}),bCe=({isVercelOrg:e})=>({type:"toc",items:ot([{id:"github",label:"GitHub"},!e&&{id:"vercel",label:"Vercel"}])}),xCe="_container_4ta1h_1",vCe="_header_4ta1h_7",jCe="_title_4ta1h_11",yCe="_orgList_4ta1h_16",wCe="_orgItem_4ta1h_22",SCe="_orgName_4ta1h_31",CCe="_actions_4ta1h_35",Wo={container:xCe,header:vCe,title:jCe,orgList:yCe,orgItem:wCe,orgName:SCe,actions:CCe},EE=()=>{const e=nt(),{trackUiInteraction:s}=k(),[n,r]=m.useState(null),[a,o]=m.useState(!1),i=Yd("p"),c=Yd("tr"),l=Yd("ru"),{data:d,isLoading:u}=Un(),p=m.useCallback(async h=>{var g,f;if(!i||!c){r("Missing project ID or transfer request ID in URL parameters");return}o(!0),r(null);try{s("project_claim_attempted",{project_id:i,org_id:h.id}),await W.acceptProjectTransferRequest(i,c,{org_id:h.id}),s("project_claim_succeeded",{project_id:i,org_id:h.id}),pe(`Project has been successfully claimed to ${h.name}.`),l?window.location.href=decodeURIComponent(l):e.replace(G(C.ProjectsItem,{projectId:i}))}catch(_){const b=_ instanceof N$&&((f=(g=_.response)==null?void 0:g.data)==null?void 0:f.message)||_ instanceof Error&&_.message||String(_);s("project_claim_failed",{project_id:i,org_id:h.id,error:b}),r(`Failed to claim the project: ${b}. Please double-check the URL.`)}finally{o(!1)}},[i,c,l,e,s]);return!i||!c?t.jsx(is,{title:"Invalid claim URL",subtitle:"Missing project ID or transfer request ID in URL parameters",actions:t.jsx(A,{as:"a",href:Va,size:"l",children:"Back to Console"})}):n?t.jsx(is,{title:"Failed to claim project",subtitle:n,actions:t.jsx(A,{as:"a",href:Va,size:"l",children:"Back to Console"})}):u?t.jsx(Se,{}):t.jsxs("div",{className:Wo.container,children:[t.jsxs("div",{className:Wo.header,children:[t.jsx("h1",{className:Wo.title,children:"Claim Project"}),t.jsx(P,{appearance:"secondary",children:"Choose which organization you'd like to claim this project to."})]}),d&&d.length>0?t.jsx("div",{className:Wo.orgList,children:d.map(h=>t.jsxs("div",{className:Wo.orgItem,children:[t.jsx("div",{children:t.jsx(P,{className:Wo.orgName,children:h.name})}),h.managed_by==="vercel"?t.jsx(ne,{content:t.jsxs("span",{children:["Sorry, we don't support claiming projects to Vercel-managed organizations yet.",t.jsx("br",{})," But we are working on it!",t.jsx("br",{}),"Please follow our"," ",t.jsx("a",{href:"https://neon.com/docs/changelog",target:"_blank",rel:"noreferrer",children:"changelog"})," ","for updates."]}),children:t.jsxs("div",{children:[" ",t.jsx(A,{disabled:!0,children:"Claim"})]})}):t.jsx(A,{onClick:()=>p(h),disabled:a,children:"Claim"})]},h.id))}):t.jsx(P,{appearance:"secondary",children:"You don't have access to any organizations to claim this project to."}),t.jsx("div",{className:Wo.actions,children:t.jsx(A,{as:"a",href:Va,appearance:"secondary",size:"l",children:"Cancel"})})]})};EE.displayName="Claim";const ICe=()=>{const{data:e}=qs(),{data:s}=gx();return t.jsx(t.Fragment,{children:(!!(e!=null&&e.length)||!!(s!=null&&s.length))&&t.jsx(See,{})})},OE=ua(_Q,{footer:t.jsx(ICe,{})}),kCe=()=>mN()?t.jsx(NE,{}):t.jsx(we,{to:C.ProjectsList}),TCe=()=>{const{orgId:e}=xl();return mN()?t.jsx(NE,{}):t.jsx(we,{to:G(C.OrgProjectsList,{orgId:e})})},PCe=xs(I_e),NCe=xs(IE,{contentWidth:"app"}),ACe=xs(jie,{contentWidth:"app"}),ECe=xs(kje,{title:"Integrations",actions:t.jsx(Fee,{})},hCe),OCe=xs(jje,{title:"Identity"}),LCe=xs(Wge),$Ce=xs(kg(Foe,nh.Metrics)),RCe=xs(kg(Qoe,nh.Operations)),BCe=xs(kg(Jae,nh.ActiveQueries)),MCe=xs(kg(nie,nh.QueryHistory)),DCe=xs(e0e,{contentWidth:"s",title:"Project Settings"},()=>pCe),UCe=xs(SA),FCe=xs(epe),zCe=xs(oxe),qCe=ua(N1e,{title:"Account settings",contentWidth:"s",showSidebarFn:e=>!e},gCe),HCe=ua(aA,{contentWidth:"l",title:"Billing",actions:t.jsx(pN,{})},AE),VCe=kCe,WCe=TCe,GCe=OE,KCe=OE,QCe=ua(r0e,{showSidebarFn:!1}),YCe=ua(Uie,{title:"People",contentWidth:"s"},fCe),JCe=ua(aA,{contentWidth:"l",title:"Billing",actions:t.jsx(pN,{})},AE),ZCe=ua(zce,{contentWidth:"s",title:"Organization settings"},_Ce),XCe=ua(GSe,{contentWidth:"l",title:"Integrations"},()=>mCe),eIe=ua(Sie,{contentWidth:"l",title:"Integrations"},bCe),tIe=()=>{const e=le("identity"),s=le("disable_drizzle_studio"),{data:n}=bt(),r=KC(n==null?void 0:n.id),{data:a,isFetching:o}=Un(),{data:i}=Du(),c=ca(n),l=m.useMemo(()=>{if(!(!c||o||a===void 0||i===void 0))return a.length>0?G(C.OrgProjectsList,{orgId:a[0].id}):i.length>0?C.ProjectsSharedList:C.UserSettings},[c,o,a,i]),d=m.useMemo(()=>{if(!(!c||o||a===void 0))return a.length>0?G(C.OrgWelcome,{orgId:a[0].id}):C.UserSettings},[c,o,a]);return t.jsxs(Pc,{children:[t.jsx(yt,{path:ue.ProjectCreate,exact:!0,render:({location:u})=>{const p=new URLSearchParams(u.search);return p.set(K_,st.CreateProject),t.jsx(we,{to:`${C.ProjectsList}?${p.toString()}`})}}),t.jsx(yt,{path:[C.ProjectsSharedList,C.ProjectsItem,C.ProjectsList,C.UserSettings,C.UserBilling,C.UserIntegrations],render:({match:u})=>{if(u.path===C.ProjectsItem){if(!("projectId"in u.params))throw new Error("Unreachable");return t.jsx(fx,{projectId:u.params.projectId,children:t.jsx(Rg,{header:t.jsx(nN,{}),children:t.jsxs(Pc,{children:[t.jsx(Je,{path:C.ProjectsItem,exact:!0,component:PCe}),t.jsx(Bt,{path:ue.ProjectsItemQuery,to:C.ProjectsItemBranchesSQLEditor}),!s&&t.jsx(Je,{path:C.ProjectsItemDrizzle,exact:!0,component:ACe}),t.jsx(yt,{path:C.ProjectsItemBranchesLastUsed,render:({match:p})=>t.jsx(fee,{projectId:p.params.projectId})}),t.jsx(Je,{path:C.ProjectsItemBranchesSQLEditor,exact:!0,component:NCe}),t.jsx(Je,{path:C.ProjectsItemBranchesRestore,exact:!0,component:LCe}),t.jsx(we,{from:ue.ProjectsItemBranchesBackup,exact:!0,to:C.ProjectsItemBranchesRestore}),t.jsx(we,{from:C.ProjectsItemBranchesItemMonitoring,to:C.ProjectsItemBranchesItemMonitoringMetrics,exact:!0}),t.jsx(Je,{path:C.ProjectsItemBranchesItemMonitoringOperations,exact:!0,component:RCe}),t.jsx(Je,{path:C.ProjectsItemBranchesItemMonitoringMetrics,exact:!0,component:$Ce}),t.jsx(Je,{path:C.ProjectsItemBranchesItemMonitoringActiveQueries,exact:!0,component:BCe}),t.jsx(Je,{path:C.ProjectsItemBranchesItemMonitoringQueryHistory,exact:!0,component:MCe}),t.jsx(Je,{path:C.ProjectsItemIntegrations,exact:!0,component:ECe}),t.jsx(yt,{path:C.ProjectsItemAuthorize,exact:!0,render:({match:p})=>t.jsx(we,{to:`${G(C.ProjectsItemSettings,{projectId:p.params.projectId})}#rls`})}),e&&t.jsx(Je,{path:C.ProjectsItemIdentity,exact:!0,component:OCe}),t.jsx(Bt,{path:ue.ProjectsItemRestore,to:C.ProjectsItemBranchesRestore}),t.jsx(Bt,{path:ue.ProjectsItemBackup,to:C.ProjectsItemBranchesRestore}),t.jsx(Bt,{path:ue.ProjectsItemMonitoringOperations,to:C.ProjectsItemBranchesItemMonitoringOperations}),t.jsx(Bt,{path:ue.ProjectsItemMonitoringMetrics,to:C.ProjectsItemBranchesItemMonitoringMetrics}),t.jsx(Bt,{path:ue.ProjectsItemMonitoringActiveQueries,to:C.ProjectsItemBranchesItemMonitoringActiveQueries}),t.jsx(Bt,{path:ue.ProjectsItemMonitoringQueryHistory,to:C.ProjectsItemBranchesItemMonitoringQueryHistory}),t.jsx(Je,{path:C.ProjectsItemSettings,exact:!0,component:DCe}),t.jsx(we,{from:ue.ProjectsItemSettingsGeneral,to:`${C.ProjectsItemSettings}#general`,exact:!0}),t.jsx(we,{from:ue.ProjectsItemSettingsCompute,to:`${C.ProjectsItemSettings}#compute`,exact:!0}),t.jsx(we,{from:ue.ProjectsItemSettingsStorage,to:`${C.ProjectsItemSettings}#storage`,exact:!0}),t.jsx(yt,{path:ue.ProjectsItemSettingsIPAllow,exact:!0,render:({match:p})=>t.jsx(we,{to:G(`${C.ProjectsItemSettings}#network-security`,{projectId:p.params.projectId})})}),t.jsx(we,{from:ue.ProjectsItemSettingsNetworkSecurity,to:`${C.ProjectsItemSettings}#network-security`,exact:!0}),t.jsx(yt,{path:ue.ProjectsItemSettingsBeta,exact:!0,render:({match:p})=>t.jsx(we,{to:G(`${C.ProjectsItemSettings}#out-replication`,{projectId:p.params.projectId})})}),t.jsx(we,{from:ue.ProjectsItemSettingsUpdateSchedule,to:`${C.ProjectsItemSettings}#update-schedule`,exact:!0}),t.jsx(we,{from:ue.ProjectsItemSettingsOutboundLogicalReplication,to:`${C.ProjectsItemSettings}#out-replication`,exact:!0}),t.jsx(we,{from:ue.ProjectsItemSettingsSharing,to:`${C.ProjectsItemSettings}#sharing`,exact:!0}),t.jsx(we,{from:ue.ProjectsItemSettingsDelete,to:`${C.ProjectsItemSettings}#delete`,exact:!0}),t.jsx(we,{from:ue.ProjectsItemSettingsTransfer,to:`${C.ProjectsItemSettings}#transfer`,exact:!0}),t.jsx(we,{from:ue.ProjectsItemSettingsRLS,to:`${C.ProjectsItemSettings}#rls`,exact:!0}),t.jsx(Bt,{path:ue.ProjectsItemSettingsOperations,to:C.ProjectsItemBranchesItemMonitoringOperations}),t.jsx(Bt,{path:ue.ProjectsItemSettingsDatabases,to:C.ProjectsItemBranchesRolesAndDatabases}),t.jsx(Bt,{path:ue.ProjectsItemUsers,to:C.ProjectsItemBranchesRolesAndDatabases}),t.jsx(Bt,{path:ue.ProjectsItemSettingsUsers,to:C.ProjectsItemBranchesRolesAndDatabases}),t.jsx(Bt,{path:ue.ProjectsItemMonitoring,to:C.ProjectsItemBranchesItemMonitoringMetrics}),t.jsx(Bt,{path:ue.ProjectsItemOperations,to:C.ProjectsItemBranchesItemMonitoringOperations}),t.jsx(Bt,{path:ue.ProjectsItemDatabases,to:C.ProjectsItemBranchesRolesAndDatabases}),t.jsx(we,{path:ue.ProjectsItemBranchesItemDatabases,to:C.ProjectsItemBranchesRolesAndDatabases}),t.jsx(Bt,{path:ue.ProjectsItemRoles,to:C.ProjectsItemBranchesRolesAndDatabases}),t.jsx(we,{path:ue.ProjectsItemBranchesItemRoles,to:C.ProjectsItemBranchesRolesAndDatabases}),"Add commentMore actions",t.jsx(Bt,{path:ue.ProjectsItemBranchesRolesAndDatabases,to:C.ProjectsItemBranchesRolesAndDatabases}),t.jsx(Bt,{path:ue.ProjectsItemBranchesChildBranches,to:C.ProjectsItemBranchesChildBranches}),t.jsx(Bt,{path:ue.ProjectsItemBranchesDataAPI,to:C.ProjectsItemBranchesDataAPI}),t.jsx(Bt,{path:ue.ProjectsItemBranchesItemMonitoringActiveQueries,to:C.ProjectsItemBranchesItemMonitoringActiveQueries}),t.jsx(Bt,{path:ue.ProjectsItemBranchesItemMonitoringQueryHistory,to:C.ProjectsItemBranchesItemMonitoringQueryHistory}),t.jsxs(hN,{children:[t.jsx(Je,{path:C.ProjectsItemBranchesDataAPI,exact:!0,component:zCe}),t.jsx(Je,{path:C.ProjectsItemBranches,exact:!0,component:UCe}),t.jsx(yt,{path:C.ProjectsItemBranchesNew,exact:!0,render:({match:p})=>t.jsx(we,{to:`${G(C.ProjectsItemBranches,{projectId:p.params.projectId})}?modal=create_branch`})}),t.jsx(Je,{path:C.ProjectsItemBranchesItem,exact:!0,component:FCe})]}),t.jsx(Je,{component:Kp})]})})})}return t.jsx(Rg,{header:t.jsx(ym,{}),children:t.jsxs(Pc,{children:[l===void 0?t.jsx(Je,{path:C.ProjectsList,exact:!0,component:GCe}):t.jsx(we,{path:C.ProjectsList,exact:!0,to:l}),t.jsx(Je,{path:C.ProjectsSharedList,exact:!0,component:QCe}),t.jsx(Je,{path:C.UserSettings,exact:!0,component:qCe}),t.jsx(yt,{path:ue.UserSettingsAccount,exact:!0,render:()=>t.jsx(we,{to:`${C.UserSettings}#profile`})}),t.jsx(yt,{path:ue.UserSettingsPassword,exact:!0,render:()=>t.jsx(we,{to:`${C.UserSettings}#password`})}),t.jsx(yt,{path:ue.UserSettingsApiKeys,exact:!0,render:()=>t.jsx(we,{to:`${C.UserSettings}#api-keys`})}),t.jsx(yt,{path:ue.UserSettingsEarlyAccess,exact:!0,render:()=>t.jsx(we,{to:`${C.UserSettings}#early-access`})}),t.jsx(yt,{path:ue.UserSettingsReferral,exact:!0,render:()=>t.jsx(we,{to:`${C.UserSettings}#referral`})}),t.jsx(yt,{path:ue.UserSettingsDelete,exact:!0,render:()=>t.jsx(we,{to:`${C.UserSettings}#delete`})}),t.jsx(yt,{path:ue.UserSettingsTheme,exact:!0,render:()=>t.jsx(we,{to:C.UserSettings})}),l===void 0?t.jsx(Je,{path:C.UserBilling,exact:!0,component:HCe}):t.jsx(we,{path:C.UserBilling,to:l}),t.jsx(Je,{path:C.UserIntegrations,exact:!0,component:XCe})]})})}}),t.jsx(Je,{path:C.Claim,exact:!0,component:EE}),d===void 0?t.jsx(Je,{path:C.Welcome,exact:!0,component:VCe}):t.jsx(we,{path:C.Welcome,to:d}),t.jsx(yt,{path:C.OrgWelcome,exact:!0,render:({match:u})=>t.jsx(qj,{org_id:u.params.orgId,children:t.jsx(Je,{component:WCe})})}),t.jsx(we,{from:C.Home,to:C.ProjectsList,exact:!0}),t.jsx(we,{from:ue.UserIntegrationsGithub,to:`${C.UserIntegrations}#github`}),t.jsx(we,{from:ue.UserIntegrationsVercel,to:`${C.UserIntegrations}#vercel`}),l&&t.jsx(we,{path:C.UserIntegrations,to:l}),a!==void 0&&t.jsx(_ee,{from:C.Root,to:(r==null?void 0:r.type)==="org"&&a.some(({id:u})=>u===r.id)?G(C.OrgProjectsList,{orgId:r.id}):C.ProjectsList,exact:!0}),t.jsx(yt,{path:C.OrgRoot,children:({match:u})=>t.jsx(qj,{org_id:u==null?void 0:u.params.orgId,children:t.jsx(Rg,{header:t.jsx(ym,{}),children:t.jsxs(Pc,{children:[t.jsx(Je,{path:C.OrgProjectsList,exact:!0,component:KCe}),t.jsx(yt,{path:ue.OrgProjectsCreate,exact:!0,render:({location:p,match:h})=>{const g=new URLSearchParams(p.search);return g.set(K_,st.CreateProject),t.jsx(we,{to:`${G(C.OrgProjectsList,{orgId:h.params.orgId})}?${g.toString()}`})}}),t.jsx(Je,{path:C.OrgPeople,exact:!0,component:YCe}),t.jsx(yt,{path:ue.OrgMembers,exact:!0,render:()=>t.jsx(we,{to:`${G(C.OrgPeople,{orgId:u.params.orgId})}#members`})}),t.jsx(yt,{path:ue.OrgPendingInvites,exact:!0,render:()=>t.jsx(we,{to:`${G(C.OrgPeople,{orgId:u.params.orgId})}#pending`})}),t.jsx(yt,{path:ue.OrgCollaborators,exact:!0,render:()=>t.jsx(we,{to:`${G(C.OrgPeople,{orgId:u.params.orgId})}#collaborators`})}),t.jsx(yt,{path:ue.OrgGuests,exact:!0,render:()=>t.jsx(we,{to:`${G(C.OrgPeople,{orgId:u.params.orgId})}#collaborators`})}),t.jsx(Je,{path:C.OrgBilling,exact:!0,component:JCe}),t.jsx(Je,{path:C.OrgSettings,exact:!0,component:ZCe}),t.jsxs(Pc,{children:[t.jsx(we,{from:ue.OrgIntegrationsGithub,to:`${C.OrgIntegrations}#github`}),t.jsx(we,{from:ue.OrgIntegrationsVercel,to:`${C.OrgIntegrations}#vercel`}),t.jsx(Je,{path:C.OrgIntegrations,component:eIe}),t.jsx(Je,{component:Kp})]}),t.jsx(yt,{component:Kp})]})})})})]})},sIe=vx({name:"ui",initialState:{visible:!1,branchId:""},reducers:{}}),nIe=jx(sIe),rIe=e=>{const s=A$([L$,$$,GC,nIe,G_,R$,Yt,Zb],[Nx,Mu,NR,iI,qn,tm,oA,O$,cl,Ci],{renderConfig:e});return e!=null&&e.organizations&&E$(s.dispatch,tm,"getCurrentUserOrganizations",void 0,e.organizations),s};function aIe(e,s,n){return q$(e,{path:s,exact:n})!==null}const oIe=({children:e})=>{const s=nt(),n=gl();return t.jsx(z$,{basename:Va,navigate:s.push,pathname:n.pathname,hash:n.hash,isCurrent:aIe,children:e})},iIe=({platforms:e,consoleSettings:s,appVersion:n,psqlConnectHost:r,importAvailableRegions:a,keycloak:o,error:i})=>(t9(),t.jsx(Q9,{children:t.jsx(B$,{children:t.jsx(M$,{children:t.jsx(Y$,{platforms:e,importAvailableRegions:a,children:t.jsx(J$,{consoleSettings:s,appVersion:n,psqlConnectHost:r,error:i,children:t.jsx(J9,{config:o!==null?o:void 0,children:t.jsx(D$,{setupStore:rIe,children:t.jsx(jD,{children:t.jsxs(Y9,{children:[t.jsx(U$,{}),t.jsx(F$,{basename:Va,children:t.jsxs(oIe,{children:[t.jsx(tIe,{}),t.jsx(e7,{}),t.jsx(s9,{})]})}),t.jsx(iF,{})]})})})})})})})})}));[W,H$].forEach(e=>{e.instance.interceptors.response.use(s=>s,s=>{var n;return yl(s)&&((n=s.response)==null?void 0:n.status)===401&&setTimeout(px,1),Promise.reject(s)})});V$(iIe,{analyticsAppName:W$.Console,analyticsPageMapper:Jq});export{Vk as B,b3 as C,jpe as D,Qk as E,Qx as I,qx as M,Yk as P,mb as S,El as a,Wk as b,sl as c,u3 as d,_3 as e,Kk as f,J3 as g,$Ie as s,qv as u};
